import{$o as e,Ao as t,Ci as n,Fo as r,Hn as i,Ia as a,J as o,Ko as s,Li as c,Lr as l,Mi as u,Mo as d,No as f,Nr as p,Oa as m,Po as h,Ya as g,dr as _,en as v,hi as y,in as b,ir as x,jo as S,ki as C,la as w}from"./index-C4Pf1uQ-.js";import{t as T}from"./Transfer-D_RjQW0W.js";var E=e(s()),D=e(y()),O=function(e){f(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={activeKey:0},t}return i.prototype.onTabChange=function(e){return S(this,void 0,void 0,function(){var t,n;return h(this,function(r){switch(r.label){case 0:return t=this.props.dispatchEvent,[4,t(`tab-change`,{key:e})];case 1:return n=r.sent(),n?.prevented||this.setState({activeKey:e}),[2]}})})},i.prototype.handleTabSearch=function(e,t,n){return S(this,void 0,void 0,function(){var r,i,a,o,s,c,u,d,f,p,_;return h(this,function(h){switch(h.label){case 0:if(r=this.props,i=r.options,a=r.labelField,o=r.valueField,s=r.env,c=r.data,u=r.searchApi,d=r.translate,!u)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,s.fetcher(u,m(c,{term:e}),{cancelExecutor:n})];case 2:if(f=h.sent(),!f.ok)throw Error(d(f.msg||`networkError`));if(p=f.data.options||f.data.items||f.data,!Array.isArray(p))throw Error(d(`CRUD.invalidArray`));return[2,p.map(function(e){var t=null,n=e[o||`value`];return Array.isArray(i)&&n!=null&&(t=(0,D.default)(i,l(n,o))),t||e})];case 3:return _=h.sent(),s.isCancel(_)||!u.silent&&s.notify(`error`,_.message),[2,[]];case 4:return[3,6];case 5:return e?[2,C(t.children||i,function(t,n,r,i){return!!(Array.isArray(t.children)&&t.children.length||g([t].concat(i),e,{keys:[a||`label`,o||`value`],threshold:g.rankings.CONTAINS}).length)},0,!0)]:[2,i];case 6:return[2]}})})},i.prototype.handleChange=function(e,n){return S(this,void 0,void 0,function(){var r,i,a,o,s,d,f,m,g,_,v,y,b,x;return h(this,function(h){switch(h.label){case 0:return r=this.props,i=r.onChange,a=r.joinValues,o=r.delimiter,s=r.valueField,d=r.extractValue,f=r.options,m=r.dispatchEvent,g=r.setOptions,_=r.translate,v=e,y=f.concat(),b=`UN_MATCH_RESULT`,Array.isArray(e)?(v=e.map(function(e){var r=u(f,l(e[s||`value`],s||`value`));if(r){if(n){var i=c(y,r);y=w(y,r,1,t(t({},i),e))}}else{var o=u(y,function(e){return e.value===b});if(!o)y.push({label:_(`searchResult`),value:b,visible:!1,children:[e]});else{var p=c(y,o);p?.children&&(p.children.push(e),y=w(y,o,1,t(t({},p),e)))}}return a||d?e[s||`value`]:e}),a&&(v=v.join(o||`,`))):e&&(v=a||d?e[s||`value`]:e),(y.length>f.length||n)&&g(y,!0),[4,m(`change`,p(this.props,{value:v,options:f,items:f}))];case 1:return x=h.sent(),x?.prevented||i(v),[2]}})})},d([n,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,Promise)],i.prototype,`onTabChange`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[String,Object,Function]),r(`design:returntype`,Promise)],i.prototype,`handleTabSearch`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object,Boolean]),r(`design:returntype`,Promise)],i.prototype,`handleChange`,null),i}(T),k=function(e){f(s,e);function s(){return e!==null&&e.apply(this,arguments)||this}return s.prototype.optionItemRender=function(e,n){var r=this.props,i=r.menuTpl,a=r.render,o=r.data,s=r.classnames,c=arguments[2]||{};return i?a(`item/${n.index}`,i,{data:m(m(o,t(t({},n),c)),e)}):b.itemRender(e,t(t({},n),{classnames:s}))},s.prototype.doAction=function(e,t,n,r){n===void 0&&(n=!1);var i=this.props,o=i.resetValue,s=i.onChange,c=i.formStore,l=i.store,u=i.name,d=r?.activeKey;switch(e.actionType){case`clear`:s?.(``);break;case`reset`:s?.(a(c?.pristine??l?.pristine,u)??o??``);break;case`changeTabKey`:this.setState({activeKey:d});break}},s.prototype.render=function(){var e=this.props,t=e.className;e.style;var n=e.classnames,r=e.options,a=e.selectedOptions,o=e.sortable,s=e.loading,c=e.searchResultMode,l=e.selectMode,u=e.searchable,d=e.showArrow,f=e.deferLoad,p=e.leftDeferLoad,m=e.disabled,h=e.selectTitle,g=e.resultTitle,_=e.itemHeight,y=e.virtualThreshold,b=e.onlyChildren,S=e.loadingConfig,C=e.valueField,w=C===void 0?`value`:C,T=e.labelField,D=T===void 0?`label`:T,O=e.valueTpl,k=e.menuTpl,A=e.data,j=e.mobileUI,M=e.initiallyOpen,N=M===void 0?!0:M,P=e.testIdBuilder;return E.createElement(`div`,{className:n(`TabsTransferControl`,t)},E.createElement(v,{onlyChildren:b,activeKey:this.state.activeKey,value:a,disabled:m,options:r,onChange:this.handleChange,option2value:this.option2value,sortable:o,searchResultMode:c,onSearch:this.handleTabSearch,showArrow:d,onDeferLoad:f,onLeftDeferLoad:p,selectTitle:h,resultTitle:g,selectMode:l,searchable:u,optionItemRender:k?this.optionItemRender:void 0,resultItemRender:O?this.resultItemRender:void 0,onTabChange:this.onTabChange,itemHeight:x(_)>0?x(_):void 0,virtualThreshold:y,labelField:D,valueField:w,ctx:A,mobileUI:j,initiallyOpen:N,testIdBuilder:P}),E.createElement(i,{overlay:!0,key:`info`,show:s,loadingConfig:S}))},s.defaultProps={multiple:!0},d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object,Object]),r(`design:returntype`,void 0)],s.prototype,`optionItemRender`,null),d([o(),r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],s.prototype,`render`,null),s=d([_({type:`tabs-transfer`})],s),s}(O);export{O as BaseTabsTransferRenderer,k as TabsTransferRenderer};