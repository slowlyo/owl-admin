import{$n as e,$o as t,Ao as n,Ci as r,D as i,Fo as a,Ii as o,Ko as s,La as c,Mo as l,No as u,O as d,Po as f,Qn as p,Xn as m,Zn as h,ba as g,er as _,jo as v,vr as y,wr as b,xr as x,ya as S,zo as C}from"./index-zRImlZB6.js";var w=t(s()),T=function(t){u(s,t);function s(e){var n=t.call(this,e)||this;return n.containerRef=(0,w.createRef)(),n.resizeObserver=null,n.isSwiping=!1,n.startX=0,n.list=[],n.gap=5,n.evenReg=/^even-[1-9]\d*-[1-9]\d*$/,n.wrapperRef=w.createRef(),n.generateHeight=function(e,t){var r=Number(n.props.height)||n.state.defaultHeight;if(e===`sm-ss-sss-m`||e===`sss-ss-ms-m`||e===`sms-ss-sms-m`)return t===0?r:(r-n.gap)*.5;if(e===`sm-ss-sss-ss`||e===`ms-ss-sss-ss`||e===`sss-ss-sm-ss`||e===`mss-ss-ssm-ss`||e===`sss-ss-mm-ss`)return(r-n.gap)*.5;if(n.evenReg.test(e||``)){var i=Number(e?.split(`-`)[1]);if(t<i*Number(e?.split(`-`)[2]))return(r-n.gap*(i-1))/i}return 0},n.generateWidth=function(e,t){var r=Number(n.props.width)||n.state.defaultWidth;if(e===`sm-ss-sss-m`||e===`sss-ss-ms-m`)return t===0?(r-2*n.gap)/3:t===1?(r-2*n.gap)/3*2+n.gap:(r-2*n.gap)/3;if(e===`sms-ss-sms-m`){if([0,2,4].includes(t))return(r-2*n.gap)/4;if(t===1||t===3)return(r-2*n.gap)/2+n.gap}else if(e===`sm-ss-sss-ss`)return[0,2,3,4].includes(t)?(r-2*n.gap)/3:(r-2*n.gap)/3*2+n.gap;else if(e===`ms-ss-sss-ss`)return[1,2,3,4].includes(t)?(r-2*n.gap)/3:(r-2*n.gap)/3*2+n.gap;else if(e===`sss-ss-sm-ss`)return[0,1,2,4].includes(t)?(r-2*n.gap)/3:(r-2*n.gap)/3*2+n.gap;else if(e===`mss-ss-ssm-ss`)return[1,2,4,5].includes(t)?(r-2*n.gap)/4:(r-2*n.gap)/2+n.gap;else if(e===`sss-ss-mm-ss`)return[0,1,2].includes(t)?(r-n.gap*2)/3:(r-n.gap)/2;else if(n.evenReg.test(e||``)){var i=Number(e?.split(`-`)[1]),a=Number(e?.split(`-`)[2]);if(t<i*a)return(r-n.gap*(a-1))/a}return 0},n.generateTranslate=function(e,t){var r=Number(n.props.width)||n.state.defaultWidth,i=Number(n.props.height)||n.state.defaultHeight,a={position:`absolute`,boxSizing:`content-box`,height:n.generateHeight(e,t)+`px`,width:n.generateWidth(e,t)+`px`};return e===`sm-ss-sss-m`?t===1?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,0px)`:t===2?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,${(i-n.gap)*.5+n.gap}px)`:t===3&&(a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,${(i-n.gap)*.5+n.gap}px)`):e===`sss-ss-ms-m`?t===1?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,${(i-n.gap)*.5+n.gap}px)`:t===2?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,0px)`:t===3&&(a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,0px)`):e===`sms-ss-sms-m`?t===1?a.transform=`translate(${(r-2*n.gap)/4+n.gap}px,0px)`:t===2?a.transform=`translate(${(r-2*n.gap)/4*3+3*n.gap}px,0px)`:t===3?a.transform=`translate(${(r-2*n.gap)/4+n.gap}px,${(i-n.gap)/2+n.gap}px)`:t===4&&(a.transform=`translate(${(r-2*n.gap)/4*3+3*n.gap}px,${(i-n.gap)/2+n.gap}px)`):e===`sm-ss-sss-ss`?t===1?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,0px)`:t===2?a.transform=`translate(0px,${(i-n.gap)/2+n.gap}px)`:t===3?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,${(i-n.gap)/2+n.gap}px)`:t===4&&(a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,${(i-n.gap)/2+n.gap}px)`):e===`ms-ss-sss-ss`?t===1?a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,0px)`:t===2?a.transform=`translate(0px,${(i-n.gap)/2+n.gap}px)`:t===3?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,${(i-n.gap)/2+n.gap}px)`:t===4&&(a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,${(i-n.gap)/2+n.gap}px)`):e===`sss-ss-sm-ss`?t===1?a.transform=`translate(${(r-2*n.gap)/3+n.gap}px,0px)`:t===2?a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,0px)`:t===3?a.transform=`translate(0px,${(i-n.gap)/2+n.gap}px)`:t===4&&(a.transform=`translate(${(r-2*n.gap)/3*2+2*n.gap}px,${(i-n.gap)/2+n.gap}px`):e===`mss-ss-ssm-ss`?t===1||t===2?a.transform=`translate(${((r-2*n.gap)/4+n.gap)*(t+1)}px,0px)`:t===3?a.transform=`translate(0px,${(i-n.gap)/2+n.gap}px)`:(t===4||t===5)&&(a.transform=`translate(${((r-2*n.gap)/4+n.gap)*(t-2)}px,${(i-n.gap)/2+n.gap}px)`):e===`sss-ss-mm-ss`?t===1||t===2?a.transform=`translate(${((r-2*n.gap)/3+n.gap)*t}px,0px)`:(t===3||t===4)&&(a.transform=`translate(${((r-n.gap)/2+n.gap)*(t-3)}px,${(i-n.gap)/2+n.gap}px)`):n.evenReg.test(e||``)&&(a.transform=n.generateEvenTranslate(e,t)),a},n.state={defaultWidth:200,defaultHeight:112.5,currentIndex:0,nextAnimation:``},n}return s.prototype.getFrameId=function(e){var t=this.state.currentIndex,n=this.list.length;switch(e){case`prev`:return(t-1+n)%n;case`next`:return(t+1)%n;default:return t}},s.prototype.transitFramesTowards=function(e,t){return v(this,void 0,void 0,function(){var n;return f(this,function(r){switch(n=this.state.currentIndex,e){case`left`:n=this.getFrameId(`next`),t=`slideLeft`;break;case`right`:n=this.getFrameId(`prev`),t=`slideRight`;break;default:return[2]}return this.setState({currentIndex:n,nextAnimation:t}),[2]})})},s.prototype.handleSwipe=function(e){Math.abs(e)>50&&(e>0?this.transitFramesTowards(`right`,`slideRight`):this.transitFramesTowards(`left`,`slideLeft`))},s.prototype.handleTouchStart=function(e){this.props.displayMode===`full`&&(this.isSwiping=!0,this.startX=e.touches[0].clientX)},s.prototype.handleTouchEnd=function(e){if(this.isSwiping){var t=e.changedTouches[0].clientX-this.startX;this.handleSwipe(t),this.isSwiping=!1}},s.prototype.handleMouseDown=function(e){this.props.displayMode===`full`&&(e.preventDefault(),this.isSwiping=!0,this.startX=e.clientX,document.addEventListener(`mouseup`,this.handleMouseUp))},s.prototype.handleMouseUp=function(e){if(this.isSwiping){var t=e.clientX-this.startX;this.handleSwipe(t),this.isSwiping=!1,document.removeEventListener(`mouseup`,this.handleMouseUp)}},s.prototype.handleEnlarge=function(e){var t=this.props,r=t.onImageEnlarge,i=t.src,a=t.originalSrc;r&&r(n(n({},e),{originalSrc:e.originalSrc||e.src,list:this.list.map(function(e){return{src:i?S(i,e,`| raw`):e&&e.image||e,originalSrc:a?S(a,e,`| raw`):e?.src||S(i,e,`| raw`)||e?.image||e,title:e&&(e.enlargeTitle||e.title),caption:e&&(e.enlargeCaption||e.description||e.caption)}})}),this.props)},s.prototype.generateEvenTranslate=function(e,t){var n=``,r=Number(this.props.width)||this.state.defaultWidth,i=Number(this.props.height)||this.state.defaultHeight,a=Number(e?.split(`-`)[1]),o=Number(e?.split(`-`)[2]);if(t<a*o){var s=(r-(o-1)*this.gap)/o,c=(i-(a-1)*this.gap)/a,l=Math.floor(t/o);n=`translate(${t%o*(s+this.gap)}px,${l*(c+this.gap)}px)`}return n},s.prototype.componentDidMount=function(){(!this.props.width||!this.props.height||String(this.props.width).includes(`%`)&&String(this.props.height).includes(`%`))&&this.observeParentSize()},s.prototype.componentWillUnmount=function(){this.resizeObserver&&this.resizeObserver.disconnect()},s.prototype.observeParentSize=function(){var e=this;this.containerRef.current?.parentElement&&(this.resizeObserver=new ResizeObserver(function(t){var n,r;try{for(var i=C(t),a=i.next();!a.done;a=i.next()){var o=a.value;e.setState({defaultWidth:o.contentRect.width*parseFloat(e.props.width||`100`)/100,defaultHeight:o.contentRect.height*parseFloat(e.props.height||`100`)/100}),e.forceUpdate()}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}),this.resizeObserver.observe(this.containerRef.current.parentElement))},s.prototype.render=function(){var t=this,r=this.props,a=r.className,s=r.style,l=r.defaultImage,u=r.thumbMode,d=r.thumbRatio,f=r.data;r.name;var v=r.placeholder,b=r.classnames,C=r.source,T=r.delimiter,E=r.enlargeAble,D=r.enlargeWithGallary,O=r.src,k=r.originalSrc,A=r.listClassName,j=r.options,M=r.showToolbar,N=r.toolbarActions,P=r.imageGallaryClassName;r.galleryControlClassName;var F=r.id,I=r.wrapperCustomStyle,L=r.env,R=r.themeCss,z=r.sortType;r.imagesControlClassName;var B=r.displayMode,V=r.fullThumbMode,H=r.maskColor,U=this.state.currentIndex,W,G;return typeof C==`string`&&g(C)?G=c(C,f,`| raw`)||void 0:Array.isArray(W=o(this.props))||typeof W==`string`?G=W:Array.isArray(j)&&(G=j),typeof G==`string`?G=G.split(T):G&&!Array.isArray(G)&&(G=[G]),this.list=G,this.props.sortType===`sm-ss-sss-m`?this.list=G.slice(0,4):this.props.sortType===`sss-ss-ms-m`?this.list=G.slice(0,5):this.props.sortType===`sms-ss-sms-m`||this.props.sortType===`sm-ss-sss-ss`||this.props.sortType===`ms-ss-sss-ss`||this.props.sortType===`sss-ss-sm-ss`?this.list=G.slice(0,6):this.props.sortType===`mss-ss-ssm-ss`?this.list=G.slice(0,8):this.props.sortType===`sss-ss-mm-ss`&&(this.list=G.slice(0,6)),this.props.sortType?w.createElement(`div`,{ref:this.containerRef,className:z,style:{width:(this.props.width||this.state.defaultWidth)+`px`,height:(this.props.height||this.state.defaultHeight)+`px`}},this.list.map(function(e,r){return w.createElement(i,{maskColor:H,fontStyle:t.props.fontStyle,style:t.generateTranslate(z,r),width:t.generateWidth(z,r),height:t.generateHeight(z,r),hoverMode:t.props.hoverMode||`text-style-4`,index:r,className:b(`Images-item`),key:r,src:(O?S(O,e,`| raw`):e&&e.image)||e,originalSrc:(k?S(k,e,`| raw`):e&&e.src)||e,title:e&&e.title,sortType:t.props.sortType,caption:e&&(e.description||e.caption),thumbMode:u,thumbRatio:d,enlargeAble:E,enlargeWithGallary:D,onEnlarge:t.handleEnlarge,showToolbar:M,imageGallaryClassName:`${P} ${x(n(n({},t.props),{name:`imageGallaryClassName`,id:F,themeCss:R}))} ${x(n(n({},t.props),{name:`galleryControlClassName`,id:F,themeCss:R}))}`,toolbarActions:N})})):w.createElement(`div`,{ref:this.wrapperRef,className:b(`ImagesField`,a,B===`full`?`ImagesField--full`:``,x(n(n({},this.props),{name:`imagesControlClassName`,id:F,themeCss:R})),x(n(n({},this.props),{name:`wrapperCustomStyle`,id:F,themeCss:I}))),style:n(n({},s),B===`full`?{height:`auto`}:{}),onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onMouseDown:this.handleMouseDown},Array.isArray(G)?w.createElement(`div`,{className:b(`Images`,A)},B===`full`?w.createElement(`div`,{className:b(`Images-container`)},G.map(function(r,i){return w.createElement(_,{key:i,in:i===U,timeout:300,mountOnEnter:!0,unmountOnExit:!0},function(a){var o,s,c;a===`entering`&&((c=t.wrapperRef.current)==null||c.childNodes.forEach(function(e){return e.offsetHeight}));var l=(o={},o[h]={opacity:1,transform:`translateX(0)`},o[m]={opacity:1,transform:`translateX(0)`},o[e]={opacity:0,transform:t.state.nextAnimation===`slideRight`?`translateX(100%)`:`translateX(-100%)`},o[p]={opacity:0,transform:t.state.nextAnimation===`slideRight`?`translateX(-100%)`:`translateX(100%)`},o);return w.createElement(`div`,{className:b(`Images-item`),style:n({position:`absolute`,width:`100%`,height:`100%`,transition:`all 300ms ease-in-out`},l[a])},w.createElement(`div`,{className:b(`Images-itemInner`)},w.createElement(`img`,{className:b(`Image-image`,(s={},s[`Image-image--${V}`]=B===`full`,s)),src:(O?S(O,r,`| raw`):r&&r.image)||r,alt:r&&r.title,draggable:!1,onDragStart:function(e){return e.preventDefault()}}),w.createElement(`div`,{className:b(`Images-itemIndex`)},i+1,`/`,G.length)))})})):G.map(function(e,r){return w.createElement(i,{hoverMode:t.props.hoverMode||`text-style-4`,fontStyle:t.props.fontStyle,index:r,className:b(`Images-item`),key:r,src:(O?S(O,e,`| raw`):e&&e.image)||e,originalSrc:(k?S(k,e,`| raw`):e&&e.src)||e,title:e&&e.title,caption:e&&(e.description||e.caption),thumbMode:u,thumbRatio:d,enlargeAble:E,enlargeWithGallary:D,onEnlarge:t.handleEnlarge,showToolbar:M,imageGallaryClassName:`${P} ${x(n(n({},t.props),{name:`imageGallaryClassName`,id:F,themeCss:R}))} ${x(n(n({},t.props),{name:`galleryControlClassName`,id:F,themeCss:R}))}`,toolbarActions:N})})):l?w.createElement(`div`,{className:b(`Images`,A)},w.createElement(i,{hoverMode:this.props.hoverMode||`text-style-4`,className:b(`Images-item`),src:l,thumbMode:u,thumbRatio:d})):v,w.createElement(y,n({},this.props,{config:{wrapperCustomStyle:I,id:F,themeCss:R,classNames:[{key:`imagesControlClassName`},{key:`galleryControlClassName`}]},env:L})))},s.defaultProps={className:``,delimiter:`,`,defaultImage:d,placehoder:`-`,thumbMode:`cover`,thumbRatio:`1:1`,displayMode:`thumb`,fullThumbMode:`cover`},l([r,a(`design:type`,Function),a(`design:paramtypes`,[String]),a(`design:returntype`,void 0)],s.prototype,`getFrameId`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[String,String]),a(`design:returntype`,Promise)],s.prototype,`transitFramesTowards`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[Number]),a(`design:returntype`,void 0)],s.prototype,`handleSwipe`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,void 0)],s.prototype,`handleTouchStart`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,void 0)],s.prototype,`handleTouchEnd`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,void 0)],s.prototype,`handleMouseDown`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[MouseEvent]),a(`design:returntype`,void 0)],s.prototype,`handleMouseUp`,null),l([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,void 0)],s.prototype,`handleEnlarge`,null),s}(w.Component),E=function(e){u(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=l([b({type:`images`})],t),t}(T);export{T as ImagesField,E as ImagesFieldRenderer};