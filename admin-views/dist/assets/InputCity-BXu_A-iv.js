import{$o as e,Ao as t,Ci as n,Cr as r,Fo as i,Hn as a,Ia as o,J as s,Ko as c,Mo as l,No as u,Nr as d,Po as f,fr as p,gn as m,jo as h,tr as g,za as _,zt as v}from"./index-DAdqRbKX.js";var y=e(c()),b=function(e){var t=e.value,n=e.db,r=e.delimiter,i=r===void 0?`,`:r,a={code:0,province:``,provinceCode:0,city:``,cityCode:0,district:``,districtCode:0,street:``};if(!n||!t)return a;var o=t&&t.code||typeof t==`number`&&t||typeof t==`string`&&/(\d{6})/.test(t)&&RegExp.$1;if(o&&n[o]){o=parseInt(o,10),a.code=o;var s=o-o%1e4;n[s]&&(a.provinceCode=s,a.province=n[s]);var c=o-o%100;c!==s&&n[c]?(a.cityCode=c,a.city=n[c]):~n.city[s]?.indexOf(o)&&(a.cityCode=o,a.city=n[o]),o%100&&(a.district=n[o],a.districtCode=o)}return t&&t.street?a.street=t.street:typeof t==`string`&&~t.indexOf(i)&&(a.street=t.slice(t.indexOf(i)+i.length)),a},x=function(e){_(()=>import(`./CityDB-DQ84Od7J.js`),[]).then(e)},S=function(e){u(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={code:0,province:``,provinceCode:0,city:``,cityCode:0,district:``,districtCode:0,street:``},t}return r.prototype.componentDidMount=function(){var e=this;this.loadDb(function(){return e.syncIn()})},r.prototype.componentDidUpdate=function(e){var t=this,n=this.props;n.value!==e.value&&this.loadDb(function(){return t.syncIn(n)})},r.prototype.loadDb=function(e){var n=this;if(this.state.db){e?.();return}x(function(r){n.setState({db:t(t({},r.default),{province:r.province,city:r.city,district:r.district})},e)})},r.prototype.handleProvinceChange=function(e){this.setState(e?{province:e.label,provinceCode:e.value,city:``,cityCode:0,district:``,districtCode:0,street:``,code:e?e.value:0}:{code:0,province:``,provinceCode:0,city:``,cityCode:0,district:``,districtCode:0,street:``},this.syncOut)},r.prototype.handleCityChange=function(e){if(e.value%100)return this.handleDistrictChange(e,{cityCode:e.value});this.setState(e?{city:e.label,cityCode:e.value,district:``,districtCode:0,street:``,code:e.value}:{city:``,cityCode:0,district:``,districtCode:0,street:``,code:this.state.provinceCode},this.syncOut)},r.prototype.handleDistrictChange=function(e,n){n===void 0&&(n={}),this.setState(e?t(t({},n),{district:e.label,districtCode:e.value,street:``,code:e.value}):t(t({},n),{district:``,districtCode:0,street:``,code:this.state.cityCode}),this.syncOut)},r.prototype.handleStreetChange=function(e){this.setState({street:e.currentTarget.value})},r.prototype.handleStreetEnd=function(){this.syncOut()},r.prototype.syncIn=function(e){e===void 0&&(e=this.props);var t=this.state.db,n=e.value,r=e.delimiter;t&&this.setState(b({value:n,delimiter:r,db:t}))},r.prototype.syncOut=function(){var e=this.props,t=e.onChange,n=e.allowStreet,r=e.joinValues,i=e.extractValue,a=e.delimiter,o=this.state,s=o.code,c=o.province,l=o.city,u=o.district,d=o.street,f=o.provinceCode,p=o.cityCode,m=o.districtCode;t((i===void 0?r:i)?s?n&&d?[s,d].join(a):String(s):``:{code:s,provinceCode:f,province:c,cityCode:p,city:l,districtCode:m,district:u,street:d})},r.prototype.render=function(){var e=this.props,n=e.classnames,r=e.className;e.style;var i=e.disabled,o=e.allowCity,s=e.allowDistrict,c=e.allowStreet,l=e.searchable,u=e.translate,d=e.loadingConfig,f=e.popOverContainer,p=e.itemClassName,h=e.testIdBuilder,g=this.state,_=g.provinceCode,v=g.cityCode,b=g.districtCode,x=g.street,S=g.db;return S?y.createElement(`div`,{className:n(`CityPicker`,r)},y.createElement(m,{className:n(p),searchable:l,disabled:i,options:S.province.map(function(e){return{label:S[e],value:e}}),value:_||``,onChange:this.handleProvinceChange,popOverContainer:f,testIdBuilder:h?.getChild(`province`)}),o&&S.city[_]&&S.city[_].length?y.createElement(m,{className:n(p),searchable:l,disabled:i,options:S.city[_].map(function(e){return{label:S[e],value:e}}),value:v||``,onChange:this.handleCityChange,popOverContainer:f,testIdBuilder:h?.getChild(`city`)}):null,v&&s&&S.district[_]?.[v]?.length?y.createElement(m,{className:n(p),searchable:l,disabled:i,options:S.district[_][v].map(function(e){return{label:S[e],value:e}}),value:b||``,onChange:this.handleDistrictChange,popOverContainer:f,testIdBuilder:h?.getChild(`district`)}):null,c&&_?y.createElement(`input`,t({className:n(`CityPicker-input`),value:x||``,onChange:this.handleStreetChange,onBlur:this.handleStreetEnd,placeholder:u(`City.street`),disabled:i},h?.getChild(`street`).getTestId())):null):y.createElement(a,{show:!0,size:`sm`,loadingConfig:d})},r.defaultProps={joinValues:!0,extractValue:!0,delimiter:`,`,allowCity:!0,allowDistrict:!0,allowStreet:!1},l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,void 0)],r.prototype,`handleProvinceChange`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,void 0)],r.prototype,`handleCityChange`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Object]),i(`design:returntype`,void 0)],r.prototype,`handleDistrictChange`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,void 0)],r.prototype,`handleStreetChange`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[]),i(`design:returntype`,void 0)],r.prototype,`handleStreetEnd`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,void 0)],r.prototype,`syncIn`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[]),i(`design:returntype`,void 0)],r.prototype,`syncOut`,null),r}(y.Component),C=r(g(S)),w=function(e){u(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={db:null},t}return r.prototype.doAction=function(e,t,n){var r=this.props,i=r.resetValue,a=r.onChange,s=r.formStore,c=r.store,l=r.name,u=e?.actionType;u===`clear`?a(``):u===`reset`&&a(o(s?.pristine??c?.pristine,l)??i??``)},r.prototype.handleChange=function(e){return h(this,void 0,void 0,function(){var t,n,r,i;return f(this,function(a){switch(a.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.onChange,[4,n(`change`,d(this.props,{value:e},`value`))];case 1:return i=a.sent(),i?.prevented||r(e),[2]}})})},r.prototype.renderStatic=function(e){var n=this;e===void 0&&(e=``);var r=this.props,i=r.value,o=r.delimiter,s=r.loadingConfig;if(!this.state.db)return x(function(e){n.setState({db:t(t({},e.default),{province:e.province,city:e.city,district:e.district})})}),y.createElement(a,{size:`sm`,show:!0,loadingConfig:s});if(!i)return y.createElement(y.default.Fragment,null,e);var c=b({value:i,delimiter:o,db:this.state.db}),l=c.province,u=c.city,d=c.district,f=c.street;return y.createElement(y.default.Fragment,null,[l,u,d,f].filter(function(e){return!!e}).join(o))},r.prototype.render=function(){var e=this.props,t=e.value,n=e.allowCity,r=e.allowDistrict,i=e.extractValue,a=e.joinValues,o=e.allowStreet,s=e.disabled,c=e.searchable,l=e.env,u=e.mobileUI,d=e.popOverContainer,f=e.itemClassName,p=e.testIdBuilder;return u?y.createElement(v,{value:t,popOverContainer:l?.getModalContainer,onChange:this.handleChange,allowCity:n,allowDistrict:r,extractValue:i,joinValues:a,allowStreet:o,disabled:s,mobileUI:u}):y.createElement(C,{itemClassName:f,popOverContainer:d||l?.getModalContainer,searchable:c,value:t,onChange:this.handleChange,allowCity:n,allowDistrict:r,extractValue:i,joinValues:a,allowStreet:o,disabled:s,testIdBuilder:p})},l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Object,Boolean]),i(`design:returntype`,void 0)],r.prototype,`doAction`,null),l([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,Promise)],r.prototype,`handleChange`,null),l([s(),i(`design:type`,Function),i(`design:paramtypes`,[]),i(`design:returntype`,void 0)],r.prototype,`render`,null),r}(y.Component),T=function(e){u(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=l([p({type:`input-city`,sizeMutable:!1})],t),t}(w);export{T as CheckboxControlRenderer,S as CityPicker,w as LocationControl,C as default};