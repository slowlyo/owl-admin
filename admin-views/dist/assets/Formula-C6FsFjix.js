import{$o as e,Ci as t,Fo as n,Ko as r,Mo as i,Na as a,No as o,Yi as s,fr as c,va as l,ya as u}from"./index-C4Pf1uQ-.js";var d=function(e){o(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.inited=!1,t}return r.prototype.componentDidMount=function(){var e=this.props,t=e.formInited,n=e.initSet,r=e.addHook;this.unHook=r?r(this.handleFormInit,`init`):void 0,t!==!1&&(this.inited=!0,n===!1||this.initSet())},r.prototype.componentDidUpdate=function(e){var t=this.props,n=t.formInited,r=t.initSet,i=t.autoSet;this.inited?i===!1||this.autoSet(e):n===void 0&&(this.inited=!0,r===!1||this.initSet())},r.prototype.componentWillUnmount=function(){var e;(e=this.unHook)==null||e.call(this)},r.prototype.handleFormInit=function(e){this.inited=!0;var t=this.props,n=t.name;if(t.initSet!==!1){var r=this.initSet();typeof n==`string`&&r!==void 0&&a(e,n,r)}},r.prototype.initSet=function(){var e=this.props,t=e.formula,n=e.data,r=e.setPrinstineValue;e.initSet;var i=e.condition;if(t){if(i&&!~i.indexOf(`$`)&&!~i.indexOf(`<%`)&&!l(i,n))return}else return;var a=l(t,n);return a!==null&&r?.(a),a},r.prototype.autoSet=function(e){var t=this.props,n=e.formula,r=e.data,i=e.onChange,a=e.value,o=e.condition;if(n&&t.formula&&s(r,t.data,!1)&&a===t.value){var c=l(t.formula,t.data);if(o&&t.condition)~o.indexOf(`$`)||~o.indexOf(`<%`)?u(o,r)!==u(t.condition,t.data)&&i(c):l(t.condition,t.data)&&i(c);else{var d=l(n,r);JSON.stringify(d)!==JSON.stringify(c)&&i(c??``)}}},r.prototype.doAction=function(){var e=this.props,t=e.formula,n=e.data,r=e.onChange;e.autoSet,e.value,r(l(t,n))},r.prototype.render=function(){return null},i([t,n(`design:type`,Function),n(`design:paramtypes`,[Object]),n(`design:returntype`,void 0)],r.prototype,`handleFormInit`,null),r}(e(r()).Component),f=function(e){o(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=i([c({type:`formula`,wrap:!1,strictMode:!1,sizeMutable:!1})],t),t}(d);export{f as FormulaControlRenderer,d as default};