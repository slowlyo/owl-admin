import{$o as e,Ci as t,Ei as n,Fo as r,Ga as i,Ii as a,Kn as o,Ko as s,Mo as c,No as l,wr as u,ya as d}from"./index-C4Pf1uQ-.js";var f=e(s()),p=e(i()),m=function(e){l(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={src:a(t.props,function(e){return e.src?d(e.src,e.data,`| raw`):void 0})||``,isReady:!1,muted:!1,playing:!1,played:0,seeking:!1,volume:.8,prevVolume:.8,loaded:0,playbackRate:1,showHandlePlaybackRate:!1,showHandleVolume:!1},t}return i.prototype.componentWillUnmount=function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationTimeout)},i.prototype.componentDidMount=function(){var e=!!this.props.autoPlay;this.setState({playing:e},this.progress)},i.prototype.componentDidUpdate=function(e){var t=this,r=this.props;n(r,e,function(e){return t.setState({src:e,playing:!1},function(){t.audio.load(),t.progress()})},function(e){return e.src?d(e.src,e.data,`| raw`):void 0})},i.prototype.progress=function(){if(clearTimeout(this.progressTimeout),this.state.src&&this.audio){var e=(this.audio.currentTime||0)/this.audio.duration,t=this.state.playing;t=!!(e!=1&&t),this.setState({played:e,playing:t}),this.progressTimeout=setTimeout(this.progress,this.props.progressInterval/this.state.playbackRate)}},i.prototype.audioRef=function(e){this.audio=e},i.prototype.load=function(){this.setState({isReady:!0})},i.prototype.handlePlaybackRate=function(e){this.audio.playbackRate=e,this.setState({playbackRate:e,showHandlePlaybackRate:!1})},i.prototype.handleMute=function(){if(this.state.src){var e=this.state,t=e.muted,n=e.prevVolume,r=t?n:0;this.audio.muted=!t,this.setState({muted:!t,volume:r})}},i.prototype.handlePlaying=function(){if(this.state.src){var e=this.state.playing;e?this.audio.pause():this.audio.play(),this.setState({playing:!e})}},i.prototype.getCurrentTime=function(){if(!this.audio||!this.state.src||!this.state.isReady)return`0:00`;var e=this.audio.duration,t=this.state.played;return this.formatTime(e*(t||0))},i.prototype.getDuration=function(){if(!this.audio||!this.state.src)return`0:00`;if(!this.state.isReady)return this.onDurationCheck(),`0:00`;var e=this.audio,t=e.duration,n=e.seekable;return t===1/0&&n.length>0?n.end(n.length-1):this.formatTime(t)},i.prototype.onDurationCheck=function(){clearTimeout(this.durationTimeout),this.audio&&this.audio.duration||(this.durationTimeout=setTimeout(this.onDurationCheck,500))},i.prototype.onSeekChange=function(e){if(this.state.src){var t=e.target.value;this.setState({played:t})}},i.prototype.onSeekMouseDown=function(){this.setState({seeking:!0})},i.prototype.onSeekMouseUp=function(e){if(this.state.src&&this.state.seeking){var t=e.target.value,n=this.audio.duration;this.audio.currentTime=n*t;var r=this.props.loop,i=this.state.playing;i=t<1||r?i:!1,this.setState({playing:i,seeking:!1})}},i.prototype.setVolume=function(e){if(this.state.src){var t=e.target.value;this.audio.volume=t,this.setState({volume:t,prevVolume:t})}},i.prototype.formatTime=function(e){var t=new Date(e*1e3),n=t.getUTCHours(),r=isNaN(t.getUTCMinutes())?0:t.getUTCMinutes(),i=isNaN(t.getUTCSeconds())?`00`:this.pad(t.getUTCSeconds());return n?`${n}:${this.pad(r)}:${i}`:`${r}:${i}`},i.prototype.pad=function(e){return(`0`+e).slice(-2)},i.prototype.toggleHandlePlaybackRate=function(){this.state.src&&this.setState({showHandlePlaybackRate:!this.state.showHandlePlaybackRate})},i.prototype.toggleHandleVolume=function(e){this.state.src&&this.setState({showHandleVolume:e})},i.prototype.renderRates=function(){var e=this,t=this.props,n=t.rates,r=t.classnames,i=this.state,a=i.showHandlePlaybackRate,o=i.playbackRate;return n&&n.length?a?f.createElement(`div`,{className:r(`Audio-rateControl`)},n.map(function(t,n){return f.createElement(`div`,{key:n,className:r(`Audio-rateControlItem`),onClick:function(){return e.handlePlaybackRate(t)}},`x`,t.toFixed(1))})):f.createElement(`div`,{className:r(`Audio-rates`),onClick:this.toggleHandlePlaybackRate},`x`,o.toFixed(1)):null},i.prototype.renderPlay=function(){var e=this.props.classnames,t=this.state.playing;return f.createElement(`div`,{className:e(`Audio-play`),onClick:this.handlePlaying},t?f.createElement(o,{icon:`pause`,className:`icon`}):f.createElement(o,{icon:`play`,className:`icon`}))},i.prototype.renderTime=function(){var e=this.props.classnames;return f.createElement(`div`,{className:e(`Audio-times`)},this.getCurrentTime(),` / `,this.getDuration())},i.prototype.renderProcess=function(){var e=this.props.classnames,t=this.state.played;return f.createElement(`div`,{className:e(`Audio-process`)},f.createElement(`input`,{type:`range`,min:0,max:1,step:`any`,value:t||0,onMouseDown:this.onSeekMouseDown,onChange:this.onSeekChange,onMouseUp:this.onSeekMouseUp}))},i.prototype.renderVolume=function(){var e=this,t=this.props.classnames,n=this.state,r=n.volume;return n.showHandleVolume?f.createElement(`div`,{className:t(`Audio-volumeControl`),onMouseLeave:function(){return e.toggleHandleVolume(!1)}},f.createElement(`div`,{className:t(`Audio-volumeControlIcon`),onClick:this.handleMute},r>0?f.createElement(o,{icon:`volume`,className:`icon`}):f.createElement(o,{icon:`mute`,className:`icon`})),f.createElement(`input`,{type:`range`,min:0,max:1,step:`any`,value:r,onChange:this.setVolume})):f.createElement(`div`,{className:t(`Audio-volume`),onMouseEnter:function(){return e.toggleHandleVolume(!0)}},r>0?f.createElement(o,{icon:`volume`,className:`icon`}):f.createElement(o,{icon:`mute`,className:`icon`}))},i.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.style,i=t.inline,a=t.autoPlay,o=t.loop,s=t.controls,c=t.classnames,l=this.state,u=l.muted,d=l.src;return f.createElement(`div`,{className:c(`Audio`,n,i?`Audio--inline`:``),style:r},f.createElement(`audio`,{className:c(`Audio-original`),ref:this.audioRef,onCanPlay:this.load,autoPlay:a,controls:!0,muted:u,loop:o},f.createElement(`source`,{src:d})),f.createElement(`div`,{className:c(`Audio-controls`)},s&&s.map(function(t,n){t=`render`+(0,p.default)(t);var r=t;return f.createElement(f.default.Fragment,{key:n},e[r]())})))},i.defaultProps={inline:!0,autoPlay:!1,playbackRate:1,loop:!1,rates:[],progressInterval:1e3,controls:[`rates`,`play`,`time`,`process`,`volume`]},c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`progress`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[HTMLMediaElement]),r(`design:returntype`,void 0)],i.prototype,`audioRef`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`load`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,void 0)],i.prototype,`handlePlaybackRate`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`handleMute`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`handlePlaying`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`getCurrentTime`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`getDuration`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`onDurationCheck`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,void 0)],i.prototype,`onSeekChange`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`onSeekMouseDown`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,void 0)],i.prototype,`onSeekMouseUp`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,void 0)],i.prototype,`setVolume`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,void 0)],i.prototype,`formatTime`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,void 0)],i.prototype,`pad`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],i.prototype,`toggleHandlePlaybackRate`,null),c([t,r(`design:type`,Function),r(`design:paramtypes`,[Boolean]),r(`design:returntype`,void 0)],i.prototype,`toggleHandleVolume`,null),i}(f.Component),h=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=c([u({type:`audio`})],t),t}(m);export{m as Audio,h as AudioRenderer};