import{$o as e,Ci as t,Cr as n,Fo as r,Go as i,Kn as a,Ko as o,Ma as s,Mo as c,No as l,Pn as u,a as d,ar as f,hr as p,i as m,mr as h,tr as g}from"./index-zRImlZB6.js";var _=e(o()),v=i(),y=function(e){l(n,e);function n(t){var n=e.call(this,t)||this;return n.state={isOpened:!1,isFocused:!1,inputValue:n.props.value||``,tempValue:n.props.value||``},n.open=n.open.bind(n),n.close=n.close.bind(n),n.focus=n.focus.bind(n),n.blur=n.blur.bind(n),n.handleChange=n.handleChange.bind(n),n.handleTempChange=n.handleTempChange.bind(n),n.handleConfirm=n.handleConfirm.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.clearValue=n.clearValue.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleClick=n.handleClick.bind(n),n.preview=_.createRef(),n.input=_.createRef(),n}return n.prototype.componentDidUpdate=function(e){var t=this.props;e.value!==t.value&&this.setState({inputValue:t.value||``})},n.prototype.handleFocus=function(){this.setState({isFocused:!0})},n.prototype.handleBlur=function(){this.setState({isFocused:!1,inputValue:this.props.value})},n.prototype.focus=function(){this.input.current&&this.input.current.focus()},n.prototype.blur=function(){this.input.current&&this.input.current.blur()},n.prototype.open=function(e){this.props.disabled||this.setState({isOpened:!0},e)},n.prototype.close=function(){this.setState({isOpened:!1})},n.prototype.clearValue=function(){var e=this.props,t=e.onChange,n=e.resetValue;t(n||``)},n.prototype.handleClick=function(){this.state.isOpened?this.close():this.open(this.focus)},n.prototype.handleInputChange=function(e){var t=this;if(this.props.allowCustomColor){var n=this.props.onChange;this.setState({inputValue:e.currentTarget.value},function(){t.validateColor(t.state.inputValue)&&n(t.state.inputValue)})}},n.prototype.validateColor=function(e){if(e===``||e===`inherit`||e===`transparent`)return!1;var t=document.createElement(`img`);return t.style.color=`rgb(0, 0, 0)`,t.style.color=e,t.style.color===`rgb(0, 0, 0)`?(t.style.color=`rgb(255, 255, 255)`,t.style.color=e,t.style.color!==`rgb(255, 255, 255)`):!0},n.prototype.handleChange=function(e){var t=this.props,n=t.onChange,r=t.format;n(r===`rgba`?`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`:r===`rgb`?`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`:r===`hexa`?this.rgbaToHex(e.rgb.r,e.rgb.g,e.rgb.b,e.rgb.a):r===`hsl`?`hsl(${Math.round(e.hsl.h)}, ${Math.round(e.hsl.s*100)}%, ${Math.round(e.hsl.l*100)}%)`:e.hex)},n.prototype.handleTempChange=function(e){var t=this.state.tempValue,n=this.props.format;t=n===`rgba`?`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`:n===`rgb`?`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`:n===`hexa`?this.rgbaToHex(e.rgb.r,e.rgb.g,e.rgb.b,e.rgb.a):n===`hsl`?`hsl(${Math.round(e.hsl.h)}, ${Math.round(e.hsl.s*100)}%, ${Math.round(e.hsl.l*100)}%)`:e.hex,this.setState({tempValue:t})},n.prototype.handleConfirm=function(){var e=this.props.onChange,t=this.state.tempValue;e(t),this.close()},n.prototype.rgbaToHex=function(e,t,n,r){if(e<0||e>255||t<0||t>255||n<0||n>255)return`#00000000`;(r===void 0||r>1)&&(r=1),r<.01&&(r=0);var i=function(e){return e.toString(16).padStart(2,`0`).toUpperCase()},a=i(Math.round(r*255));return`#${i(e)}${i(t)}${i(n)}${a}`},n.prototype.render=function(){var e=this,t=this.props,n=t.classPrefix,r=t.className,i=t.popoverClassName,o=t.value,c=t.placeholder,l=t.disabled,f=t.popOverContainer,g=t.popOverContainerSelector,y=t.format,b=t.clearable,x=t.placement,S=t.classnames,C=t.presetColors,w=t.allowCustomColor,T=t.mobileUI,E=this.props.translate,D=this.state.isOpened,O=this.state.isFocused,k=this.state.tempValue;return _.createElement(`div`,{className:S(`ColorPicker`,{"is-disabled":l,"is-focused":O,"is-opened":D},r)},_.createElement(`span`,{onClick:this.handleClick,className:S(`ColorPicker-preview`)},_.createElement(`i`,{ref:this.preview,className:`${n}ColorPicker-previewIcon`,style:{background:this.state.inputValue||`#ccc`}})),_.createElement(`input`,{ref:this.input,type:`text`,autoComplete:`off`,size:10,className:S(`ColorPicker-input`),value:this.state.inputValue||``,placeholder:E(c),disabled:l,onChange:this.handleInputChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,readOnly:T}),b&&!l&&o?_.createElement(`a`,{onClick:this.clearValue,className:S(`ColorPicker-clear`)},_.createElement(a,{icon:`input-clear`,className:`icon`})):null,_.createElement(`span`,{className:S(`ColorPicker-arrow`)},_.createElement(a,{icon:`right-arrow-bold`,className:`icon`,onClick:this.handleClick})),!T&&D?_.createElement(p,{placement:x||`auto`,target:function(){return(0,v.findDOMNode)(e)},onHide:this.close,container:f||(function(){return(0,v.findDOMNode)(e)}),containerSelector:g,rootClose:!1,show:!0},_.createElement(h,{classPrefix:n,className:S(`ColorPicker-popover`,i),onHide:this.close,overlay:!0},w?_.createElement(m,{styles:{},disableAlpha:!!~[`rgb`,`hex`].indexOf(y),color:o,presetColors:C,onChangeComplete:this.handleChange}):_.createElement(d,{color:o,colors:Array.isArray(C)?C.filter(function(e){return typeof e==`string`||s(e)}).map(function(e){return typeof e==`string`?e:s(e)?e?.color:e}):void 0,onChangeComplete:this.handleChange}))):null,T&&_.createElement(u,{className:S(`${n}ColorPicker-popup`),container:f,isShow:D,onHide:this.handleClick,showConfirm:!0,onConfirm:this.handleConfirm},w?_.createElement(m,{styles:{},disableAlpha:!!~[`rgb`,`hex`].indexOf(y),color:k,presetColors:C,onChangeComplete:this.handleTempChange}):_.createElement(d,{color:k,colors:Array.isArray(C)?C.filter(function(e){return typeof e==`string`||s(e)}).map(function(e){return typeof e==`string`?e:s(e)?e?.color:e}):void 0,onChangeComplete:this.handleTempChange})))},n.defaultProps={format:`hex`,clearable:!0,placeholder:`ColorPicker.placeholder`,allowCustomColor:!0},c([t,r(`design:type`,Function),r(`design:paramtypes`,[String]),r(`design:returntype`,void 0)],n.prototype,`validateColor`,null),n}(_.PureComponent),b=n(g(f(y,{value:`onChange`})));export{y as ColorControl,b as default};