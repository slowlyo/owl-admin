import{$o as e,Aa as t,Ao as n,Ci as r,En as i,Eo as a,Fa as o,Fo as s,Go as c,Hi as l,Ia as u,Io as d,Kn as f,Ko as p,La as m,Ma as h,Mo as g,No as _,Nr as v,Oa as y,Po as b,Ro as x,Tn as S,Ua as C,Va as w,Vn as T,Wr as E,Yi as D,_a as O,_i as k,ao as A,ba as j,ci as M,cn as N,fr as P,ga as F,gn as I,hi as L,io as R,ja as z,jo as B,ni as V,oi as H,so as U,wn as ee,xi as te,ya as W,zo as G}from"./index-C4Pf1uQ-.js";var K=e(p()),q=c(),J=e(M()),Y=e(L()),X=e(C()),Z=e(a()),ne=e(w());function Q(e,t){return t.reduce(function(t,n){return t[n]=o(n,e),t},{})}var $=function(e){_(a,e);function a(t){var r=e.call(this,t)||this;r.subFormDefaultValues=[],r.keys=[],r.toDispose=[],r.id=l(),r.refsMap={},r.makeFormRef=(0,X.default)(function(e){return function(t){return r.formRef(t,e)}}),r.memoizedFormatValue=(0,X.default)(function(e,t,r,i,a){return y(z(a,n({index:i,__index:i},a)),n(n({},r),Array.isArray(t)?Q(a,t):null))},function(e,t,n,r,i){return Array.isArray(t)?JSON.stringify([n,r,i,Q(i,t)]):e?JSON.stringify([n,r]):JSON.stringify([n,r,i])}),r.handleChange=r.handleChange.bind(r),r.handleRadioChange=r.handleRadioChange.bind(r),r.handleSingleFormChange=r.handleSingleFormChange.bind(r),r.handleSingleFormInit=r.handleSingleFormInit.bind(r),r.handleFormInit=r.handleFormInit.bind(r),r.handleAction=r.handleAction.bind(r),r.addItem=r.addItem.bind(r),r.deleteItem=r.deleteItem.bind(r),r.dragTipRef=r.dragTipRef.bind(r),r.flush=r.flush.bind(r),r.handleComboTypeChange=r.handleComboTypeChange.bind(r),r.handleSubFormValid=r.handleSubFormValid.bind(r),r.defaultValue=n({},t.scaffold);var i=t.store;t.value;var a=t.multiple,o=t.formItem,s=t.addHook;return i.config({multiple:a,minLength:r.resolveVariableProps(t,`minLength`),maxLength:r.resolveVariableProps(t,`maxLength`),length:r.getValueAsArray(t).length}),typeof t.perPage==`number`&&t.perPage>0&&i.changePage(1,t.perPage),o&&U(o)&&o.setSubStore(i),s&&r.toDispose.push(s(r.flush,`flush`)),r}return a.prototype.componentDidUpdate=function(e){var t=this.props;if(te([`minLength`,`maxLength`,`value`],e,t)||this.resolveVariableProps(e,`minLength`)!==this.resolveVariableProps(t,`minLength`)||this.resolveVariableProps(e,`maxLength`)!==this.resolveVariableProps(t,`maxLength`)){var r=t.store,i=t.multiple,a=this.getValueAsArray(t);r.config({multiple:i,minLength:this.resolveVariableProps(t,`minLength`),maxLength:this.resolveVariableProps(t,`maxLength`),length:a.length}),r.activeKey>=a.length&&r.setActiveKey(Math.max(0,a.length-1)),t.value!==e.value&&!e.formInited&&this.subFormDefaultValues.length&&(this.subFormDefaultValues=this.subFormDefaultValues.map(function(e,t){return n(n({},e),{values:a[t]})}))}e.perPage!==t.perPage&&t.store.changePage(1,typeof t.perPage==`number`?t.perPage:0)},a.prototype.componentWillUnmount=function(){var e,t,n,r,i=this.props.formItem;i&&U(i)&&i.setSubStore(null),this.toDispose.forEach(function(e){return e()}),this.toDispose=[],(t=(e=this.memoizedFormatValue.cache).clear)==null||t.call(e),(r=(n=this.makeFormRef.cache).clear)==null||r.call(n)},a.prototype.resolveVariableProps=function(e,t){var n={minLength:0,maxLength:1/0},r=e[t];if(!r)return n[t];if(typeof r==`string`)if(j(r)){var i=m(r,e.data,`| raw`);r=typeof i==`number`&&i>=0?i:n[t]}else{var a=parseInt(r,10);r=isNaN(a)?n[t]:a}return r},a.prototype.doAction=function(e,t,n,r){n===void 0&&(n=!1);var i=e?.actionType,a=this.props,o=a.onChange,s=a.resetValue,c=a.formStore,l=a.store,d=a.name;i===`addItem`?this.addItemValue(r?.item??{}):i===`clear`?o(``):i===`reset`&&o(u(c?.pristine??l?.parentStore?.pristine,d)??s??``)},a.prototype.addItemValue=function(e){var t=this.props,n=t.flat,r=t.joinValues,i=t.addattop,a=t.delimiter,o=t.disabled,s=t.submitOnChange;if(!o){var c=this.getValueAsArray();i===!0?(this.keys.unshift(l()),c.unshift(e)):(c.push(e),this.keys.push(l())),n&&r&&(c=c.join(a||`,`)),this.props.onChange(c,s,!0)}},a.prototype.getValueAsArray=function(e){e===void 0&&(e=this.props);var t=e.flat,n=e.joinValues,r=e.delimiter;e.type,e.formItem;var i=e.getValue();return i=n&&t&&typeof i==`string`?i.split(r||`,`):Array.isArray(i)?i.concat():[],i},a.prototype.addItemWith=function(e){var t=this.props,r=t.flat,i=t.joinValues,a=t.addattop,o=t.delimiter,s=t.scaffold,c=t.disabled,u=t.submitOnChange,d=t.store;if(!c){var f=this.getValueAsArray();f.push(r?e.scaffold??s??``:n({},e.scaffold||s)),this.keys.push(l()),r&&i&&(f=f.join(o||`,`)),a===!0?(this.keys.unshift(this.keys.pop()),f.unshift(f.pop()),d.changePage(1)):d.perPage&&d.changePage(Math.ceil(f.length/d.perPage)),this.props.onChange(f,u,!0)}},a.prototype.addItem=function(){return B(this,void 0,void 0,function(){var e,t,r,i,a,o,s,c,u,d,f,p,m;return b(this,function(h){switch(h.label){case 0:return e=this.props,t=e.flat,r=e.joinValues,i=e.addattop,a=e.delimiter,o=e.scaffold,s=e.disabled,c=e.submitOnChange,u=e.dispatchEvent,d=e.store,s?[2]:(f=this.getValueAsArray(),[4,u(`add`,v(this.props,{value:t&&r?f.join(a||`,`):(0,J.default)(f)}))]);case 1:return p=h.sent(),p?.prevented?[2]:(f.push(t?o??``:n({},o)),this.keys.push(l()),t&&r&&(f=f.join(a||`,`)),m=this.keys.length-1,i===!0?(this.keys.unshift(this.keys.pop()),f.unshift(f.pop()),m=0,d.changePage(1)):d.perPage&&d.changePage(Math.ceil(f.length/d.perPage)),d.setActiveKey(m),this.props.onChange(f,c,!0),[2])}})})},a.prototype.deleteItem=function(e){return B(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,x,S;return b(this,function(b){switch(b.label){case 0:return t=this.props,n=t.flat,r=t.joinValues,i=t.delimiter,a=t.disabled,o=t.deleteApi,s=t.deleteConfirmText,c=t.data,l=t.env,u=t.translate,d=t.dispatchEvent,f=t.submitOnChange,p=t.store,a?[2]:(m=this.getValueAsArray(),h=y(c,m[e]),[4,d(`delete`,v(this.props,{key:e,value:n&&r?m.join(i||`,`):(0,J.default)(m),item:m[e]}))]);case 1:return g=b.sent(),g?.prevented?[2]:V(o,h)?[4,l.confirm(s?W(s,h):u(`deleteConfirm`))]:[3,4];case 2:return _=b.sent(),_?[4,l.fetcher(o,h)]:[2];case 3:if(x=b.sent(),!x.ok)return!o?.silent&&l.notify(`error`,o?.messages?.failed??u(`deleteFailed`)),[2];b.label=4;case 4:return this.keys.splice(e,1),m.splice(e,1),S=p.perPage?1:Math.ceil(m.length/p.perPage),p.page>S&&p.changePage(S),n&&r&&(m=m.join(i||`,`)),this.props.onChange(m,f,!0),[2]}})})},a.prototype.handleChange=function(e,r,i){var a,o,s,c,l=i.index,u=this.props,d=u.flat,f=u.store,p=u.joinValues,m=u.delimiter,h=u.disabled,g=u.submitOnChange,_=u.type,v=u.syncFields,y=u.name;if(!h){Array.isArray(v)&&v.forEach(function(r){y?.startsWith(r)&&(e=n({},e),t(e,y))});var b=this.getValueAsArray();if(b[l]=d?e.flat:n({},e),d&&p&&(b=b.join(m||`,`)),_===`input-kv`){var x=!1,S={};try{for(var C=G(b),w=C.next();!w.done;w=C.next()){var T=w.value;T.key!=null&&S[T.key]?x=!0:S[T.key]=!0}}catch(e){a={error:e}}finally{try{w&&!w.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}x||this.props.onChange(b,g,!0)}else if(_===`input-kvs`){var x=!1,S={};try{for(var E=G(b),D=E.next();!D.done;D=E.next()){var T=D.value;`_key`in T&&(S[T._key]?x=!0:S[T._key]=!0)}}catch(e){s={error:e}}finally{try{D&&!D.done&&(c=E.return)&&c.call(E)}finally{if(s)throw s.error}}x||this.props.onChange(b,g,!0)}else this.props.onChange(b,g,!0);f.forms.forEach(function(e){return U(e)&&e.items.forEach(function(t){return t.unique&&t.syncOptions(void 0,e.data)})})}},a.prototype.handleRadioChange=function(e,t){var r=t.index,i=t.name,a=t.trueValue,o=a===void 0?!0:a,s=t.falseValue,c=s===void 0?!1:s,l=this.props,u=l.onChange,d=l.submitOnChange,f=l.multiple,p=l.disabled;if(!(!f||p||!i)){var m=this.getValueAsArray();if(!(!Array.isArray(m)||m.length<2||!(0,Z.default)(m[0])))return m=m.map(function(e,t){var a;return n(n({},e),(a={},a[i]=t===r?o:c,a))}),u(m,d,!0),!1}},a.prototype.handleSingleFormChange=function(e){this.props.value===null&&(0,ne.default)(this.defaultValue,e)||this.props.onChange(n({},e),this.props.submitOnChange,!0)},a.prototype.handleSubFormValid=function(e,t){var n=t.index;this.props.store.setMemberValid(e,n)},a.prototype.handleFormInit=function(e,r){var i,a=r.index,o=this.props,s=o.syncDefaultValue,c=o.flat,l=o.joinValues,u=o.delimiter,d=o.formInited,f=o.onChange,p=o.submitOnChange,m=o.setPrinstineValue,h=o.formItem,g=o.name,_=o.syncFields;if(Array.isArray(_)&&_.forEach(function(r){g?.startsWith(r)&&(e=n({},e),t(e,g))}),h?.validated&&((i=this.subForms[a])==null||i.validate(!0,!1,!1)),this.subFormDefaultValues.push({index:a,values:e,setted:!1}),!(s===!1||this.subFormDefaultValues.length!==this.subForms.filter(function(e){return e!==void 0}).length)){var v=this.getValueAsArray(),y=!1;this.subFormDefaultValues=this.subFormDefaultValues.map(function(e){var t=e.index,r=e.values,i=e.setted,a=c?r.flat:n({},r);return!i&&D(v[t],a)&&(v[t]=c?r.flat:n({},r),y=!0),{index:t,values:r,setted:!0}}),y&&(c&&l&&(v=v.join(u||`,`)),d?f(v,p,!0):m(v))}},a.prototype.handleSingleFormInit=function(e){var t=this.props,r=t.syncDefaultValue,i=t.setPrinstineValue,a=t.value,o=t.nullable;r!==!1&&!o&&D(a,e)&&i(n({},e))},a.prototype.handleAction=function(e,t){var n=this.props.onAction;if(t.actionType===`delete`){t.index!==void 0&&this.deleteItem(t.index);return}n&&n.apply(null,arguments)},a.prototype.validate=function(){var e=this,t=this.props,n=t.messages,r=t.nullable,i=t.value,a=t.translate,o=t.store,s=t.flat,c=this.getValueAsArray(),l=this.resolveVariableProps(this.props,`minLength`),d=this.resolveVariableProps(this.props,`maxLength`);if(l&&(!Array.isArray(c)||c.length<l))return a(n&&n.minLengthValidateFailed||`Combo.minLength`,{minLength:l});if(d&&Array.isArray(c)&&c.length>d)return a(n&&n.maxLengthValidateFailed||`Combo.maxLength`,{maxLength:d});if(!(r&&!i)){if(c.length){var f=this.subForms;return Promise.all(c.map(function(t,n){return B(e,void 0,void 0,function(){var e,r,i,a,c,l,d,p,m,h,g,_;return b(this,function(v){switch(v.label){case 0:return e=this.refsMap[n],e?[2,e.validate(!0,!1,!1)]:[3,1];case 1:if(r=f[Object.keys(f)[0]],!r)return[3,10];i=r.props.store,a=!1,v.label=2;case 2:v.trys.push([2,7,8,9]),c=G(i.items),l=c.next(),v.label=3;case 3:return l.done?[3,6]:(d=l.value,p=R(d),m=s?t:u(t,d.name,!1),d.extraName&&!s&&(m=[u(t,d.name,!1),u(t,d.extraName,!1)]),p.changeTmpValue(m,`dataChanged`),[4,p.validate(t)]);case 4:if(a=v.sent(),A(p),a===!1)return[3,6];v.label=5;case 5:return l=c.next(),[3,3];case 6:return[3,9];case 7:return h=v.sent(),g={error:h},[3,9];case 8:try{l&&!l.done&&(_=c.return)&&_.call(c)}finally{if(g)throw g.error}return[7];case 9:return o.setMemberValid(a,n),[2,a];case 10:return[2]}})})})).then(function(e){var t=e.indexOf(!1);if(~t)return o.perPage&&o.changePage(Math.ceil(t/o.perPage)),a(n&&n.validateFailed||`validateFailed`)})}else if(this.subForms.length)return Promise.all(this.subForms.map(function(e){return e.validate(!0,!1,!1)})).then(function(e){if(~e.indexOf(!1))return a(n&&n.validateFailed||`validateFailed`)})}},a.prototype.flush=function(){return B(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.subForms.map(function(e){return e.flush()}))];case 1:return e.sent(),[2]}})})},a.prototype.dragTipRef=function(e){!this.dragTip&&e?this.initDragging():this.dragTip&&!e&&this.destroyDragging(),this.dragTip=e},a.prototype.initDragging=function(){var e=this,t=this.props.classPrefix,n=this.props.submitOnChange;this.sortable=new i((0,q.findDOMNode)(this).querySelector(`.${t}Combo-items`),{group:`combo-${this.id}`,animation:150,handle:`.${t}Combo-itemDrager`,ghostClass:`${t}Combo-item--dragging`,onEnd:function(t){if(t.newIndex!==t.oldIndex){var r=t.to;t.oldIndex<r.childNodes.length-1?r.insertBefore(t.item,r.childNodes[t.oldIndex>t.newIndex?t.oldIndex+1:t.oldIndex]):r.appendChild(t.item);var i=e.props.value;if(Array.isArray(i)){var a=i.concat();a.splice(t.newIndex,0,a.splice(t.oldIndex,1)[0]),e.keys.splice(t.newIndex,0,e.keys.splice(t.oldIndex,1)[0]),e.props.onChange(a,n,!0),e.props.dispatchEvent(`dragEnd`,v(e.props,{item:a[t.newIndex],value:a,index:t.newIndex,oldValue:i,oldIndex:t.oldIndex}))}}}})},a.prototype.destroyDragging=function(){this.sortable&&this.sortable.destroy()},Object.defineProperty(a.prototype,`subForms`,{get:function(){var e=this;return Object.keys(this.refsMap).map(function(e){return parseInt(e,10)}).sort().map(function(t){return e.refsMap[t]})},enumerable:!1,configurable:!0}),a.prototype.formRef=function(e,t){if(t===void 0&&(t=0),e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.refsMap[t]=e}else this.refsMap[t],this.subFormDefaultValues=this.subFormDefaultValues.filter(function(e){return e.index!==t}),delete this.refsMap[t]},a.prototype.formatValue=function(e,t){t===void 0&&(t=-1);var n=this.props,r=n.flat,i=n.data,a=n.strictMode,o=n.syncFields;return r&&(e={flat:e}),e||=this.defaultValue,this.memoizedFormatValue(a!==!1,o,e,t,i)},a.prototype.pickCondition=function(e){var t=this.props.conditions;return(0,Y.default)(t,function(t){return t.test&&F(t.test,e)})},a.prototype.handleComboTypeChange=function(e,t){var r=this.props,i=r.multiple,a=r.onChange,o=r.value;r.flat;var s=r.submitOnChange,c=this.props.conditions,l=(0,Y.default)(c,function(e){return e.label===t.label});if(l)if(i){var u=this.getValueAsArray();u.splice(e,1,n({},k(l.scaffold||{},u[e]))),a(u,s,!0)}else a(n({},k(l.scaffold||{},o)),s,!0)},a.prototype.handleTabSelect=function(e){return B(this,void 0,void 0,function(){var t,r,i,a,o,s,c,l,u;return b(this,function(d){switch(d.label){case 0:return t=this.props,r=t.store,i=t.data,a=t.name,o=t.value,s=t.dispatchEvent,c={key:e,item:o[e]},[4,s(`tabsChange`,y(i,a?n(n({},c),(u={},u[a]=o,u)):c))];case 1:return l=d.sent(),l?.prevented||r.setActiveKey(e),[2]}})})},a.prototype.setNull=function(e){e.preventDefault();var t=this.props.onChange;t(null),this.subForms.forEach(function(e){e.clearErrors()})},a.prototype.renderPlaceholder=function(){var e=this.props,t=e.placeholder,n=e.translate;return K.createElement(`span`,{className:`text-muted`},n(t||`placeholder.noData`))},a.prototype.renderTabsMode=function(){var e=this,t=this.props;t.classPrefix;var r=t.classnames,i=t.tabsStyle;t.formClassName,t.render;var a=t.disabled,o=t.store,s=t.flat;t.subFormMode,t.addButtonText;var c=t.addable,u=t.removable,d=t.typeSwitchable,p=t.itemRemovableOn,m=t.delimiter;t.canAccessSuperData,t.addIcon;var h=t.deleteIcon,g=t.tabsLabelTpl,_=t.conditions;t.changeImmediately;var v=t.addBtnText;t.static;var y=t.translate,b=t.testIdBuilder,x=this.props.items,C=this.props.value;s&&typeof C==`string`&&(C=C.split(m||`,`));var w=o.removable!==!1&&!a&&u!==!1;return Array.isArray(C)||(C=[]),K.createElement(S,{addBtnText:y(v||`add`),className:`ComboTabs`,mode:i,activeKey:o.activeKey,onSelect:this.handleTabSelect,testIdBuilder:b,additionBtns:!a&&c!==!1&&o.addable?K.createElement(`li`,{className:r(`Tabs-link ComboTabs-addLink`)},this.renderAddBtn()):null},C.map(function(t,i){var a=e.formatValue(t,i),c=b?.getChild(`tab-${i}`),u=null,m=void 0;w&&(!p||F(p,t)!==!1)&&(m=K.createElement(`div`,n({onClick:e.deleteItem.bind(e,i),key:`delete`,className:r(`Combo-tab-delBtn ${o.removable?``:`is-disabled`}`),"data-tooltip":y(`delete`),"data-position":`bottom`},c?.getChild(`delBtn`).getTestId()),h?K.createElement(`i`,{className:h}):K.createElement(f,{icon:`status-close`,className:`icon`}))),Array.isArray(_)&&_.length&&(u=e.pickCondition(a),x=u?u.items:void 0);var v=s&&x?[n(n({},x&&x[0]),{name:`flat`})]:x,S=Array.isArray(v)&&v.some(function(e){return e.unique});return e.keys[i]||e.keys.splice(i,0,l()),K.createElement(ee,{title:W(g||y(`{{index}}`,{index:a.index+1}),a),key:e.keys[i],toolbar:m,eventKey:i,mountOnEnter:!S,unmountOnExit:!1,className:o.memberValidMap[i]===!1?`has-error`:``,tabClassName:o.memberValidMap[i]===!1?`has-error`:``,testIdBuilder:c},u&&d!==!1?K.createElement(`div`,{className:r(`Combo-itemTag`)},K.createElement(`label`,null,y(`Combo.type`)),K.createElement(I,{onChange:e.handleComboTypeChange.bind(e,i),options:_.map(function(e){return{label:e.label,value:e.label}}),value:u.label,clearable:!1})):null,K.createElement(`div`,{className:r(`Combo-itemInner`)},v?e.renderItems(v,a,i,t):K.createElement(N,{level:`warning`,className:`m-b-none`},y(`Combo.invalidData`))))}))},a.prototype.renderDelBtn=function(e,t){var r=this;if(this.props.static)return null;var i=this.props;i.classPrefix;var a=i.classnames,o=i.render,s=i.store,c=i.deleteIcon,l=i.translate,u=i.itemRemovableOn,d=i.disabled,p=i.removable,m=i.deleteBtn,g=i.mobileUI,_=i.data,v=i.testIdBuilder?.getChild(`delete-btn-${t}`);return s.removable!==!1&&!d&&p!==!1&&(!u||F(u,e)!==!1)?h(m)?o(`delete-btn`,n(n({},m),{type:`button`,className:a(`Combo-delController`,m?m.className:``),testIdBuilder:v,onClick:function(e){if(!m.onClick){r.deleteItem(t);return}var n=m.onClick;typeof n==`string`&&(n=H(m.onClick,`e`,`index`,`props`));var i=n(e,t,r.props);i&&i.then?i.then(function(){r.deleteItem(t)}):r.deleteItem(t)}}),{data:z(_,{index:t})}):typeof m==`string`?o(`delete-btn`,{type:`button`,className:a(`Combo-delController`),label:m,onClick:this.deleteItem.bind(this,t),testIdBuilder:v}):K.createElement(`a`,n({onClick:this.deleteItem.bind(this,t),key:`delete`,className:a(`Combo-delBtn ${s.removable?``:`is-disabled`}`),"data-tooltip":g?null:l(`delete`),"data-position":`bottom`},v?.getTestId()),c?K.createElement(`i`,{className:c}):K.createElement(f,{icon:`status-close`,className:`icon`})):null},a.prototype.renderAddBtn=function(){var e=this;if(this.props.static)return null;var t=this.props;t.classPrefix;var r=t.classnames,i=t.render,a=t.addButtonClassName,o=t.store,s=t.addButtonText,c=t.addBtn,l=t.addable,u=t.addIcon,d=t.conditions,p=t.translate,m=t.tabsMode,g=t.testIdBuilder,_=Array.isArray(d)&&d.length,v=g?.getChild(`add-button`);return K.createElement(K.default.Fragment,null,o.addable&&l!==!1&&(_?i(`add-button`,{type:`dropdown-button`,icon:u?K.createElement(f,{icon:`plus-fine`,className:`icon`}):``,label:p(s||`add`),level:`info`,size:`sm`,closeOnClick:!0,btnClassName:a,testIdBuilder:v},{buttons:d?.map(function(t){return{label:t.label,onClick:function(n){return e.addItemWith(t),!1}}})}):m?K.createElement(`a`,{onClick:this.addItem},u?K.createElement(f,{icon:`plus-fine`,className:`icon`}):null,K.createElement(`span`,null,p(s||`add`))):h(c)?i(`add-button`,n(n({},c),{type:`button`,testIdBuilder:v,onClick:function(){return e.addItem()}})):K.createElement(T,{className:r(`Combo-addBtn`,a),onClick:this.addItem,testIdBuilder:v},u?K.createElement(f,{icon:`plus-fine`,className:`icon`}):null,K.createElement(`span`,null,p(s||`add`)))))},a.prototype.renderMultipe=function(){var e=this;if(this.props.tabsMode)return this.renderTabsMode();var t=this.props;t.classPrefix;var r=t.classnames,i=t.multiLine,a=t.disabled,o=t.flat,s=t.draggable,c=t.draggableTip,u=t.typeSwitchable,d=t.delimiter,p=t.dragIcon,m=t.noBorder,h=t.conditions,g=t.placeholder,_=t.translate,v=t.itemClassName,y=t.itemsWrapperClassName,b=t.static,x=t.mobileUI,S=t.store,C=t.render,w=this.props.items,T=this.props.value;return o&&typeof T==`string`&&(T=T.split(d||`,`)),K.createElement(`div`,{className:r(`Combo Combo--multi`,{"is-mobile":x},i?`Combo--ver`:`Combo--hor`,m?`Combo--noBorder`:``,a?`is-disabled`:``,!b&&!a&&s&&Array.isArray(T)&&T.length>1?`is-draggable`:``)},K.createElement(`div`,{className:r(`Combo-items`,y)},Array.isArray(T)&&T.length?S.getRangeByPage(T).map(function(t,i,c){i+=S.offset;var d=e.renderDelBtn(t,i),m=e.formatValue(t,i),g=null;Array.isArray(h)&&h.length&&(g=e.pickCondition(m),w=g?g.items:void 0);var y=o&&w?[n(n({},w&&w[0]),{name:`flat`})]:w;return e.keys[i]||e.keys.splice(i,1,l()),K.createElement(`div`,{className:r(`Combo-item`,v,S.memberValidMap[i]===!1?`has-error`:``),key:e.keys[i]},!b&&!a&&s&&c.length>1?K.createElement(`div`,{className:r(`Combo-itemDrager`)},K.createElement(`a`,{key:`drag`,"data-tooltip":_(`Combo.dragDropSort`),"data-position":`bottom`},p?K.createElement(`i`,{className:p}):K.createElement(f,{icon:`drag-bar`,className:`icon`}))):null,g&&u!==!1?K.createElement(`div`,{className:r(`Combo-itemTag`)},K.createElement(`label`,null,_(`Combo.type`)),K.createElement(I,{onChange:e.handleComboTypeChange.bind(e,i),options:h.map(function(e){return{label:e.label,value:e.label}}),value:g.label,clearable:!1})):null,K.createElement(`div`,{className:r(`Combo-itemInner`)},y?e.renderItems(y,m,i,t):K.createElement(N,{level:`warning`,className:`m-b-none`},_(`Combo.invalidData`))),d)}):g?K.createElement(`div`,{className:r(`Combo-placeholder`)},_(g)):null),K.createElement(`div`,{className:r(`Combo-toolbar`)},!b&&!a?this.renderAddBtn():null,!b&&!a&&s?K.createElement(`span`,{className:r(`Combo-dragableTip`),ref:this.dragTipRef},Array.isArray(T)&&T.length>1?_(c):``):null,S.multiplePage&&Array.isArray(T)&&T.length>S.perPage?C(`pager`,{type:`pagination`},{activePage:S.page,perPage:S.perPage,total:Array.isArray(T)?T.length:0,onPageChange:S.changePage,className:`Combo-pager`,disabled:a}):null))},a.prototype.renderSingle=function(){var e=this.props,t=e.conditions,n=e.classnames,r=e.value,i=e.multiLine,a=e.noBorder,o=e.disabled,s=e.typeSwitchable,c=e.nullable,l=e.translate,u=e.itemClassName,d=e.mobileUI,f=e.store,p=this.props.items,m=h(r)?this.formatValue(r):this.formatValue(this.defaultValue),g=null;return Array.isArray(t)&&t.length&&(g=this.pickCondition(m),p=g?g.items:void 0),K.createElement(`div`,{className:n(`Combo Combo--single`,{"is-mobile":d},i?`Combo--ver`:`Combo--hor`,a?`Combo--noBorder`:``,o?`is-disabled`:``)},K.createElement(`div`,{className:n(`Combo-item`,u,f.memberValidMap[0]===!1?`has-error`:``)},g&&s!==!1?K.createElement(`div`,{className:n(`Combo-itemTag`)},K.createElement(`label`,null,l(`Combo.type`)),K.createElement(I,{onChange:this.handleComboTypeChange.bind(this,0),options:t.map(function(e){return{label:e.label,value:e.label}}),value:g.label,clearable:!1})):null,K.createElement(`div`,{className:n(`Combo-itemInner`)},p?this.renderItems(p,m):K.createElement(N,{level:`warning`,className:`m-b-none`},l(`Combo.invalidData`)))),r&&c?K.createElement(`a`,{className:n(`Combo-setNullBtn`),href:`#`,onClick:this.setNull},l(`clear`)):null)},a.prototype.renderItems=function(e,t,r,i){var a=this.props,o=a.classnames,s=a.formClassName,c=a.render,l=a.multiLine,u=a.disabled,d=a.canAccessSuperData,f=a.multiple,p=a.tabsMode,m=a.subFormMode,h=a.subFormHorizontal,g=a.changeImmediately,_=a.lazyLoad;a.translate;var v=a.static,y=a.testIdBuilder,b=a.updatePristineAfterStoreDataReInit,x=Array.isArray(e)?e.map(function(e,t){var i=r!==void 0&&r>=0?`-${r}`:``,a=`item-${e.testid||e.id||t}`+i;return n(n({},e),{testIdBuilder:y?.getChild(a)})}):e;if(f){if(f&&r!==void 0&&r>=0)return c(`multiple/${r}`,{type:`form`,body:x,wrapperComponent:`div`,wrapWithPanel:!1,mode:p||l?m:`row`,horizontal:h,className:o(`Combo-form`,s)},n(n({index:r,disabled:u,static:v,data:t,originData:i,onChange:this.handleChange,onInit:this.handleFormInit,onAction:this.handleAction,onRadioChange:this.handleRadioChange,ref:this.makeFormRef(r),onValidChange:this.handleSubFormValid,canAccessSuperData:d,lazyChange:!g,formLazyChange:!1,value:void 0,formItemValue:void 0,formStore:void 0},p?{}:{lazyLoad:_}),{updatePristineAfterStoreDataReInit:b??!1}))}else return c(`single`,{type:`form`,body:x,wrapperComponent:`div`,wrapWithPanel:!1,mode:l?m||`normal`:`row`,horizontal:h,className:o(`Combo-form`,s)},{index:0,disabled:u,static:v,data:t,originData:i,onChange:this.handleSingleFormChange,ref:this.makeFormRef(0),onValidChange:this.handleSubFormValid,onInit:this.handleSingleFormInit,canAccessSuperData:d,lazyChange:!g,formLazyChange:!1,value:void 0,formItemValue:void 0,formStore:void 0,updatePristineAfterStoreDataReInit:b??!1});return K.createElement(K.default.Fragment,null)},a.prototype.renderStatic=function(e){return e===void 0&&(e=`-`),this.props.render(`static-input-kv`,{type:`json`},this.props)},a.prototype.render=function(){var e=this.props,t=e.type,n=e.formInited,r=e.multiple,i=e.className;e.style,e.classPrefix;var a=e.classnames,o=e.static,s=e.staticSchema;return o&&(s||[`input-kv`,`input-kvs`].includes(t))?this.renderStatic():n||n===void 0?K.createElement(`div`,{className:a(`ComboControl`,i)},r?this.renderMultipe():this.renderSingle()):null},a.defaultProps={minLength:0,maxLength:1/0,multiple:!1,multiLine:!1,addButtonClassName:``,formClassName:``,subFormMode:`normal`,draggableTip:``,addButtonText:`add`,canAccessSuperData:!1,addIcon:!0,dragIcon:``,deleteIcon:``,tabsMode:!1,tabsStyle:``,placeholder:`placeholder.empty`,itemClassName:``,itemsWrapperClassName:``},a.propsList=`minLength.maxLength.multiple.multiLine.addButtonClassName.subFormMode.draggableTip.addButtonText.draggable.scaffold.canAccessSuperData.addIcon.dragIcon.deleteIcon.noBorder.conditions.tabsMode.tabsStyle.lazyLoad.changeImmediately.strictMode.items.conditions.messages.formStore.itemClassName.itemsWrapperClassName`.split(`.`),g([r,s(`design:type`,Function),s(`design:paramtypes`,[Number]),s(`design:returntype`,Promise)],a.prototype,`handleTabSelect`,null),g([r,s(`design:type`,Function),s(`design:paramtypes`,[Object]),s(`design:returntype`,void 0)],a.prototype,`setNull`,null),a}(K.Component),re=function(e){_(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setData=function(e,t,r,i){return B(this,void 0,void 0,function(){var t,a,o,s,c,l,u,f,p,m;return b(this,function(h){switch(h.label){case 0:return t=this.props,a=t.multiple,o=t.onChange,s=t.submitOnChange,a?(c=x([],d(this.getValueAsArray()),!1),l=c.length,r===void 0?[3,1]:(u=String(r).split(`,`),u.forEach(function(t){var r=Number(t);c.splice(r,1,n(n({},c[r]),e))}),o?.(c,s,!0),[3,7])):[3,8];case 1:if(i===void 0)return[3,6];f=0,h.label=2;case 2:return f<l?(p=c[f],[4,O(i,p)]):[3,5];case 3:m=h.sent(),m&&c.splice(f,1,n(n({},c[f]),e)),h.label=4;case 4:return f++,[3,2];case 5:return o?.(c,s,!0),[3,7];case 6:o?.(e,s,!0),h.label=7;case 7:return[3,9];case 8:o?.(e,s,!0),h.label=9;case 9:return[2]}})})},t=g([P({type:`combo`,storeType:E.name,extendsData:!1,shouldComponentUpdate:function(e,t){return j(e.maxLength)&&m(t.maxLength,t.data)!==m(e.maxLength,e.data)||j(e.minLength)&&m(t.minLength,t.data)!==m(e.minLength,e.data)}})],t),t}($),ie=function(e){_(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=g([P({type:`input-kv`,storeType:E.name,extendsData:!1})],t),t}($),ae=function(e){_(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=g([P({type:`input-kvs`,storeType:E.name,extendsData:!1})],t),t}($);export{re as ComboControlRenderer,ie as KVControlRenderer,ae as KVSControlRenderer,$ as default};