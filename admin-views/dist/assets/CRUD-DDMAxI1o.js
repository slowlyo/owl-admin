import{$o as e,Ao as t,Ar as n,Bn as r,Eo as i,Go as a,Hn as o,Hr as s,Ia as c,Ii as l,Io as u,Kn as d,Ko as f,La as p,Lo as m,Ma as h,Mo as g,Mr as _,No as v,Oa as y,Or as b,Pa as x,Po as S,Ua as C,Ur as w,Va as T,Vn as E,Wn as D,Yi as O,Zi as k,aa as A,ba as j,di as M,ea as N,ga as P,gn as F,hi as I,ia as L,ja as R,ji as z,jo as B,ka as V,kr as ee,la as te,n as ne,ni as H,oa as U,qo as re,ra as ie,si as W,so as ae,ti as oe,vn as se,wr as ce,xi as le,ya as G}from"./index-DAdqRbKX.js";import{t as ue}from"./omitBy-7xx87ptT.js";var de=re(((e,t)=>{t.exports=x()(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]})})),K=e(f()),q=e(T()),fe=e(ne()),pe=e(ue()),me=e(de()),he=e(w()),J=a(),Y=e(M()),X=e(I()),Z=e(i()),ge=e(C()),_e=[`selectedChange`,`columnSort`,`columnFilter`,`columnSearch`,`columnToggled`,`orderChange`,`rowClick`,`rowDbClick`,`rowMouseEnter`,`rowMouseLeave`,`selected`],Q=function(e){v(i,e);function i(t){var n=e.call(this,t)||this;n.filterOnEvent=(0,ge.default)(function(e){return(0,pe.default)(e,function(e,t){return!_e.includes(t)})}),n.controlRef=n.controlRef.bind(n),n.handleFilterReset=n.handleFilterReset.bind(n),n.handleFilterSubmit=n.handleFilterSubmit.bind(n),n.handleFilterInit=n.handleFilterInit.bind(n),n.handleAction=n.handleAction.bind(n),n.dispatchEvent=n.dispatchEvent.bind(n),n.handleBulkAction=n.handleBulkAction.bind(n),n.handleChangePage=n.handleChangePage.bind(n),n.handleBulkGo=n.handleBulkGo.bind(n),n.handleDialogConfirm=n.handleDialogConfirm.bind(n),n.handleDialogClose=n.handleDialogClose.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleSave=n.handleSave.bind(n),n.handleSaveOrder=n.handleSaveOrder.bind(n),n.handleSelect=n.handleSelect.bind(n),n.handleChildPopOverOpen=n.handleChildPopOverOpen.bind(n),n.handleChildPopOverClose=n.handleChildPopOverClose.bind(n),n.search=n.search.bind(n),n.silentSearch=n.silentSearch.bind(n),n.handleQuery=n.handleQuery.bind(n),n.renderHeaderToolbar=n.renderHeaderToolbar.bind(n),n.renderFooterToolbar=n.renderFooterToolbar.bind(n),n.clearSelection=n.clearSelection.bind(n),n.filterItemIndex=n.filterItemIndex.bind(n);var r=t.location,i=t.store,a=t.pageField,o=t.perPageField;t.totalField;var s=t.syncLocation;t.loadDataOnce;var c=n.getParseQueryOptions(t);n.mounted=!0,s&&r&&(r.query||r.search)?i.updateQuery(L(r,c),void 0,a,o):s&&!r&&window.location.search&&i.updateQuery(L(window.location,c),void 0,a,o),n.props.store.setFilterTogglable(!!n.props.filterTogglable,n.props.filterDefaultVisible),n.props.api&&n.props.store.updateData({items:[]});var u;return n.props.pickerMode&&(u=l(n.props))&&n.syncSelectedFromPicker(u),n}return i.prototype.componentDidMount=function(){var e=this.props,t=e.store,n=e.autoGenerateFilter,r=e.perPageField;e.columns,this.props.perPage&&!t.query[r||`perPage`]&&t.changePage(t.page,this.props.perPage),(!this.props.filter&&!n||t.filterTogglable&&!t.filterVisible)&&this.handleFilterInit({}),this.parentContainer=this.getClosestParentContainer()},i.prototype.componentDidUpdate=function(e){var t=this.props,n=e.store;le([`toolbar`,`headerToolbar`,`footerToolbar`,`bulkActions`],e,t)&&(this.renderHeaderToolbar=this.renderHeaderToolbar.bind(this),this.renderFooterToolbar=this.renderFooterToolbar.bind(this));var r;this.props.pickerMode&&!(0,q.default)(r=l(this.props),l(e))&&!(0,q.default)(r,n.selectedItems.concat())&&this.syncSelectedFromPicker(r),!!this.props.filterTogglable!=!!e.filterTogglable&&n.setFilterTogglable(!!t.filterTogglable,t.filterDefaultVisible);var i=!1;if(e.syncLocation&&e.location&&e.location.search!==t.location.search&&(n.updateQuery(L(t.location,this.getParseQueryOptions(t)),void 0,t.pageField,t.perPageField),i=!!(t.api&&O(n.query,this.lastQuery,!1))),!i){if(e.api&&t.api&&oe(e.api,t.api,n.fetchCtxOf(e.data,{pageField:e.pageField,perPageField:e.perPageField}),n.fetchCtxOf(t.data,{pageField:t.pageField,perPageField:t.perPageField})))i=!0;else if(!t.api&&j(t.source)&&t.data!==e.data){var a=p(t.source,t.data,`| raw`);(!this.lastData||this.lastData!==a)&&(n.initFromScope(t.data,t.source,{columns:n.columns??t.columns,totalField:t.totalField}),this.props.pickerMode&&(r=l(this.props))&&this.syncSelectedFromPicker(r),this.lastData=a)}}i&&this.search()},i.prototype.componentWillUnmount=function(){var e,t;this.mounted=!1,clearTimeout(this.timer),(t=(e=this.filterOnEvent.cache).clear)==null||t.call(e)},i.prototype.getParseQueryOptions=function(e){var t=e.parsePrimitiveQuery;return{parsePrimitive:!!(h(t)?t?.enable:t),primitiveTypes:t?.types??[`boolean`]}},i.prototype.getClosestParentContainer=function(){return(0,J.findDOMNode)(this)?.closest(`[role=dialog]`)},i.prototype.controlRef=function(e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.control=e},i.prototype.handleAction=function(e,t,r,i,a){var o=this;i===void 0&&(i=!1);var s=this.props,c=s.onAction,l=s.store,u=s.messages,d=s.pickerMode,f=s.env;s.pageField;var p=s.stopAutoRefreshWhenModalIsOpen;if(!l.loading)if(t.actionType===`dialog`){l.setCurrentAction(t,this.props.resolveDefinitions);var m=r.index,h=l.items.length;return p&&clearTimeout(this.timer),new Promise(function(e){l.openDialog(r,{hasNext:m<h-1,nextIndex:m+1,hasPrev:m>0,prevIndex:m-1,index:m},function(n,r){var i;(i=t.callback)==null||i.call(t,n,r),e({confirmed:n,value:r})},a||o.context)})}else if(t.actionType===`ajax`){l.setCurrentAction(t,this.props.resolveDefinitions);var g=r,_=t.redirect&&G(t.redirect,g);return _&&t.blank&&f.jumpTo(_,t,g),H(t.api,g)?l.saveRemote(t.api,g,{successMessage:t.messages&&t.messages.success||u&&u.saveSuccess,errorMessage:t.messages&&t.messages.failed||u&&u.saveFailed}).then(function(e){return B(o,void 0,void 0,function(){var i,a;return S(this,function(o){switch(o.label){case 0:return i=y(r,e),t.feedback&&k(t.feedback,i)?[4,this.openFeedback(t.feedback,i)]:[3,2];case 1:o.sent(),p&&clearTimeout(this.timer),o.label=2;case 2:return a=t.redirect&&G(t.redirect,i),a&&!t.blank&&f.jumpTo(a,t,i),t.reload?this.reloadTarget(n(t.reload,i),i):a||this.search(void 0,void 0,!0,!0),t.close&&this.closeTarget(t.close),[2]}})})}).catch(function(e){if(i||t.countDown)throw e}):void 0}else if(t.actionType===`reload`&&!t.target)this.reload();else if(d&&(t.actionType===`confirm`||t.actionType===`submit`))return l.setCurrentAction(t,this.props.resolveDefinitions),Promise.resolve({items:l.selectedItems.concat()});else if(t.onClick){l.setCurrentAction(t,this.props.resolveDefinitions);var v=t.onClick;typeof v==`string`&&(v=W(v,`event`,`props`,`data`)),v&&v(e,this.props,r)}else c(e,t,r,i,a||this.context)},i.prototype.handleBulkAction=function(e,r,i,a){var o=this,s=this.props,c=s.store,l=s.primaryField,u=s.onAction,d=s.messages,f=s.pageField,p=s.stopAutoRefreshWhenModalIsOpen,m=s.env;if(!(!e.length&&a.requireSelected!==!1)){var h=e.map(function(e){return e.hasOwnProperty(l)?e[l]:null}).filter(function(e){return e}).join(`,`),g=V([c.mergedData,{event:i},t(t(t({},e[0]),c.eventContext),{currentPageData:(c.mergedData?.items||[]).concat(),rows:e,items:e,ids:h})]),_=function(){if(a.actionType===`dialog`)return o.handleAction(i,t(t({},a),{__from:`bulkAction`}),g);a.actionType===`ajax`?H(a.api,g)&&c.saveRemote(a.api,g,{successMessage:a.messages&&a.messages.success||d&&d.saveSuccess,errorMessage:a.messages&&a.messages.failed||d&&d.saveFailed}).then(function(e){return B(o,void 0,void 0,function(){var t,r,i;return S(this,function(o){switch(o.label){case 0:return t=y(g,e),a.feedback&&k(a.feedback,t)?[4,this.openFeedback(a.feedback,t)]:[3,2];case 1:o.sent(),p&&clearTimeout(this.timer),o.label=2;case 2:return a.reload?this.reloadTarget(n(a.reload,t),t):this.search((i={},i[f||`page`]=1,i),void 0,!0,!0),a.close&&this.closeTarget(a.close),r=a.redirect&&G(a.redirect,t),r&&m.jumpTo(r,a,t),[2]}})})}).catch(function(){return null}):u&&u(i,a,g,!1,o.context)},v=``;!a.ignoreConfirm&&a.confirmText&&m.confirm&&(v=G(a.confirmText,g))?m.confirm(v,G(a.confirmTitle,g)||void 0).then(function(e){return e&&_()}):_()}},i.prototype.handleItemAction=function(e,t){this.doAction(e,t)},i.prototype.handleFilterInit=function(e){var n=this.props,r=n.defaultParams,i=n.columns,a=n.matchFunc,o=n.store,s=n.orderBy,c=n.orderDir,u=n.totalField;n.dispatchEvent;var d=t({},r);s&&(d.orderBy=s,d.orderDir=c||`asc`),this.handleFilterSubmit(t(t(t({},d),e),o.query),!1,!0,this.props.initFetch!==!1,!0),o.setPristineQuery();var f=this.props,p=f.pickerMode,m=f.options;if(p){o.initFromScope({items:m||[]},"${items}",{columns:o.columns??i,matchFunc:a,totalField:u});var h=void 0;(h=l(this.props))&&this.syncSelectedFromPicker(h)}},i.prototype.handleFilterReset=function(e,n){var r=this.props,i=r.store,a=r.syncLocation,o=r.env,s=r.pageField,c=r.perPageField,l={};Object.keys(e).forEach(function(e){return l[e]=``}),i.updateQuery(t(t({},l),i.pristineQuery),a&&o&&o.updateLocation?function(e){return o.updateLocation(e)}:void 0,s,c,!0),this.lastQuery=i.query,!(n?.actionType&&[`reset-and-submit`,`clear-and-submit`,`submit`].includes(n.actionType))&&this.search()},i.prototype.handleFilterSubmit=function(e,n,r,i,a){var o;n===void 0&&(n=!0),r===void 0&&(r=!1),i===void 0&&(i=!0),a===void 0&&(a=!1);var s=this.props,c=s.store,l=s.syncLocation,u=s.env,d=s.pageField,f=s.perPageField,p=s.loadDataOnceFetchOnFilter,m=s.parsePrimitiveQuery,h=this.getParseQueryOptions(this.props);e=t(t({},e),(0,fe.default)(e?.__super?.diff??{},function(e){return e===void 0})),e=l?A(U(e,void 0,!0)):e,m&&(e=ie(e,h)),c.updateQuery(t(t({},e),(o={},o[d||`page`]=n?1:c.page,o)),l&&u&&u.updateLocation?function(e){return u.updateLocation(e,r)}:void 0,d,f),this.lastQuery=c.query,i&&this.search(void 0,void 0,void 0,p!==!1,a)},i.prototype.handleBulkGo=function(e,t,n){var r=this,i=this.props.store.selectedAction,a=this.props.env,o=``;return i.confirmText&&(o=G(i.confirmText,this.props.store.mergedData))?a.confirm(o).then(function(a){return a&&r.handleBulkAction(e,t,n,i)}):this.handleBulkAction(e,t,n,i)},i.prototype.handleDialogConfirm=function(e,r,i,a){var o,s=this.props,c=s.store,l=s.pageField,u=s.stopAutoRefreshWhenModalIsOpen,d=s.interval,f=s.silentPolling,p=s.env;c.closeDialog(!0,e);var m=c.action;if(u&&d&&(this.timer=setTimeout(f?this.silentSearch:this.search,Math.max(d,1e3))),r.actionType===`next`&&typeof i.nextIndex==`number`&&c.data.items[i.nextIndex])return this.handleAction(void 0,t({},m),y(y(c.data,{index:i.nextIndex}),c.data.items[i.nextIndex]));if(r.actionType===`prev`&&typeof i.prevIndex==`number`&&c.data.items[i.prevIndex])return this.handleAction(void 0,t({},m),y(y(c.data,{index:i.prevIndex}),c.data.items[i.prevIndex]));if(e.length){var h=e[0];i=y(i,h);var g=a[0];g&&g.props.type===`form`&&(h&&h.__saved?(r.reload??m.reload)||this.search(m.__from?(o={},o[l||`page`]=1,o):void 0,void 0,!0,!0):h&&(h.hasOwnProperty(`items`)&&h.items||h.hasOwnProperty(`ids`))&&this.control.bulkUpdate&&this.control.bulkUpdate(h,h.items))}var _=r.reload??m.reload;_&&this.reloadTarget(n(_,i),i);var v=r.redirect??m.redirect;v&&=G(v,i),v&&p.jumpTo(v,m,i)},i.prototype.handleDialogClose=function(e){e===void 0&&(e=!1);var t=this.props,n=t.store,r=t.stopAutoRefreshWhenModalIsOpen,i=t.silentPolling,a=t.interval;n.closeDialog(e),r&&a&&(this.timer=setTimeout(i?this.silentSearch:this.search,Math.max(a,1e3)))},i.prototype.openFeedback=function(e,t){var n=this;return new Promise(function(r){var i=n.props.store;i.setCurrentAction({type:`button`,actionType:`dialog`,dialog:e},n.props.resolveDefinitions),i.openDialog(t,void 0,function(e){r(e)},n.context)})},i.prototype.search=function(e,n,r,i,a){return i===void 0&&(i=!1),a===void 0&&(a=!1),B(this,void 0,void 0,function(){var o,s,c,u,d,f,p,m,h,g,_,v,b,x,C,w,T,E,D,O,k,A,j,M,N,F,I,L,R,z,z,B,V;return S(this,function(S){switch(S.label){case 0:return o=this.props,s=o.store,c=o.api,u=o.messages,d=o.pageField,f=o.perPageField,p=o.totalField,m=o.interval,h=o.stopAutoRefreshWhen,g=o.stopAutoRefreshWhenModalIsOpen,_=o.silentPolling,v=o.syncLocation,b=o.syncResponse2Query,x=o.pickerMode,C=o.env,w=o.loadDataOnce,T=o.loadDataOnceFetchOnFilter,E=o.source,D=o.columns,O=o.dispatchEvent,k=o.options,r&&!x&&s.resetSelection(),A=``,e&&typeof e.loadDataMode==`string`&&(A=`load-more`,delete e.loadDataMode),clearTimeout(this.timer),e&&s.updateQuery(e,!A&&v&&C&&C.updateLocation?C.updateLocation:void 0,d,f),this.lastQuery=s.query,j=y(s.data,s.query),M=this.props?.matchFunc&&typeof this.props.matchFunc==`string`?W(this.props.matchFunc,`items`,`itemsRaw`,`options`):void 0,H(c,j)?[4,s.fetchInitData(c,j,{successMessage:u&&u.fetchSuccess,errorMessage:u&&u.fetchFailed,autoAppend:!0,forceReload:i,loadDataOnce:w,source:E,silent:n,pageField:d,perPageField:f,totalField:p,loadDataMode:A,syncResponse2Query:b,columns:s.columns??D,matchFunc:M,filterOnAllColumns:T===!1,minLoadingTime:e?.minLoadingTime,dataAppendTo:e?.dataAppendTo})]:[3,8];case 1:return N=S.sent(),ae(s)?(F=s.page,I=s.lastPage,L=s.msg,R=s.error,a?[4,O?.(`fetchInited`,y(this.props.data,{responseData:N?.ok?s.data??{}:N,responseStatus:N?.status===void 0?R?1:0:N?.status,responseMsg:L}))]:[3,3]):[2,N];case 2:return z=S.sent(),z?.prevented?[2,s.data]:[3,5];case 3:return[4,O?.(`research`,y(this.props.data,{responseData:N?.ok?s.data??{}:N,responseStatus:N?.status===void 0?R?1:0:N?.status,responseMsg:L}))];case 4:if(z=S.sent(),z?.prevented)return[2,s.data];S.label=5;case 5:return!w&&!s.data.items.length&&!m&&F>1&&I<F?[4,this.search(t(t({},s.query),(V={},V[d||`page`]=I,V)),!1,void 0)]:[3,7];case 6:S.sent(),S.label=7;case 7:return N!=null&&N.ok&&m&&this.mounted&&(!h||!(g&&s.hasModalOpened||P(h,y(s.data,s.query))))&&(this.timer=setTimeout(_?this.silentSearch.bind(this,void 0,void 0,!0):this.search.bind(this,void 0,void 0,void 0,!0),Math.max(m,1e3))),[3,9];case 8:E?s.initFromScope(j,E,{columns:s.columns??D,matchFunc:M,totalField:p}):x&&s.initFromScope({items:k||[]},"${items}",{columns:s.columns??D,matchFunc:M,totalField:p}),S.label=9;case 9:return this.props.pickerMode&&this.props.onSelect&&(B=l(this.props))&&this.syncSelectedFromPicker(B),[2,s.data]}})})},i.prototype.silentSearch=function(e,t,n){return n===void 0&&(n=!1),this.search(e,!0,t,n)},i.prototype.handleChangePage=function(e,t,n){return B(this,void 0,void 0,function(){var i,a,o,s,c,l,u,d,f,p,m,h,g,_,v;return S(this,function(y){switch(y.label){case 0:return i=this.props,a=i.store,o=i.syncLocation,s=i.env,c=i.pageField,l=i.perPageField,u=i.pageDirectionField,d=i.autoJumpToTopOnPagerChange,f=i.translate,p=i.api,m=i.loadDataOnce,p&&!m&&this.control?.hasModifiedItems()?[4,r(f(`CRUD.confirmLeaveUnSavedPage`))]:[3,2];case 1:if(h=y.sent(),!h)return[2];y.label=2;case 2:return g=(v={},v[c||`page`]=e,v),n&&(g[u||`pageDir`]=n),t&&(g[l||`perPage`]=t),a.updateQuery(g,o&&s?.updateLocation?s.updateLocation:void 0,c,l),this.search(void 0,void 0,void 0),d&&this.control&&(this.control.scrollToTop?this.control.scrollToTop():((0,J.findDOMNode)(this.control).scrollIntoView(),_=window.scrollY,_&&window.scroll(0,_))),[2]}})})},i.prototype.syncSelectedFromPicker=function(e){var t=this.props,n=t.store,r=t.primaryField,i=t.strictMode,a=function(e,t){var n=e[r||`id`],a=t[r||`id`];return!!(e===t||n&&(i?n===a:n==a))},o=e.map(function(e){var t;return(0,Z.default)(e)||(e=(t={},t[r||`id`]=e,t)),z(n.items,function(t){return a(t,e)})||e});this.props.store.setSelectedItems(o)},i.prototype.handleItemChange=function(e,t,n){var r=this.props.store,i=`${n}`.split(`.`).map(function(e){return parseInt(e,10)}),a=te(r.items,i,1,e);r.replaceItems(a)},i.prototype.handleSave=function(e,t,r,i,a,o){var s=this,c=this.props,l=c.store,u=c.quickSaveApi,d=c.quickSaveItemApi,f=c.primaryField,p=c.env,m=c.messages,h=c.reload,g=c.dispatchEvent;if(Array.isArray(e)){if(!H(u)){p&&p.alert(`CRUD quickSaveApi is required`);return}var _=y(l.data,{rows:e,rowsDiff:t,indexes:r,rowsOrigin:a});return e.length&&e[0].hasOwnProperty(f||`id`)&&(_.ids=e.map(function(e){return e[f||`id`]}).join(`,`)),i&&(_.unModifiedItems=i),l.saveRemote(u,_,{successMessage:m&&m.saveFailed,errorMessage:m&&m.saveSuccess}).then(function(e){return B(s,void 0,void 0,function(){var t,r;return S(this,function(i){switch(i.label){case 0:return e?[4,g?.(`quickSaveSucc`,R(_,{result:e}))]:[2];case 1:return t=i.sent(),t?.prevented?[2]:(r=o?.reload??h,[2,r?this.reloadTarget(n(r,_),_):this.search(void 0,void 0,!0,!0)])}})})}).catch(function(e){return B(s,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return[4,g?.(`quickSaveFail`,y(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})}else{if(!H(d)){p&&p.alert(`CRUD quickSaveItemApi is required!`);return}var v=y(l.data,{item:e,modified:t,origin:a}),b=y(v,e);return l.saveRemote(d,b).then(function(e){return B(s,void 0,void 0,function(){var t,r;return S(this,function(i){switch(i.label){case 0:return e?[4,g?.(`quickSaveItemSucc`,R(v,{result:e}))]:[2];case 1:return t=i.sent(),t?.prevented?[2]:(r=o?.reload??h,[2,r?this.reloadTarget(n(r,v),v):this.search(void 0,void 0,!0,!0)])}})})}).catch(function(e){return B(s,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return o!=null&&o.resetOnFailed&&this.control.reset(),[4,g?.(`quickSaveItemFail`,y(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})}},i.prototype.handleSaveOrder=function(e,t){var r=this,i=this.props,a=i.store,o=i.saveOrderApi,s=i.orderField,c=i.primaryField,l=i.env,u=i.reload,d=i.dispatchEvent;if(!o){l&&l.alert(`CRUD saveOrderApi is required!`);return}var f=y(a.data),p,m,h=[],g=c&&t[0]&&t[0].hasOwnProperty(c);if(g||(f.idMap={}),f.insertAfter={},t.forEach(function(n){if(~e.indexOf(n))if(p){var r=g?p[c]:t.indexOf(p);f.insertAfter[r]=f.insertAfter[r]||[],g||(f.idMap[r]=p),f.insertAfter[r].push(g?n[c]:n)}else h.push(n);else p=n,m||=n}),m&&h.length){var _=g?m[c]:t.indexOf(m);g||(f.idMap[_]=m),f.insertBefore={},f.insertBefore[_]=h.map(function(e){return g?e[c]:e})}else if(h.length){var v=h[0],b=g?v[c]:t.indexOf(v);g||(f.idMap[b]=v),f.insertAfter[b]=h.slice(1).map(function(e){return g?e[c]:e})}if(s){var x=(a.page-1)*a.perPage||0;t=N(t,function(e,t,n){var r;return R(e,(r={},r[s]=(n===1?x:0)+t+1,r))})}if(f.rows=t.concat(),g){var C=function(e){return e.map(function(e){return`${e[c]}${Array.isArray(e.children)&&e.children.length?`[${C(e.children)}]`:``}`}).join(`,`)};f.ids=C(t),s&&(f.order=N(t,function(e){return(0,he.default)(e,[c,s,`children`])}))}return H(o,f)&&a.saveRemote(o,f).then(function(e){return B(r,void 0,void 0,function(){var t;return S(this,function(r){switch(r.label){case 0:return e?[4,d?.(`saveOrderSucc`,R(f,{result:e}))]:[2];case 1:return t=r.sent(),t?.prevented?[2]:(u&&this.reloadTarget(n(u,f),f),this.search(void 0,void 0,!0,!0),[2])}})})}).catch(function(e){return B(r,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return[4,d?.(`saveOrderFail`,y(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})},i.prototype.handleSelect=function(e,t){var n=this.props,r=n.store,i=n.keepItemSelectionOnPageChange,a=n.primaryField,o=n.multiple,s=n.pickerMode,c=n.strictMode,l=n.onSelect,u=e;if(i&&r.selectedItems.length){var d=r.items.length>e.length+t.length?function(e,t){return(e.__pristine||e)===(t.__pristine||t)}:function(e,t){var n=e[a||`id`],r=t[a||`id`];return e===t||n&&(c?n===r:n==r)},f=e.concat();u=r.selectedItems.map(function(e){var n=f.findIndex(function(t){return d(t,e)});return~n?f.splice(n,1)[0]:z(t,function(t){return d(t,e)})?null:e}).filter(function(e){return e}).concat(f)}var p=r.items.filter(function(e){return!u.find(function(t){return(t.__pristine||t)===e})}).map(function(e){return t.find(function(t){return t.__pristine===e})||e});s&&o===!1&&u.length>1&&p.push.apply(p,u.splice(0,u.length-1)),r.setSelectedItems(u),r.setUnSelectedItems(p),l&&l(u,p)},i.prototype.handleChildPopOverOpen=function(e){this.props.interval&&e&&~[`dialog`,`drawer`].indexOf(e.mode)&&(this.props.stopAutoRefreshWhenModalIsOpen&&clearTimeout(this.timer),this.props.store.setInnerModalOpened(!0))},i.prototype.handleChildPopOverClose=function(e){var t=this.props,n=t.stopAutoRefreshWhenModalIsOpen,r=t.silentPolling,i=t.interval;e&&~[`dialog`,`drawer`].indexOf(e.mode)&&(this.props.store.setInnerModalOpened(!1),n&&i&&(this.timer=setTimeout(r?this.silentSearch:this.search,Math.max(i,1e3))))},i.prototype.handleQuery=function(e,n,r,i,a){var o,s=this.props,c=s.store,l=s.syncLocation,u=s.env,d=s.pageField,f=s.perPageField,p=s.loadDataOnceFetchOnFilter;return c.updateQuery(i?t((o={},o[d||`page`]=1,o),e):e,l&&u&&u.updateLocation?u.updateLocation:void 0,d,f,r),this.search(void 0,void 0,a??r,n??p===!0)},i.prototype.reload=function(e,t,n,r,i,a){return t?this.receive(t,void 0,i,a?.resetPage,!0):this.search(void 0,void 0,!0,!0)},i.prototype.receive=function(e,t,n,r,i){return this.handleQuery(e,!0,n,r,i)},i.prototype.reloadTarget=function(e,t){},i.prototype.closeTarget=function(e){},i.prototype.doAction=function(e,t,n,r){return n===void 0&&(n=!1),B(this,void 0,void 0,function(){var i,a,o;return S(this,function(s){switch(s.label){case 0:return i=this.props.store,e.actionType&&[`submitQuickEdit`,`toggleExpanded`,`setExpanded`,`initDrag`,`cancelDrag`,`selectAll`,`clearAll`].includes(e.actionType)?[2,this.control?.doAction(e,t,n,r)]:[3,1];case 1:return e.actionType===`select`?[4,_(i.items,t,r?.index,r?.condition)]:[3,3];case 2:return a=s.sent(),o=i.items.filter(function(e){return!a.includes(e)}),[2,this.handleSelect(a,o)];case 3:return[2,this.handleAction(void 0,e,t,n)]}})})},i.prototype.dispatchEvent=function(e,t,n,r){if(e===`selectedChange`&&this.control===n){var i=this.props.store;t.selectedItems=i.selectedItems.concat(),t.unSelectedItems=i.unSelectedItems.concat()}return this.props.dispatchEvent(e,t,n,r)},i.prototype.unSelectItem=function(e,t){var n=this.props.store,r=n.selectedItems.concat(),i=n.unSelectedItems.concat(),a=r.indexOf(e);~a&&i.push.apply(i,r.splice(a,1)),n.setSelectedItems(r),n.setUnSelectedItems(i)},i.prototype.clearSelection=function(){var e=this.props,t=e.store,n=e.itemCheckableOn,r=u((0,me.default)(t.selectedItems,function(e){return!n||P(n,e)}),2),i=r[0],a=r[1],o=t.unSelectedItems.concat(i);t.setSelectedItems(a),t.setUnSelectedItems(o)},i.prototype.hasBulkActionsToolbar=function(){var e=this.props,t=e.headerToolbar,n=e.footerToolbar;if(e.enableBulkActions===!1)return!1;var r=function(e){return~[`bulkActions`,`bulk-actions`].indexOf(e.type||e)};return Array.isArray(t)&&(0,X.default)(t,r)||Array.isArray(n)&&(0,X.default)(n,r)},i.prototype.hasBulkActions=function(){var e=this.props,n=e.bulkActions;e.itemActions;var r=e.store;if(!n||!n.length)return!1;var i=[],a=r.mergedData;return n&&n.length&&(i=n.map(function(e){return t(t({},e),b(e,a))}).filter(function(e){return!e.hidden&&e.visible!==!1})),i.length},i.prototype.renderBulkActions=function(e){var n=this,r=this.props,i=r.bulkActions,a=r.itemActions,o=r.store,s=r.render,c=r.classnames,l=r.primaryField,u=r.enableBulkActions;if(!i||!i.length||u===!1)return null;var d=o.selectedItems,f=o.unSelectedItems,p=[],m=[],h=y(o.mergedData,t(t({currentPageData:(o.mergedData?.items||[]).concat()},o.eventContext),{rows:d.concat(),items:d.concat(),ids:d.map(function(e){return e.hasOwnProperty(l)?e[l]:null}).filter(function(e){return e}).join(`,`)}));i&&i.length&&(!a||!a.length||d.length>1)&&(p=i.map(function(e){return t(t({},e),b(e,h))}).filter(function(e){return!e.hidden&&e.visible!==!1}));var g=y(o.data,d.length?d[0]:{});return a&&d.length<=1&&(m=a.map(function(e){return t(t({},e),b(e,g))}).filter(function(e){return!e.hidden&&e.visible!==!1})),p.length||m.length?K.createElement(`div`,{className:c(`Crud-actions`)},p.map(function(e,r){return s(`bulk-action/${r}`,t(t({},(0,Y.default)(e,[`visibleOn`,`hiddenOn`,`disabledOn`])),{type:e.type||`button`}),{key:`bulk-${r}`,data:h,disabled:e.disabled||(e.requireSelected===!1?!1:!d.length),onAction:n.handleBulkAction.bind(n,d.concat(),f.concat()),ignoreConfirm:!0})}),m.map(function(e,r){return s(`bulk-action/${r}`,t(t({},(0,Y.default)(e,[`visibleOn`,`hiddenOn`,`disabledOn`])),{type:`button`}),{key:`item-${r}`,data:g,disabled:e.disabled||d.length!==1,onAction:n.handleItemAction.bind(n,e,g)})})):null},i.prototype.renderPagination=function(e){var n=this.props,r=n.store,i=n.render,a=n.classnames,o=n.alwaysShowPagination,s=n.perPageAvailable,c=n.testIdBuilder,l=r.page,u=r.lastPage;if(r.mode!==`simple`&&r.lastPage<2&&!o)return null;var d={};if(Array.isArray(s)&&(d.perPageAvailable=s),typeof e!=`string`){Object.assign(d,e);var f=e.showPageInput;d.showPageInput=f===!0||u>9&&f==null,d.total=p(e.total,r.data)}else d.showPageInput=u>9;return K.createElement(`div`,{className:a(`Crud-pager`)},i(`pagination`,{type:`pagination`,testIdBuilder:c?.getChild(`pagination`)},t(t({},d),{activePage:l,lastPage:u,hasNext:r.hasNext,mode:r.mode,perPage:r.perPage,popOverContainer:this.parentContainer,onPageChange:this.handleChangePage})))},i.prototype.renderStatistics=function(){var e=this.props,t=e.store,n=e.classnames,r=e.translate,i=e.alwaysShowPagination;return t.lastPage<=1&&!i?null:K.createElement(`div`,{className:n(`Crud-statistics`)},r(`CRUD.stat`,{page:t.page,lastPage:t.lastPage,total:t.total}))},i.prototype.renderSwitchPerPage=function(e){var t=this,n=this.props,r=n.mobileUI,i=n.store,a=n.perPageAvailable,o=n.classnames,s=n.classPrefix,c=n.translate,l=n.testIdBuilder;if(!e.items.length)return null;var u=r?(a||[5,10,20,50,100]).map(function(e){return{label:e+` 条/页`,value:e+``}}):(a||[5,10,20,50,100]).map(function(e){return{label:e,value:e+``}});return K.createElement(`div`,{className:o(`Crud-pageSwitch`)},r?null:K.createElement(`span`,null,c(`CRUD.perPage`)),K.createElement(F,{classPrefix:s,searchable:!1,placeholder:c(`Select.placeholder`),options:u,value:i.perPage+``,onChange:function(e){return t.handleChangePage(1,e.value)},clearable:!1,popOverContainer:this.parentContainer,testIdBuilder:l?.getChild(`perPage`)}))},i.prototype.renderLoadMore=function(){var e=this,t=this.props,n=t.store;t.classPrefix;var r=t.classnames;t.translate,t.testIdBuilder;var i=t.loadMoreProps,a=i===void 0?{}:i,s=n.page,c=n.lastPage,l=a.showIcon,u=l===void 0?!0:l,d=a.showText,f=d===void 0?!0:d,p=a.iconType,m=p===void 0?`loading-outline`:p,h=a.contentText,g=h===void 0?{contentdown:`点击加载更多`,contentrefresh:`加载中...`,contentnomore:`没有更多数据了`}:h,_=a.minLoadingTime,v=a.dataAppendTo,y=a.color,b=n.loading,x=s>=c;return K.createElement(`div`,{className:r(`Crud-loadMore`),style:y?{"--Spinner-color":y,color:y}:void 0,onClick:function(){b||x||e.search({page:s+1,loadDataMode:`load-more`,minLoadingTime:_,dataAppendTo:v})}},u&&K.createElement(o,{show:b,icon:m,size:`sm`}),f&&K.createElement(`span`,null,b?g.contentrefresh:x?g.contentnomore:g.contentdown))},i.prototype.renderFilterToggler=function(){var e=this.props,n=e.store,r=e.classnames,i=e.translate,a=e.filterTogglable;if(!n.filterTogglable)return null;var o=(0,Z.default)(a)?t({},a):{};return n.filterVisible&&(o.icon=o.activeIcon??o.icon,o.label=o.activeLabel??o.label),K.createElement(`button`,{onClick:function(){return n.setFilterVisible(!n.filterVisible)},className:r(`Button Button--size-default Button--default`,{"is-active":n.filterVisible})},o.icon?K.createElement(d,{icon:o.icon,className:`icon m-r-xs`}):o?.icon===!1?null:K.createElement(d,{icon:`filter`,className:`icon m-r-xs`}),o?.label??i(`CRUD.filter`))},i.prototype.renderExportCSV=function(e){var t=this.props,n=t.store,r=t.classPrefix,i=t.translate,a=t.loadDataOnce,o=e.api,s=e.filename;return K.createElement(E,{classPrefix:r,onClick:function(){return n.exportAsCSV({loadDataOnce:a,api:o,filename:s,data:n.filterData})}},e.label||i(`CRUD.exportCSV`))},i.prototype.renderToolbar=function(e,n,r,i){var a=this;if(n===void 0&&(n=0),r===void 0&&(r={}),!e)return null;var o=this.props,s=o.render,c=o.store,l=o.mobileUI,u=o.translate,d=o.testIdBuilder,f=e.type||e;if(f===`bulkActions`||f===`bulk-actions`)return this.renderBulkActions(r);if(f===`pagination`)return this.renderPagination(e);if(f===`statistics`)return this.renderStatistics();if(f===`switch-per-page`)return this.renderSwitchPerPage(r);if(f===`load-more`)return this.renderLoadMore();if(f===`filter-toggler`)return this.renderFilterToggler();if(f===`export-csv`)return this.renderExportCSV(e);if(f===`reload`){var p={label:``,icon:`fa fa-sync`,tooltip:u(`reload`),tooltipPlacement:`top`,type:`button`};return typeof e==`object`&&(p=t(t({},p),(0,Y.default)(e,[`type`,`align`]))),s(`toolbar/${n}`,p,{onAction:function(){a.reload()}})}else if(Array.isArray(e)){var m=e.filter(function(e){return k(e,c.toolbarData)}).map(function(e,t){return{dom:a.renderToolbar(e,t,r,i),toolbar:e}}).filter(function(e){return e.dom}),h=m.length,g=this.props.classnames;return h?K.createElement(`div`,t({className:g(`Crud-toolbar`),key:n},d?.getChild(`toolbar`).getTestId()),m.map(function(e,t){var n=e.toolbar,r=e.dom,i=n.type||n,a=n.align||(i===`pagination`?`right`:`left`);return K.createElement(`div`,{key:n.id||t,className:g(`Crud-toolbar-item`,a?`Crud-toolbar-item--${a}`:``,{"is-mobile":l})},r)})):null}var _=i?i(e,n):void 0;if(_!==void 0)return _;var v=r.$$editable;return s(`toolbar/${n}`,e,{data:c.toolbarData,page:c.page,lastPage:c.lastPage,perPage:c.perPage,total:c.total,onQuery:this.handleQuery,onAction:this.handleAction,onChangePage:this.handleChangePage,onBulkAction:this.handleBulkAction,$$editable:v})},i.prototype.renderHeaderToolbar=function(e,t){var n=this.props,r=n.toolbar,i=n.toolbarInline,a=n.headerToolbar;return r&&(a=Array.isArray(a)?i?a.concat(r):[a,r]:a?[a,r]:r),this.renderToolbar(a||[],0,e,t)},i.prototype.renderFooterToolbar=function(e,t){var n=this.props,r=n.toolbar,i=n.toolbarInline,a=n.footerToolbar;return r&&(a=Array.isArray(a)?i?a.concat(r):[a,r]:a?[a,r]:r),this.renderToolbar(a,0,e,t)},i.prototype.renderTag=function(e,t){var n=this.props,r=n.classnames,i=n.labelField,a=n.labelTpl,o=n.primaryField,s=n.valueField;n.translate;var l=n.env,u=n.itemCheckableOn,d=u?P(u,e):!0;return K.createElement(`div`,{key:t,className:r(`Crud-value`,d?``:`is-disabled`)},K.createElement(`span`,{className:r(`Crud-valueIcon`),onClick:this.unSelectItem.bind(this,e,t)},`×`),K.createElement(`span`,{className:r(`Crud-valueLabel`)},a?K.createElement(D,{html:G(a,e),filterHtml:l.filterHtml}):c(e,i||`label`)||c(e,s||o||`id`)))},i.prototype.renderSelection=function(){var e=this,n=this.props,r=n.store;n.classPrefix;var i=n.classnames;n.labelField,n.labelTpl,n.primaryField,n.valueField;var a=n.translate;n.env;var o=n.popOverContainer,s=n.multiple,c=n.maxTagCount,l=n.overflowTagPopover,u=n.keepItemSelectionOnPageChange;if(!r.selectedItems.length||!u||s===!1)return null;var d=r.selectedItems,f=s!==!1&&typeof c==`number`&&c>0,p=t({offset:[0,-10],tooltipClassName:i(`Crud-selection-overflow`,l?.tooltipClassName),title:a(`已选项`)},(0,Y.default)(l,[`children`,`content`,`tooltipClassName`]));return K.createElement(`div`,{className:i(`Crud-selection`)},K.createElement(`div`,{"data-folder-ignore":!0,className:i(`Crud-selectionLabel`)},a(`CRUD.selected`,{total:r.selectedItems.length})),K.createElement(se,{enabled:!!f,tooltipClassName:i(`Crud-selection-overflow-wrapper`),items:d,popOverContainer:o,tooltipOptions:p,maxVisibleCount:c,renderItem:function(t,n,r){return e.renderTag(t,n)}}),K.createElement(`a`,{onClick:this.clearSelection,className:i(`Crud-selectionClear`)},a(`clear`)))},i.prototype.renderFilter=function(){var e=this.props,n=e.store,r=e.render,i=e.classnames,a=e.filter,o=e.translate,s=e.testIdBuilder,c=e.filterCanAccessSuperData,l=c===void 0?!0:c;return!a||n.filterTogglable&&!n.filterVisible?null:r(`filter`,t(t({title:o(`CRUD.filter`),mode:`inline`,submitText:o(`search`)},a),{type:`form`,api:null,testIdBuilder:s?.getChild(`filter`)}),{key:`filter`,panelClassName:i(`Crud-filter`,a.panelClassName||`Panel--default`),data:n.filterData,onReset:this.handleFilterReset,onSubmit:this.handleFilterSubmit,onInit:this.handleFilterInit,formStore:void 0,canAccessSuperData:a?.canAccessSuperData??l})},i.prototype.filterItemIndex=function(e){var t=this.props.store,n=`${e}`.split(`.`).map(function(e){return parseInt(e,10)});if(!Array.isArray(t.data.items))return e;var r=t.data.items?.[n[0]];return r&&(n[0]=t.items.findIndex(function(e){return(e.__pristine||e)===(r.__pristine||r)})),n.join(`.`)},i.prototype.filterBodySchema=function(e){return e},i.prototype.renderBody=function(){var e=this.props;e.className,e.style;var n=e.bodyClassName,r=e.filter,i=e.render,a=e.store,o=e.mode;e.syncLocation,e.children;var s=e.bulkActions,c=e.pickerMode,l=e.multiple,u=e.strictMode,d=e.valueField,f=e.primaryField;e.value;var p=e.hideQuickSaveBtn,h=e.itemActions,g=e.classnames,_=e.keepItemSelectionOnPageChange,v=e.maxKeepItemSelectionLength,y=e.maxItemSelectionLength;e.onAction;var b=e.popOverContainer;e.translate,e.onQuery;var x=e.autoGenerateFilter;e.onSelect;var S=e.autoFillHeight,C=e.onEvent;e.onSave,e.onSaveOrder,e.onPopOverOpened,e.onPopOverClosed,e.onSearchableFromReset,e.onSearchableFromSubmit,e.onSearchableFromInit,e.headerToolbarRender,e.footerToolbarRender;var w=e.testIdBuilder,T=e.id,E=e.filterCanAccessSuperData,D=E===void 0?!0:E,O=e.selectable,k=O===void 0?!1:O,A=m(e,`className.style.bodyClassName.filter.render.store.mode.syncLocation.children.bulkActions.pickerMode.multiple.strictMode.valueField.primaryField.value.hideQuickSaveBtn.itemActions.classnames.keepItemSelectionOnPageChange.maxKeepItemSelectionLength.maxItemSelectionLength.onAction.popOverContainer.translate.onQuery.autoGenerateFilter.onSelect.autoFillHeight.onEvent.onSave.onSaveOrder.onPopOverOpened.onPopOverClosed.onSearchableFromReset.onSearchableFromSubmit.onSearchableFromInit.headerToolbarRender.footerToolbarRender.testIdBuilder.id.filterCanAccessSuperData.selectable`.split(`.`));return i(`body`,t(t({},this.filterBodySchema(A)),{id:T,onEvent:this.filterOnEvent(C),columns:a.columns??A.columns,type:o||`table`}),{key:`body`,className:g(`Crud-body`,n),ref:this.controlRef,autoGenerateFilter:!r&&x,filterCanAccessSuperData:D,autoFillHeight:S,selectable:!!(this.hasBulkActionsToolbar()&&this.hasBulkActions()||c||k),itemActions:h,multiple:l===void 0?!!(s&&s.length>0):l,selected:a.selectedItemsAsArray,strictMode:u,keepItemSelectionOnPageChange:_,maxKeepItemSelectionLength:v,maxItemSelectionLength:y,valueField:d||f,primaryField:f,hideQuickSaveBtn:p,items:a.data.items,fullItems:a.itemsAsArray,query:a.query,orderBy:a.query.orderBy,orderDir:a.query.orderDir,popOverContainer:b,onAction:this.handleAction,dispatchEvent:this.dispatchEvent,onItemChange:this.handleItemChange,onSave:this.handleSave,onSaveOrder:this.handleSaveOrder,onQuery:this.handleQuery,onSelect:this.handleSelect,onPopOverOpened:this.handleChildPopOverOpen,onPopOverClosed:this.handleChildPopOverClose,onSearchableFromReset:this.handleFilterReset,onSearchableFromSubmit:this.handleFilterSubmit,onSearchableFromInit:this.handleFilterInit,headerToolbarRender:this.renderHeaderToolbar,footerToolbarRender:this.renderFooterToolbar,data:a.mergedData,loading:a.loading,offset:a.offset,host:this,filterItemIndex:this.filterItemIndex,onDbClick:this.props.rowDbClick,testIdBuilder:w?.getChild(`body`)})},i.prototype.render=function(){var e=this.props,n=e.className,r=e.style,i=e.render,a=e.store,o=e.classnames;e.translate;var s=e.testIdBuilder,c=e.id,l=e.mobileUI;return K.createElement(`div`,t({className:o(`Crud`,n,{"is-loading":a.loading,"is-mobile":l}),style:r,"data-id":c,"data-role":`container`},s?.getChild(`wrapper`).getTestId()),this.renderFilter(),this.renderSelection(),this.renderBody(),i(`dialog`,t(t({},a.dialogSchema),{type:`dialog`}),{key:`dialog`,data:a.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:a.dialogOpen}))},i.propsList=`bulkActions.itemActions.mode.orderField.syncLocation.toolbar.toolbarInline.messages.value.options.multiple.valueField.defaultParams.bodyClassName.perPageAvailable.pageField.perPageField.totalField.pageDirectionField.hideQuickSaveBtn.autoJumpToTopOnPagerChange.interval.silentPolling.stopAutoRefreshWhen.stopAutoRefreshWhenModalIsOpen.api.affixHeader.columnsTogglable.placeholder.tableClassName.headerClassName.footerClassName.headerToolbar.footerToolbar.filterTogglable.filterDefaultVisible.autoGenerateFilter.syncResponse2Query.keepItemSelectionOnPageChange.labelTpl.labelField.loadDataOnce.loadDataOnceFetchOnFilter.source.header.columns.size.onChange.onInit.onSaved.onSave.onQuery.formStore.autoFillHeight.maxTagCount.overflowTagPopover.parsePrimitiveQuery.matchFunc.loadMoreProps`.split(`.`),i.defaultProps={toolbarInline:!0,headerToolbar:[`bulkActions`],footerToolbar:[`statistics`,`pagination`],primaryField:`id`,syncLocation:!0,pageField:`page`,perPageField:`perPage`,totalField:`total`,pageDirectionField:`pageDir`,hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,filterTogglable:!1,filterDefaultVisible:!0,loadDataOnce:!1,autoFillHeight:!1,parsePrimitiveQuery:!0,loadMoreProps:{showIcon:!0,showText:!0,iconType:`loading-outline`,contentText:{contentdown:`点击加载更多`,contentrefresh:`加载中...`,contentnomore:`没有更多数据了`}}},i}(K.Component),$=function(e){v(n,e);function n(t,n){var r=e.call(this,t)||this;return n.registerComponent(r),r}return n.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.context.unRegisterComponent(this)},n.prototype.reload=function(t,n,r,i,a,o){var s=this.context;return o?.index||o?.condition?this.control?.reload(``,n,r,void 0,void 0,o):t?s.reload(n?`${t}?${U(n)}`:t,r):e.prototype.reload.call(this,t,n,r,i,a,o)},n.prototype.receive=function(t,n,r,i,a){return B(this,void 0,void 0,function(){var o;return S(this,function(s){return o=this.context,n?[2,o.send(n,t)]:[2,e.prototype.receive.call(this,t,void 0,r,i,a)]})})},n.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},n.prototype.closeTarget=function(e){this.context.close(e)},n.prototype.setData=function(e,n,r,i){var a;return B(this,void 0,void 0,function(){var o,s,c;return S(this,function(l){return o=this.props.store,r!==void 0||i!==void 0?[2,((a=this.control)?.setData)?.call(a,e,n,r,i)]:(s=e?.total||e?.count,c=e.rows??e.items,s!==void 0&&o.updateTotal(parseInt(s,10)),[2,o.updateData(t(t({},e),c?{items:c}:{}),void 0,n)])})})},n.prototype.getData=function(){var e=this.props,t=e.store,n=e.data;return t.getData(n)},n.contextType=ee,n}(Q),ve=function(e){v(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=g([ce({type:`crud`,storeType:s.name,isolateScope:!0})],t),t}($);export{ve as CRUDRenderer,$ as CRUDRendererBase,Q as default};