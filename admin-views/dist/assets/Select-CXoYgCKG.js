import{$o as e,Ao as t,Ci as n,Do as r,Fo as i,Hn as a,Ia as o,J as s,Ko as c,Lo as l,Mo as u,No as d,Nr as f,Oa as p,Po as m,Rr as h,dr as g,gn as _,hi as v,jo as y,jt as b,ni as x,si as S,ti as C,ui as w,vr as T,xr as E}from"./index-Z33w_AY6.js";import{t as D}from"./Transfer-L7OJbMBs.js";var O=e(c()),k=e(w()),A=e(v()),j=e(r()),M=function(e){d(r,e);function r(t){var n=e.call(this,t)||this;return n.lastTerm=``,n.fetchCancel=null,n.changeValue=n.changeValue.bind(n),n.lazyloadRemote=(0,j.default)(n.loadRemote.bind(n),250,{trailing:!0,leading:!1}),n.inputRef=n.inputRef.bind(n),n}return r.prototype.componentDidUpdate=function(e){var t=this.props;x(t.autoComplete,t.data)&&C(e.autoComplete,t.autoComplete,e.data,t.data)&&this.lazyloadRemote(this.lastTerm)},r.prototype.componentWillUnmount=function(){this.unHook&&this.unHook(),this.fetchCancel=null},r.prototype.inputRef=function(e){this.input=e},r.prototype.focus=function(){var e,t;this.input&&((t=(e=this.input)?.focus)==null||t.call(e))},r.prototype.getValue=function(e,t){t===void 0&&(t=[]);var n=this.props,r=n.joinValues,i=n.extractValue,a=n.delimiter,o=n.multiple,s=n.valueField,c=n.options,l=e;return(Array.isArray(e)?e:e?[e]:[]).forEach(function(e){(0,A.default)(c,function(t){return t[s||`value`]==e[s||`value`]})||t.push(e)}),r?l=o?Array.isArray(e)?e.map(function(e){return e[s||`value`]}).join(a):e?e[s||`value`]:``:l?l[s||`value`]:``:i&&(l=o?Array.isArray(e)?e.map(function(e){return e[s||`value`]}):e?[e[s||`value`]]:[]:l?l[s||`value`]:``),l},r.prototype.dispatchEvent=function(e,t){return t===void 0&&(t={}),y(this,void 0,void 0,function(){var n,r,i,a,o,s,c,l;return m(this,function(u){switch(u.label){case 0:return n=`on`+e.charAt(0).toUpperCase()+e.slice(1),r=this.props,i=r.dispatchEvent,a=r.options,o=r.value,s=r.multiple,c=r.selectedOptions,[4,i(e,f(this.props,{options:a,items:a,value:o,selectedItems:s?c:c[0]}))];case 1:return l=u.sent(),l?.prevented||this.props[n](t),[2]}})})},r.prototype.changeValue=function(e){return y(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c;return m(this,function(l){switch(l.label){case 0:return t=this.props,n=t.onChange,r=t.setOptions,i=t.options,t.data,a=t.dispatchEvent,o=[],s=this.getValue(e,o),o.length&&r(i.concat(o)),[4,a(`change`,f(this.props,{value:s,options:i,items:i,selectedItems:e}))];case 1:return c=l.sent(),c?.prevented||n?.(s),[2]}})})},r.prototype.loadRemote=function(e,t){var n;return t===void 0&&(t=!1),y(this,void 0,void 0,function(){var r,i,a,o,s,c,l,u,d,f,h,g,_=this;return m(this,function(m){switch(m.label){case 0:if(r=this.props,i=r.autoComplete,a=r.env,o=r.data,s=r.setOptions,c=r.setLoading,l=r.formInited,u=r.addHook,!a||!a.fetcher)throw Error(`fetcher is required`);if(!t&&l===!1&&u)return this.unHook&&this.unHook(),[2,this.unHook=u(this.loadRemote.bind(this,e,!0),`init`)];if(this.lastTerm=e,d=p(o,{term:e,value:e}),!x(i,d))return[2,Promise.resolve({options:[]})];this.fetchCancel&&((n=this.fetchCancel)==null||n.call(this,`autoComplete request cancelled.`),this.fetchCancel=null,c(!1)),c(!0),m.label=1;case 1:return m.trys.push([1,,3,4]),[4,a.fetcher(i,d,{cancelExecutor:function(e){return _.fetchCancel=e}})];case 2:return f=m.sent(),this.fetchCancel=null,h=f.data&&f.data.options||f.data||[],g=this.mergeOptions(h),s(g),[2,{options:g}];case 3:return c(!1),[7];case 4:return[2]}})})},r.prototype.mergeOptions=function(e){var n=this.props,r=n.selectedOptions,i=n.valueField,a=i===void 0?`value`:i,o=h(e,void 0,a).concat();return Array.isArray(r)&&r.length&&r.forEach(function(e){(0,A.default)(o,function(t){return t[a]===e[a]})||o.push(t(t({},e),{hidden:!0}))}),o},r.prototype.renderMenu=function(e,t){var n=this.props,r=n.menuTpl,i=n.render,a=n.data,o=n.optionClassName,s=n.testIdBuilder;return i(`menu/${t.index}`,r,{showNativeTitle:!0,className:(0,k.default)(`Select-option-content`,o),data:p(p(a,t),e),testIdBuilder:s?.getChild(`option-`+e.value||t.index)})},r.prototype.reload=function(e,t){var n=this.props.reloadOptions;n&&n(e,t)},r.prototype.option2value=function(){},r.prototype.renderOtherMode=function(){var e=this.props,n=e.selectMode,r=l(e,[`selectMode`]);return O.createElement(N,t({},r,{selectMode:n===`group`?`list`:n}))},r.prototype.doAction=function(e,t,n){var r,i=this.props,a=i.resetValue,s=i.onChange,c=i.formStore,l=i.store,u=i.name,d=i.valueField,f=e?.actionType;if(f===`clear`)s?.(``);else if(f===`reset`){var p=o(c?.pristine??l?.pristine,u)??a,m=this.getValue((r={},r[d]=p??``,r));s?.(m)}},r.prototype.handleOptionAdd=function(e,t,n,r){var i=this;e===void 0&&(e=-1),n===void 0&&(n=!1);var a=this.props,o=a.onAdd,s=a.autoComplete;o?.(e,t,n,function(){return y(i,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return r?.(t),s?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return e.sent(),[2,!1];case 2:return[2]}})})})},r.prototype.handleOptionEdit=function(e,t,n,r){var i=this,a=this.props,o=a.onEdit,s=a.autoComplete;o?.(e,t,n,function(){return y(i,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return r?.(e),s?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return t.sent(),[2,!1];case 2:return[2]}})})})},r.prototype.handleOptionDelete=function(e,t){var n=this,r=this.props,i=r.onDelete,a=r.autoComplete;i?.(e,function(){return y(n,void 0,void 0,function(){return m(this,function(n){switch(n.label){case 0:return t?.(e),a?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return n.sent(),[2,!1];case 2:return[2]}})})})},r.prototype.render=function(){var e=this,n=this.props,r=n.autoComplete,i=n.searchable,a=n.showInvalidMatch,o=n.options,s=n.className,c=n.popoverClassName,u=n.style,d=n.loading;n.value;var f=n.selectedOptions,p=n.multi,m=n.multiple,h=n.placeholder,g=n.id,v=n.classPrefix;n.classnames;var y=n.creatable;n.inline;var b=n.noResultsText,C=n.render,w=n.menuTpl,D=n.borderMode,A=n.selectMode,j=n.env,M=n.mobileUI,N=n.overlay,P=n.filterOption,F=l(n,`autoComplete.searchable.showInvalidMatch.options.className.popoverClassName.style.loading.value.selectedOptions.multi.multiple.placeholder.id.classPrefix.classnames.creatable.inline.noResultsText.render.menuTpl.borderMode.selectMode.env.mobileUI.overlay.filterOption`.split(`.`)),I=this.props,L=I.classPrefix,R=I.themeCss;return b&&=C(`noResultText`,b),O.createElement(`div`,{className:(0,k.default)(`${v}SelectControl`,s),style:u},[`table`,`list`,`group`,`tree`,`chained`,`associated`].includes(A)?this.renderOtherMode():O.createElement(_,t({},F,{onAdd:this.handleOptionAdd,onEdit:this.handleOptionEdit,onDelete:this.handleOptionDelete,className:(0,k.default)(E(t(t({},this.props),{name:`selectControlClassName`,id:g,themeCss:R}))),popoverClassName:(0,k.default)(c,E(t(t({},this.props),{name:`selectPopoverClassName`,id:g,themeCss:R}))),mobileUI:M,popOverContainer:M?j?.getModalContainer:F.popOverContainer||j.getModalContainer,borderMode:D,placeholder:h,multiple:m||p,ref:this.inputRef,value:f,options:o,filterOption:typeof P==`string`?S(P,`options`,`inputValue`,`option`):P,loadOptions:x(r)?this.lazyloadRemote:void 0,showInvalidMatch:a,creatable:y,searchable:i||!!r,onChange:this.changeValue,onBlur:function(t){return e.dispatchEvent(`blur`,t)},onFocus:function(t){return e.dispatchEvent(`focus`,t)},loading:d,noResultsText:b,renderMenu:w?this.renderMenu:void 0,overlay:N})),O.createElement(T,t({},this.props,{config:{themeCss:R,classNames:[{key:`selectControlClassName`,weights:{focused:{suf:`.is-opened:not(.is-mobile)`},disabled:{suf:`.is-disabled`}}},{key:`selectPopoverClassName`,weights:{default:{suf:` .${L}Select-option`},hover:{suf:` .${L}Select-option.is-highlight`},focused:{inner:`.${L}Select-option.is-active`}}}],id:g},env:j})))},r.defaultProps={clearable:!1,searchable:!1,multiple:!1,showInvalidMatch:!1},u([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Object]),i(`design:returntype`,void 0)],r.prototype,`renderMenu`,null),u([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Object,Boolean,Function]),i(`design:returntype`,void 0)],r.prototype,`handleOptionAdd`,null),u([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Object,Boolean,Function]),i(`design:returntype`,void 0)],r.prototype,`handleOptionEdit`,null),u([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Function]),i(`design:returntype`,void 0)],r.prototype,`handleOptionDelete`,null),u([s(),i(`design:type`,Function),i(`design:paramtypes`,[]),i(`design:returntype`,void 0)],r.prototype,`render`,null),r}(O.Component),N=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.renderItem=function(e){var t=this.props,n=t.labelField,r=t.menuTpl,i=t.data,a=t.render;return r?a(`option/${e.value}`,r,{data:p(i,e)}):`${e.scopeLabel||``}${e[n||`label`]}`},t.prototype.render=function(){var e=this.props,t=e.className;e.classnames;var n=e.selectedOptions,r=e.sortable,i=e.loading,o=e.searchable,s=e.searchResultMode,c=e.showArrow,l=e.deferLoad,u=e.disabled,d=e.clearable,f=e.selectTitle,p=e.selectMode,m=e.multiple,h=e.columns,g=e.leftMode,_=e.borderMode,v=e.mobileUI,y=e.env,x=e.popOverContainer,S=e.maxTagCount,C=e.overflowTagPopover,w=e.placeholder,T=e.itemHeight,E=e.virtualThreshold,D=e.rightMode,k=e.loadingConfig,A=e.labelField,j=e.showInvalidMatch,M=e.checkAll,N=e.checkAllLabel,P=e.overlay,F=e.valueField,I=this.props,L=I.options,R=I.leftOptions,z=I.leftDefaultValue;return p===`associated`&&L&&L.length&&L[0].leftOptions&&Array.isArray(L[0].children)&&(R=L[0].leftOptions,z=L[0].leftDefaultValue??z,L=L[0].children),O.createElement(O.default.Fragment,null,O.createElement(b,{selectMode:p,className:t,value:n,disabled:u,clearable:d,options:L,onChange:this.handleChange,option2value:this.option2value,optionItemRender:this.renderItem,itemRender:this.renderItem,sortable:r,searchResultMode:s,onSearch:o?this.handleSearch:void 0,showArrow:c,onDeferLoad:l,selectTitle:f,multiple:m,columns:h,leftMode:g,rightMode:D,leftOptions:R,borderMode:_,mobileUI:v,popOverContainer:x||y.getModalContainer,maxTagCount:S,overflowTagPopover:C,placeholder:w,itemHeight:T,virtualThreshold:E,virtualListHeight:266,labelField:A,showInvalidMatch:j,checkAllLabel:N,checkAll:M,overlay:P,valueField:F}),O.createElement(a,{overlay:!0,key:`info`,show:i,loadingConfig:k}))},u([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,Object)],t.prototype,`renderItem`,null),t}(D),P=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=u([g({type:`select`})],t),t}(M),F=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultProps={multiple:!0},t=u([g({type:`multi-select`})],t),t}(M);export{F as MultiSelectControlRenderer,P as SelectControlRenderer,M as default};