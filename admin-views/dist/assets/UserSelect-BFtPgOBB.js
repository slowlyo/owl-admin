import{$o as e,Ao as t,Ci as n,Dt as r,Fo as i,J as a,Ko as o,Mo as s,No as c,Nr as l,Oa as u,Ot as d,Po as f,dr as p,hi as m,jo as h,ni as g,ui as _}from"./index-DAdqRbKX.js";var v=e(o()),y=e(_()),b=e(m()),x=function(e){c(o,e);function o(t){return e.call(this,t)||this}return o.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},o.prototype.onSearch=function(e,n,r){return h(this,void 0,void 0,function(){var i,a,o,s,c,l,u,d,p,m;return f(this,function(f){switch(f.label){case 0:if(i=this.props,a=i.searchApi,o=i.setLoading,s=i.env,a=r?.searchApi||a,c=r?.searchTerm||this.props.searchTerm||`term`,l=r?.searchParam||this.props.searchParam||{},u=t((m={},m[c]=e,m),l),!g(a,u))return[2,Promise.resolve([])];o(!0),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,s.fetcher(a,u,{cancelExecutor:n,autoAppend:!0})];case 2:return d=f.sent(),p=d.data&&d.data.options||d.data||[],[2,p];case 3:return o(!1),[7];case 4:return[2]}})})},o.prototype.deferLoad=function(e,t,n){return h(this,void 0,void 0,function(){var r,i,a,o,s,c,l;return f(this,function(d){switch(d.label){case 0:if(r=this.props,i=r.env,a=r.deferApi,o=r.setLoading,r.formInited,r.addHook,a=n?.deferApi||a,!i||!i.fetcher)throw Error(`fetcher is required`);if(s=u(e,{}),!g(a,s))return[2,Promise.resolve([])];d.label=1;case 1:return d.trys.push([1,,3,4]),[4,i.fetcher(a,s)];case 2:return c=d.sent(),l=c.data&&c.data.options||c.data||[],t&&l.forEach(function(e){e.isRef=!0}),[2,l];case 3:return o(!1),[7];case 4:return[2]}})})},o.prototype.changeValue=function(e){return h(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c,u,d,p,m;return f(this,function(f){switch(f.label){case 0:return t=this.props,n=t.joinValues,r=t.extractValue,i=t.delimiter,a=t.multiple,o=t.valueField,s=t.onChange,c=t.options,t.setOptions,t.data,u=t.dispatchEvent,d=e,p=[],(Array.isArray(e)?e:e?[e]:[]).forEach(function(e){(0,b.default)(c,function(t){return t[o||`value`]==e[o||`value`]})||p.push(e)}),n?d=a?Array.isArray(e)?e.map(function(e){return e[o||`value`]}).join(i):e?e[o||`value`]:``:d?d[o||`value`]:``:r&&(d=a?Array.isArray(e)?e.map(function(e){return e[o||`value`]}):e?[e[o||`value`]]:[]:d?d[o||`value`]:``),[4,u(`change`,l(this.props,{value:d,options:c,items:c}))];case 1:return m=f.sent(),m?.prevented||s(d),[2]}})})},o.prototype.renderStatic=function(){var e=this.props,t=e.selectedOptions,n=e.labelField,r=n===void 0?`label`:n,i=e.classnames;return r===`avatar`?t.map(function(e,t){return v.createElement(`img`,{key:t,className:i(`UserSelect-avatar-img`),src:e[r],alt:``})}):t.map(function(e){return e[r]}).join(`,`)},o.prototype.render=function(){var e=this,t=this.props,n=t.showNav,i=t.navTitle,a=t.searchable,o=t.options,s=t.className;t.style;var c=t.selectedOptions,l=t.tabOptions,u=t.multi,f=t.multiple,p=t.isDep,m=t.isRef,h=t.placeholder,g=t.searchPlaceholder,_=t.tabMode,b=t.data,x=t.displayFields,S=t.labelField,C=t.loadingConfig,w=t.disabled;return l?.forEach(function(t){t.deferLoad=e.deferLoad,t.onChange=e.changeValue,t.onSearch=e.onSearch}),v.createElement(`div`,{className:(0,y.default)(`UserSelectControl`,s)},_?v.createElement(r,{selection:c,tabOptions:l,multiple:f,displayFields:x,onChange:this.changeValue,onSearch:this.onSearch,deferLoad:this.deferLoad,data:b,disabled:w}):v.createElement(d,{loadingConfig:C,showNav:n,navTitle:i,selection:c,options:o,multi:u,multiple:f,searchable:a,placeholder:h,searchPlaceholder:g,deferLoad:this.deferLoad,onChange:this.changeValue,onSearch:this.onSearch,displayFields:x,labelField:S,isDep:p,isRef:m,disabled:w}))},o.defaultProps={showNav:!0},s([n,i(`design:type`,Function),i(`design:paramtypes`,[String,Function,Object]),i(`design:returntype`,Promise)],o.prototype,`onSearch`,null),s([n,i(`design:type`,Function),i(`design:paramtypes`,[Object,Boolean,Object]),i(`design:returntype`,Promise)],o.prototype,`deferLoad`,null),s([n,i(`design:type`,Function),i(`design:paramtypes`,[Object]),i(`design:returntype`,Promise)],o.prototype,`changeValue`,null),s([a(),i(`design:type`,Function),i(`design:paramtypes`,[]),i(`design:returntype`,void 0)],o.prototype,`render`,null),o}(v.Component),S=function(e){c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=s([p({type:`users-select`})],t),t}(x);export{S as UserSelectControlRenderer,x as default};