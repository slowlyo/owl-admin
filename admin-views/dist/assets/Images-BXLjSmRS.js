import{t as $,r as ss,l as q,G as as,H as es,z as g,L as d,bE as ts,w as rs,x as ns,aq as is,j as m,d7 as D,ad as I,n as H,d8 as ls,d9 as Q,da as os,db as ps,dc as cs,ae as gs,dd as hs,D as f,Q as v,T as p,E as us}from"./index-CEmnTf-r.js";var ms=function(b){$(o,b);function o(n){var s=b.call(this,n)||this;return s.containerRef=ss.createRef(),s.resizeObserver=null,s.isSwiping=!1,s.startX=0,s.list=[],s.gap=5,s.evenReg=/^even-[1-9]\d*-[1-9]\d*$/,s.wrapperRef=q.createRef(),s.generateHeight=function(e,a){var t=Number(s.props.height)||s.state.defaultHeight;if(e==="sm-ss-sss-m"||e==="sss-ss-ms-m"||e==="sms-ss-sms-m")return a===0?t:(t-s.gap)*.5;if(e==="sm-ss-sss-ss"||e==="ms-ss-sss-ss"||e==="sss-ss-sm-ss"||e==="mss-ss-ssm-ss"||e==="sss-ss-mm-ss")return(t-s.gap)*.5;if(s.evenReg.test(e||"")){var r=Number(e==null?void 0:e.split("-")[1]),i=Number(e==null?void 0:e.split("-")[2]);if(a<r*i)return(t-s.gap*(r-1))/r}return 0},s.generateWidth=function(e,a){var t=Number(s.props.width)||s.state.defaultWidth;if(e==="sm-ss-sss-m"||e==="sss-ss-ms-m")return a===0?(t-2*s.gap)/3:a===1?(t-2*s.gap)/3*2+s.gap:(t-2*s.gap)/3;if(e==="sms-ss-sms-m"){if([0,2,4].includes(a))return(t-2*s.gap)/4;if(a===1||a===3)return(t-2*s.gap)/2+s.gap}else{if(e==="sm-ss-sss-ss")return[0,2,3,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="ms-ss-sss-ss")return[1,2,3,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="sss-ss-sm-ss")return[0,1,2,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="mss-ss-ssm-ss")return[1,2,4,5].includes(a)?(t-2*s.gap)/4:(t-2*s.gap)/2+s.gap;if(e==="sss-ss-mm-ss")return[0,1,2].includes(a)?(t-s.gap*2)/3:(t-s.gap)/2;if(s.evenReg.test(e||"")){var r=Number(e==null?void 0:e.split("-")[1]),i=Number(e==null?void 0:e.split("-")[2]);if(a<r*i)return(t-s.gap*(i-1))/i}}return 0},s.generateTranslate=function(e,a){var t=Number(s.props.width)||s.state.defaultWidth,r=Number(s.props.height)||s.state.defaultHeight,i={position:"absolute",boxSizing:"content-box",height:s.generateHeight(e,a)+"px",width:s.generateWidth(e,a)+"px"};return e==="sm-ss-sss-m"?a===1?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)"):a===3&&(i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)")):e==="sss-ss-ms-m"?a===1?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)"):a===2?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===3&&(i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)")):e==="sms-ss-sms-m"?a===1?i.transform="translate(".concat((t-2*s.gap)/4+s.gap,"px,").concat(0,"px)"):a===2?i.transform="translate(".concat((t-2*s.gap)/4*3+3*s.gap,"px,").concat(0,"px)"):a===3?i.transform="translate(".concat((t-2*s.gap)/4+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(i.transform="translate(".concat((t-2*s.gap)/4*3+3*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sm-ss-sss-ss"?a===1?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?i.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===3?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="ms-ss-sss-ss"?a===1?i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)"):a===2?i.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===3?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sss-ss-sm-ss"?a===1?i.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)"):a===3?i.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(i.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px")):e==="mss-ss-ssm-ss"?a===1||a===2?i.transform="translate(".concat(((t-2*s.gap)/4+s.gap)*(a+1),"px,").concat(0,"px)"):a===3?i.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):(a===4||a===5)&&(i.transform="translate(".concat(((t-2*s.gap)/4+s.gap)*(a-2),"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sss-ss-mm-ss"?a===1||a===2?i.transform="translate(".concat(((t-2*s.gap)/3+s.gap)*a,"px,").concat(0,"px)"):(a===3||a===4)&&(i.transform="translate(".concat(((t-s.gap)/2+s.gap)*(a-3),"px,").concat((r-s.gap)/2+s.gap,"px)")):s.evenReg.test(e||"")&&(i.transform=s.generateEvenTranslate(e,a)),i},s.state={defaultWidth:200,defaultHeight:112.5,currentIndex:0,nextAnimation:""},s}return o.prototype.getFrameId=function(n){var s=this.state.currentIndex,e=this.list.length;switch(n){case"prev":return(s-1+e)%e;case"next":return(s+1)%e;default:return s}},o.prototype.transitFramesTowards=function(n,s){return as(this,void 0,void 0,function(){var e;return es(this,function(a){switch(e=this.state.currentIndex,n){case"left":e=this.getFrameId("next"),s="slideLeft";break;case"right":e=this.getFrameId("prev"),s="slideRight";break;default:return[2]}return this.setState({currentIndex:e,nextAnimation:s}),[2]})})},o.prototype.handleSwipe=function(n){var s=50;Math.abs(n)>s&&(n>0?this.transitFramesTowards("right","slideRight"):this.transitFramesTowards("left","slideLeft"))},o.prototype.handleTouchStart=function(n){this.props.displayMode==="full"&&(this.isSwiping=!0,this.startX=n.touches[0].clientX)},o.prototype.handleTouchEnd=function(n){if(this.isSwiping){var s=n.changedTouches[0].clientX-this.startX;this.handleSwipe(s),this.isSwiping=!1}},o.prototype.handleMouseDown=function(n){this.props.displayMode==="full"&&(n.preventDefault(),this.isSwiping=!0,this.startX=n.clientX,document.addEventListener("mouseup",this.handleMouseUp))},o.prototype.handleMouseUp=function(n){if(this.isSwiping){var s=n.clientX-this.startX;this.handleSwipe(s),this.isSwiping=!1,document.removeEventListener("mouseup",this.handleMouseUp)}},o.prototype.handleEnlarge=function(n){var s=this.props,e=s.onImageEnlarge,a=s.src,t=s.originalSrc;e&&e(g(g({},n),{originalSrc:n.originalSrc||n.src,list:this.list.map(function(r){return{src:a?d(a,r,"| raw"):r&&r.image||r,originalSrc:t?d(t,r,"| raw"):(r==null?void 0:r.src)||d(a,r,"| raw")||(r==null?void 0:r.image)||r,title:r&&(r.enlargeTitle||r.title),caption:r&&(r.enlargeCaption||r.description||r.caption)}})}),this.props)},o.prototype.generateEvenTranslate=function(n,s){var e="",a=Number(this.props.width)||this.state.defaultWidth,t=Number(this.props.height)||this.state.defaultHeight,r=Number(n==null?void 0:n.split("-")[1]),i=Number(n==null?void 0:n.split("-")[2]);if(s<r*i){var w=(a-(i-1)*this.gap)/i,x=(t-(r-1)*this.gap)/r,h=Math.floor(s/i),E=s%i,X=E*(w+this.gap),M=h*(x+this.gap);e="translate(".concat(X,"px,").concat(M,"px)")}return e},o.prototype.componentDidMount=function(){(!this.props.width||!this.props.height||String(this.props.width).includes("%")&&String(this.props.height).includes("%"))&&this.observeParentSize()},o.prototype.componentWillUnmount=function(){this.resizeObserver&&this.resizeObserver.disconnect()},o.prototype.observeParentSize=function(){var n=this,s;!((s=this.containerRef.current)===null||s===void 0)&&s.parentElement&&(this.resizeObserver=new ResizeObserver(function(e){var a,t;try{for(var r=ts(e),i=r.next();!i.done;i=r.next()){var w=i.value;n.setState({defaultWidth:w.contentRect.width*parseFloat(n.props.width||"100")/100,defaultHeight:w.contentRect.height*parseFloat(n.props.height||"100")/100}),n.forceUpdate()}}catch(x){a={error:x}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}}),this.resizeObserver.observe(this.containerRef.current.parentElement))},o.prototype.render=function(){var n=this,s=this.props,e=s.className,a=s.style,t=s.defaultImage,r=s.thumbMode,i=s.thumbRatio,w=s.data;s.name;var x=s.placeholder,h=s.classnames,E=s.source,X=s.delimiter,M=s.enlargeAble,z=s.enlargeWithGallary,N=s.src,R=s.originalSrc,j=s.listClassName,k=s.options,P=s.showToolbar,U=s.toolbarActions,L=s.imageGallaryClassName;s.galleryControlClassName;var y=s.id,T=s.wrapperCustomStyle,B=s.env,S=s.themeCss,F=s.sortType;s.imagesControlClassName;var A=s.displayMode,J=s.fullThumbMode,K=s.maskColor,Y=this.state.currentIndex,_,c;return typeof E=="string"&&rs(E)?c=ns(E,w,"| raw")||void 0:Array.isArray(_=is(this.props))||typeof _=="string"?c=_:Array.isArray(k)&&(c=k),typeof c=="string"?c=c.split(X):c&&!Array.isArray(c)&&(c=[c]),this.list=c,this.props.sortType==="sm-ss-sss-m"?this.list=c.slice(0,4):this.props.sortType==="sss-ss-ms-m"?this.list=c.slice(0,5):this.props.sortType==="sms-ss-sms-m"||this.props.sortType==="sm-ss-sss-ss"||this.props.sortType==="ms-ss-sss-ss"||this.props.sortType==="sss-ss-sm-ss"?this.list=c.slice(0,6):this.props.sortType==="mss-ss-ssm-ss"?this.list=c.slice(0,8):this.props.sortType==="sss-ss-mm-ss"&&(this.list=c.slice(0,6)),this.props.sortType?m("div",{ref:this.containerRef,className:F,style:{width:(this.props.width||this.state.defaultWidth)+"px",height:(this.props.height||this.state.defaultHeight)+"px"},children:this.list.map(function(l,u){return m(D,{maskColor:K,fontStyle:n.props.fontStyle,style:n.generateTranslate(F,u),width:n.generateWidth(F,u),height:n.generateHeight(F,u),hoverMode:n.props.hoverMode||"text-style-4",index:u,className:h("Images-item"),src:(N?d(N,l,"| raw"):l&&l.image)||l,originalSrc:(R?d(R,l,"| raw"):l&&l.src)||l,title:l&&l.title,sortType:n.props.sortType,caption:l&&(l.description||l.caption),thumbMode:r,thumbRatio:i,enlargeAble:M,enlargeWithGallary:z,onEnlarge:n.handleEnlarge,showToolbar:P,imageGallaryClassName:"".concat(L," ").concat(I(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:S}))," ").concat(I(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:S}))),toolbarActions:U},u)})}):H("div",{ref:this.wrapperRef,className:h("ImagesField",e,A==="full"?"ImagesField--full":"",I(g(g({},this.props),{name:"imagesControlClassName",id:y,themeCss:S})),I(g(g({},this.props),{name:"wrapperCustomStyle",id:y,themeCss:T}))),style:g(g({},a),A==="full"?{height:"auto"}:{}),onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onMouseDown:this.handleMouseDown,children:[Array.isArray(c)?m("div",{className:h("Images",j),children:A==="full"?m("div",{className:h("Images-container"),children:c.map(function(l,u){return m(ls,{in:u===Y,timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:function(V){var C,W,G;V===Q&&((G=n.wrapperRef.current)===null||G===void 0||G.childNodes.forEach(function(O){return O.offsetHeight}));var Z=(C={},C[Q]={opacity:1,transform:"translateX(0)"},C[os]={opacity:1,transform:"translateX(0)"},C[ps]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(100%)":"translateX(-100%)"},C[cs]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(-100%)":"translateX(100%)"},C);return m("div",{className:h("Images-item"),style:g({position:"absolute",width:"100%",height:"100%",transition:"all 300ms ease-in-out"},Z[V]),children:H("div",{className:h("Images-itemInner"),children:[m("img",{className:h("Image-image",(W={},W["Image-image--".concat(J)]=A==="full",W)),src:(N?d(N,l,"| raw"):l&&l.image)||l,alt:l&&l.title,draggable:!1,onDragStart:function(O){return O.preventDefault()}}),H("div",{className:h("Images-itemIndex"),children:[u+1,"/",c.length]})]})})}},u)})}):c.map(function(l,u){return m(D,{hoverMode:n.props.hoverMode||"text-style-4",fontStyle:n.props.fontStyle,index:u,className:h("Images-item"),src:(N?d(N,l,"| raw"):l&&l.image)||l,originalSrc:(R?d(R,l,"| raw"):l&&l.src)||l,title:l&&l.title,caption:l&&(l.description||l.caption),thumbMode:r,thumbRatio:i,enlargeAble:M,enlargeWithGallary:z,onEnlarge:n.handleEnlarge,showToolbar:P,imageGallaryClassName:"".concat(L," ").concat(I(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:S}))," ").concat(I(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:S}))),toolbarActions:U},u)})}):t?m("div",{className:h("Images",j),children:m(D,{hoverMode:this.props.hoverMode||"text-style-4",className:h("Images-item"),src:t,thumbMode:r,thumbRatio:i})}):x,m(gs,{...g({},this.props,{config:{wrapperCustomStyle:T,id:y,themeCss:S,classNames:[{key:"imagesControlClassName"},{key:"galleryControlClassName"}]},env:B})})]})},o.defaultProps={className:"",delimiter:",",defaultImage:hs,placehoder:"-",thumbMode:"cover",thumbRatio:"1:1",displayMode:"thumb",fullThumbMode:"cover"},f([v,p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],o.prototype,"getFrameId",null),f([v,p("design:type",Function),p("design:paramtypes",[String,String]),p("design:returntype",Promise)],o.prototype,"transitFramesTowards",null),f([v,p("design:type",Function),p("design:paramtypes",[Number]),p("design:returntype",void 0)],o.prototype,"handleSwipe",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchStart",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchEnd",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleMouseDown",null),f([v,p("design:type",Function),p("design:paramtypes",[MouseEvent]),p("design:returntype",void 0)],o.prototype,"handleMouseUp",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleEnlarge",null),o}(q.Component),ds=function(b){$(o,b);function o(){return b!==null&&b.apply(this,arguments)||this}return o=f([us({type:"images"})],o),o}(ms);export{ms as ImagesField,ds as ImagesFieldRenderer};
