import{$o as e,Ao as t,Ar as n,Ci as r,Di as i,Fo as a,Gi as o,Go as s,Gt as c,Ii as l,Io as u,Kn as d,Ko as f,Kt as p,La as m,Lo as h,Ma as g,Mo as _,Na as v,No as y,Oa as b,Po as x,Ro as S,Ti as C,Va as w,Vr as T,_a as E,ba as D,ci as O,ct as k,ga as A,ii as j,jo as M,kr as N,li as P,lo as F,lt as I,ni as L,qt as R,so as z,st as B,ut as V,vr as H,wr as U,xi as W,xr as G,ya as K}from"./index-DAdqRbKX.js";var q=e(R()),J=e(O()),Y=e(w()),X=e(f()),Z=s(),Q=function(e){y(n,e);function n(t){var n=e.call(this,t)||this;return n.formItems=[],n.handleSubmit=n.handleSubmit.bind(n),n.handleAction=n.handleAction.bind(n),n}return n.prototype.buildSchema=function(){var e=this.props,n=e.searchable,r=e.sortable,i=e.name,a=e.label,o=e.translate,s=e.testIdBuilder,c;if(n===!0?c={title:``,controls:[{type:`text`,name:i,placeholder:a,clearable:!0,testid:(s?.getChild(i))?.getTestIdValue()}]}:n&&(c=n.controls||n.tabs||n.fieldSet?t(t({title:``},n),{controls:Array.isArray(n.controls)?n.controls.concat():void 0}):n?.type===`form`?n:{title:``,className:n.formClassName,controls:[t({type:n.type||`text`,name:n.name||i,testid:(s?.getChild(n.name||i))?.getTestIdValue(),placeholder:a},n)]}),c&&c.controls&&r&&c.controls.unshift({type:`hidden`,name:`orderBy`,value:i},{type:`button-group`,name:`order`,label:o(`sort`),options:[{label:o(`asc`),value:`asc`},{label:o(`desc`),value:`desc`}]}),c){var l=[];(c.controls||c.body||[]).forEach(function(e){return e.name&&e.name!==`orderBy`&&e.name!==`order`&&l.push(e.name)}),this.formItems=l,c=t(t({},c),{type:`form`,wrapperComponent:`div`,wrapWithPanel:!0,title:!1,testid:(s?.getChild(`form`))?.getTestIdValue(),actions:[{type:`button`,label:o(`reset`),actionType:`clear-and-submit`,testid:(s?.getChild(`btn-reset`))?.getTestIdValue()},{type:`button`,label:o(`cancel`),actionType:`cancel`,testid:(s?.getChild(`btn-cancel`))?.getTestIdValue()},{label:o(`search`),type:`submit`,primary:!0,testid:(s?.getChild(`btn-search`))?.getTestIdValue()}]})}return c||`error`},n.prototype.handleAction=function(e,n,r,i){return M(this,void 0,void 0,function(){var a,o,s,c,l,u,d;return x(this,function(f){switch(f.label){case 0:return a=this.props,o=a.onAction,s=a.data,c=a.dispatchEvent,l=a.name,n.actionType===`cancel`||n.actionType===`close`?(i(),[2]):n.actionType===`reset`?(i(),this.handleReset(),[2]):(u=t({},s),this.formItems.forEach(function(e){return v(u,e,void 0)}),[4,c(`columnSearch`,b(s,{searchName:l,searchValue:u}))]);case 1:return d=f.sent(),d?.prevented||o&&o(e,n,r),[2]}})})},n.prototype.handleReset=function(){return M(this,void 0,void 0,function(){var e,n,r,i,a,o;return x(this,function(s){switch(s.label){case 0:return e=this.props,n=e.onSearch,r=e.data,i=e.name,a=t({},r),this.formItems.forEach(function(e){return v(a,e,void 0)}),a.orderBy===i&&(a.orderBy=``,a.order=`asc`),o=n,o?[4,n(i,a)]:[3,2];case 1:o=s.sent(),s.label=2;case 2:return n&&n(a),[2]}})})},n.prototype.handleSubmit=function(e,n){return M(this,void 0,void 0,function(){var r,i,a,o;return x(this,function(s){switch(s.label){case 0:return r=this.props,i=r.onSearch,a=r.name,e.order&&(e=t(t({},e),{orderBy:a})),o=i,o?[4,i(a,e)]:[3,2];case 1:o=s.sent(),s.label=2;case 2:return n(),[2]}})})},n.prototype.isActive=function(){var e=this.props,t=e.data,n=e.name,r=e.orderBy;return r&&r===n||this.formItems.some(function(e){return t?.[e]})},n.prototype.render=function(){var e=this,n=this.props,r=n.render,i=n.name,a=n.data,o=n.searchable,s=n.order,c=n.orderBy,l=n.popOverContainer,u=n.classPrefix,f=n.classnames,m=n.testIdBuilder,h=this.buildSchema(),g=this.isActive();return X.createElement(p,{className:`${u}TableCell-searchBtn`,layerClassName:f(`${u}TableCell-searchPopOver`,o.className),active:g,filterIcon:X.createElement(d,{icon:`search`,className:`icon`,iconContent:`table-search-icon`,testIdBuilder:m?.getChild(`search-icon`)}),popOverContainer:l||function(){return(0,Z.findDOMNode)(e)},filterDropdown:function(n){n.setSelectedKeys,n.selectedKeys;var o=n.confirm;return n.clearFilters,r(`quick-search-form`,h,{data:t(t({},a),{orderBy:c,order:c&&c===i?s:``}),onSubmit:function(t){return e.handleSubmit(t,o)},onAction:function(t,n,r){e.handleAction(t,n,r,o)}})},testIdBuilder:m})},n}(X.Component),ee=P(function(e){var n=e.store;return X.createElement(Q,t({},e,{data:n.query,orderBy:n.orderBy,order:n.order}))});(function(e){y(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.propsNeedRemove=[`title`],t}return n.defaultProps=t(t({},B.defaultProps),{wrapperComponent:`div`}),n=_([U({type:`cell-field`,name:`cell-field`}),k(),I(),V()],n),n})(B);var te=s(),$=function(e){y(s,e);function s(t,n){var r=e.call(this,t)||this;r.renderedToolbars=[],r.subForms={},r.columns=[],r.reactions=[],n.registerComponent(r);var i=t.store,a=t.columnsTogglable,o=t.columns,c=t.rowSelection,l=t.keyField,u=t.primaryField,d=t.canAccessSuperData,f=t.persistKey;return i.update({columnsTogglable:a,columns:o,canAccessSuperData:d,rowSelectionKeyField:u||c?.keyField||l,persistKey:f}),s.syncRows(i,t,void 0)&&r.syncSelected(),r.columns=r.buildColumns(i.filteredColumns,[],[]),r.rowSelection=r.buildRowSelection(),r.expandable=r.buildExpandable(),r.reactions.push(F(function(){return i.currentSelectedRowKeys.join(`,`)},function(){r.rowSelection=r.buildRowSelection(),r.forceUpdate()})),r.reactions.push(F(function(){return i.currentExpandedKeys.join(`,`)},function(){r.expandable=r.buildExpandable(),r.forceUpdate()})),r.reactions.push(F(function(){return i.filteredColumns},function(){r.columns=r.buildColumns(i.filteredColumns,[],[]),r.forceUpdate()})),r}return s.prototype.componentWillUnmount=function(){this.context.unRegisterComponent(this),this.reactions&&this.reactions.forEach(function(e){return e()})},s.prototype.syncSelected=function(){var e=this.props,t=e.store,n=e.onSelect;n&&n(t.selectedRows.map(function(e){return e.data}),t.unSelectedRows.map(function(e){return e.data}))},s.syncRows=function(e,t,n){var r=t.source,i=l(t,function(e){return e.items}),a=[],o=!1;if(Array.isArray(i))(!n||l(n,function(e){return e.items})!==i)&&(o=!0,a=i);else if(typeof r==`string`){var s=m(r,t.data,`| raw`),c=n?m(r,n.data,`| raw`):null;c&&c===s?o=!1:Array.isArray(s)&&(o=!0,a=s)}o&&e.initRows(a,t.getEntryId,t.reUseRow,t.childrenColumnName);var d=[],f=e.keyField;Array.isArray(t.selected)?d=t.selected.map(function(e){return e[f]})||[]:t.rowSelection&&t.rowSelection.selectedRowKeysExpr?a.forEach(function(e,n){A(t.rowSelection?.selectedRowKeysExpr||``,{record:e,rowIndex:n})&&d.push(e[f])}):t.rowSelection&&t.rowSelection.selectedRowKeys&&(d=S([],u(t.rowSelection.selectedRowKeys),!1)),o&&d.length>0&&e.updateSelected(d);var p=[],h=t.primaryField||t.expandable?.keyField||t.keyField;return t.expandable&&t.expandable.expandedRowKeysExpr?a.forEach(function(e,n){A(t.expandable?.expandedRowKeysExpr||``,{record:e,rowIndex:n})&&p.push(e[h])}):t.expandable&&t.expandable.expandedRowKeys&&(p=S([],u(t.expandable.expandedRowKeys),!1)),o&&p.length>0&&e.updateExpanded(p,h),o},s.prototype.componentDidUpdate=function(e){var t=this.props,n=t.store;if(C([`orderBy`,`columnsTogglable`,`canAccessSuperData`,`persistKey`],e,t,function(e){e.orderBy&&!t.onQuery&&delete e.orderBy,n.update(e,{resolveDefinitions:t.resolveDefinitions})}),W([`source`,`value`,`items`],e,t)||!t.value&&!t.items&&(t.data!==e.data||typeof t.source==`string`&&D(t.source)))s.syncRows(n,t,e)&&this.syncSelected();else if(o(e.selected,t.selected)){var r=n.keyField,i=n.selectedRows.map(function(e){return e[r]}).join(`,`);n.updateSelected(t.selected.map(function(e){return e[r]})||[]),i!==n.selectedRows.map(function(e){return e[r]}).join(`,`)&&this.syncSelected()}W([`columns`],e,t)&&n.update({columns:t.columns}),W([`rowSelection`,`selectable`,`multiple`,`maxKeepItemSelectionLength`],e,t)&&(this.rowSelection=this.buildRowSelection()),W([`query`,`pageField`,`perPageField`],e,t)&&n.updateQuery(t.query,void 0,t.pageField,t.perPageField,!0),(!(0,Y.default)(e?.rowSelection?.keyField,t.rowSelection?.keyField)||!(0,Y.default)(e.keyField,t.keyField))&&n.update({rowSelectionKeyField:t.primaryField||t.rowSelection?.keyField||t.keyField})},s.prototype.getPopOverContainer=function(){return(0,te.findDOMNode)(this)},s.prototype.subFormRef=function(e,t,n){var r=this.props.quickEditFormRef;r&&r(e,t,n),this.subForms[`${t}-${n}`]=e,e&&this.props.store.addForm(e.props.store,n)},s.prototype.reset=function(){var e=this;this.props.store.reset();var t=[];Object.keys(this.subForms).forEach(function(n){return e.subForms[n]&&t.push(e.subForms[n])}),t.forEach(function(e){return e.clearErrors()})},s.prototype.renderCellSchema=function(e,n){var r=this.props,i=r.render;if(r.store,e&&g(e)){e.width,e.children;var a=e.wrapperComponent,o=e.title,s=h(e,[`width`,`children`,`wrapperComponent`,`title`]);return i(`cell-field`,t(t({},s),{wrapperComponent:a||void 0,title:o||s.label,type:`cell-field`,column:s,data:n.data,name:e.name}),n)}return e},s.prototype.renderSchema=function(e,n,r){var i=this.props.render;if(n&&g(n))return i(e||`field`,t(t({},n),{data:r?.data}),r);if(Array.isArray(n)){var a=[];return n.forEach(function(n,o){return a.push(i(e||`field`,t(t({},n),{data:r?.data}),t(t({},r),{key:o})))}),a}return typeof n==`string`?K(n,r?.data):n},s.prototype.buildColumns=function(e,n,r){var i=this,a=this.props,o=a.render,s=a.store,c=a.popOverContainer;a.canAccessSuperData;var l=a.showBadge,d=a.itemBadge,f=a.data,p=a.classnames,h=a.env,_=a.testIdBuilder,v=[];return n=n,r=r,Array.isArray(e)&&e.forEach(function(e,a){return M(i,void 0,void 0,function(){var i,y,b,C,w,T,E,O,k,A,M,N=this;return x(this,function(x){switch(x.label){case 0:return i=t({},e),y=null,b=i.title||i.label,C=t(t({},f),{popOverContainer:c||this.getPopOverContainer}),g(e.title)?y=(0,J.default)(e.title):typeof b==`string`&&(y={type:`plain`,tpl:b}),(e.headerAlign||e.align)&&(y.align=e.headerAlign||e.align,y.className=`flex-1`),w=function(t){var n,r=N.renderCellSchema(y,C),i=null;return e.remark&&(i=o(`remark`,{type:`remark`,tooltip:e.remark,container:N.getPopOverContainer})),X.createElement(`div`,{key:a,className:p(`Table-head-cell-wrapper`,(n={},n[`${e.className}`]=!!e.className,n[`${e.titleClassName}`]=!!e.titleClassName,n)),style:{justifyContent:{right:`flex-end`,center:`center`}[e.align]||`flex-start`}},r,i,t)},Object.assign(i,{title:w}),T=!!e.children?.length,e.canAccessSuperData,e.type&&Object.assign(i,{render:function(t,i,o,f,p){var m={},h=s.getRowByIndex(o,S([],u(p||[]),!1))||{},g=_?.getChild(`row-${o}-cell-${f}`),v={children:N.renderCellSchema(e,{data:h.locals,btnDisabled:s.dragging,popOverContainer:c||N.getPopOverContainer,quickEditFormRef:N.subFormRef,onQuickChange:function(e,t,n,r){N.handleQuickChange(h,e,t,n,r)},row:h,showBadge:l&&a===0,itemBadge:d,testIdBuilder:g}),props:m};if(!T&&e.rowSpanExpr){var y=+K(e.rowSpanExpr,{record:i,rowIndex:o,colIndex:f});y&&(v.props.rowSpan=y,n.push({colIndex:f,rowIndex:o,rowSpan:y}))}if(!T&&e.colSpanExpr){var b=+K(e.colSpanExpr,{record:i,rowIndex:o,colIndex:f});b&&(v.props.colSpan=b,r.push({colIndex:f,rowIndex:o,colSpan:b}))}return n.forEach(function(e){f===e.colIndex&&o>e.rowIndex&&o<e.rowIndex+(e.rowSpan||0)&&(v.props.rowSpan=0)}),r.forEach(function(e){o===e.rowIndex&&f>e.colIndex&&f<e.colIndex+(e.colSpan||0)&&(v.props.colSpan=0)}),v}}),e.searchable&&(i.filterDropdown=X.createElement(ee,t({},this.props,{popOverContainer:this.getPopOverContainer,name:e.name,searchable:e.searchable,onSearch:this.handleSearch,key:`th-search-`+a,testIdBuilder:_?.getChild(`head-search-${a}`)}))),e.sortable&&(i.sorter=!0),e.filterable?e.filterable.options?(i.filters=e.filterable.options.map(function(e){return typeof e==`string`?{text:e,value:e}:{text:e.label,value:e.value}}),[3,4]):[3,1]:[3,4];case 1:return e.filterable.source?(E=e.filterable.source,D(E)?(O=m(E,f,`| raw`),i.filters=O,[3,4]):[3,2]):[3,4];case 2:return L(E,f)?(k=j(E),k.cache=3e3,[4,h.fetcher(k,f)]):[3,4];case 3:A=x.sent(),M=A.data&&A.data.options||[],i.filters=M,x.label=4;case 4:return T&&(i.children=this.buildColumns(e.children,n,r)),v.push(i),[2]}})})}),v},s.prototype.buildSummary=function(e,t){var n=this,r=[];return Array.isArray(t)&&t.forEach(function(t,i){g(t)?r.push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(r){return n.renderSchema(e,t,{data:r})}}):Array.isArray(t)&&(r[i]||r.push([]),t.forEach(function(t){r[i].push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(r){return n.renderSchema(e,t,{data:r})}})}))}),r.length?r:null},s.prototype.rowClassName=function(e,n){var r=this.props,i=r.rowClassNameExpr,a=r.store,o=r.themeCss,s=r.id,c=r.rowClassName,l=[];c&&l.push(c),i&&l.push(K(i,t(t({},e),{rowIndex:n})));var u=a.getRowByIndex(n);return u?.modified&&l.push(`is-modified`),u?.moved&&l.push(`is-moved`),l.push(G(t(t({},this.props),{name:`tableRowClassname`,id:s,themeCss:o}))),l.join(` `)},s.prototype.buildRowSelection=function(){var e=this,n=this.props,r=n.selectable,i=n.multiple,a=n.maxKeepItemSelectionLength,o=n.rowSelection,s=n.store,c=null;if(r)c={type:i===!1?`radio`:``,selectedRowKeys:s.currentSelectedRowKeys,maxSelectedLength:a};else if(o){o.selectedRowKeys;var l=o.selections,u=h(o,[`selectedRowKeys`,`selections`]);c=t({selectedRowKeys:s.currentSelectedRowKeys,maxSelectedLength:a},u),c.getCheckboxProps=function(t,n){var r=e.props,i=r.rowSelection,a=r.maxKeepItemSelectionLength,o=r.store,s=i?.disableOn;return{disabled:(s?A(s,{record:t,rowIndex:n}):!1)||a&&o.currentSelectedRowKeys.length>=a&&!o.currentSelectedRowKeys.includes(t[o.keyField])}},o.disableOn&&delete c.disableOn,l&&Array.isArray(l)&&(c.selections=[],l.forEach(function(e){c.selections.push({key:e.key,text:e.text,onSelect:function(t){var n=[];n=t.filter(function(t,n){return e.key===`all`?!0:e.key===`none`?!1:e.key===`invert`?!s.currentSelectedRowKeys.includes(t):e.key===`odd`?n%2==0:e.key===`even`?n%2!=0:!0}),s.updateSelected(n)}})}))}return c},s.prototype.expandedRowClassName=function(e,t){var n=this.props.expandable;return K(n?.expandedRowClassNameExpr,{record:e,rowIndex:t})},s.prototype.expandedRowRender=function(e,n){var r=this.props.expandable;return this.renderSchema(`expandableBody`,t({},r),{data:t(t(t({},this.props.data),e),{rowIndex:n})})},s.prototype.rowExpandable=function(e,t,n){var r=this.props.expandable;return r?.expandableOn?A(r.expandableOn,{record:e,rowIndex:t}):!1},s.prototype.buildExpandable=function(){var e=this.props,n=e.expandable,r=e.store,i=null;if(n){n.expandedRowKeys;var a=h(n,[`expandedRowKeys`]);i=t({expandedRowKeys:r.currentExpandedKeys},a),n.expandableOn&&(i.rowExpandable=this.rowExpandable,delete i.expandableOn),n&&n.type&&(i.expandedRowRender=this.expandedRowRender),n.expandedRowClassNameExpr&&(i.expandedRowClassName=this.expandedRowClassName,delete i.expandedRowClassNameExpr)}return i},s.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},s.prototype.handleSave=function(){return M(this,void 0,void 0,function(){var e,t,n,r,a,o,s,c,l,u,d,f=this;return x(this,function(p){switch(p.label){case 0:return e=this.props,t=e.store,n=e.onSave,r=e.primaryField,a=e.keyField,t.modifiedRows.length?(o=[],Object.keys(this.subForms).forEach(function(e){return f.subForms[e]&&o.push(f.subForms[e])}),o.length?[4,Promise.all(o.map(function(e){return e.validate()}))]:[3,2]):[2];case 1:if(s=p.sent(),~s.indexOf(!1))return[2];p.label=2;case 2:return c=t.modifiedRows.map(function(e){return e.data}),l=t.modifiedRows.map(function(e){return e.path}),u=t.modifiedRows.map(function(e){return i(e.data,e.pristine,[a,r])}),d=t.rows.filter(function(e){return!e.modified}).map(function(e){return e.data}),n?(n(c,u,l,d,t.modifiedRows.map(function(e){return e.pristine})),[2]):(this.handleQuickSave(c,u,l,d,t.modifiedRows.map(function(e){return e.pristine})),[2])}})})},s.prototype.handleQuickSave=function(e,t,r,i,a,o){var s=this,c=this.props,l=c.store,u=c.quickSaveApi,d=c.quickSaveItemApi,f=c.primaryField,p=c.keyField,m=c.env,h=c.messages,g=c.reload,_=c.dispatchEvent;if(Array.isArray(e)){if(!L(u)){m&&m.alert(`Table2 quickSaveApi is required`);return}var v=f||p,y=b(l.data,{rows:e,rowsDiff:t,indexes:r,rowsOrigin:a});e.length&&e[0].hasOwnProperty(v)&&(y.ids=e.map(function(e){return e[v]}).join(`,`)),i&&(y.unModifiedItems=i),l.saveRemote(u,y,{successMessage:h&&h.saveFailed,errorMessage:h&&h.saveSuccess}).then(function(){_(`quickSaveSubmitted`,y),g&&s.reloadTarget(n(g,y),y)}).catch(function(){})}else{if(!L(d)){m&&m.alert(`Table2 quickSaveItemApi is required!`);return}var x=b(l.data,{item:e,modified:t,origin:a}),S=b(x,e);l.saveRemote(d,S).then(function(){_(`quickSaveSubmitted`,S),g&&s.reloadTarget(n(g,x),x)}).catch(function(){o!=null&&o.resetOnFailed&&s.reset()})}},s.prototype.handleQuickChange=function(e,t,n,r,a){if(z(e)){var o=this.props,s=o.onSave,c=o.onPristineChange,l=o.saveImmediately,u=o.primaryField,d=o.keyField,f=o.quickSaveItemApi;if(e.change(t,r),e.modified&&this.syncSelected(),r){c?.(e.data,e.path);return}if(!(!n&&!l)){if(n&&n.api){this.props.onAction&&this.props.onAction(null,{actionType:`ajax`,api:n.api,reload:a?.reload},e.locals);return}if(!s){this.handleQuickSave(f?e.data:[e.data],i(e.data,e.pristine,[d,u]),[e.path],void 0,e.pristine,a);return}s(e.data,i(e.data,e.pristine,[d,u]),e.path,void 0,e.pristine,a)}}},s.prototype.handleAction=function(e,t,n){var r=this.props.onAction;return r?.(e,t,n)},s.prototype.renderActions=function(e){var n=this,r=this.props,i=r.actions,a=r.render,o=r.store,s=r.classnames,c=r.data,l=r.columnsTogglable,u=r.dispatchEvent;i=Array.isArray(i)?i.concat():[];var d=g(l)?l:{align:`left`};return o.toggable&&e===`header`&&!~this.renderedToolbars.indexOf(`columns-toggler`)&&i.push({type:`button`,children:a(`column-toggler`,t(t({},d),{type:`column-toggler`}),{cols:o.columnsData,toggleAllColumns:function(){o.toggleAllColumns(),u(`columnToggled`,b(c,{columns:o.columnsData.filter(function(e){return e.toggled})}))},toggleToggle:function(e){o.columnsData[e].toggleToggle(),u(`columnToggled`,b(c,{columns:o.columnsData.filter(function(e){return e.toggled})}))}})}),Array.isArray(i)&&i.length?X.createElement(`div`,{className:s(`Table-toolbar`)},i.map(function(e,r){return a(`action/${r}`,t({type:`button`},e),{onAction:n.handleAction,key:r,btnDisabled:o.dragging,data:o.getData(c)})})):null},s.prototype.handleSelected=function(e,t,n){return M(this,void 0,void 0,function(){var r,i,a,o;return x(this,function(s){switch(s.label){case 0:return r=this.props,i=r.dispatchEvent,a=r.data,o=r.store,o.updateSelected(t),this.syncSelected(),[4,i(`selectedChange`,b(a,{selectedItems:e,unSelectedItems:n}))];case 1:return s.sent(),[2]}})})},s.prototype.handleSort=function(e){return M(this,void 0,void 0,function(){var t,n,r,i,a;return x(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.data,i=t.onSort,[4,n(`columnSort`,b(r,{orderBy:e.orderBy,orderDir:e.orderDir}))];case 1:return a=o.sent(),a?.prevented?[2,a?.prevented]:(i&&i(e),[2])}})})},s.prototype.handleFilter=function(e){return M(this,void 0,void 0,function(){var t,n,r,i,a;return x(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.data,i=t.onSearch,[4,n(`columnFilter`,b(r,e))];case 1:return a=o.sent(),a?.prevented?[2,a?.prevented]:(i&&i(e),[2])}})})},s.prototype.handleSearch=function(e,t){return M(this,void 0,void 0,function(){var n,r,i,a,o,s,c;return x(this,function(l){switch(l.label){case 0:return n=this.props,r=n.data,i=n.dispatchEvent,a=n.store,o=n.onSearch,[4,i(`columnSearch`,b(r,{searchName:e,searchValue:t}))];case 1:return s=l.sent(),s?.prevented?[2]:(a.updateQuery(t),o&&o((c={},c[e]=t[e],c)),[2])}})})},s.prototype.handleRowClick=function(e,t,n){return M(this,void 0,void 0,function(){var r,i,a,o,s;return x(this,function(c){switch(c.label){case 0:return r=this.props,i=r.dispatchEvent,a=r.data,o=r.onRow,[4,i(`rowClick`,b(a,{item:t,index:n}))];case 1:return s=c.sent(),s?.prevented||t&&o&&o.onRowClick&&o.onRowClick(e,t,n),[2]}})})},s.prototype.handleRowDbClick=function(e,t,n){return M(this,void 0,void 0,function(){var r,i,a,o,s;return x(this,function(c){switch(c.label){case 0:return r=this.props,i=r.dispatchEvent,a=r.data,o=r.onRow,[4,i(`rowDbClick`,b(a,{item:t,index:n}))];case 1:return s=c.sent(),s?.prevented?[2,!1]:(t&&o&&o.onRowDbClick&&o.onRowDbClick(e,t,n),[2,!0])}})})},s.prototype.handleRowMouseEnter=function(e,t,n){var r;return M(this,void 0,void 0,function(){var i,a,o,s,c;return x(this,function(l){switch(l.label){case 0:return(r=e?.persist)==null||r.call(e),i=this.props,a=i.dispatchEvent,o=i.data,s=i.onRow,[4,a(`rowMouseEnter`,b(o,{item:t,index:n}))];case 1:return c=l.sent(),c?.prevented||t&&s&&s.onRowMouseEnter&&s.onRowMouseEnter(e,t,n),[2]}})})},s.prototype.handleRowMouseLeave=function(e,t,n){var r;return M(this,void 0,void 0,function(){var i,a,o,s,c;return x(this,function(l){switch(l.label){case 0:return(r=e?.persist)==null||r.call(e),i=this.props,a=i.dispatchEvent,o=i.data,s=i.onRow,[4,a(`rowMouseLeave`,b(o,{item:t,index:n}))];case 1:return c=l.sent(),c?.prevented||t&&s&&s.onRowMouseLeave&&s.onRowMouseLeave(e,t,n),[2]}})})},s.prototype.handleOrderChange=function(e,t,n){return M(this,void 0,void 0,function(){var r,i;return x(this,function(a){return r=this.props.store,i=r.getRowByIndex(e,n),r.exchange(e,t,i),[2]})})},s.prototype.handleSaveOrder=function(){return M(this,void 0,void 0,function(){var e,t,n,r,i,a,o,s;return x(this,function(c){switch(c.label){case 0:return e=this.props,t=e.store,n=e.onSaveOrder,r=e.data,i=e.dispatchEvent,a=t.movedRows.map(function(e){return e.data}),o=t.rows.map(function(e){return e.getDataWithModifiedChilden()}),[4,i(`orderChange`,b(r,{movedItems:a}))];case 1:return s=c.sent(),s?.prevented||!n||!t.movedRows.length||n(a,o),[2]}})})},s.prototype.doAction=function(e,t,n,r){var i=this;n===void 0&&(n=!1);var a=this.props,o=a.store,s=a.data,c=a.keyField,l=a.expandable,u=a.primaryField,d=e?.actionType,f=o.keyField,p=o.getData(s).items||[];switch(d){case`selectAll`:o.updateSelectedAll();break;case`clearAll`:o.updateSelected([]);break;case`select`:var m=[];p.forEach(function(e,t){A(r?.selected||r?.selectedRowKeysExpr,{record:e,rowIndex:t})&&m.push(e[f])}),o.updateSelected(m);break;case`expand`:var h=u||l?.keyField||c,g=[],_=[];if(r?.value){var v=p.findIndex(function(e){return e[h]===r.value}),y=p[v];this.tableRef&&this.tableRef.isExpandableRow(y,v)&&(this.tableRef.isExpanded(y)?_.push(y):g.push(y))}else r?.expandedRowsExpr&&p.forEach(function(e,t){A(r?.expandedRowsExpr,{record:e,rowIndex:t})&&i.tableRef&&i.tableRef.isExpandableRow(e,t)&&(i.tableRef.isExpanded(e)?_.push(e):g.push(e))});g.length>0&&this.tableRef&&this.tableRef.onExpandRows(g),_.length>0&&this.tableRef&&this.tableRef.onCollapseRows(_);break;default:this.handleAction(void 0,e,s);break}},s.prototype.getRef=function(e){this.tableRef=e},s.prototype.renderTable=function(){var e=this.props,n=e.render,r=e.title,i=e.footer;e.rowSelection,e.selectable,e.multiple,e.columns,e.expandable;var a=e.footSummary,o=e.headSummary,s=e.loading,l=e.classnames,u=e.placeholder;e.rowClassNameExpr;var d=e.itemActions,f=e.keyField,p=e.primaryField;e.maxKeepItemSelectionLength;var m=e.onRow,g=e.store,_=e.id,v=e.themeCss,y=h(e,[`render`,`title`,`footer`,`rowSelection`,`selectable`,`multiple`,`columns`,`expandable`,`footSummary`,`headSummary`,`loading`,`classnames`,`placeholder`,`rowClassNameExpr`,`itemActions`,`keyField`,`primaryField`,`maxKeepItemSelectionLength`,`onRow`,`store`,`id`,`themeCss`]),b=void 0;if(d){var x=Array.isArray(d)?d.filter(function(e){return!e.hiddenOnHover}):[];if(!x.length)return null;b=function(e,r){return X.createElement(`div`,{className:l(`Table-itemActions`)},x.map(function(i,a){return n(`itemAction/${a}`,t(t({},i),{isMenuItem:!0}),{key:a,item:e,data:e,rowIndex:r})}))}}var S={data:this.props.data};return X.createElement(c,t({},y,{headerClassName:G(t(t({},this.props),{name:`tableHeadClassname`,id:_,themeCss:v})),bodyClassname:G(t(t({},this.props),{name:`tableBodyClassname`,id:_,themeCss:v})),onRef:this.getRef,title:this.renderSchema(`title`,r,S),footer:this.renderSchema(`footer`,i,S),columns:this.columns,dataSource:g.dataSource,rowSelection:this.rowSelection,rowClassName:this.rowClassName,expandable:this.expandable,footSummary:this.buildSummary(`footSummary`,a),headSummary:this.buildSummary(`headSummary`,o),loading:this.renderSchema(`loading`,s,S),placeholder:this.renderSchema(`placeholder`,u,S),onSelect:this.handleSelected,onSelectAll:this.handleSelected,onSort:this.handleSort,onFilter:this.handleFilter,onDrag:this.handleOrderChange,itemActions:b,keyField:p||f,onRow:t(t({},m),{onRowClick:this.handleRowClick,onRowDbClick:this.handleRowDbClick,onRowMouseEnter:this.handleRowMouseEnter,onRowMouseLeave:this.handleRowMouseLeave})}))},s.prototype.renderHeading=function(){var e=this.props,t=e.store,n=e.hideQuickSaveBtn,r=e.classnames,a=e.headingClassName,o=e.saveImmediately,s=e.quickSaveApi,c=e.translate,l=e.columns,u=!1;if(t.modifiedRows.length===1){var f=l?.map(function(e){return e?.quickEdit?.saveImmediately?e?.name:``}).filter(function(e){return e})||[],p=t.modifiedRows[0],m=i(p.data,p.pristine);(0,q.default)(f,Object.keys(m)).length&&(u=!0)}return s&&!o&&!u&&t.modified&&!n||t.moved?X.createElement(`div`,{className:r(`Table-heading`,a),key:`heading`},!o&&t.modified&&!n&&!u?X.createElement(`span`,null,c(`Table.modified`,{modified:t.modified}),X.createElement(`button`,{type:`button`,className:r(`Button Button--size-xs Button--success m-l-sm`),onClick:this.handleSave},X.createElement(d,{icon:`check`,className:`icon m-r-xs`}),c(`Form.submit`)),X.createElement(`button`,{type:`button`,className:r(`Button Button--size-xs Button--danger m-l-sm`),onClick:this.reset},X.createElement(d,{icon:`close`,className:`icon m-r-xs`}),c(`Table.discard`))):t.moved?X.createElement(`span`,null,c(`Table.moved`,{moved:t.moved}),X.createElement(`button`,{type:`button`,className:r(`Button Button--size-xs Button--success m-l-sm`),onClick:this.handleSaveOrder},X.createElement(d,{icon:`check`,className:`icon m-r-xs`}),c(`Form.submit`)),X.createElement(`button`,{type:`button`,className:r(`Button Button--size-xs Button--danger m-l-sm`),onClick:this.reset},X.createElement(d,{icon:`close`,className:`icon m-r-xs`}),c(`Table.discard`))):``):null},s.prototype.render=function(){var e=this.props,n=e.classnames,r=e.style,i=e.store,a=e.themeCss,o=e.wrapperCustomStyle,s=e.id,c=e.env;this.renderedToolbars=[];var l=this.renderHeading();return X.createElement(`div`,{className:n(`Table-render-wrapper`,G(t(t({},this.props),{name:`wrapperCustomStyle`,id:s,themeCss:o})),{"Table--unsaved":!!i.modified||!!i.moved}),style:r},this.renderActions(`header`),l,this.renderTable(),X.createElement(H,t({},this.props,{config:{themeCss:a,classNames:[{key:`tableHeadClassname`,weights:{default:{inner:`.${n(`Table-table`)} > thead > tr > th`,important:!0}}},{key:`tableHeadClassname`,weights:{default:{inner:`> tr > th`,important:!0}}},{key:`tableBodyClassname`,weights:{default:{inner:`> tbody.${n(`Table-tbody`)} > tr  td`},hover:{suf:`> tbody > tr`,inner:`td`,important:!0}}},{key:`tableRowClassname`,weights:{default:{parent:`.${n(`Table-table`)} > tbody.${n(`Table-tbody`)}`,inner:`td.${n(`Table-cell`)}`},hover:{parent:`.${n(`Table-table`)} > tbody.${n(`Table-tbody`)}`,inner:`td.${n(`Table-cell`)}`}}}],wrapperCustomStyle:o,id:s},env:c})))},s.contextType=N,s.propsList=`source.columnsTogglable.columns.items.rowSelection.expandable.sticky.itemBadge.popOverContainer.keyField.childrenColumnName.rowClassNameExpr.lineHeight.bordered.footer.maxKeepItemSelectionLength.keepItemSelectionOnPageChange.itemActions.headingClassName.footSummary.headSummary.saveImmediately.selectable.multiple.primaryField.hideQuickSaveBtn.selected.placeholder.autoFillHeight`.split(`.`),s.defaultProps={keyField:`id`,canAccessSuperData:!1,lazyRenderAfter:100},_([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,void 0)],s.prototype,`getPopOverContainer`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Number,Number]),a(`design:returntype`,void 0)],s.prototype,`subFormRef`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,void 0)],s.prototype,`reset`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Number]),a(`design:returntype`,void 0)],s.prototype,`rowClassName`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Number]),a(`design:returntype`,void 0)],s.prototype,`expandedRowClassName`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Number]),a(`design:returntype`,void 0)],s.prototype,`expandedRowRender`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Number,Array]),a(`design:returntype`,void 0)],s.prototype,`rowExpandable`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,Promise)],s.prototype,`handleSave`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Array,Array,Object,Object]),a(`design:returntype`,void 0)],s.prototype,`handleQuickSave`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Object,Boolean,Object]),a(`design:returntype`,void 0)],s.prototype,`handleQuickChange`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Object]),a(`design:returntype`,void 0)],s.prototype,`handleAction`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Array,Array,Array]),a(`design:returntype`,Promise)],s.prototype,`handleSelected`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,Promise)],s.prototype,`handleSort`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,Promise)],s.prototype,`handleFilter`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[String,Object]),a(`design:returntype`,Promise)],s.prototype,`handleSearch`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Number]),a(`design:returntype`,Promise)],s.prototype,`handleRowClick`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Number]),a(`design:returntype`,Promise)],s.prototype,`handleRowDbClick`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Number]),a(`design:returntype`,Promise)],s.prototype,`handleRowMouseEnter`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object,Object,Number]),a(`design:returntype`,Promise)],s.prototype,`handleRowMouseLeave`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Number,Number,Array]),a(`design:returntype`,Promise)],s.prototype,`handleOrderChange`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,Promise)],s.prototype,`handleSaveOrder`,null),_([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,void 0)],s.prototype,`getRef`,null),s}(X.Component),ne=function(e){y(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.receive=function(e,t){var n,r=this.context;if(this.props?.host)return(n=this.props.host).receive?.call(n,e,t);if(t)return r.send(t,e)},n.prototype.reload=function(e,t,n){var r,i,a=this.context;if((r=a?.parent)==null||r.getComponents(),this.props?.host)return(i=this.props.host).reload?.call(i,e,t,n);if(e)return a.reload(e,n)},n.prototype.setData=function(e,n,r,i){return M(this,void 0,void 0,function(){var a,o,s,c,l,d,f,p,m;return x(this,function(h){switch(h.label){case 0:return a=this.props.store,o=a.data.rows.length,r===void 0?[3,1]:(s=S([],u(a.data.rows),!1),c=String(r).split(`,`),c.forEach(function(t){var n=Number(t);s.splice(n,1,e)}),[2,a.updateData({rows:s},void 0,n)]);case 1:if(i===void 0)return[3,6];l=S([],u(a.data.rows),!1),d=0,h.label=2;case 2:return d<o?(f=l[d],[4,E(i,f)]):[3,5];case 3:p=h.sent(),p&&l.splice(d,1,e),h.label=4;case 4:return d++,[3,2];case 5:return[2,a.updateData({rows:l},void 0,n)];case 6:return m=t(t({},e),{rows:e.rows??e.items}),[2,a.updateData(m,void 0,n)]}})})},n.prototype.getData=function(){var e=this.props,t=e.store,n=e.data;return t.getData(n)},n=_([U({type:`table2`,storeType:T.name,name:`table2`,isolateScope:!0})],n),n}($);export{ne as TableRenderer,$ as default};