import{qo as e}from"./index-Z33w_AY6.js";var t=e(((e,t)=>{(function(n,r){typeof e==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof e==`object`?e.ecStat=r():n.ecStat=r()})(e,function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p=``,n(0)})([(function(e,t,n){var r=function(e){return{clustering:n(1),regression:n(5),statistics:n(6),histogram:n(15),transform:{regression:n(18),histogram:n(21),clustering:n(22)}}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(2),r=t.dataPreprocess,i=t.normalizeDimensions,a=n(3),o=n(4),s=a.size,c=a.sumOfColumn,l=a.sum,u=a.zeros,o=n(4),d=o.isNumber,f=Math.pow,p={SINGLE:`single`,MULTIPLE:`multiple`};function m(e,t,n){for(var r=u(e.length,2),i=v(t,x(e,n.dimensions)),a=!0,o,s,c,l;a;){a=!1;for(var d=0;d<e.length;d++){o=1/0,s=-1;for(var f=0;f<t;f++)c=y(e[d],i[f],n),c<o&&(o=c,s=f);r[d][0]!==s&&(a=!0),r[d][0]=s,r[d][1]=o}for(var d=0;d<t;d++){l=[];for(var f=0;f<r.length;f++)r[f][0]===d&&l.push(e[f]);i[d]=h(l,n)}}return{centroids:i,clusterAssigned:r}}function h(e,t){for(var n=[],r,i,a=0;a<t.dimensions.length;a++){var o=t.dimensions[a];r=0;for(var s=0;s<e.length;s++)r+=e[s][o];i=r/e.length,n.push(i)}return n}function g(e,t,n){var i=(d(t)?{clusterCount:t,stepByStep:n}:t)||{clusterCount:2},a=i.clusterCount;if(a<2)return;var o=b(e,i),s=o.outputType===p.SINGLE,f=r(e,{dimensions:o.dimensions}),g=u(f.length,2),v,x,S;function C(e,t){g[e][1]=t}function w(e){return g[e][1]}if(s){v=[];var T=o.outputClusterIndexDimension;x=function(e,t){v[e][T]=t},S=function(e){return v[e][T]};for(var E=0;E<f.length;E++)v.push(f[E].slice()),C(E,0),x(E,0)}else x=function(e,t){g[e][0]=t},S=function(e){return g[e][0]};for(var D=h(f,o),O=[D],E=0;E<f.length;E++){var k=y(f[E],D,o);C(E,k)}var A,j,M,N,P,F,I=1,L={data:v,centroids:O,isEnd:!1};s||(L.clusterAssment=g);function R(){if(I<a){A=1/0;for(var e,t,n,r=0;r<O.length;r++){j=[],M=[];for(var i=0;i<f.length;i++)S(i)===r?j.push(f[i]):M.push(w(i));N=m(j,2,o),P=c(N.clusterAssigned,1),F=l(M),P+F<A&&(A=F+P,e=r,t=N.centroids,n=N.clusterAssigned)}for(var i=0;i<n.length;i++)n[i][0]===0?n[i][0]=e:n[i][0]===1&&(n[i][0]=O.length);O[e]=t[0],O.push(t[1]);for(var i=0,r=0;i<f.length&&r<n.length;i++)S(i)===e&&(x(i,n[r][0]),C(i,n[r++][1]));var u=[];if(!s){for(var i=0;i<O.length;i++){u[i]=[];for(var r=0;r<f.length;r++)S(r)===i&&u[i].push(f[r])}L.pointsInCluster=u}I++}else L.isEnd=!0}if(i.stepByStep)L.next=function(){return R(),_(L,o),L};else for(;R(),!L.isEnd;);return _(L,o),L}function _(e,t){var n=t.outputCentroidDimensions;if(!(t.outputType!==p.SINGLE||n==null))for(var r=e.data,i=e.centroids,a=0;a<r.length;a++)for(var o=r[a],s=i[o[t.outputClusterIndexDimension]],c=Math.min(s.length,n.length),l=0;l<c;l++)o[n[l]]=s[l]}function v(e,t){for(var n=u(e,t.length),r=0;r<t.length;r++)for(var i=t[r],a=0;a<e;a++)n[a][r]=i.min+i.span*Math.random();return n}function y(e,t,n){for(var r=0,i=n.dimensions,a=n.rawExtents,o=0;o<i.length;o++){var s=a[o].span;if(s){var c=(e[i[o]]-t[o])/s;r+=f(c,2)}}return r}function b(e,t){var n=s(e);if(n.length<1)throw Error(`The input data of clustering should be two-dimension array.`);for(var r=n[1],a=[],c=0;c<r;c++)a.push(c);var l=i(t.dimensions,a),u=t.outputType||p.MULTIPLE,d=t.outputClusterIndexDimension;if(u===p.SINGLE&&!o.isNumber(d))throw Error(`outputClusterIndexDimension is required as a number.`);return{dimensions:l,rawExtents:x(e,l),outputType:u,outputClusterIndexDimension:d,outputCentroidDimensions:t.outputCentroidDimensions}}function x(e,t){for(var n=[],r=t.length,i=0;i<r;i++)n.push({min:1/0,max:-1/0});for(var i=0;i<e.length;i++)for(var a=e[i],o=0;o<r;o++){var s=n[o],c=a[t[o]];s.min>c&&(s.min=c),s.max<c&&(s.max=c)}for(var i=0;i<r;i++)n[i].span=n[i].max-n[i].min;return n}return{OutputType:p,hierarchicalKMeans:g}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(3),r=t.isArray,i=t.size,a=n(4).isNumber;function o(e,t){return typeof e==`number`?[e]:e??t}function s(e,t){t||={};var n=t.dimensions,o={};if(n!=null)for(var s=0;s<n.length;s++)o[n[s]]=!0;var c=t.toOneDimensionArray?n?n[0]:0:null;function l(e){return!n||o.hasOwnProperty(e)}if(!r(e))throw Error(`Invalid data type, you should input an array`);var u=[],d=i(e);if(d.length===1)for(var s=0;s<d[0];s++){var f=e[s];a(f)&&u.push(f)}else if(d.length===2)for(var s=0;s<d[0];s++){for(var p=!0,f=e[s],m=0;m<d[1];m++)l(m)&&!a(f[m])&&(p=!1);p&&u.push(c==null?f:f[c])}return u}function c(e){var t=e.toString(),n=t.indexOf(`.`);return n<0?0:t.length-1-n}return{normalizeDimensions:o,dataPreprocess:s,getPrecision:c}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=Object.prototype.toString,n=Array.prototype.map;function r(e){for(var t=[];i(e);)t.push(e.length),e=e[0];return t}function i(e){return t.call(e)===`[object Array]`}function a(e,t){for(var n=[],r=0;r<e;r++){n[r]=[];for(var i=0;i<t;i++)n[r][i]=0}return n}function o(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function s(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r][t];return n}function c(e,t){return e>t?1:e<t?-1:e===t?0:NaN}function l(e,t,n,r){for(n??=0,r??=e.length;n<r;){var i=Math.floor((n+r)/2),a=c(e[i],t);if(a>0)r=i;else if(a<0)n=i+1;else return i+1}return n}function u(e,t,r){if(e&&t){if(e.map&&e.map===n)return e.map(t,r);for(var i=[],a=0,o=e.length;a<o;a++)i.push(t.call(r,e[a],a,e));return i}}return{size:r,isArray:i,zeros:a,sum:o,sumOfColumn:s,ascending:c,bisect:l,map:u}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){function t(e){return e=e===null?NaN:+e,typeof e==`number`&&!isNaN(e)}function n(e){return isFinite(e)&&e===Math.round(e)}function r(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/10**t>=10&&t++,t}return{isNumber:t,isInteger:n,quantityExponent:r}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(2),r=t.dataPreprocess,i=t.normalizeDimensions,a={linear:function(e,t){for(var n=t.dimensions[0],r=t.dimensions[1],i=0,a=0,o=0,s=0,c=e.length,l=0;l<c;l++){var u=e[l];i+=u[n],a+=u[r],o+=u[n]*u[r],s+=u[n]*u[n]}for(var d=(c*o-i*a)/(c*s-i*i),f=a/c-d*i/c,p=[],m=0;m<e.length;m++){var u=e[m],h=u.slice();h[n]=u[n],h[r]=d*u[n]+f,p.push(h)}var g=`y = `+Math.round(d*100)/100+`x + `+Math.round(f*100)/100;return{points:p,parameter:{gradient:d,intercept:f},expression:g}},linearThroughOrigin:function(e,t){for(var n=t.dimensions[0],r=t.dimensions[1],i=0,a=0,o=0;o<e.length;o++){var s=e[o];i+=s[n]*s[n],a+=s[n]*s[r]}for(var c=a/i,l=[],u=0;u<e.length;u++){var s=e[u],d=s.slice();d[n]=s[n],d[r]=s[n]*c,l.push(d)}var f=`y = `+Math.round(c*100)/100+`x`;return{points:l,parameter:{gradient:c},expression:f}},exponential:function(e,t){for(var n=t.dimensions[0],r=t.dimensions[1],i=0,a=0,o=0,s=0,c=0,l=0,u=0;u<e.length;u++){var d=e[u];i+=d[n],a+=d[r],l+=d[n]*d[r],o+=d[n]*d[n]*d[r],s+=d[r]*Math.log(d[r]),c+=d[n]*d[r]*Math.log(d[r])}for(var f=a*o-l*l,p=Math.E**+((o*s-l*c)/f),m=(a*c-l*s)/f,h=[],g=0;g<e.length;g++){var d=e[g],_=d.slice();_[n]=d[n],_[r]=p*Math.E**+(m*d[n]),h.push(_)}var v=`y = `+Math.round(p*100)/100+`e^(`+Math.round(m*100)/100+`x)`;return{points:h,parameter:{coefficient:p,index:m},expression:v}},logarithmic:function(e,t){for(var n=t.dimensions[0],r=t.dimensions[1],i=0,a=0,o=0,s=0,c=0;c<e.length;c++){var l=e[c];i+=Math.log(l[n]),a+=l[r]*Math.log(l[n]),o+=l[r],s+=Math.log(l[n])**2}for(var u=(c*a-o*i)/(c*s-i*i),d=(o-u*i)/c,f=[],p=0;p<e.length;p++){var l=e[p],m=l.slice();m[n]=l[n],m[r]=u*Math.log(l[n])+d,f.push(m)}var h=`y = `+Math.round(d*100)/100+` + `+Math.round(u*100)/100+`ln(x)`;return{points:f,parameter:{gradient:u,intercept:d},expression:h}},polynomial:function(e,t){var n=t.dimensions[0],r=t.dimensions[1],i=t.order;i??=2;for(var a=[],s=[],c=i+1,l=0;l<c;l++){for(var u=0,d=0;d<e.length;d++){var f=e[d];u+=f[r]*f[n]**+l}s.push(u);for(var p=[],m=0;m<c;m++){for(var h=0,g=0;g<e.length;g++)h+=e[g][n]**+(l+m);p.push(h)}a.push(p)}a.push(s);for(var _=o(a,c),v=[],l=0;l<e.length;l++){for(var y=0,f=e[l],d=0;d<_.length;d++)y+=_[d]*f[n]**+d;var b=f.slice();b[n]=f[n],b[r]=y,v.push(b)}for(var x=`y = `,l=_.length-1;l>=0;l--)l>1?x+=Math.round(_[l]*10**(l+1))/10**(l+1)+`x^`+l+` + `:l===1?x+=Math.round(_[l]*100)/100+`x + `:x+=Math.round(_[l]*100)/100;return{points:v,parameter:_,expression:x}}};function o(e,t){for(var n=0;n<e.length-1;n++){for(var r=n,i=n+1;i<e.length-1;i++)Math.abs(e[n][i])>Math.abs(e[n][r])&&(r=i);for(var a=n;a<e.length;a++){var o=e[a][n];e[a][n]=e[a][r],e[a][r]=o}for(var s=n+1;s<e.length-1;s++)for(var c=e.length-1;c>=n;c--)e[c][s]-=e[c][n]/e[n][n]*e[n][s]}for(var l=Array(t),u=e.length-1,i=e.length-2;i>=0;i--){for(var o=0,n=i+1;n<e.length-1;n++)o+=e[n][i]*l[n];l[i]=(e[u][i]-o)/e[i][i]}return l}return function(e,t,n){var o=typeof n==`number`?{order:n}:n||{},s=i(o.dimensions,[0,1]),c=r(t,{dimensions:s}),l=a[e](c,{order:o.order,dimensions:s}),u=s[0];return l.points.sort(function(e,t){return e[u]-t[u]}),l}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t={};return t.max=n(7),t.deviation=n(8),t.mean=n(10),t.median=n(12),t.min=n(14),t.quantile=n(13),t.sampleVariance=n(9),t.sum=n(11),t}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(4).isNumber;function r(e){for(var n=-1/0,r=0;r<e.length;r++)t(e[r])&&e[r]>n&&(n=e[r]);return n}return r}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(9);return function(e){var n=t(e);return n&&Math.sqrt(n)}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(4).isNumber,r=n(10);function i(e){var n=e.length;if(!n||n<2)return 0;if(e.length>=2){for(var i=r(e),a=0,o,s=0;s<e.length;s++)t(e[s])&&(o=e[s]-i,a+=o*o);return a/(e.length-1)}}return i}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(11);function r(e){return e.length?t(e)/e.length:0}return r}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(4).isNumber;function r(e){var n=e.length;if(!n)return 0;for(var r=0,i=0;i<n;i++)t(e[i])&&(r+=e[i]);return r}return r}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(13);function r(e){return t(e,.5)}return r}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){return function(e,t){var n=e.length;if(!n)return 0;if(t<=0||n<2)return e[0];if(t>=1)return e[n-1];var r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(4).isNumber;function r(e){for(var n=1/0,r=0;r<e.length;r++)t(e[r])&&e[r]<n&&(n=e[r]);return n}return r}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(7),r=n(14),i=n(13),a=n(8),o=n(2),s=o.dataPreprocess,c=o.normalizeDimensions,l=n(3),u=l.ascending,d=l.map,f=n(16),p=l.bisect,m=n(17);function h(e,n){for(var i=typeof n==`string`?{method:n}:n||{},a=i.method==null?g.squareRoot:g[i.method],o=s(e,{dimensions:c(i.dimensions),toOneDimensionArray:!0}),l=t(o),u=r(o),h=m(u,l,a(o,u,l)),_=h.step,v=h.toFixedPrecision,y=f(+(Math.ceil(u/_)*_).toFixed(v),+(Math.floor(l/_)*_).toFixed(v),_,v),b=y.length,x=Array(b+1),S=0;S<=b;S++)x[S]={},x[S].sample=[],x[S].x0=S>0?y[S-1]:y[S]-u===_?u:y[S]-_,x[S].x1=S<b?y[S]:l-y[S-1]===_?l:y[S-1]+_;for(var S=0;S<o.length;S++)u<=o[S]&&o[S]<=l&&x[p(y,o[S],0,b)].sample.push(o[S]);var e=d(x,function(e){return[+((e.x0+e.x1)/2).toFixed(v),e.sample.length,e.x0,e.x1,e.x0+` - `+e.x1]});return{bins:x,data:e,customData:d(x,function(e){return[e.x0,e.x1,e.sample.length]})}}var g={squareRoot:function(e){var t=Math.ceil(Math.sqrt(e.length));return t>50?50:t},scott:function(e,t,n){return Math.ceil((n-t)/(3.5*a(e)*e.length**(-1/3)))},freedmanDiaconis:function(e,t,n){return e.sort(u),Math.ceil((n-t)/(2*(i(e,.75)-i(e,.25))*e.length**(-1/3)))},sturges:function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}};return h}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(2).getPrecision;return function(e,n,r,i){var a=arguments.length;a<2?(n=e,e=0,r=1):a<3?r=1:a<4?(r=+r,i=t(r)):i=+i;for(var o=Math.ceil(((n-e)/r).toFixed(i)),s=Array(o+1),c=0;c<o+1;c++)s[c]=+(e+c*r).toFixed(i);return s}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(4);return function(e,n,r){var i=Math.abs(n-e)/r,a=t.quantityExponent(i),o=10**a,s=i/o;s>=Math.sqrt(50)?o*=10:s>=Math.sqrt(10)?o*=5:s>=Math.sqrt(2)&&(o*=2);var c=a<0?-a:0;return{step:+(n>=e?o:-o).toFixed(c),toFixedPrecision:c}}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(5),r=n(19),i=2;return{type:`ecStat:regression`,transform:function(e){var n=e.upstream,a=e.config||{},o=t(a.method||`linear`,n.cloneRawData(),{order:a.order,dimensions:r.normalizeExistingDimensions(e,a.dimensions)}),s=o.points,c=a.formulaOn;c??=`end`;var l;if(c!==`none`){for(var u=0;u<s.length;u++)s[u][i]=c===`start`&&u===0||c===`all`||c===`end`&&u===s.length-1?o.expression:``;l=n.cloneAllDimensionInfo(),l[i]={}}return[{dimensions:l,data:s}]}}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(3),r=n(4),i=n(20);function a(e,n){if(n==null)return;var r=e.upstream;if(t.isArray(n)){for(var i=[],a=0;a<n.length;a++){var o=r.getDimensionInfo(n[a]);s(o,n[a]),i[a]=o.index}return i}else{var o=r.getDimensionInfo(n);return s(o,n),o.index}function s(e,t){if(!e)throw Error(`Can not find dimension by `+t)}}function o(e){if(t.isArray(e)){for(var n=[],a=[],o=0;o<e.length;o++){var s=c(e[o]);n.push(s.name),a.push(s.index)}return{name:n,index:a}}else if(e!=null)return c(e);function c(e){if(r.isNumber(e))return{index:e};if(i.isObject(e)&&r.isNumber(e.index))return e;throw Error("Illegle new dimensions config. Expect `{ name: string, index: number }`.")}}return{normalizeExistingDimensions:a,normalizeNewDimensions:o}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){function t(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e){let t=typeof e;return t===`function`||!!e&&t===`object`}return{extend:t,isObject:n}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(15),r=n(19);return{type:`ecStat:histogram`,transform:function(e){var n=e.upstream,i=e.config||{},a=t(n.cloneRawData(),{method:i.method,dimensions:r.normalizeExistingDimensions(e,i.dimensions)});return[{dimensions:[`MeanOfV0V1`,`VCount`,`V0`,`V1`,`DisplayableName`],data:a.data},{data:a.customData}]}}}.call(t,n,t,e);r!==void 0&&(e.exports=r)}),(function(e,t,n){var r=function(e){var t=n(1),r=n(4),i=n(19),a=r.isNumber;return{type:`ecStat:clustering`,transform:function(e){var n=e.upstream,r=e.config||{},o=r.clusterCount;if(!a(o)||o<=0)throw Error(`config param "clusterCount" need to be specified as an interger greater than 1.`);if(o===1)return[{},{data:[]}];var s=i.normalizeNewDimensions(r.outputClusterIndexDimension),c=i.normalizeNewDimensions(r.outputCentroidDimensions);if(s==null)throw Error(`outputClusterIndexDimension is required as a number.`);for(var l=t.hierarchicalKMeans(n.cloneRawData(),{clusterCount:o,stepByStep:!1,dimensions:i.normalizeExistingDimensions(e,r.dimensions),outputType:t.OutputType.SINGLE,outputClusterIndexDimension:s.index,outputCentroidDimensions:(c||{}).index}),u=n.cloneAllDimensionInfo(),d=[],f=0;f<u.length;f++){var p=u[f];d.push(p.name)}if(d[s.index]=s.name,c)for(var f=0;f<c.index.length;f++)c.name[f]!=null&&(d[c.index[f]]=c.name[f]);return[{dimensions:d,data:l.data},{data:l.centroids}]}}}.call(t,n,t,e);r!==void 0&&(e.exports=r)})])})})),n=e(((e,n)=>{n.exports=t()}));export default n();