import{a as e,c as t,f as n,m as r,o as i,p as a}from"./editor.api-Ck4Uxo0P.js";import{t as o}from"./monaco.contribution-DIyLJP7l.js";var s=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},c=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},l=function(){function e(e,t){var n=this;this._modeId=e,this._defaults=t,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(function(){return n._stopWorker()}),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(function(){return n._updateExtraLibs()})}return e.prototype._stopWorker=function(){this._worker&&=(this._worker.dispose(),null),this._client=null},e.prototype.dispose=function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()},e.prototype._updateExtraLibs=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return this._worker?(e=++this._updateExtraLibsToken,[4,this._worker.getProxy()]):[2];case 1:return t=n.sent(),this._updateExtraLibsToken===e&&t.updateExtraLibs(this._defaults.getExtraLibs()),[2]}})})},e.prototype._getClient=function(){var e=this;if(!this._client){this._worker=a.createWebWorker({moduleId:`vs/language/typescript/tsWorker`,label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}});var t=this._worker.getProxy();this._defaults.getEagerModelSync()&&(t=t.then(function(t){return e._worker?e._worker.withSyncedResources(a.getModels().filter(function(t){return t.getLanguageId()===e._modeId}).map(function(e){return e.uri})):t})),this._client=t}return this._client},e.prototype.getLanguageServiceWorker=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r;return this._getClient().then(function(e){r=e}).then(function(n){if(e._worker)return e._worker.withSyncedResources(t)}).then(function(e){return r})},e}(),u={};u[`lib.d.ts`]=!0,u[`lib.dom.d.ts`]=!0,u[`lib.dom.iterable.d.ts`]=!0,u[`lib.es2015.collection.d.ts`]=!0,u[`lib.es2015.core.d.ts`]=!0,u[`lib.es2015.d.ts`]=!0,u[`lib.es2015.generator.d.ts`]=!0,u[`lib.es2015.iterable.d.ts`]=!0,u[`lib.es2015.promise.d.ts`]=!0,u[`lib.es2015.proxy.d.ts`]=!0,u[`lib.es2015.reflect.d.ts`]=!0,u[`lib.es2015.symbol.d.ts`]=!0,u[`lib.es2015.symbol.wellknown.d.ts`]=!0,u[`lib.es2016.array.include.d.ts`]=!0,u[`lib.es2016.d.ts`]=!0,u[`lib.es2016.full.d.ts`]=!0,u[`lib.es2017.d.ts`]=!0,u[`lib.es2017.full.d.ts`]=!0,u[`lib.es2017.intl.d.ts`]=!0,u[`lib.es2017.object.d.ts`]=!0,u[`lib.es2017.sharedmemory.d.ts`]=!0,u[`lib.es2017.string.d.ts`]=!0,u[`lib.es2017.typedarrays.d.ts`]=!0,u[`lib.es2018.asyncgenerator.d.ts`]=!0,u[`lib.es2018.asynciterable.d.ts`]=!0,u[`lib.es2018.d.ts`]=!0,u[`lib.es2018.full.d.ts`]=!0,u[`lib.es2018.intl.d.ts`]=!0,u[`lib.es2018.promise.d.ts`]=!0,u[`lib.es2018.regexp.d.ts`]=!0,u[`lib.es2019.array.d.ts`]=!0,u[`lib.es2019.d.ts`]=!0,u[`lib.es2019.full.d.ts`]=!0,u[`lib.es2019.object.d.ts`]=!0,u[`lib.es2019.string.d.ts`]=!0,u[`lib.es2019.symbol.d.ts`]=!0,u[`lib.es2020.bigint.d.ts`]=!0,u[`lib.es2020.d.ts`]=!0,u[`lib.es2020.full.d.ts`]=!0,u[`lib.es2020.intl.d.ts`]=!0,u[`lib.es2020.promise.d.ts`]=!0,u[`lib.es2020.sharedmemory.d.ts`]=!0,u[`lib.es2020.string.d.ts`]=!0,u[`lib.es2020.symbol.wellknown.d.ts`]=!0,u[`lib.es2021.d.ts`]=!0,u[`lib.es2021.full.d.ts`]=!0,u[`lib.es2021.promise.d.ts`]=!0,u[`lib.es2021.string.d.ts`]=!0,u[`lib.es2021.weakref.d.ts`]=!0,u[`lib.es5.d.ts`]=!0,u[`lib.es6.d.ts`]=!0,u[`lib.esnext.d.ts`]=!0,u[`lib.esnext.full.d.ts`]=!0,u[`lib.esnext.intl.d.ts`]=!0,u[`lib.esnext.promise.d.ts`]=!0,u[`lib.esnext.string.d.ts`]=!0,u[`lib.esnext.weakref.d.ts`]=!0,u[`lib.scripthost.d.ts`]=!0,u[`lib.webworker.d.ts`]=!0,u[`lib.webworker.importscripts.d.ts`]=!0,u[`lib.webworker.iterable.d.ts`]=!0;var d=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},p=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},m=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},h;(function(e){e[e.None=0]=`None`,e[e.Block=1]=`Block`,e[e.Smart=2]=`Smart`})(h||={});function g(e,t,n){if(n===void 0&&(n=0),typeof e==`string`)return e;if(e===void 0)return``;var r=``;if(n){r+=t;for(var i=0;i<n;i++)r+=`  `}if(r+=e.messageText,n++,e.next)for(var a=0,o=e.next;a<o.length;a++){var s=o[a];r+=g(s,t,n)}return r}function _(e){return e?e.map(function(e){return e.text}).join(``):``}var v=function(){function e(e){this._worker=e}return e.prototype._textSpanToRange=function(e,t){var n=e.getPositionAt(t.start),r=e.getPositionAt(t.start+t.length);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:r.lineNumber,endColumn:r.column}},e}(),y=function(){function e(e){this._worker=e,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}return e.prototype.isLibFile=function(e){return e&&e.path.indexOf(`/lib.`)===0?!!u[e.path.slice(1)]:!1},e.prototype.getOrCreateModel=function(e){var t=n.parse(e),r=a.getModel(t);if(r)return r;if(this.isLibFile(t)&&this._hasFetchedLibFiles)return a.createModel(this._libFiles[t.path.slice(1)],`typescript`,t);var i=o.getExtraLibs()[e];return i?a.createModel(i.content,`typescript`,t):null},e.prototype._containsLibFile=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(this.isLibFile(r))return!0}return!1},e.prototype.fetchLibFilesIfNecessary=function(e){return p(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this._containsLibFile(e)?[4,this._fetchLibFiles()]:[2];case 1:return t.sent(),[2]}})})},e.prototype._fetchLibFiles=function(){var e=this;return this._fetchLibFilesPromise||=this._worker().then(function(e){return e.getLibFiles()}).then(function(t){e._hasFetchedLibFiles=!0,e._libFiles=t}),this._fetchLibFilesPromise},e}(),b;(function(e){e[e.Warning=0]=`Warning`,e[e.Error=1]=`Error`,e[e.Suggestion=2]=`Suggestion`,e[e.Message=3]=`Message`})(b||={});var x=function(t){d(r,t);function r(e,n,r,i){var o=t.call(this,i)||this;o._libFiles=e,o._defaults=n,o._selector=r,o._disposables=[],o._listener=Object.create(null);var s=function(e){if(e.getLanguageId()===r){var t=function(){o._defaults.getDiagnosticsOptions().onlyVisible?e.isAttachedToEditor()&&o._doValidate(e):o._doValidate(e)},n,i=e.onDidChangeContent(function(){clearTimeout(n),n=window.setTimeout(t,500)}),s=e.onDidChangeAttached(function(){o._defaults.getDiagnosticsOptions().onlyVisible&&(e.isAttachedToEditor()?t():a.setModelMarkers(e,o._selector,[]))});o._listener[e.uri.toString()]={dispose:function(){i.dispose(),s.dispose(),clearTimeout(n)}},t()}},c=function(e){a.setModelMarkers(e,o._selector,[]);var t=e.uri.toString();o._listener[t]&&(o._listener[t].dispose(),delete o._listener[t])};o._disposables.push(a.onDidCreateModel(function(e){return s(e)})),o._disposables.push(a.onWillDisposeModel(c)),o._disposables.push(a.onDidChangeModelLanguage(function(e){c(e.model),s(e.model)})),o._disposables.push({dispose:function(){for(var e=0,t=a.getModels();e<t.length;e++){var n=t[e];c(n)}}});var l=function(){for(var e=0,t=a.getModels();e<t.length;e++){var n=t[e];c(n),s(n)}};return o._disposables.push(o._defaults.onDidChange(l)),o._disposables.push(o._defaults.onDidExtraLibsChange(l)),a.getModels().forEach(function(e){return s(e)}),o}return r.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},r.prototype._doValidate=function(e){return p(this,void 0,void 0,function(){var t,r,i,o,s,c,l,u,d,f=this;return m(this,function(p){switch(p.label){case 0:return[4,this._worker(e.uri)];case 1:return t=p.sent(),e.isDisposed()?[2]:(r=[],i=this._defaults.getDiagnosticsOptions(),o=i.noSyntaxValidation,s=i.noSemanticValidation,c=i.noSuggestionDiagnostics,o||r.push(t.getSyntacticDiagnostics(e.uri.toString())),s||r.push(t.getSemanticDiagnostics(e.uri.toString())),c||r.push(t.getSuggestionDiagnostics(e.uri.toString())),[4,Promise.all(r)]);case 2:return l=p.sent(),!l||e.isDisposed()?[2]:(u=l.reduce(function(e,t){return t.concat(e)},[]).filter(function(e){return(f._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(e.code)===-1}),d=u.map(function(e){return e.relatedInformation||[]}).reduce(function(e,t){return t.concat(e)},[]).map(function(e){return e.file?n.parse(e.file.fileName):null}),[4,this._libFiles.fetchLibFilesIfNecessary(d)]);case 3:return p.sent(),e.isDisposed()||a.setModelMarkers(e,this._selector,u.map(function(t){return f._convertDiagnostics(e,t)})),[2]}})})},r.prototype._convertDiagnostics=function(e,t){var n=t.start||0,r=t.length||1,a=e.getPositionAt(n),o=a.lineNumber,s=a.column,c=e.getPositionAt(n+r),l=c.lineNumber,u=c.column,d=[];return t.reportsUnnecessary&&d.push(i.Unnecessary),t.reportsDeprecated&&d.push(i.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(t.category),startLineNumber:o,startColumn:s,endLineNumber:l,endColumn:u,message:g(t.messageText,`
`),code:t.code.toString(),tags:d,relatedInformation:this._convertRelatedInformation(e,t.relatedInformation)}},r.prototype._convertRelatedInformation=function(e,t){var n=this;if(!t)return[];var r=[];return t.forEach(function(t){var i=e;if(t.file&&(i=n._libFiles.getOrCreateModel(t.file.fileName)),i){var a=t.start||0,o=t.length||1,s=i.getPositionAt(a),c=s.lineNumber,l=s.column,u=i.getPositionAt(a+o),d=u.lineNumber,f=u.column;r.push({resource:i.uri,startLineNumber:c,startColumn:l,endLineNumber:d,endColumn:f,message:g(t.messageText,`
`)})}}),r},r.prototype._tsDiagnosticCategoryToMarkerSeverity=function(t){switch(t){case b.Error:return e.Error;case b.Message:return e.Info;case b.Warning:return e.Warning;case b.Suggestion:return e.Hint}return e.Info},r}(v),S=function(e){d(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(n.prototype,`triggerCharacters`,{get:function(){return[`.`]},enumerable:!1,configurable:!0}),n.prototype.provideCompletionItems=function(e,i,a,o){return p(this,void 0,void 0,function(){var a,o,s,c,l,u,d;return m(this,function(f){switch(f.label){case 0:return a=e.getWordUntilPosition(i),o=new t(i.lineNumber,a.startColumn,i.lineNumber,a.endColumn),s=e.uri,c=e.getOffsetAt(i),[4,this._worker(s)];case 1:return l=f.sent(),e.isDisposed()?[2]:[4,l.getCompletionsAtPosition(s.toString(),c)];case 2:return u=f.sent(),!u||e.isDisposed()?[2]:(d=u.entries.map(function(a){var l=o;if(a.replacementSpan){var u=e.getPositionAt(a.replacementSpan.start),d=e.getPositionAt(a.replacementSpan.start+a.replacementSpan.length);l=new t(u.lineNumber,u.column,d.lineNumber,d.column)}var f=[];return a.kindModifiers?.indexOf(`deprecated`)!==-1&&f.push(r.CompletionItemTag.Deprecated),{uri:s,position:i,offset:c,range:l,label:a.name,insertText:a.name,sortText:a.sortText,kind:n.convertKind(a.kind),tags:f}}),[2,{suggestions:d}])}})})},n.prototype.resolveCompletionItem=function(e,t){return p(this,void 0,void 0,function(){var t,r,i,a,o,s;return m(this,function(c){switch(c.label){case 0:return t=e,r=t.uri,i=t.position,a=t.offset,[4,this._worker(r)];case 1:return o=c.sent(),[4,o.getCompletionEntryDetails(r.toString(),a,t.label)];case 2:return s=c.sent(),s?[2,{uri:r,position:i,label:s.name,kind:n.convertKind(s.kind),detail:_(s.displayParts),documentation:{value:n.createDocumentationString(s)}}]:[2,t]}})})},n.convertKind=function(e){switch(e){case A.primitiveType:case A.keyword:return r.CompletionItemKind.Keyword;case A.variable:case A.localVariable:return r.CompletionItemKind.Variable;case A.memberVariable:case A.memberGetAccessor:case A.memberSetAccessor:return r.CompletionItemKind.Field;case A.function:case A.memberFunction:case A.constructSignature:case A.callSignature:case A.indexSignature:return r.CompletionItemKind.Function;case A.enum:return r.CompletionItemKind.Enum;case A.module:return r.CompletionItemKind.Module;case A.class:return r.CompletionItemKind.Class;case A.interface:return r.CompletionItemKind.Interface;case A.warning:return r.CompletionItemKind.File}return r.CompletionItemKind.Property},n.createDocumentationString=function(e){var t=_(e.documentation);if(e.tags)for(var n=0,r=e.tags;n<r.length;n++){var i=r[n];t+=`

`+C(i)}return t},n}(v);function C(e){var t=`*@`+e.name+`*`;if(e.name===`param`&&e.text){var n=e.text,r=n[0],i=n.slice(1);t+="`"+r.text+"`",i.length>0&&(t+=` — `+i.map(function(e){return e.text}).join(` `))}else Array.isArray(e.text)?t+=` — `+e.text.map(function(e){return e.text}).join(` `):e.text&&(t+=` — `+e.text);return t}var w=function(e){d(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.signatureHelpTriggerCharacters=[`(`,`,`],t}return t._toSignatureHelpTriggerReason=function(e){switch(e.triggerKind){case r.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:`retrigger`,triggerCharacter:e.triggerCharacter}:{kind:`characterTyped`,triggerCharacter:e.triggerCharacter}:{kind:`invoked`};case r.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:`retrigger`}:{kind:`invoked`};case r.SignatureHelpTriggerKind.Invoke:default:return{kind:`invoked`}}},t.prototype.provideSignatureHelp=function(e,n,r,i){return p(this,void 0,void 0,function(){var r,a,o,s,c;return m(this,function(l){switch(l.label){case 0:return r=e.uri,a=e.getOffsetAt(n),[4,this._worker(r)];case 1:return o=l.sent(),e.isDisposed()?[2]:[4,o.getSignatureHelpItems(r.toString(),a,{triggerReason:t._toSignatureHelpTriggerReason(i)})];case 2:return s=l.sent(),!s||e.isDisposed()?[2]:(c={activeSignature:s.selectedItemIndex,activeParameter:s.argumentIndex,signatures:[]},s.items.forEach(function(e){var t={label:``,parameters:[]};t.documentation={value:_(e.documentation)},t.label+=_(e.prefixDisplayParts),e.parameters.forEach(function(n,r,i){var a=_(n.displayParts),o={label:a,documentation:{value:_(n.documentation)}};t.label+=a,t.parameters.push(o),r<i.length-1&&(t.label+=_(e.separatorDisplayParts))}),t.label+=_(e.suffixDisplayParts),c.signatures.push(t)}),[2,{value:c,dispose:function(){}}])}})})},t}(v),T=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideHover=function(e,t,n){return p(this,void 0,void 0,function(){var n,r,i,a,o,s,c;return m(this,function(l){switch(l.label){case 0:return n=e.uri,r=e.getOffsetAt(t),[4,this._worker(n)];case 1:return i=l.sent(),e.isDisposed()?[2]:[4,i.getQuickInfoAtPosition(n.toString(),r)];case 2:return a=l.sent(),!a||e.isDisposed()?[2]:(o=_(a.documentation),s=a.tags?a.tags.map(function(e){return C(e)}).join(`  

`):``,c=_(a.displayParts),[2,{range:this._textSpanToRange(e,a.textSpan),contents:[{value:"```typescript\n"+c+"\n```\n"},{value:o+(s?`

`+s:``)}]}])}})})},t}(v),E=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideDocumentHighlights=function(e,t,n){return p(this,void 0,void 0,function(){var n,i,a,o,s=this;return m(this,function(c){switch(c.label){case 0:return n=e.uri,i=e.getOffsetAt(t),[4,this._worker(n)];case 1:return a=c.sent(),e.isDisposed()?[2]:[4,a.getOccurrencesAtPosition(n.toString(),i)];case 2:return o=c.sent(),!o||e.isDisposed()?[2]:[2,o.map(function(t){return{range:s._textSpanToRange(e,t.textSpan),kind:t.isWriteAccess?r.DocumentHighlightKind.Write:r.DocumentHighlightKind.Text}})]}})})},t}(v),D=function(e){d(t,e);function t(t,n){var r=e.call(this,n)||this;return r._libFiles=t,r}return t.prototype.provideDefinition=function(e,t,r){return p(this,void 0,void 0,function(){var r,i,a,o,s,c,l,u,d;return m(this,function(f){switch(f.label){case 0:return r=e.uri,i=e.getOffsetAt(t),[4,this._worker(r)];case 1:return a=f.sent(),e.isDisposed()?[2]:[4,a.getDefinitionAtPosition(r.toString(),i)];case 2:return o=f.sent(),!o||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(o.map(function(e){return n.parse(e.fileName)}))];case 3:if(f.sent(),e.isDisposed())return[2];for(s=[],c=0,l=o;c<l.length;c++)u=l[c],d=this._libFiles.getOrCreateModel(u.fileName),d&&s.push({uri:d.uri,range:this._textSpanToRange(d,u.textSpan)});return[2,s]}})})},t}(v),O=function(e){d(t,e);function t(t,n){var r=e.call(this,n)||this;return r._libFiles=t,r}return t.prototype.provideReferences=function(e,t,r,i){return p(this,void 0,void 0,function(){var r,i,a,o,s,c,l,u,d;return m(this,function(f){switch(f.label){case 0:return r=e.uri,i=e.getOffsetAt(t),[4,this._worker(r)];case 1:return a=f.sent(),e.isDisposed()?[2]:[4,a.getReferencesAtPosition(r.toString(),i)];case 2:return o=f.sent(),!o||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(o.map(function(e){return n.parse(e.fileName)}))];case 3:if(f.sent(),e.isDisposed())return[2];for(s=[],c=0,l=o;c<l.length;c++)u=l[c],d=this._libFiles.getOrCreateModel(u.fileName),d&&s.push({uri:d.uri,range:this._textSpanToRange(d,u.textSpan)});return[2,s]}})})},t}(v),k=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideDocumentSymbols=function(e,t){return p(this,void 0,void 0,function(){var t,n,i,a,o,s=this;return m(this,function(c){switch(c.label){case 0:return t=e.uri,[4,this._worker(t)];case 1:return n=c.sent(),e.isDisposed()?[2]:[4,n.getNavigationBarItems(t.toString())];case 2:return i=c.sent(),!i||e.isDisposed()?[2]:(a=function(t,n,i){var o={name:n.text,detail:``,kind:j[n.kind]||r.SymbolKind.Variable,range:s._textSpanToRange(e,n.spans[0]),selectionRange:s._textSpanToRange(e,n.spans[0]),tags:[]};if(i&&(o.containerName=i),n.childItems&&n.childItems.length>0)for(var c=0,l=n.childItems;c<l.length;c++){var u=l[c];a(t,u,o.name)}t.push(o)},o=[],i.forEach(function(e){return a(o,e)}),[2,o])}})})},t}(v),A=function(){function e(){}return e.unknown=``,e.keyword=`keyword`,e.script=`script`,e.module=`module`,e.class=`class`,e.interface=`interface`,e.type=`type`,e.enum=`enum`,e.variable=`var`,e.localVariable=`local var`,e.function=`function`,e.localFunction=`local function`,e.memberFunction=`method`,e.memberGetAccessor=`getter`,e.memberSetAccessor=`setter`,e.memberVariable=`property`,e.constructorImplementation=`constructor`,e.callSignature=`call`,e.indexSignature=`index`,e.constructSignature=`construct`,e.parameter=`parameter`,e.typeParameter=`type parameter`,e.primitiveType=`primitive type`,e.label=`label`,e.alias=`alias`,e.const=`const`,e.let=`let`,e.warning=`warning`,e}(),j=Object.create(null);j[A.module]=r.SymbolKind.Module,j[A.class]=r.SymbolKind.Class,j[A.enum]=r.SymbolKind.Enum,j[A.interface]=r.SymbolKind.Interface,j[A.memberFunction]=r.SymbolKind.Method,j[A.memberVariable]=r.SymbolKind.Property,j[A.memberGetAccessor]=r.SymbolKind.Property,j[A.memberSetAccessor]=r.SymbolKind.Property,j[A.variable]=r.SymbolKind.Variable,j[A.const]=r.SymbolKind.Variable,j[A.localVariable]=r.SymbolKind.Variable,j[A.variable]=r.SymbolKind.Variable,j[A.function]=r.SymbolKind.Function,j[A.localFunction]=r.SymbolKind.Function;var M=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t._convertOptions=function(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:h.Smart,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}},t.prototype._convertTextChanges=function(e,t){return{text:t.newText,range:this._textSpanToRange(e,t.span)}},t}(v),N=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideDocumentRangeFormattingEdits=function(e,t,n,r){return p(this,void 0,void 0,function(){var r,i,a,o,s,c=this;return m(this,function(l){switch(l.label){case 0:return r=e.uri,i=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),[4,this._worker(r)];case 1:return o=l.sent(),e.isDisposed()?[2]:[4,o.getFormattingEditsForRange(r.toString(),i,a,M._convertOptions(n))];case 2:return s=l.sent(),!s||e.isDisposed()?[2]:[2,s.map(function(t){return c._convertTextChanges(e,t)})]}})})},t}(M),P=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,`autoFormatTriggerCharacters`,{get:function(){return[`;`,`}`,`
`]},enumerable:!1,configurable:!0}),t.prototype.provideOnTypeFormattingEdits=function(e,t,n,r,i){return p(this,void 0,void 0,function(){var i,a,o,s,c=this;return m(this,function(l){switch(l.label){case 0:return i=e.uri,a=e.getOffsetAt(t),[4,this._worker(i)];case 1:return o=l.sent(),e.isDisposed()?[2]:[4,o.getFormattingEditsAfterKeystroke(i.toString(),a,n,M._convertOptions(r))];case 2:return s=l.sent(),!s||e.isDisposed()?[2]:[2,s.map(function(t){return c._convertTextChanges(e,t)})]}})})},t}(M),F=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideCodeActions=function(e,t,n,r){return p(this,void 0,void 0,function(){var r,i,a,o,s,c,l,u,d=this;return m(this,function(f){switch(f.label){case 0:return r=e.uri,i=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=M._convertOptions(e.getOptions()),s=n.markers.filter(function(e){return e.code}).map(function(e){return e.code}).map(Number),[4,this._worker(r)];case 1:return c=f.sent(),e.isDisposed()?[2]:[4,c.getCodeFixesAtPosition(r.toString(),i,a,s,o)];case 2:return l=f.sent(),!l||e.isDisposed()?[2,{actions:[],dispose:function(){}}]:(u=l.filter(function(e){return e.changes.filter(function(e){return e.isNewFile}).length===0}).map(function(t){return d._tsCodeFixActionToMonacoCodeAction(e,n,t)}),[2,{actions:u,dispose:function(){}}])}})})},t.prototype._tsCodeFixActionToMonacoCodeAction=function(e,t,n){for(var r=[],i=0,a=n.changes;i<a.length;i++)for(var o=a[i],s=0,c=o.textChanges;s<c.length;s++){var l=c[s];r.push({resource:e.uri,edit:{range:this._textSpanToRange(e,l.span),text:l.newText}})}return{title:n.description,edit:{edits:r},diagnostics:t.markers,kind:`quickfix`}},t}(M),I=function(e){d(t,e);function t(t,n){var r=e.call(this,n)||this;return r._libFiles=t,r}return t.prototype.provideRenameEdits=function(e,t,n,r){return p(this,void 0,void 0,function(){var r,i,a,o,s,c,l,u,d,f,p;return m(this,function(m){switch(m.label){case 0:return r=e.uri,i=r.toString(),a=e.getOffsetAt(t),[4,this._worker(r)];case 1:return o=m.sent(),e.isDisposed()?[2]:[4,o.getRenameInfo(i,a,{allowRenameOfImportPath:!1})];case 2:if(s=m.sent(),s.canRename===!1)return[2,{edits:[],rejectReason:s.localizedErrorMessage}];if(s.fileToRename!==void 0)throw Error(`Renaming files is not supported.`);return[4,o.findRenameLocations(i,a,!1,!1,!1)];case 3:if(c=m.sent(),!c||e.isDisposed())return[2];for(l=[],u=0,d=c;u<d.length;u++)if(f=d[u],p=this._libFiles.getOrCreateModel(f.fileName),p)l.push({resource:p.uri,edit:{range:this._textSpanToRange(p,f.textSpan),text:n}});else throw Error(`Unknown file `+f.fileName+`.`);return[2,{edits:l}]}})})},t}(v),L=function(e){d(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.provideInlayHints=function(e,t,n){return p(this,void 0,void 0,function(){var n,r,i,a,o,s,c=this;return m(this,function(l){switch(l.label){case 0:return n=e.uri,r=n.toString(),i=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),[4,this._worker(n)];case 1:return o=l.sent(),e.isDisposed()?[2,[]]:[4,o.provideInlayHints(r,i,a)];case 2:return s=l.sent(),[2,s.map(function(t){return f(f({},t),{position:e.getPositionAt(t.position),kind:c._convertHintKind(t.kind)})})]}})})},t.prototype._convertHintKind=function(e){switch(e){case`Parameter`:return r.InlayHintKind.Parameter;case`Type`:return r.InlayHintKind.Type;default:return r.InlayHintKind.Other}},t}(v),R,z;function B(e){z=W(e,`typescript`)}function V(e){R=W(e,`javascript`)}function H(){return new Promise(function(e,t){if(!R)return t(`JavaScript not registered!`);e(R)})}function U(){return new Promise(function(e,t){if(!z)return t(`TypeScript not registered!`);e(z)})}function W(e,t){var n=new l(t,e),i=function(){var e=[...arguments];return n.getLanguageServiceWorker.apply(n,e)},a=new y(i);return r.registerCompletionItemProvider(t,new S(i)),r.registerSignatureHelpProvider(t,new w(i)),r.registerHoverProvider(t,new T(i)),r.registerDocumentHighlightProvider(t,new E(i)),r.registerDefinitionProvider(t,new D(a,i)),r.registerReferenceProvider(t,new O(a,i)),r.registerDocumentSymbolProvider(t,new k(i)),r.registerDocumentRangeFormattingEditProvider(t,new N(i)),r.registerOnTypeFormattingEditProvider(t,new P(i)),r.registerCodeActionProvider(t,new F(i)),r.registerRenameProvider(t,new I(a,i)),r.registerInlayHintsProvider(t,new L(i)),new x(a,e,t,i),i}export{H as getJavaScriptWorker,U as getTypeScriptWorker,V as setupJavaScript,B as setupTypeScript};