import{$o as e,An as t,Ao as n,Ci as r,Do as i,Fo as a,Hn as o,Ia as s,J as c,Kn as l,Ko as u,Mo as d,Na as f,Nn as p,No as m,Nr as h,Oa as g,Po as _,Ya as v,cr as y,dr as b,gt as x,hi as S,hr as C,jo as w,mr as T,ni as E,ua as D,vr as O,xr as k,ya as A,yr as j}from"./index-Z33w_AY6.js";var M=e(u()),N=e(i()),P=e(S()),F=function(e){m(i,e);function i(t){var n=e.call(this,t)||this,r=t.value;return n.state={isOpen:!1,inputValue:t.multiple||t.creatable===!1?``:n.valueToString(r),isFocused:!1,revealPassword:!1},n.focus=n.focus.bind(n),n.clearValue=n.clearValue.bind(n),n.toggleRevealPassword=n.toggleRevealPassword.bind(n),n.inputRef=n.inputRef.bind(n),n.handleClick=n.handleClick.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleChange=n.handleChange.bind(n),n.handleStateChange=n.handleStateChange.bind(n),n.loadAutoComplete=(0,N.default)(n.loadAutoComplete.bind(n),250,{trailing:!0,leading:!1}),n}return i.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.formItem,r=t.autoComplete,i=t.addHook,a=t.formInited,o=t.data,s=t.name;E(r,o)&&n&&(a?n.loadOptions(r,g(o,{term:``})):i&&(this.unHook=i(function(t){return w(e,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return[4,n.loadOptions(r,g(t,{term:``}))];case 1:return e.sent(),n.value&&f(t,s,n.value),[2]}})})},`init`)))},i.prototype.componentDidUpdate=function(e){var t=this.props;e.value!==t.value&&this.setState({inputValue:t.multiple||t.creatable===!1?``:this.valueToString(t.value)}),e.revealPassword!==t.revealPassword&&!t.revealPassword&&this.setState({revealPassword:!1})},i.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},i.prototype.inputRef=function(e){this.input=e},i.prototype.doAction=function(e,t,n,r){n===void 0&&(n=!1);var i=e?.actionType;i===`reset`?this.resetValue():i===`clear`?this.clearValue():i===`focus`?this.focus():i===`review`?this.setState({revealPassword:!0}):i===`encrypt`&&this.setState({revealPassword:!1})},i.prototype.focus=function(){if(this.input){this.input.focus();var e=this.input.value.length;e&&(this.input.type===`email`?(this.input.type=`text`,this.input.setSelectionRange(e,e),this.input.type=`email`):this.input.setSelectionRange(e,e))}},i.prototype.resetValue=function(){return w(this,void 0,void 0,function(){var e,t,n,r,i,a,o,c,l,u=this;return _(this,function(d){switch(d.label){case 0:return e=this.props,t=e.onChange,n=e.dispatchEvent,r=e.resetValue,i=e.formStore,a=e.store,o=e.name,c=s(i?.pristine??a?.pristine,o)??r,[4,n(`change`,h(this.props,{value:c}))];case 1:return l=d.sent(),l?.prevented?[2]:(t(c),this.setState({inputValue:c},function(){u.loadAutoComplete()}),[2])}})})},i.prototype.clearValue=function(){return w(this,void 0,void 0,function(){var e,t,n,r,i,a,o,s=this;return _(this,function(c){switch(c.label){case 0:return e=this.props,t=e.onChange,n=e.dispatchEvent,r=e.clearValueOnEmpty,i=this.props.resetValue,r&&i===``&&(i=void 0),[4,n(`clear`,h(this.props,{value:i}))];case 1:return a=c.sent(),a?.prevented?[2]:[4,n(`change`,h(this.props,{value:i}))];case 2:return o=c.sent(),o?.prevented?[2]:(t(i),this.setState({inputValue:i},function(){s.loadAutoComplete()}),[2])}})})},i.prototype.removeItem=function(e){var t=this.props,n=t.selectedOptions,r=t.onChange,i=n.concat();i.splice(e,1),r(this.normalizeValue(i))},i.prototype.handleClick=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a;return _(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.value,i=t.multiple,[4,n(`click`,h(this.props,{value:r}))];case 1:return a=o.sent(),a?.prevented||(i||e.target===this.input)&&(this.state.isFocused||this.focus(),this.setState({isOpen:!0})),[2]}})})},i.prototype.handleFocus=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a;return _(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.onFocus,i=t.value,this.setState({isOpen:!0,isFocused:!0}),[4,n(`focus`,h(this.props,{value:i}))];case 1:return a=o.sent(),a?.prevented||r?.(e),[2]}})})},i.prototype.handleBlur=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c=this;return _(this,function(l){switch(l.label){case 0:return t=this.props,n=t.onBlur,r=t.trimContents,i=t.value,a=t.onChange,o=t.dispatchEvent,this.setState({isFocused:!1},function(){if(r&&i&&typeof i==`string`){var e=i.trim();c.input&&(c.input.value=e),a(e)}}),[4,o(`blur`,h(this.props,{value:i}))];case 1:return s=l.sent(),s?.prevented||n&&n(e),[2]}})})},i.prototype.close=function(){this.setState({isFocused:!1})},i.prototype.handleInputChange=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c=this;return _(this,function(l){switch(l.label){case 0:return t=this.transformValue(e.currentTarget.value),n=this.props,r=n.creatable,i=n.multiple,a=n.onChange,o=n.dispatchEvent,[4,o(`change`,h(this.props,{value:t}))];case 1:return s=l.sent(),s?.prevented||this.setState({inputValue:t},function(){r!==!1&&!i&&a?.(t),c.loadAutoComplete()}),[2]}})})},i.prototype.handleKeyDown=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a,o,s,c,l,c,u;return _(this,function(d){switch(d.label){case 0:return t=this.props,n=t.selectedOptions,r=t.onChange,i=t.multiple,a=t.creatable,o=t.dispatchEvent,s=this.props?.valueField||`value`,n.length&&!this.state.inputValue&&e.keyCode===8?(e.preventDefault(),c=n.concat(),c.pop(),r(this.normalizeValue(c)),this.setState({inputValue:``},this.loadAutoComplete),[3,4]):[3,1];case 1:return e.key===`Enter`&&this.state.inputValue&&typeof this.highlightedIndex!=`number`&&a!==!1?(e.preventDefault(),l=this.state.inputValue,i&&l&&((0,P.default)(n,function(e){return e[s]==l})?l=this.normalizeValue(n).concat():(c=n.concat(),c.push({label:l,value:l}),l=this.normalizeValue(c).concat())),[4,o(`enter`,h(this.props,{value:l}))]):[3,3];case 2:return u=d.sent(),u?.prevented?[2]:(r(l),this.setState({inputValue:i?``:l,isOpen:!1},this.loadAutoComplete),[3,4]);case 3:e.key===`Enter`&&this.state.isOpen&&typeof this.highlightedIndex!=`number`&&this.setState({isOpen:!1}),d.label=4;case 4:return[2]}})})},i.prototype.handleChange=function(e){var t=this.props,n=t.onChange,r=t.multiple,i=t.options,a=t.selectedOptions,o=t.creatable,s=t.valueField,c=i.find(function(t){return t[s||`value`]===e});if(r){var l=a.concat();c?l.push(c):e&&o!==!1&&l.push({label:e,value:e}),n(this.normalizeValue(l))}else n(c?this.normalizeValue(c):e);(r||o===!1)&&this.setState({inputValue:``},this.loadAutoComplete)},i.prototype.handleStateChange=function(e){var t=this.props.creatable,n=this.props.multiple||this.props.multi;switch(e.type){case p.stateChangeTypes.itemMouseEnter:this.setState({isOpen:!0});break;case p.stateChangeTypes.changeInput:this.setState({isOpen:!0});break;default:var r={};e.isOpen!==void 0&&(r.isOpen=e.isOpen),e.highlightedIndex!==void 0&&(this.highlightedIndex=e.highlightedIndex),!n&&t===!1&&this.state.isOpen&&e.isOpen===!1&&(r.inputValue=``),this.setState(r);break}},i.prototype.handleNormalInputChange=function(e){return w(this,void 0,void 0,function(){var t,n,r,i,a,o,s;return _(this,function(c){switch(c.label){case 0:return t=this.props,n=t.onChange,r=t.dispatchEvent,i=t.trimContents,a=t.clearValueOnEmpty,o=this.transformValue(e.currentTarget.value),typeof o==`string`&&(i&&(o=o.trim()),a&&o===``&&(o=void 0)),[4,r(`change`,h(this.props,{value:o}))];case 1:return s=c.sent(),s?.prevented||n(o),[2]}})})},i.prototype.normalizeValue=function(e){var t=this.props,n=t.multiple,r=t.delimiter,i=t.joinValues,a=t.extractValue,o=t.valueField,s=Array.isArray(e)?e:e?[e]:[];if(i)return s.map(function(e){return e[o||`value`]}).join(r||`,`);if(a){var c=s.map(function(e){return e[o||`value`]});return n?c:c[0]}else return n?s:s[0]},i.prototype.transformValue=function(e){var t=this.props.transform;return t&&Object.keys(t).forEach(function(n){var r=t[n];switch(n){case`lowerCase`:r&&(e=e.toLowerCase());break;case`upperCase`:r&&(e=e.toUpperCase());break}}),e},i.prototype.loadAutoComplete=function(){var e=this.props,t=e.formItem,n=e.autoComplete,r=e.data;E(n,r)&&t&&t.loadOptions(n,g(r,{term:this.state.inputValue||``}),{extendsOptions:!0})},i.prototype.reload=function(e,t){var n=this.props.reloadOptions;n&&n(e,t)},i.prototype.valueToString=function(e){return e==null?``:typeof e==`string`?e:e instanceof Date?e.toISOString():JSON.stringify(e)},i.prototype.getTarget=function(){return this.input?.parentElement},i.prototype.renderSugestMode=function(){var e=this,r=this.props,i=r.className;r.style;var a=r.inputControlClassName,s=r.nativeInputClassName,c=r.inputOnly,u=r.value,d=r.placeholder,f=r.classnames,m=r.disabled,h=r.readOnly,g=r.name,_=r.loading,b=r.clearable,S=r.options,w=r.selectedOptions,E=r.autoComplete,O=r.labelField,j=r.valueField,N=r.multiple,P=r.creatable,F=r.borderMode,L=r.showCounter,R=r.data,z=r.maxLength,ee=r.minLength,B=r.translate,V=r.loadingConfig,H=r.popOverContainer,U=r.themeCss,W=r.css,G=r.id,K=r.nativeAutoComplete,q=r.testIdBuilder,te=this.props.type?.replace(/^(?:native|input)\-/,``);return M.createElement(p,{isOpen:this.state.isOpen&&!m&&!h,inputValue:this.state.inputValue,onChange:this.handleChange,onStateChange:this.handleStateChange,selectedItem:w.map(function(e){return e[j||`value`]})},function(r){var p,J,ne=r.getInputProps,re=r.getItemProps,Y=r.isOpen,X=r.inputValue,Z=r.selectedItem,ie=r.highlightedIndex,Q=X&&Y&&!E?v(S,X,{keys:[O||`label`,j||`value`],threshold:v.rankings.CONTAINS}):S,ae=Y?I(Q,Z):{};Q=Q.filter(function(e){return!~Z.indexOf(e.value)}),e.state.inputValue&&P!==!1&&N&&!Q.some(function(t){return t.value===e.state.inputValue})&&!~Z.indexOf(e.state.inputValue)&&Q.push((p={},p[O||`label`]=e.state.inputValue,p[j||`value`]=e.state.inputValue,p.isNew=!0,p));var $=A(d,R);return M.createElement(`div`,n({className:f(`TextControl-input TextControl-input--withAC`,a,k(n(n({},e.props),{name:`inputControlClassName`,id:G,themeCss:U||W})),k(n(n({},e.props),{name:`inputControlClassName`,id:G,themeCss:U||W,extra:`inner`})),c?i:``,(J={"is-opened":Y,"TextControl-input--multiple":N},J[`TextControl-input--border${D(F)}`]=F,J)),onClick:e.handleClick},q?.getTestId()),M.createElement(M.default.Fragment,null,$&&!w.length&&!e.state.inputValue&&!e.state.isFocused?M.createElement(`div`,{className:f(`TextControl-placeholder`)},$):null,w.map(function(t,n){return N?M.createElement(`div`,{className:f(`TextControl-value`),key:n},M.createElement(x,{className:f(`TextControl-valueLabel`),tooltip:`${t[O||`label`]}`},`${t[O||`label`]}`),M.createElement(l,{icon:`close`,className:f(`TextControl-valueIcon`,`icon`),onClick:e.removeItem.bind(e,n)})):X&&Y||P!==!1?null:M.createElement(`div`,{className:f(`TextControl-value`),key:n},t.label)}),M.createElement(t,n({},ne({name:g,ref:e.inputRef,disabled:m,readOnly:h,type:te,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleInputChange,onKeyDown:e.handleKeyDown,maxLength:z,minLength:ee}),{autoComplete:K,size:10,className:f(s)}))),b&&!m&&!h&&u?M.createElement(`a`,{onClick:e.clearValue,className:f(`TextControl-clear`)},M.createElement(l,{icon:`input-clear`,className:`icon`,iconContent:`InputText-clear`})):null,L?M.createElement(`span`,{className:f(`TextControl-counter`)},`${e.valueToString(u)?.length}${typeof z==`number`&&z?`/${z}`:``}`):null,_?M.createElement(o,{show:!0,icon:`reload`,size:`sm`,spinnerClassName:f(`TextControl-spinner`),loadingConfig:V}):null,M.createElement(C,{container:H||e.getTarget,target:e.getTarget,show:!!(Y&&Q.length)},M.createElement(T,{className:f(`TextControl-popover`),style:{width:e.input?e.input.parentElement.offsetWidth:`auto`}},M.createElement(`div`,{className:f(`TextControl-sugs`)},Q.map(function(e){var t=e[O||`label`],r=e[j||`value`];return M.createElement(`div`,n({},re({item:r,disabled:e.disabled,className:f(`TextControl-sugItem`,{"is-highlight":ie===ae[r],"is-disabled":e.disabled||e.readOnly})}),{key:r}),e.isNew?M.createElement(`span`,null,B(`Text.add`,{label:t}),M.createElement(l,{icon:`enter`,className:`icon`})):M.createElement(`span`,null,e.disabled?t:y(t,X),e.tip))})))))})},i.prototype.toggleRevealPassword=function(){return w(this,void 0,void 0,function(){var e,t,n,r,i;return _(this,function(a){switch(a.label){case 0:return e=this.props,t=e.dispatchEvent,n=e.value,r=this.state.revealPassword?`encrypt`:`review`,[4,t(r,h(this.props,{value:n}))];case 1:return i=a.sent(),i?.prevented||i?.stoped||this.setState({revealPassword:!this.state.revealPassword}),[2]}})})},i.prototype.renderNormal=function(){var e,r=this.props;r.classPrefix;var i=r.classnames,a=r.className;r.style;var o=r.inputControlClassName,s=r.nativeInputClassName,c=r.inputOnly,u=r.value,d=r.placeholder;r.onChange;var f=r.disabled,p=r.readOnly,m=r.max,h=r.min,g=r.step,_=r.clearable,v=r.revealPassword,y=v===void 0?!0:v,b=r.name,x=r.borderMode,S=r.prefix,C=r.suffix,w=r.data,T=r.showCounter,E=r.maxLength,O=r.minLength,j=r.themeCss,N=r.css,P=r.id,F=r.nativeAutoComplete,I=r.testIdBuilder,L=this.props.type?.replace(/^(?:native|input)\-/,``);return M.createElement(`div`,n({className:i(`TextControl-input`,(e={},e[`TextControl-input--border${D(x)}`]=x,e),k(n(n({},this.props),{name:`inputControlClassName`,id:P,themeCss:j||N})),k(n(n({},this.props),{name:`inputControlClassName`,id:P,themeCss:j||N,extra:`inner`})),o,c?a:``)},I?.getTestId()),S?M.createElement(`span`,{className:i(`TextControl-inputPrefix`)},A(S,w)):null,M.createElement(t,n({name:b,placeholder:A(d,w),ref:this.inputRef,disabled:f,readOnly:p,type:this.state.revealPassword?`text`:L,onFocus:this.handleFocus,onBlur:this.handleBlur,max:m,min:h,maxLength:E,minLength:O,autoComplete:F,size:10,step:g,onChange:this.handleNormalInputChange,value:this.valueToString(u),className:i(s,{"TextControl-input-password":L===`password`&&y})},I?.getChild(`input`).getTestId())),_&&!f&&!p&&u?M.createElement(`a`,{onClick:this.clearValue,className:i(`TextControl-clear`)},M.createElement(l,{icon:`input-clear`,className:`icon`,iconContent:`InputText-clear`})):null,L===`password`&&y&&!f?M.createElement(`a`,{onClick:this.toggleRevealPassword,className:i(`TextControl-revealPassword`)},this.state.revealPassword?M.createElement(l,{icon:`view`,className:i(`TextControl-icon-view`),classNameProp:i(`TextControl-icon-view`),iconContent:`InputText-view`}):M.createElement(l,{icon:`invisible`,className:i(`TextControl-icon-invisible`),classNameProp:i(`TextControl-icon-invisible`),iconContent:`InputText-invisible`})):null,T?M.createElement(`span`,{className:i(`TextControl-counter`)},`${this.valueToString(u)?.length}${typeof E==`number`&&E?`/${E}`:``}`):null,C?M.createElement(`span`,{className:i(`TextControl-inputSuffix`)},A(C,w)):null)},i.prototype.renderBody=function(e){var t,r,i=this.props,a=i.classnames,o=i.className,s=i.style,c=i.classPrefix,u=i.addOn,d=i.render,f=i.data,p=i.disabled,m=i.readOnly,h=i.inputOnly,g=i.static,_=i.addOnClassName,v=i.themeCss,y=i.css,b=i.id,x=typeof u==`string`?{label:u,type:`plain`}:u,S=M.createElement(l,{cx:a,icon:x?.icon,className:`Icon`}),C=x&&!g?x.actionType||~[`button`,`submit`,`reset`,`action`].indexOf(x.type)?M.createElement(`div`,{className:a(`${c}TextControl-button`,_,k(n(n({},this.props),{name:`addOnClassName`,id:b,themeCss:v||y,extra:`addOn`})))},d(`addOn`,x,{disabled:p})):M.createElement(`div`,{className:a(`${c}TextControl-addOn`,_,k(n(n({},this.props),{name:`addOnClassName`,id:b,themeCss:v||y,extra:`addOn`})))},S,x.label?A(x.label,f):null):null;if(h)return e;var w=g?a(`${c}TextControl`,(r={},r[`${c}TextControl--withAddOn`]=!!C,r)):a(o,`${c}TextControl`,(t={},t[`${c}TextControl--withAddOn`]=!!C,t[`is-focused`]=this.state.isFocused,t[`is-disabled`]=p||m,t));return M.createElement(`div`,{className:w,style:s},x&&x.position===`left`?C:null,e,x&&x.position!==`left`?C:null)},i.prototype.render=function(){var e=this.props,t=e.options,r=e.source,i=e.autoComplete,a=e.themeCss,o=e.css,s=e.id,c=e.env,l=e.classPrefix,u=i!==!1&&(r||t?.length||i)?this.renderSugestMode():this.renderNormal();return M.createElement(M.default.Fragment,null,this.renderBody(u),M.createElement(O,n({},this.props,{config:{themeCss:a||o,classNames:[{key:`inputControlClassName`,weights:{focused:{parent:`.${l}TextControl.is-focused`},disabled:{parent:`.${l}TextControl.is-disabled`}}}],id:s},env:c})),M.createElement(O,n({},this.props,{config:{themeCss:j(a||o),classNames:[{key:`inputControlClassName`,weights:{default:{inner:`input`},hover:{inner:`input`},focused:{parent:`.${l}TextControl.is-focused`,inner:`input`},disabled:{parent:`.${l}TextControl.is-disabled`,inner:`input`}}}],id:s&&s+`-inner`},env:c})),M.createElement(O,n({},this.props,{config:{themeCss:a||o,classNames:[{key:`addOnClassName`}],id:s&&s+`-addOn`},env:c})))},i.defaultProps={resetValue:``,labelField:`label`,valueField:`value`,placeholder:``,allowInputText:!0,trimContents:!0,nativeAutoComplete:`off`},d([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,void 0)],i.prototype,`close`,null),d([r,a(`design:type`,Function),a(`design:paramtypes`,[Object]),a(`design:returntype`,Promise)],i.prototype,`handleNormalInputChange`,null),d([r,a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,void 0)],i.prototype,`getTarget`,null),d([r,c(),a(`design:type`,Function),a(`design:paramtypes`,[]),a(`design:returntype`,Object)],i.prototype,`render`,null),i}(M.PureComponent);function I(e,t,n){return n===void 0&&(n=`value`),e.filter(function(e){return t.indexOf(e[n||`value`])===-1}).reduce(function(e,t,r){return e[t[n||`value`]]=r,e},{})}var L=function(e){m(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=d([b({type:`input-text`,alias:[`input-password`,`native-date`,`native-time`,`native-number`]})],t),t}(F),R=function(e){m(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=d([b({type:`input-email`,validations:`isEmail`})],t),t}(F),z=function(e){m(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=d([b({type:`input-url`,validations:`isUrl`})],t),t}(F);export{R as EmailControlRenderer,L as TextControlRenderer,z as UrlControlRenderer,F as default,I as mapItemIndex};