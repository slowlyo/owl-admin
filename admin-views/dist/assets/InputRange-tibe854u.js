import{$o as e,Ao as t,Ci as n,Fo as r,Ia as i,Io as a,J as o,Ji as s,Kn as c,Ko as l,La as u,Mo as d,No as f,Nr as p,Po as m,Qa as h,Qt as g,Ta as _,Va as v,ba as y,fr as b,jn as x,jo as S,ko as C,mn as w,ya as T}from"./index-C4Pf1uQ-.js";var E=e(l()),D=e(h()),O=e(C()),k=e(v()),A=e(x()),j=function(e,t,n){if(t===void 0&&(t={}),typeof e==`string`){if(e=y(e)?u(e,t):e,typeof e==`string`){var r=parseFloat(e);return isNaN(r)?n:r}else if(typeof e==`number`)return e}else if(typeof e==`number`)return e;return e??n};function M(e,t){var n,r;if(t.multiple){var i=t.min,o=t.max;return typeof e==`string`?(n=a(e.split(t.delimiter||`,`).map(function(e){return Number(e)}),2),i=n[0],o=n[1]):Array.isArray(e)?(r=a(e,2),i=r[0],o=r[1]):typeof e==`object`&&(i=e.min,o=e.max),{min:i===void 0||i<t.min?t.min:i,max:o===void 0||o>t.max?t.max:o}}return+e<t.min?t.min:Math.min(+e,t.max)}var N=function(e){f(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.handleInputNumberChange=function(e){var n,r=this.props,i=r.multiple,a=r.value,o=r.type,s=r.min,c=r.max,l=r.onChange,u=this.getValue(e,o);l?.(i?t(t({},a),(n={},n[o]=u,n)):Math.max(Math.min(e,c),s))},i.prototype.onUpdateValue=function(e){var n,r=this.props,i=r.multiple,a=r.value,o=r.type,s=this.getValue(e,o);this.props.onChange(i?t(t({},a),(n={},n[o]=s,n)):e)},i.prototype.checkNum=function(e){return typeof e!=`number`&&(e=T(e,this.props.data),e=/^[-]?\d+/.test(e)?+e:void 0),e},i.prototype.getStepPrecision=function(){var e=this.props,t=e.step,n=e.data,r=j(t,n,1);return!/^\d+\.\d+$/.test(r.toString())||r<0?0:r.toString().split(`.`)[1]?.length},i.prototype.getValue=function(e,t){var n=this.props,r=n.min,i=n.max,a=n.step,o=n.value;e??=t===`min`?r:i;var s=Math.round(parseFloat(e+``)/a)*a;switch(s=parseFloat(s.toFixed(this.getStepPrecision())),t){case`min`:return(0,O.default)(o)&&(0,D.default)(o.max)?s>=o.max?o.max-a:s:r;case`max`:return(0,O.default)(o)&&(0,D.default)(o.min)?s<=o.min?o.min+a:s:i;default:return s<r&&r||s>i&&i||s}},i.prototype.onBlur=function(e){return S(this,void 0,void 0,function(){var t,n,r,i,a;return m(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.value,i=t.onBlur,[4,n(`blur`,p(this.props,{value:r}))];case 1:return a=o.sent(),a?.prevented||i?.(e),[2]}})})},i.prototype.onFocus=function(e){return S(this,void 0,void 0,function(){var t,n,r,i,a;return m(this,function(o){switch(o.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.value,i=t.onFocus,[4,n(`focus`,p(this.props,{value:r}))];case 1:return a=o.sent(),a?.prevented||i?.(e),[2]}})})},i.prototype.render=function(){var e,t=this.props,n=t.classnames;t.style;var r=t.value,i=t.multiple,a=t.type,o=t.step,s=t.classPrefix,c=t.disabled,l=t.max,u=t.min,d=t.mobileUI,f=t.unit,p=t.showInputUnit,m=i?a===`min`?Math.min(r.min,r.max):Math.max(r.min,r.max):r;return E.createElement(`div`,{className:n(`${s}InputRange-input`,(e={},e[`${s}InputRange-input-with-unit`]=f&&p,e))},E.createElement(g,{value:+m,step:o,max:this.checkNum(l),min:this.checkNum(u),onChange:this.handleInputNumberChange,disabled:c,onBlur:this.onBlur,onFocus:this.onFocus,mobileUI:d}),f&&p&&E.createElement(`div`,{className:n(`${s}InputRange-unit`,`${s}Select`)},f))},d([n,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,void 0)],i.prototype,`handleInputNumberChange`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Number]),r(`design:returntype`,void 0)],i.prototype,`onUpdateValue`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,Promise)],i.prototype,`onBlur`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,Promise)],i.prototype,`onFocus`,null),i}(E.Component),P=function(e){f(a,e);function a(t){var n=e.call(this,t)||this,r=n.props,i=r.value,a=r.multiple,o=r.delimiter,s=r.min,c=r.max,l=r.data,u=M(i,{multiple:a,delimiter:o,min:j(s,l,0),max:j(c,l,0)});return n.state={value:n.getValue(u)},n}return a.prototype.componentDidUpdate=function(e){var t=e.value,n=e.min,r=e.max,i=e.data,a=this.props,o=a.value,s=a.multiple,c=a.delimiter,l=a.min,u=a.max,d=a.data;a.onChange;var f=j(n,i,0),p=j(r,i,100),m=j(l,d,0),h=j(u,d,100);if(t!==o||f!==m||p!==h){var g=M(o,{multiple:s,delimiter:c,min:m,max:h});this.setState({value:this.getValue(g)})}},a.prototype.doAction=function(e,t,n){var r=e?.actionType;r===`reset`?this.resetValue():r===`clear`&&this.clearValue()},a.prototype.resetValue=function(){var e=this.props,t=e.multiple,n=e.min,r=e.max,a=e.data,o=e.onChange,s=e.formStore,c=e.store,l=e.name,u=e.resetValue,d=j(n,a,0),f=j(r,a,100),p=i(s?.pristine??c?.pristine,l)??u,m=this.getFormatValue(p??(t?{min:d,max:f}:d));o?.(m)},a.prototype.clearValue=function(e){e===void 0&&(e=`clear`);var t=this.props,n=t.multiple,r=t.min,i=t.max,a=t.data,o=t.onChange,s=j(r,a,0),c=j(i,a,100),l=this.getFormatValue(n?{min:s,max:c}:s);o?.(l)},a.prototype.getStepPrecision=function(){var e=this.props,t=e.step,n=e.data,r=j(t,n,1);return!/^\d+\.\d+$/.test(r.toString())||r<0?0:r.toString().split(`.`)[1]?.length},a.prototype.getValue=function(e){var t=this.props.multiple,n=this.getStepPrecision();return t?{max:_(e.max,n),min:_(e.min,n)}:_(e,n)},a.prototype.handleChange=function(e){return S(this,void 0,void 0,function(){var t,n,r,i,a,o;return m(this,function(s){switch(s.label){case 0:return t=this.getValue(e),this.setState({value:t}),n=this.props,r=n.onChange,i=n.dispatchEvent,a=this.getFormatValue(t),[4,i(`change`,p(this.props,{value:a}))];case 1:return o=s.sent(),o?.prevented||r?.(a),[2]}})})},a.prototype.onAfterChange=function(){var e=this.state.value,t=this.props.onAfterChange,n=this.getFormatValue(this.getValue(e));t&&t(n)},a.prototype.getFormatValue=function(e){var t=this.props,n=t.multiple,r=t.joinValues,i=t.delimiter,a=t.extraName;return n?a?[e.min,e.max]:r?[e.min,e.max].join(i||`,`):{min:e.min,max:e.max}:e},a.prototype.render=function(){var e=this,n=this.state.value,r=t(t({},this.props),{min:j(this.props.min,this.props.data,0),max:j(this.props.max,this.props.data,0),step:j(this.props.step,this.props.data,1),value:n,onChange:this.handleChange,onAfterChange:this.onAfterChange}),i=r.classPrefix,a=r.multiple;r.parts;var o=r.showInput,l=r.classnames,u=r.className,d=r.disabled,f=r.clearable,p=r.min,m=r.max,h=r.render,g=r.marks,_=r.region,v=r.mobileUI,y=g&&t({},g);return g&&(0,A.default)(g,function(e,t){(0,O.default)(e)&&e.type&&y&&(y[t]=h(_,e)),y&&!s(t.replace(/%$/,``))&&delete y[t]}),E.createElement(`div`,{className:l(`RangeControl`,`${i}InputRange`,{"is-disabled":d},{"is-mobile":v},u)},o&&a&&E.createElement(N,t({},r,{type:`min`})),E.createElement(w,t({},r,{marks:y})),o&&E.createElement(N,t({},r,{type:`max`})),f&&!d&&o?E.createElement(`a`,{onClick:function(){return e.clearValue()},className:l(`InputRange-clear`,{"is-active":a?(0,k.default)(this.state.value,{min:p,max:m}):this.state.value!==p})},E.createElement(c,{icon:`close`,className:`icon`})):null)},a.defaultProps={value:0,max:100,min:0,step:1,unit:``,clearable:!0,disabled:!1,showInput:!1,showInputUnit:!1,multiple:!1,joinValues:!0,delimiter:`,`,showSteps:!1,parts:1,tooltipPlacement:`auto`},d([n,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],a.prototype,`resetValue`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[String]),r(`design:returntype`,void 0)],a.prototype,`clearValue`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,void 0)],a.prototype,`getValue`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,Promise)],a.prototype,`handleChange`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],a.prototype,`onAfterChange`,null),d([n,r(`design:type`,Function),r(`design:paramtypes`,[Object]),r(`design:returntype`,Object)],a.prototype,`getFormatValue`,null),d([o(),r(`design:type`,Function),r(`design:paramtypes`,[]),r(`design:returntype`,void 0)],a.prototype,`render`,null),a}(E.PureComponent),F=function(e){f(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t=d([b({type:`input-range`})],t),t}(P);export{N as Input,F as RangeControlRenderer,P as default,M as formatValue};