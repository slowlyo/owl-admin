import{d8 as _,d9 as G,da as H,t as Z,l as o,aq as Y,aX as he,x as me,G as J,H as K,M as C,z as y,aK as ve,db as Q,d7 as fe,ad as I,ae as ye,D as p,Q as v,T as i,U as ge,E as we,a4 as U,v as Ee,aw as Se,d6 as Me,J as Ne}from"./index-BnZOs00e.js";var F,Te=(F={},F[_]="in",F[G]="in",F[H]="out",F),xe={component:function(h){var t=h.data||{},e=h.thumbMode,a=h.classnames;return o.createElement(o.Fragment,null,t.hasOwnProperty("image")?o.createElement(Me,{src:t.image,title:t.hasOwnProperty("title")?t.title:"",href:t.hasOwnProperty("href")?t.href:"",blank:t.hasOwnProperty("blank")?t.blank:!1,htmlTarget:t.hasOwnProperty("htmlTarget")?t.htmlTarget:"",caption:t.hasOwnProperty("description")?t.description:"",thumbMode:t.hasOwnProperty("thumbMode")?t.thumbMode:e??"contain",imageMode:"original",className:a("Carousel-image")}):t.hasOwnProperty("html")?o.createElement(Ne,{html:t.html,filterHtml:h.env.filterHtml}):t.hasOwnProperty("item")?o.createElement("span",null,t.item):o.createElement("p",null))}},$=20,Ce=function(h){Z(t,h);function t(){var e=h!==null&&h.apply(this,arguments)||this;return e.wrapperRef=o.createRef(),e.state={current:0,options:e.props.options||Y(e.props)||[],nextAnimation:"",mouseStartLocation:null,isPaused:!1},e.loading=!1,e.marqueeRef=o.createRef(),e.contentRef=o.createRef(),e}return t.prototype.componentDidMount=function(){this.prepareAutoSlide(),this.props.animation==="marquee"&&this.marquee()},t.prototype.componentDidUpdate=function(e){var a=this.props,r=a.options||Y(a)||[],n=e.options||Y(e)||[];he(n,r)&&this.setState({options:r}),this.props.animation==="marquee"&&e.animation!=="marquee"&&this.marquee()},t.prototype.componentWillUnmount=function(){this.clearAutoTimeout(),cancelAnimationFrame(this.marqueeRequestId)},t.prototype.marquee=function(){var e=this;if(!(!this.marqueeRef.current||!this.contentRef.current)){var a=0,r=performance.now(),n=this.contentRef.current,s=function(u){var c,l,m=u-r;r=u;var M=(l=(c=e.marqueeRef.current)===null||c===void 0?void 0:c.offsetWidth)!==null&&l!==void 0?l:0;if(!e.state.isPaused){var x=M*(m/e.props.duration);a+=-x;var N=n.scrollWidth/2;Math.abs(a)>=N&&(a=0),n.style.transform="translateX(".concat(a,"px)")}e.marqueeRequestId=requestAnimationFrame(s)};this.marqueeRequestId=requestAnimationFrame(s)}},t.prototype.doAction=function(e,a,r,n){var s=e==null?void 0:e.actionType;~["next","prev"].indexOf(s)?this.autoSlide(s):s==="goto-image"&&this.changeSlide((n==null?void 0:n.activeIndex)-1)},t.prototype.prepareAutoSlide=function(){if(!(this.state.options.length<2)&&(this.clearAutoTimeout(),this.props.auto)){var e=this.props.interval;this.intervalTimeout=setTimeout(this.autoSlide,typeof e=="string"?me(e,this.props.data)||5e3:e)}},t.prototype.autoSlide=function(e){this.clearAutoTimeout();var a=this.props.animation,r=this.state.nextAnimation;switch(e){case"prev":a==="slide"?r="slideRight":r="",this.transitFramesTowards("right",r);break;case"next":default:r="",this.transitFramesTowards("left",r);break}this.durationTimeout=setTimeout(this.prepareAutoSlide,this.props.duration)},t.prototype.transitFramesTowards=function(e,a){return J(this,void 0,void 0,function(){var r,n,s,u,c,l;return K(this,function(m){switch(m.label){case 0:if(r=this.state.current,n=r,this.props.loop===!1&&(r===0&&e==="right"||r===this.state.options.length-1&&e==="left"))return[2];switch(e){case"left":r=this.getFrameId("next");break;case"right":r=this.getFrameId("prev");break}return s=this.props,u=s.dispatchEvent,c=s.data,[4,u("change",U(c,{activeIndex:r+1,prevIndex:n}))];case 1:return l=m.sent(),l!=null&&l.prevented?[2]:(this.setState({current:r,nextAnimation:a}),[2])}})})},t.prototype.getFrameId=function(e){var a=this.state,r=a.options,n=a.current,s=r.length;switch(e){case"prev":return(n-1+s)%s;case"next":return(n+1)%s;default:return n}},t.prototype.next=function(){var e=this.props.multiple;this.loading&&e&&e.count>1||this.autoSlide("next")},t.prototype.prev=function(){var e=this.props.multiple;this.loading&&e&&e.count>1||this.autoSlide("prev")},t.prototype.clearAutoTimeout=function(){clearTimeout(this.intervalTimeout),clearTimeout(this.durationTimeout)},t.prototype.changeSlide=function(e){return J(this,void 0,void 0,function(){var a,r,n,s,u,c;return K(this,function(l){switch(l.label){case 0:return a=this.state.current,r=this.props,n=r.dispatchEvent,s=r.data,u=r.multiple,this.loading&&u&&u.count>1?[2]:[4,n("change",U(s,{activeIndex:e,prevIndex:a}))];case 1:return c=l.sent(),c!=null&&c.prevented?[2]:(this.setState({current:e}),[2])}})})},t.prototype.renderDots=function(){var e=this,a=this.props.classnames,r=this.state,n=r.current,s=r.options;return o.createElement("div",{className:a("Carousel-dotsControl"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Array.from({length:s.length}).map(function(u,c){return o.createElement("span",{key:c,onClick:function(){return e.changeSlide(c)},className:a("Carousel-dot",n===c?"is-active":"")})}))},t.prototype.renderArrows=function(){var e=this.props.classnames;return o.createElement("div",{className:e("Carousel-arrowsControl"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.createElement("div",{className:e("Carousel-leftArrow"),onClick:this.prev},o.createElement(C,{icon:"left-arrow",className:"icon"})),o.createElement("div",{className:e("Carousel-rightArrow"),onClick:this.next},o.createElement(C,{icon:"right-arrow",className:"icon"})))},t.prototype.handleMouseEnter=function(){var e=this.props.multiple;e&&e.count>1||this.clearAutoTimeout()},t.prototype.handleMouseLeave=function(){var e=this.props.multiple;e&&e.count>1||this.prepareAutoSlide()},t.prototype.getNewOptions=function(e,a){a===void 0&&(a=1);var r=e;if(Array.isArray(e)&&e.length){r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=new Array(a);for(var s=0;s<a;s++)r[n][s]=e[(n+s)%e.length]}}return r},t.prototype.getEventScreenXY=function(e){var a,r,n,s,u,c,l,m;return e.screenX!==void 0?(l=e.screenX,m=e.screenY):!((a=e.touches)===null||a===void 0)&&a.length?(l=(r=e.touches[0])===null||r===void 0?void 0:r.screenX,m=(n=e.touches[0])===null||n===void 0?void 0:n.screenY):!((s=e.changedTouches)===null||s===void 0)&&s.length&&(l=(u=e.changedTouches[0])===null||u===void 0?void 0:u.screenX,m=(c=e.changedTouches[0])===null||c===void 0?void 0:c.screenY),{screenX:l,screenY:m}},t.prototype.addMouseDownListener=function(e){var a=this.props.direction,r=this.getEventScreenXY(e),n=r.screenX,s=r.screenY,u=a==="vertical"?s:n;u!==void 0&&this.setState({mouseStartLocation:u})},t.prototype.addMouseUpListener=function(e){var a=this.getEventScreenXY(e),r=a.screenX,n=a.screenY,s=this.props.direction,u=s==="vertical"?n:r;this.state.mouseStartLocation!==null&&u!==void 0&&(u-this.state.mouseStartLocation>$?this.autoSlide("prev"):this.state.mouseStartLocation-u>$&&this.autoSlide(),this.setState({mouseStartLocation:null}))},t.prototype.render=function(){var e,a,r=this,n=this.props,s=n.render,u=n.className,c=n.style,l=n.classnames,m=n.itemSchema,M=n.animation,x=n.width,N=n.height,W=n.controls,ee=n.controlsTheme,te=n.placeholder,re=n.data,ne=n.name,b=n.duration,A=n.multiple,ae=n.alwaysShowArrow,E=n.icons,L=n.id,B=n.wrapperCustomStyle,ie=n.env,O=n.themeCss,X=this.state,S=X.options,j=X.current,oe=X.nextAnimation,k=null,R=c?y({},c):{};x&&(isNaN(Number(x))?R.width=x:R.width=x+"px"),N&&(isNaN(Number(N))?R.height=N:R.height=N+"px");var V=ve([W.indexOf("dots")>-1&&M!=="marquee",W.indexOf("arrows")>-1&&M!=="marquee"],2),se=V[0],z=V[1],D=oe||M;if(Array.isArray(S)&&S.length){var d=1;A&&typeof A.count=="number"&&A.count>=2&&(d=Math.floor(A.count)<S.length?Math.floor(A.count):S.length);var P=this.getNewOptions(S,d),le=d>1&&typeof b=="number"?"".concat(b,"ms"):b||"500ms",ue=d>1&&typeof b=="number"?b:500,ce=(e={},e[_]=0,e[G]=0,e[H]=D==="slideRight"?100/d:-100/d,e[Q]=D==="slideRight"?-100/d:100/d,e),de=d>1?y({transitionTimingFunction:"linear",transitionDuration:le},M==="slide"?{transform:"translateX(".concat(ce[status],"%)")}:{}):{},q=function(w){var g,f=w.itemSchema,T=Ee(w,["itemSchema"]);return s("".concat(j,"/body"),f||m?f||m:xe,{thumbMode:r.props.thumbMode,data:U(re,Se(w)?T:(g={item:w},g[ne]=w,g))})};k=M==="marquee"?o.createElement("div",{ref:this.marqueeRef,className:l("Marquee-container"),onMouseEnter:function(){return r.setState({isPaused:!0})},onMouseLeave:function(){return r.setState({isPaused:!1})},style:{width:"100%",height:N}},o.createElement("div",{className:l("Marquee-content"),ref:this.contentRef},S.concat(S).map(function(w,g){return o.createElement("div",{key:g,className:l("Marquee-item")},d===1?q(w):null,d>1?P.concat(P)[g].map(function(f,T){return o.createElement("div",{key:T,style:{width:100/d+"%",height:"100%",float:"left"}},q(f))}):null)}))):o.createElement("div",{ref:this.wrapperRef,className:l("Carousel-container"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},S.map(function(w,g){return o.createElement(fe,{mountOnEnter:!0,unmountOnExit:!0,in:g===j,timeout:ue,key:g},function(f){return f===_&&r.wrapperRef.current&&r.wrapperRef.current.childNodes.forEach(function(T){return T.offsetHeight}),d>1&&((f===_||f===H)&&!r.loading?r.loading=!0:(f===G||f===Q)&&r.loading&&(r.loading=!1)),o.createElement("div",{className:l("Carousel-item",D,Te[f]),style:de},d===1?q(w):null,d>1?P[g].map(function(T,pe){return o.createElement("div",{key:pe,style:{width:100/d+"%",height:"100%",float:"left"}},q(T))}):null)})}))}return o.createElement("div",{className:l("Carousel Carousel--".concat(ee),(a={},a["Carousel-arrow--always"]=!!ae,a),u,I(y(y({},this.props),{name:"baseControlClassName",id:L,themeCss:O})),I(y(y({},this.props),{name:"wrapperCustomStyle",id:L,themeCss:B})),{"Carousel-vertical":this.props.direction==="vertical"}),onMouseDown:this.props.mouseEvent?this.addMouseDownListener:void 0,onMouseUp:this.props.mouseEvent?this.addMouseUpListener:void 0,onMouseLeave:this.props.mouseEvent?this.addMouseUpListener:void 0,onTouchStart:this.props.mouseEvent?this.addMouseDownListener:void 0,onTouchEnd:this.props.mouseEvent?this.addMouseUpListener:void 0,style:R},k||te,se?this.renderDots():null,z?o.createElement("div",{className:l("Carousel-leftArrow",I(y(y({},this.props),{name:"galleryControlClassName",id:L,themeCss:O}))),onClick:this.prev},E!=null&&E.prev?o.createElement("div",{className:"ImageGallery-prevBtn"},o.createElement(C,{icon:E.prev})):o.createElement(C,{icon:"left-arrow",className:"icon",iconContent:"ImageGallery-prevBtn"})):null,z?o.createElement("div",{className:l("Carousel-rightArrow",I(y(y({},this.props),{name:"galleryControlClassName",id:L,themeCss:O}))),onClick:this.next},E!=null&&E.next?o.createElement("div",{className:"ImageGallery-prevBtn"},o.createElement(C,{icon:E.next})):o.createElement(C,{icon:"right-arrow",className:"icon",iconContent:"ImageGallery-nextBtn"})):null,o.createElement(ye,y({},this.props,{config:{wrapperCustomStyle:B,id:L,themeCss:O,classNames:[{key:"baseControlClassName"},{key:"galleryControlClassName",weights:{default:{suf:" svg",important:!0}}}]},env:ie})))},t.defaultProps={auto:!0,interval:5e3,duration:500,controlsTheme:"light",animation:"fade",controls:["dots","arrows"],placeholder:"-",multiple:{count:1},alwaysShowArrow:!1},p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"prepareAutoSlide",null),p([v,i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",void 0)],t.prototype,"autoSlide",null),p([v,i("design:type",Function),i("design:paramtypes",[String,String]),i("design:returntype",Promise)],t.prototype,"transitFramesTowards",null),p([v,i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",void 0)],t.prototype,"getFrameId",null),p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"next",null),p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"prev",null),p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"clearAutoTimeout",null),p([v,i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],t.prototype,"changeSlide",null),p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleMouseEnter",null),p([v,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleMouseLeave",null),p([v,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"addMouseDownListener",null),p([v,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"addMouseUpListener",null),t}(o.Component),Ae=function(h){Z(t,h);function t(e,a){var r=h.call(this,e)||this,n=a;return n.registerComponent(r),r}return t.prototype.componentWillUnmount=function(){var e;(e=h.prototype.componentWillUnmount)===null||e===void 0||e.call(this);var a=this.context;a.unRegisterComponent(this)},t.contextType=ge,t=p([we({type:"carousel"}),i("design:paramtypes",[Object,Object])],t),t}(Ce);export{Ce as Carousel,Ae as CarouselRenderer};
