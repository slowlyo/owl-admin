function e(e,t){let n;return n=t.length===0?e:e.replace(/\{(\d+)\}/g,function(e,n){let r=n[0];return t[r]===void 0?e:t[r]}),n}function t(t,n,...r){return e(n,r)}var n=!1,r=!1,i=!1,a=!1,o=!1,s=!1,c=void 0;const l=typeof self==`object`?self:typeof global==`object`?global:{};var u=void 0;l.vscode!==void 0&&l.vscode.process!==void 0?u=l.vscode.process:typeof process<`u`&&(u=process);var d=typeof u?.versions?.electron==`string`&&u.type===`renderer`;if(typeof navigator==`object`&&!d)c=navigator.userAgent,n=c.indexOf(`Windows`)>=0,r=c.indexOf(`Macintosh`)>=0,s=(c.indexOf(`Macintosh`)>=0||c.indexOf(`iPad`)>=0||c.indexOf(`iPhone`)>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,i=c.indexOf(`Linux`)>=0,o=!0,navigator.language;else if(typeof u==`object`){n=u.platform===`win32`,r=u.platform===`darwin`,i=u.platform===`linux`,i&&u.env.SNAP&&u.env.SNAP_REVISION;let e=u.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);t.availableLanguages[`*`],t.locale,t._translationsConfigFile}catch{}a=!0}else console.error(`Unable to resolve platform.`);const f=n,p=r,m=i,h=a,g=o,_=s,v=c,y=(function(){if(l.setImmediate)return l.setImmediate.bind(l);if(typeof l.postMessage==`function`&&!l.importScripts){let e=[];l.addEventListener(`message`,t=>{if(t.data&&t.data.vscodeSetImmediateId)for(let n=0,r=e.length;n<r;n++){let r=e[n];if(r.id===t.data.vscodeSetImmediateId){e.splice(n,1),r.callback();return}}});let t=0;return n=>{let r=++t;e.push({id:r,callback:n}),l.postMessage({vscodeSetImmediateId:r},`*`)}}if(typeof u?.nextTick==`function`)return u.nextTick.bind(u);let e=Promise.resolve();return t=>e.then(t)})(),b=r||s?2:n?1:3;var x=!0,S=!1;function C(){if(!S){S=!0;let e=new Uint8Array(2);e[0]=1,e[1]=2,x=new Uint16Array(e.buffer)[0]===513}return x}const w=`\`~!@#$%^&*()-=+[{]}\\|;:'",.<>/?`;function T(e=``){let t=`(-?\\d*\\.\\d\\w*)|([^`;for(let n of w)e.indexOf(n)>=0||(t+=`\\`+n);return t+=`\\s]+)`,new RegExp(t,`g`)}const ee=T();function te(e){let t=ee;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n=`g`;e.ignoreCase&&(n+=`i`),e.multiline&&(n+=`m`),e.unicode&&(n+=`u`),t=new RegExp(e.source,n)}return t.lastIndex=0,t}var ne={maxLen:1e3,windowSize:15,timeBudget:150};function re(e,t,n,r,i=ne){if(n.length>i.maxLen){let a=e-i.maxLen/2;return a<0?a=0:r+=a,n=n.substring(a,e+i.maxLen/2),re(e,t,n,r,i)}let a=Date.now(),o=e-1-r,s=-1,c=null;for(let e=1;!(Date.now()-a>=i.timeBudget);e++){let r=o-i.windowSize*e;t.lastIndex=Math.max(0,r);let a=ie(t,n,o,s);if(!a&&c||(c=a,r<=0))break;s=r}if(c){let e={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,e}return null}function ie(e,t,n,r){let i;for(;i=e.exec(t);){let t=i.index||0;if(t<=n&&e.lastIndex>=n)return i;if(r>0&&t>r)return null}return null}var ae=class{constructor(e){this._values=e}hasChanged(e){return this._values[e]}},oe=class{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},se=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},ce=class{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}compute(e,t,n){return n}},le=class{constructor(e,t=null){this.schema=void 0,this.id=e,this.name=`_never_`,this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}},ue=class{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}validate(e){return e===void 0?this.defaultValue:e}compute(e,t,n){return n}};function E(e,t){return e===void 0?t:e===`false`?!1:!!e}var D=class extends ue{constructor(e,t,n,r=void 0){r!==void 0&&(r.type=`boolean`,r.default=n),super(e,t,n,r)}validate(e){return E(e,this.defaultValue)}};function de(e,t,n,r){if(e===void 0)return t;let i=parseInt(e,10);return isNaN(i)?t:(i=Math.max(n,i),i=Math.min(r,i),i|0)}var fe=class e extends ue{constructor(e,t,n,r,i,a=void 0){a!==void 0&&(a.type=`integer`,a.default=n,a.minimum=r,a.maximum=i),super(e,t,n,a),this.minimum=r,this.maximum=i}static clampedInt(e,t,n,r){return de(e,t,n,r)}validate(t){return e.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},pe=class e extends ue{constructor(e,t,n,r,i){i!==void 0&&(i.type=`number`,i.default=n),super(e,t,n,i),this.validationFn=r}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e==`number`)return e;if(e===void 0)return t;let n=parseFloat(e);return isNaN(n)?t:n}validate(t){return this.validationFn(e.float(t,this.defaultValue))}},me=class e extends ue{static string(e,t){return typeof e==`string`?e:t}constructor(e,t,n,r=void 0){r!==void 0&&(r.type=`string`,r.default=n),super(e,t,n,r)}validate(t){return e.string(t,this.defaultValue)}};function he(e,t,n){return typeof e!=`string`||n.indexOf(e)===-1?t:e}var ge=class extends ue{constructor(e,t,n,r,i=void 0){i!==void 0&&(i.type=`string`,i.enum=r,i.default=n),super(e,t,n,i),this._allowedValues=r}validate(e){return he(e,this.defaultValue,this._allowedValues)}},_e=class extends ce{constructor(e,t,n,r,i,a,o=void 0){o!==void 0&&(o.type=`string`,o.enum=i,o.default=r),super(e,t,n,o),this._allowedValues=i,this._convert=a}validate(e){return typeof e!=`string`||this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function ve(e){switch(e){case`none`:return 0;case`keep`:return 1;case`brackets`:return 2;case`advanced`:return 3;case`full`:return 4}}var ye=class extends ce{constructor(){super(2,`accessibilitySupport`,0,{type:`string`,enum:[`auto`,`on`,`off`],enumDescriptions:[t(`accessibilitySupport.auto`,`The editor will use platform APIs to detect when a Screen Reader is attached.`),t(`accessibilitySupport.on`,`The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled.`),t(`accessibilitySupport.off`,`The editor will never be optimized for usage with a Screen Reader.`)],default:`auto`,description:t(`accessibilitySupport`,`Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.`)})}validate(e){switch(e){case`auto`:return 0;case`off`:return 1;case`on`:return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},be=class extends ce{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(19,`comments`,e,{"editor.comments.insertSpace":{type:`boolean`,default:e.insertSpace,description:t(`comments.insertSpace`,`Controls whether a space character is inserted when commenting.`)},"editor.comments.ignoreEmptyLines":{type:`boolean`,default:e.ignoreEmptyLines,description:t(`comments.ignoreEmptyLines`,`Controls if empty lines should be ignored with toggle, add or remove actions for line comments.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{insertSpace:E(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:E(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function xe(e){switch(e){case`blink`:return 1;case`smooth`:return 2;case`phase`:return 3;case`expand`:return 4;case`solid`:return 5}}var Se;(function(e){e[e.Line=1]=`Line`,e[e.Block=2]=`Block`,e[e.Underline=3]=`Underline`,e[e.LineThin=4]=`LineThin`,e[e.BlockOutline=5]=`BlockOutline`,e[e.UnderlineThin=6]=`UnderlineThin`})(Se||={});function Ce(e){switch(e){case`line`:return Se.Line;case`block`:return Se.Block;case`underline`:return Se.Underline;case`line-thin`:return Se.LineThin;case`block-outline`:return Se.BlockOutline;case`underline-thin`:return Se.UnderlineThin}}var we=class extends le{constructor(){super(126,[65,33])}compute(e,t,n){let r=[`monaco-editor`];return t.get(33)&&r.push(t.get(33)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(65)===`default`?r.push(`mouse-default`):t.get(65)===`copy`&&r.push(`mouse-copy`),t.get(99)&&r.push(`showUnused`),t.get(124)&&r.push(`showDeprecated`),r.join(` `)}},Te=class extends D{constructor(){super(32,`emptySelectionClipboard`,!0,{description:t(`emptySelectionClipboard`,`Controls whether copying without a selection copies the current line.`)})}compute(e,t,n){return n&&e.emptySelectionClipboard}},Ee=class extends ce{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:`always`,autoFindInSelection:`never`,globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,`find`,e,{"editor.find.cursorMoveOnType":{type:`boolean`,default:e.cursorMoveOnType,description:t(`find.cursorMoveOnType`,`Controls whether the cursor should jump to find matches while typing.`)},"editor.find.seedSearchStringFromSelection":{type:`string`,enum:[`never`,`always`,`selection`],default:e.seedSearchStringFromSelection,enumDescriptions:[t(`editor.find.seedSearchStringFromSelection.never`,`Never seed search string from the editor selection.`),t(`editor.find.seedSearchStringFromSelection.always`,`Always seed search string from the editor selection, including word at cursor position.`),t(`editor.find.seedSearchStringFromSelection.selection`,`Only seed search string from the editor selection.`)],description:t(`find.seedSearchStringFromSelection`,`Controls whether the search string in the Find Widget is seeded from the editor selection.`)},"editor.find.autoFindInSelection":{type:`string`,enum:[`never`,`always`,`multiline`],default:e.autoFindInSelection,enumDescriptions:[t(`editor.find.autoFindInSelection.never`,`Never turn on Find in Selection automatically (default).`),t(`editor.find.autoFindInSelection.always`,`Always turn on Find in Selection automatically.`),t(`editor.find.autoFindInSelection.multiline`,`Turn on Find in Selection automatically when multiple lines of content are selected.`)],description:t(`find.autoFindInSelection`,`Controls the condition for turning on Find in Selection automatically.`)},"editor.find.globalFindClipboard":{type:`boolean`,default:e.globalFindClipboard,description:t(`find.globalFindClipboard`,`Controls whether the Find Widget should read or modify the shared find clipboard on macOS.`),included:p},"editor.find.addExtraSpaceOnTop":{type:`boolean`,default:e.addExtraSpaceOnTop,description:t(`find.addExtraSpaceOnTop`,`Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.`)},"editor.find.loop":{type:`boolean`,default:e.loop,description:t(`find.loop`,`Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{cursorMoveOnType:E(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection==`boolean`?e.seedSearchStringFromSelection?`always`:`never`:he(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,[`never`,`always`,`selection`]),autoFindInSelection:typeof e.autoFindInSelection==`boolean`?e.autoFindInSelection?`always`:`never`:he(t.autoFindInSelection,this.defaultValue.autoFindInSelection,[`never`,`always`,`multiline`]),globalFindClipboard:E(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:E(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:E(t.loop,this.defaultValue.loop)}}},De=class e extends ce{constructor(){super(44,`fontLigatures`,e.OFF,{anyOf:[{type:`boolean`,description:t(`fontLigatures`,`Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.`)},{type:`string`,description:t(`fontFeatureSettings`,`Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.`)}],description:t(`fontLigaturesGeneral`,`Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property.`),default:!1})}validate(t){return t===void 0?this.defaultValue:typeof t==`string`?t===`false`?e.OFF:t===`true`?e.ON:t:t?e.ON:e.OFF}};De.OFF=`"liga" off, "calt" off`,De.ON=`"liga" on, "calt" on`;var Oe=class extends le{constructor(){super(43)}compute(e,t,n){return e.fontInfo}},ke=class extends ue{constructor(){super(45,`fontSize`,rt.fontSize,{type:`number`,minimum:6,maximum:100,default:rt.fontSize,description:t(`fontSize`,`Controls the font size in pixels.`)})}validate(e){let t=pe.float(e,this.defaultValue);return t===0?rt.fontSize:pe.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},Ae=class e extends ce{constructor(){super(46,`fontWeight`,rt.fontWeight,{anyOf:[{type:`number`,minimum:e.MINIMUM_VALUE,maximum:e.MAXIMUM_VALUE,errorMessage:t(`fontWeightErrorMessage`,`Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.`)},{type:`string`,pattern:`^(normal|bold|1000|[1-9][0-9]{0,2})$`},{enum:e.SUGGESTION_VALUES}],default:rt.fontWeight,description:t(`fontWeight`,`Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.`)})}validate(t){return t===`normal`||t===`bold`?t:String(fe.clampedInt(t,rt.fontWeight,e.MINIMUM_VALUE,e.MAXIMUM_VALUE))}};Ae.SUGGESTION_VALUES=[`normal`,`bold`,`100`,`200`,`300`,`400`,`500`,`600`,`700`,`800`,`900`],Ae.MINIMUM_VALUE=1,Ae.MAXIMUM_VALUE=1e3;var je=class extends ce{constructor(){let e={multiple:`peek`,multipleDefinitions:`peek`,multipleTypeDefinitions:`peek`,multipleDeclarations:`peek`,multipleImplementations:`peek`,multipleReferences:`peek`,alternativeDefinitionCommand:`editor.action.goToReferences`,alternativeTypeDefinitionCommand:`editor.action.goToReferences`,alternativeDeclarationCommand:`editor.action.goToReferences`,alternativeImplementationCommand:``,alternativeReferenceCommand:``},n={type:`string`,enum:[`peek`,`gotoAndPeek`,`goto`],default:e.multiple,enumDescriptions:[t(`editor.gotoLocation.multiple.peek`,`Show peek view of the results (default)`),t(`editor.gotoLocation.multiple.gotoAndPeek`,`Go to the primary result and show a peek view`),t(`editor.gotoLocation.multiple.goto`,`Go to the primary result and enable peek-less navigation to others`)]},r=[``,`editor.action.referenceSearch.trigger`,`editor.action.goToReferences`,`editor.action.peekImplementation`,`editor.action.goToImplementation`,`editor.action.peekTypeDefinition`,`editor.action.goToTypeDefinition`,`editor.action.peekDeclaration`,`editor.action.revealDeclaration`,`editor.action.peekDefinition`,`editor.action.revealDefinitionAside`,`editor.action.revealDefinition`];super(50,`gotoLocation`,e,{"editor.gotoLocation.multiple":{deprecationMessage:t(`editor.gotoLocation.multiple.deprecated`,`This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.`)},"editor.gotoLocation.multipleDefinitions":Object.assign({description:t(`editor.editor.gotoLocation.multipleDefinitions`,`Controls the behavior the 'Go to Definition'-command when multiple target locations exist.`)},n),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:t(`editor.editor.gotoLocation.multipleTypeDefinitions`,`Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.`)},n),"editor.gotoLocation.multipleDeclarations":Object.assign({description:t(`editor.editor.gotoLocation.multipleDeclarations`,`Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.`)},n),"editor.gotoLocation.multipleImplementations":Object.assign({description:t(`editor.editor.gotoLocation.multipleImplemenattions`,`Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.`)},n),"editor.gotoLocation.multipleReferences":Object.assign({description:t(`editor.editor.gotoLocation.multipleReferences`,`Controls the behavior the 'Go to References'-command when multiple target locations exist.`)},n),"editor.gotoLocation.alternativeDefinitionCommand":{type:`string`,default:e.alternativeDefinitionCommand,enum:r,description:t(`alternativeDefinitionCommand`,`Alternative command id that is being executed when the result of 'Go to Definition' is the current location.`)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:`string`,default:e.alternativeTypeDefinitionCommand,enum:r,description:t(`alternativeTypeDefinitionCommand`,`Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.`)},"editor.gotoLocation.alternativeDeclarationCommand":{type:`string`,default:e.alternativeDeclarationCommand,enum:r,description:t(`alternativeDeclarationCommand`,`Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.`)},"editor.gotoLocation.alternativeImplementationCommand":{type:`string`,default:e.alternativeImplementationCommand,enum:r,description:t(`alternativeImplementationCommand`,`Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.`)},"editor.gotoLocation.alternativeReferenceCommand":{type:`string`,default:e.alternativeReferenceCommand,enum:r,description:t(`alternativeReferenceCommand`,`Alternative command id that is being executed when the result of 'Go to Reference' is the current location.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{multiple:he(t.multiple,this.defaultValue.multiple,[`peek`,`gotoAndPeek`,`goto`]),multipleDefinitions:t.multipleDefinitions??he(t.multipleDefinitions,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleTypeDefinitions:t.multipleTypeDefinitions??he(t.multipleTypeDefinitions,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleDeclarations:t.multipleDeclarations??he(t.multipleDeclarations,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleImplementations:t.multipleImplementations??he(t.multipleImplementations,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleReferences:t.multipleReferences??he(t.multipleReferences,`peek`,[`peek`,`gotoAndPeek`,`goto`]),alternativeDefinitionCommand:me.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:me.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:me.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:me.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:me.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}},Me=class extends ce{constructor(){let e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,`hover`,e,{"editor.hover.enabled":{type:`boolean`,default:e.enabled,description:t(`hover.enabled`,`Controls whether the hover is shown.`)},"editor.hover.delay":{type:`number`,default:e.delay,description:t(`hover.delay`,`Controls the delay in milliseconds after which the hover is shown.`)},"editor.hover.sticky":{type:`boolean`,default:e.sticky,description:t(`hover.sticky`,`Controls whether the hover should remain visible when mouse is moved over it.`)},"editor.hover.above":{type:`boolean`,default:e.above,description:t(`hover.above`,`Prefer showing hovers above the line, if there's space.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:E(t.enabled,this.defaultValue.enabled),delay:fe.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:E(t.sticky,this.defaultValue.sticky),above:E(t.above,this.defaultValue.above)}}},Ne=class e extends le{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(t,n,r){return e.computeLayout(n,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,r=(e.viewLineCount+n)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:Math.floor(e.viewLineCount/r)}}static _computeMinimapLayout(t,n){let r=t.outerWidth,i=t.outerHeight,a=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(a*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let o=n.stableMinimapLayoutInput,s=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,d=t.minimap.renderCharacters,f=a>=2?Math.round(t.minimap.scale*2):t.minimap.scale,p=t.minimap.maxColumn,m=t.minimap.size,h=t.minimap.side,g=t.verticalScrollbarWidth,_=t.viewLineCount,v=t.remainingWidth,y=t.isViewportWrapping,b=d?2:3,x=Math.floor(a*i),S=x/a,C=!1,w=!1,T=b*f,ee=f/a,te=1;if(m===`fill`||m===`fit`){let{typicalViewportLineCount:r,extraLinesBeyondLastLine:o,desiredRatio:l,minimapLineCount:d}=e.computeContainedMinimapLineCount({viewLineCount:_,scrollBeyondLastLine:u,height:i,lineHeight:c,pixelRatio:a});if(_/d>1)C=!0,w=!0,f=1,T=1,ee=f/a;else{let e=!1,i=f+1;if(m===`fit`){let t=Math.ceil((_+o)*T);y&&s&&v<=n.stableFitRemainingWidth?(e=!0,i=n.stableFitMaxMinimapScale):e=t>x}if(m===`fill`||e){C=!0;let e=f;T=Math.min(c*a,Math.max(1,Math.floor(1/l))),y&&s&&v<=n.stableFitRemainingWidth&&(i=n.stableFitMaxMinimapScale),f=Math.min(i,Math.max(1,Math.floor(T/b))),f>e&&(te=Math.min(2,f/e)),ee=f/a/te,x=Math.ceil(Math.max(r,_+o)*T),y?(n.stableMinimapLayoutInput=t,n.stableFitRemainingWidth=v,n.stableFitMaxMinimapScale=f):(n.stableMinimapLayoutInput=null,n.stableFitRemainingWidth=0)}}}let ne=Math.floor(p*ee),re=Math.min(ne,Math.max(0,Math.floor((v-g-2)*ee/(l+ee)))+8),ie=Math.floor(a*re),ae=ie/a;return ie=Math.floor(ie*te),{renderMinimap:d?1:2,minimapLeft:h===`left`?0:r-re-g,minimapWidth:re,minimapHeightIsEditorHeight:C,minimapIsSampling:w,minimapScale:f,minimapLineHeight:T,minimapCanvasInnerWidth:ie,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:ae,minimapCanvasOuterHeight:S}}static computeLayout(t,n){let r=n.outerWidth|0,i=n.outerHeight|0,a=n.lineHeight|0,o=n.lineNumbersDigitCount|0,s=n.typicalHalfwidthCharacterWidth,c=n.maxDigitWidth,l=n.pixelRatio,u=n.viewLineCount,d=t.get(121),f=d===`inherit`?t.get(120):d,p=f===`inherit`?t.get(116):f,m=t.get(119),h=t.get(2),g=n.isDominatedByLongLines,_=t.get(49),v=t.get(59).renderType!==0,y=t.get(60),b=t.get(93),x=t.get(64),S=t.get(91),C=S.verticalScrollbarSize,w=S.verticalHasArrows,T=S.arrowSize,ee=S.horizontalScrollbarSize,te=t.get(57),ne=t.get(37),re;if(typeof te==`string`&&/^\d+(\.\d+)?ch$/.test(te)){let e=parseFloat(te.substr(0,te.length-2));re=fe.clampedInt(e*s,0,0,1e3)}else re=fe.clampedInt(te,0,0,1e3);ne&&(re+=16);let ie=0;if(v){let e=Math.max(o,y);ie=Math.round(e*c)}let ae=0;_&&(ae=a);let oe=0,ce=oe+ae,le=ce+ie,ue=le+re,E=r-ae-ie-re,D=!1,de=!1,pe=-1;h!==2&&(f===`inherit`&&g?(D=!0,de=!0):p===`on`||p===`bounded`?de=!0:p===`wordWrapColumn`&&(pe=m));let me=e._computeMinimapLayout({outerWidth:r,outerHeight:i,lineHeight:a,typicalHalfwidthCharacterWidth:s,pixelRatio:l,scrollBeyondLastLine:b,minimap:x,verticalScrollbarWidth:C,viewLineCount:u,remainingWidth:E,isViewportWrapping:de},n.memory||new se);me.renderMinimap!==0&&me.minimapLeft===0&&(oe+=me.minimapWidth,ce+=me.minimapWidth,le+=me.minimapWidth,ue+=me.minimapWidth);let he=E-me.minimapWidth,ge=Math.max(1,Math.floor((he-C-2)/s)),_e=w?T:0;return de&&(pe=Math.max(1,ge),p===`bounded`&&(pe=Math.min(pe,m))),{width:r,height:i,glyphMarginLeft:oe,glyphMarginWidth:ae,lineNumbersLeft:ce,lineNumbersWidth:ie,decorationsLeft:le,decorationsWidth:re,contentLeft:ue,contentWidth:he,minimap:me,viewportColumn:ge,isWordWrapMinified:D,isViewportWrapping:de,wrappingColumn:pe,verticalScrollbarWidth:C,horizontalScrollbarHeight:ee,overviewRuler:{top:_e,width:C,height:i-2*_e,right:0}}}},Pe=class extends ce{constructor(){let e={enabled:!0};super(56,`lightbulb`,e,{"editor.lightbulb.enabled":{type:`boolean`,default:e.enabled,description:t(`codeActions`,`Enables the code action lightbulb in the editor.`)}})}validate(e){return!e||typeof e!=`object`?this.defaultValue:{enabled:E(e.enabled,this.defaultValue.enabled)}}},Fe=class extends ce{constructor(){let e={enabled:!0,fontSize:0,fontFamily:``};super(125,`inlayHints`,e,{"editor.inlayHints.enabled":{type:`boolean`,default:e.enabled,description:t(`inlayHints.enable`,`Enables the inlay hints in the editor.`)},"editor.inlayHints.fontSize":{type:`number`,default:e.fontSize,markdownDescription:t(`inlayHints.fontSize`,"Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:`string`,default:e.fontFamily,markdownDescription:t(`inlayHints.fontFamily`,"Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:E(t.enabled,this.defaultValue.enabled),fontSize:fe.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:me.string(t.fontFamily,this.defaultValue.fontFamily)}}},Ie=class extends pe{constructor(){super(58,`lineHeight`,rt.lineHeight,e=>pe.clamp(e,0,150),{markdownDescription:t(`lineHeight`,`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},Le=class extends ce{constructor(){let e={enabled:!0,size:`proportional`,side:`right`,showSlider:`mouseover`,renderCharacters:!0,maxColumn:120,scale:1};super(64,`minimap`,e,{"editor.minimap.enabled":{type:`boolean`,default:e.enabled,description:t(`minimap.enabled`,`Controls whether the minimap is shown.`)},"editor.minimap.size":{type:`string`,enum:[`proportional`,`fill`,`fit`],enumDescriptions:[t(`minimap.size.proportional`,`The minimap has the same size as the editor contents (and might scroll).`),t(`minimap.size.fill`,`The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling).`),t(`minimap.size.fit`,`The minimap will shrink as necessary to never be larger than the editor (no scrolling).`)],default:e.size,description:t(`minimap.size`,`Controls the size of the minimap.`)},"editor.minimap.side":{type:`string`,enum:[`left`,`right`],default:e.side,description:t(`minimap.side`,`Controls the side where to render the minimap.`)},"editor.minimap.showSlider":{type:`string`,enum:[`always`,`mouseover`],default:e.showSlider,description:t(`minimap.showSlider`,`Controls when the minimap slider is shown.`)},"editor.minimap.scale":{type:`number`,default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:t(`minimap.scale`,`Scale of content drawn in the minimap: 1, 2 or 3.`)},"editor.minimap.renderCharacters":{type:`boolean`,default:e.renderCharacters,description:t(`minimap.renderCharacters`,`Render the actual characters on a line as opposed to color blocks.`)},"editor.minimap.maxColumn":{type:`number`,default:e.maxColumn,description:t(`minimap.maxColumn`,`Limit the width of the minimap to render at most a certain number of columns.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:E(t.enabled,this.defaultValue.enabled),size:he(t.size,this.defaultValue.size,[`proportional`,`fill`,`fit`]),side:he(t.side,this.defaultValue.side,[`right`,`left`]),showSlider:he(t.showSlider,this.defaultValue.showSlider,[`always`,`mouseover`]),renderCharacters:E(t.renderCharacters,this.defaultValue.renderCharacters),scale:fe.clampedInt(t.scale,1,1,3),maxColumn:fe.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}};function Re(e){return e===`ctrlCmd`?p?`metaKey`:`ctrlKey`:`altKey`}var ze=class extends ce{constructor(){super(74,`padding`,{top:0,bottom:0},{"editor.padding.top":{type:`number`,default:0,minimum:0,maximum:1e3,description:t(`padding.top`,`Controls the amount of space between the top edge of the editor and the first line.`)},"editor.padding.bottom":{type:`number`,default:0,minimum:0,maximum:1e3,description:t(`padding.bottom`,`Controls the amount of space between the bottom edge of the editor and the last line.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{top:fe.clampedInt(t.top,0,0,1e3),bottom:fe.clampedInt(t.bottom,0,0,1e3)}}},Be=class extends ce{constructor(){let e={enabled:!0,cycle:!1};super(75,`parameterHints`,e,{"editor.parameterHints.enabled":{type:`boolean`,default:e.enabled,description:t(`parameterHints.enabled`,`Enables a pop-up that shows parameter documentation and type information as you type.`)},"editor.parameterHints.cycle":{type:`boolean`,default:e.cycle,description:t(`parameterHints.cycle`,`Controls whether the parameter hints menu cycles or closes when reaching the end of the list.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:E(t.enabled,this.defaultValue.enabled),cycle:E(t.cycle,this.defaultValue.cycle)}}},Ve=class extends le{constructor(){super(127)}compute(e,t,n){return e.pixelRatio}},He=class extends ce{constructor(){let e={other:!0,comments:!1,strings:!1};super(78,`quickSuggestions`,e,{anyOf:[{type:`boolean`},{type:`object`,properties:{strings:{type:`boolean`,default:e.strings,description:t(`quickSuggestions.strings`,`Enable quick suggestions inside strings.`)},comments:{type:`boolean`,default:e.comments,description:t(`quickSuggestions.comments`,`Enable quick suggestions inside comments.`)},other:{type:`boolean`,default:e.other,description:t(`quickSuggestions.other`,`Enable quick suggestions outside of strings and comments.`)}}}],default:e,description:t(`quickSuggestions`,`Controls whether suggestions should automatically show up while typing.`)}),this.defaultValue=e}validate(e){if(typeof e==`boolean`)return e;if(e&&typeof e==`object`){let t=e,n={other:E(t.other,this.defaultValue.other),comments:E(t.comments,this.defaultValue.comments),strings:E(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}},Ue=class extends ce{constructor(){super(59,`lineNumbers`,{renderType:1,renderFn:null},{type:`string`,enum:[`off`,`on`,`relative`,`interval`],enumDescriptions:[t(`lineNumbers.off`,`Line numbers are not rendered.`),t(`lineNumbers.on`,`Line numbers are rendered as absolute number.`),t(`lineNumbers.relative`,`Line numbers are rendered as distance in lines to cursor position.`),t(`lineNumbers.interval`,`Line numbers are rendered every 10 lines.`)],default:`on`,description:t(`lineNumbers`,`Controls the display of line numbers.`)})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return e!==void 0&&(typeof e==`function`?(t=4,n=e):t=e===`interval`?3:e===`relative`?2:e===`on`?1:0),{renderType:t,renderFn:n}}};function We(e){let t=e.get(86);return t===`editable`?e.get(80):t!==`on`}var Ge=class extends ce{constructor(){let e=[],n={type:`number`,description:t(`rulers.size`,`Number of monospace characters at which this editor ruler will render.`)};super(90,`rulers`,e,{type:`array`,items:{anyOf:[n,{type:[`object`],properties:{column:n,color:{type:`string`,description:t(`rulers.color`,`Color of this editor ruler.`),format:`color-hex`}}}]},default:e,description:t(`rulers`,`Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.`)})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n==`number`)t.push({column:fe.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n==`object`){let e=n;t.push({column:fe.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort((e,t)=>e.column-t.column),t}return this.defaultValue}};function Ke(e,t){if(typeof e!=`string`)return t;switch(e){case`hidden`:return 2;case`visible`:return 3;default:return 1}}var qe=class extends ce{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,`scrollbar`,e,{"editor.scrollbar.vertical":{type:`string`,enum:[`auto`,`visible`,`hidden`],enumDescriptions:[t(`scrollbar.vertical.auto`,`The vertical scrollbar will be visible only when necessary.`),t(`scrollbar.vertical.visible`,`The vertical scrollbar will always be visible.`),t(`scrollbar.vertical.fit`,`The vertical scrollbar will always be hidden.`)],default:`auto`,description:t(`scrollbar.vertical`,`Controls the visibility of the vertical scrollbar.`)},"editor.scrollbar.horizontal":{type:`string`,enum:[`auto`,`visible`,`hidden`],enumDescriptions:[t(`scrollbar.horizontal.auto`,`The horizontal scrollbar will be visible only when necessary.`),t(`scrollbar.horizontal.visible`,`The horizontal scrollbar will always be visible.`),t(`scrollbar.horizontal.fit`,`The horizontal scrollbar will always be hidden.`)],default:`auto`,description:t(`scrollbar.horizontal`,`Controls the visibility of the horizontal scrollbar.`)},"editor.scrollbar.verticalScrollbarSize":{type:`number`,default:e.verticalScrollbarSize,description:t(`scrollbar.verticalScrollbarSize`,`The width of the vertical scrollbar.`)},"editor.scrollbar.horizontalScrollbarSize":{type:`number`,default:e.horizontalScrollbarSize,description:t(`scrollbar.horizontalScrollbarSize`,`The height of the horizontal scrollbar.`)},"editor.scrollbar.scrollByPage":{type:`boolean`,default:e.scrollByPage,description:t(`scrollbar.scrollByPage`,`Controls whether clicks scroll by page or jump to click position.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e,n=fe.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=fe.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:fe.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Ke(t.vertical,this.defaultValue.vertical),horizontal:Ke(t.horizontal,this.defaultValue.horizontal),useShadows:E(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:E(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:E(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:E(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:E(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:fe.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:fe.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:E(t.scrollByPage,this.defaultValue.scrollByPage)}}},Je=class extends ce{constructor(){let e={enabled:!0,mode:`subwordSmart`};super(54,`inlineSuggest`,e,{"editor.inlineSuggest.enabled":{type:`boolean`,default:e.enabled,description:t(`inlineSuggest.enabled`,`Controls whether to automatically show inline suggestions in the editor.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:E(t.enabled,this.defaultValue.enabled),mode:he(t.mode,this.defaultValue.mode,[`prefix`,`subword`,`subwordSmart`])}}},Ye=class extends ce{constructor(){let e={enabled:it.bracketPairColorizationOptions.enabled};super(12,`bracketPairColorization`,e,{"editor.bracketPairColorization.enabled":{type:`boolean`,default:e.enabled,description:t(`bracketPairColorization.enabled`,`Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.`)}})}validate(e){return!e||typeof e!=`object`?this.defaultValue:{enabled:E(e.enabled,this.defaultValue.enabled)}}},Xe=class extends ce{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:`active`,highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,`guides`,e,{"editor.guides.bracketPairs":{type:[`boolean`,`string`],enum:[!0,`active`,!1],enumDescriptions:[t(`editor.guides.bracketPairs.true`,`Enables bracket pair guides.`),t(`editor.guides.bracketPairs.active`,`Enables bracket pair guides only for the active bracket pair.`),t(`editor.guides.bracketPairs.false`,`Disables bracket pair guides.`)],default:e.bracketPairs,description:t(`editor.guides.bracketPairs`,`Controls whether bracket pair guides are enabled or not.`)},"editor.guides.bracketPairsHorizontal":{type:[`boolean`,`string`],enum:[!0,`active`,!1],enumDescriptions:[t(`editor.guides.bracketPairsHorizontal.true`,`Enables horizontal guides as addition to vertical bracket pair guides.`),t(`editor.guides.bracketPairsHorizontal.active`,`Enables horizontal guides only for the active bracket pair.`),t(`editor.guides.bracketPairsHorizontal.false`,`Disables horizontal bracket pair guides.`)],default:e.bracketPairsHorizontal,description:t(`editor.guides.bracketPairsHorizontal`,`Controls whether horizontal bracket pair guides are enabled or not.`)},"editor.guides.highlightActiveBracketPair":{type:`boolean`,default:e.highlightActiveBracketPair,description:t(`editor.guides.highlightActiveBracketPair`,`Controls whether bracket pair guides are enabled or not.`)},"editor.guides.indentation":{type:`boolean`,default:e.indentation,description:t(`editor.guides.indentation`,`Controls whether the editor should render indent guides.`)},"editor.guides.highlightActiveIndentation":{type:`boolean`,default:e.highlightActiveIndentation,description:t(`editor.guides.highlightActiveIndentation`,`Controls whether the editor should highlight the active indent guide.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{bracketPairs:Ze(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,`active`]),bracketPairsHorizontal:Ze(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,`active`]),highlightActiveBracketPair:E(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:E(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:E(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}};function Ze(e,t,n){let r=n.indexOf(e);return r===-1?t:n[r]}var Qe=class extends ce{constructor(){let e={insertMode:`insert`,filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:`subwordSmart`,showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,`suggest`,e,{"editor.suggest.insertMode":{type:`string`,enum:[`insert`,`replace`],enumDescriptions:[t(`suggest.insertMode.insert`,`Insert suggestion without overwriting text right of the cursor.`),t(`suggest.insertMode.replace`,`Insert suggestion and overwrite text right of the cursor.`)],default:e.insertMode,description:t(`suggest.insertMode`,`Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.`)},"editor.suggest.filterGraceful":{type:`boolean`,default:e.filterGraceful,description:t(`suggest.filterGraceful`,`Controls whether filtering and sorting suggestions accounts for small typos.`)},"editor.suggest.localityBonus":{type:`boolean`,default:e.localityBonus,description:t(`suggest.localityBonus`,`Controls whether sorting favors words that appear close to the cursor.`)},"editor.suggest.shareSuggestSelections":{type:`boolean`,default:e.shareSuggestSelections,markdownDescription:t(`suggest.shareSuggestSelections`,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:`boolean`,default:e.snippetsPreventQuickSuggestions,description:t(`suggest.snippetsPreventQuickSuggestions`,`Controls whether an active snippet prevents quick suggestions.`)},"editor.suggest.showIcons":{type:`boolean`,default:e.showIcons,description:t(`suggest.showIcons`,`Controls whether to show or hide icons in suggestions.`)},"editor.suggest.showStatusBar":{type:`boolean`,default:e.showStatusBar,description:t(`suggest.showStatusBar`,`Controls the visibility of the status bar at the bottom of the suggest widget.`)},"editor.suggest.preview":{type:`boolean`,default:e.preview,description:t(`suggest.preview`,`Controls whether to preview the suggestion outcome in the editor.`)},"editor.suggest.showInlineDetails":{type:`boolean`,default:e.showInlineDetails,description:t(`suggest.showInlineDetails`,`Controls whether suggest details show inline with the label or only in the details widget`)},"editor.suggest.maxVisibleSuggestions":{type:`number`,deprecationMessage:t(`suggest.maxVisibleSuggestions.dep`,`This setting is deprecated. The suggest widget can now be resized.`)},"editor.suggest.filteredTypes":{type:`object`,deprecationMessage:t(`deprecated`,`This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.`)},"editor.suggest.showMethods":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showMethods`,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showFunctions`,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showConstructors`,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showDeprecated`,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showFields`,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showVariables`,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showClasss`,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showStructs`,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showInterfaces`,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showModules`,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showPropertys`,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showEvents`,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showOperators`,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showUnits`,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showValues`,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showConstants`,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showEnums`,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showEnumMembers`,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showKeywords`,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showTexts`,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showColors`,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showFiles`,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showReferences`,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showCustomcolors`,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showFolders`,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showTypeParameters`,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showSnippets`,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showUsers`,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:`boolean`,default:!0,markdownDescription:t(`editor.suggest.showIssues`,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{insertMode:he(t.insertMode,this.defaultValue.insertMode,[`insert`,`replace`]),filterGraceful:E(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:E(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:E(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:E(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:E(t.showIcons,this.defaultValue.showIcons),showStatusBar:E(t.showStatusBar,this.defaultValue.showStatusBar),preview:E(t.preview,this.defaultValue.preview),previewMode:he(t.previewMode,this.defaultValue.previewMode,[`prefix`,`subword`,`subwordSmart`]),showInlineDetails:E(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:E(t.showMethods,this.defaultValue.showMethods),showFunctions:E(t.showFunctions,this.defaultValue.showFunctions),showConstructors:E(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:E(t.showDeprecated,this.defaultValue.showDeprecated),showFields:E(t.showFields,this.defaultValue.showFields),showVariables:E(t.showVariables,this.defaultValue.showVariables),showClasses:E(t.showClasses,this.defaultValue.showClasses),showStructs:E(t.showStructs,this.defaultValue.showStructs),showInterfaces:E(t.showInterfaces,this.defaultValue.showInterfaces),showModules:E(t.showModules,this.defaultValue.showModules),showProperties:E(t.showProperties,this.defaultValue.showProperties),showEvents:E(t.showEvents,this.defaultValue.showEvents),showOperators:E(t.showOperators,this.defaultValue.showOperators),showUnits:E(t.showUnits,this.defaultValue.showUnits),showValues:E(t.showValues,this.defaultValue.showValues),showConstants:E(t.showConstants,this.defaultValue.showConstants),showEnums:E(t.showEnums,this.defaultValue.showEnums),showEnumMembers:E(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:E(t.showKeywords,this.defaultValue.showKeywords),showWords:E(t.showWords,this.defaultValue.showWords),showColors:E(t.showColors,this.defaultValue.showColors),showFiles:E(t.showFiles,this.defaultValue.showFiles),showReferences:E(t.showReferences,this.defaultValue.showReferences),showFolders:E(t.showFolders,this.defaultValue.showFolders),showTypeParameters:E(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:E(t.showSnippets,this.defaultValue.showSnippets),showUsers:E(t.showUsers,this.defaultValue.showUsers),showIssues:E(t.showIssues,this.defaultValue.showIssues)}}},$e=class extends ce{constructor(){super(101,`smartSelect`,{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:t(`selectLeadingAndTrailingWhitespace`,`Whether leading and trailing whitespace should always be selected.`),default:!0,type:`boolean`}})}validate(e){return!e||typeof e!=`object`?this.defaultValue:{selectLeadingAndTrailingWhitespace:E(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}},et=class extends le{constructor(){super(128,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}};function tt(e){switch(e){case`none`:return 0;case`same`:return 1;case`indent`:return 2;case`deepIndent`:return 3}}var nt=class extends le{constructor(){super(130,[129])}compute(e,t,n){let r=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}};const rt={fontFamily:p?`Menlo, Monaco, 'Courier New', monospace`:m?`'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'`:`Consolas, 'Courier New', monospace`,fontWeight:`normal`,fontSize:p?12:14,lineHeight:0,letterSpacing:0},it={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},at=[];function O(e){return at[e.id]=e,e}const ot={acceptSuggestionOnCommitCharacter:O(new D(0,`acceptSuggestionOnCommitCharacter`,!0,{markdownDescription:t(`acceptSuggestionOnCommitCharacter`,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:O(new ge(1,`acceptSuggestionOnEnter`,`on`,[`on`,`smart`,`off`],{markdownEnumDescriptions:[``,t(`acceptSuggestionOnEnterSmart`,"Only accept a suggestion with `Enter` when it makes a textual change."),``],markdownDescription:t(`acceptSuggestionOnEnter`,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:O(new ye),accessibilityPageSize:O(new fe(3,`accessibilityPageSize`,10,1,1073741824,{description:t(`accessibilityPageSize`,`Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.`)})),ariaLabel:O(new me(4,`ariaLabel`,t(`editorViewAccessibleLabel`,`Editor content`))),autoClosingBrackets:O(new ge(5,`autoClosingBrackets`,`languageDefined`,[`always`,`languageDefined`,`beforeWhitespace`,`never`],{enumDescriptions:[``,t(`editor.autoClosingBrackets.languageDefined`,`Use language configurations to determine when to autoclose brackets.`),t(`editor.autoClosingBrackets.beforeWhitespace`,`Autoclose brackets only when the cursor is to the left of whitespace.`),``],description:t(`autoClosingBrackets`,`Controls whether the editor should automatically close brackets after the user adds an opening bracket.`)})),autoClosingDelete:O(new ge(6,`autoClosingDelete`,`auto`,[`always`,`auto`,`never`],{enumDescriptions:[``,t(`editor.autoClosingDelete.auto`,`Remove adjacent closing quotes or brackets only if they were automatically inserted.`),``],description:t(`autoClosingDelete`,`Controls whether the editor should remove adjacent closing quotes or brackets when deleting.`)})),autoClosingOvertype:O(new ge(7,`autoClosingOvertype`,`auto`,[`always`,`auto`,`never`],{enumDescriptions:[``,t(`editor.autoClosingOvertype.auto`,`Type over closing quotes or brackets only if they were automatically inserted.`),``],description:t(`autoClosingOvertype`,`Controls whether the editor should type over closing quotes or brackets.`)})),autoClosingQuotes:O(new ge(8,`autoClosingQuotes`,`languageDefined`,[`always`,`languageDefined`,`beforeWhitespace`,`never`],{enumDescriptions:[``,t(`editor.autoClosingQuotes.languageDefined`,`Use language configurations to determine when to autoclose quotes.`),t(`editor.autoClosingQuotes.beforeWhitespace`,`Autoclose quotes only when the cursor is to the left of whitespace.`),``],description:t(`autoClosingQuotes`,`Controls whether the editor should automatically close quotes after the user adds an opening quote.`)})),autoIndent:O(new _e(9,`autoIndent`,4,`full`,[`none`,`keep`,`brackets`,`advanced`,`full`],ve,{enumDescriptions:[t(`editor.autoIndent.none`,`The editor will not insert indentation automatically.`),t(`editor.autoIndent.keep`,`The editor will keep the current line's indentation.`),t(`editor.autoIndent.brackets`,`The editor will keep the current line's indentation and honor language defined brackets.`),t(`editor.autoIndent.advanced`,`The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages.`),t(`editor.autoIndent.full`,`The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.`)],description:t(`autoIndent`,`Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.`)})),automaticLayout:O(new D(10,`automaticLayout`,!1)),autoSurround:O(new ge(11,`autoSurround`,`languageDefined`,[`languageDefined`,`quotes`,`brackets`,`never`],{enumDescriptions:[t(`editor.autoSurround.languageDefined`,`Use language configurations to determine when to automatically surround selections.`),t(`editor.autoSurround.quotes`,`Surround with quotes but not brackets.`),t(`editor.autoSurround.brackets`,`Surround with brackets but not quotes.`),``],description:t(`autoSurround`,`Controls whether the editor should automatically surround selections when typing quotes or brackets.`)})),bracketPairColorization:O(new Ye),bracketPairGuides:O(new Xe),stickyTabStops:O(new D(103,`stickyTabStops`,!1,{description:t(`stickyTabStops`,`Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.`)})),codeLens:O(new D(14,`codeLens`,!0,{description:t(`codeLens`,`Controls whether the editor shows CodeLens.`)})),codeLensFontFamily:O(new me(15,`codeLensFontFamily`,``,{description:t(`codeLensFontFamily`,`Controls the font family for CodeLens.`)})),codeLensFontSize:O(new fe(16,`codeLensFontSize`,0,0,100,{type:`number`,default:0,minimum:0,maximum:100,markdownDescription:t(`codeLensFontSize`,"Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:O(new D(17,`colorDecorators`,!0,{description:t(`colorDecorators`,`Controls whether the editor should render the inline color decorators and color picker.`)})),columnSelection:O(new D(18,`columnSelection`,!1,{description:t(`columnSelection`,`Enable that the selection with the mouse and keys is doing column selection.`)})),comments:O(new be),contextmenu:O(new D(20,`contextmenu`,!0)),copyWithSyntaxHighlighting:O(new D(21,`copyWithSyntaxHighlighting`,!0,{description:t(`copyWithSyntaxHighlighting`,`Controls whether syntax highlighting should be copied into the clipboard.`)})),cursorBlinking:O(new _e(22,`cursorBlinking`,1,`blink`,[`blink`,`smooth`,`phase`,`expand`,`solid`],xe,{description:t(`cursorBlinking`,`Control the cursor animation style.`)})),cursorSmoothCaretAnimation:O(new D(23,`cursorSmoothCaretAnimation`,!1,{description:t(`cursorSmoothCaretAnimation`,`Controls whether the smooth caret animation should be enabled.`)})),cursorStyle:O(new _e(24,`cursorStyle`,Se.Line,`line`,[`line`,`block`,`underline`,`line-thin`,`block-outline`,`underline-thin`],Ce,{description:t(`cursorStyle`,`Controls the cursor style.`)})),cursorSurroundingLines:O(new fe(25,`cursorSurroundingLines`,0,0,1073741824,{description:t(`cursorSurroundingLines`,`Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.`)})),cursorSurroundingLinesStyle:O(new ge(26,`cursorSurroundingLinesStyle`,`default`,[`default`,`all`],{enumDescriptions:[t(`cursorSurroundingLinesStyle.default`,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),t(`cursorSurroundingLinesStyle.all`,"`cursorSurroundingLines` is enforced always.")],description:t(`cursorSurroundingLinesStyle`,"Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:O(new fe(27,`cursorWidth`,0,0,1073741824,{markdownDescription:t(`cursorWidth`,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:O(new D(28,`disableLayerHinting`,!1)),disableMonospaceOptimizations:O(new D(29,`disableMonospaceOptimizations`,!1)),domReadOnly:O(new D(30,`domReadOnly`,!1)),dragAndDrop:O(new D(31,`dragAndDrop`,!0,{description:t(`dragAndDrop`,`Controls whether the editor should allow moving selections via drag and drop.`)})),emptySelectionClipboard:O(new Te),extraEditorClassName:O(new me(33,`extraEditorClassName`,``)),fastScrollSensitivity:O(new pe(34,`fastScrollSensitivity`,5,e=>e<=0?5:e,{markdownDescription:t(`fastScrollSensitivity`,"Scrolling speed multiplier when pressing `Alt`.")})),find:O(new Ee),fixedOverflowWidgets:O(new D(36,`fixedOverflowWidgets`,!1)),folding:O(new D(37,`folding`,!0,{description:t(`folding`,`Controls whether the editor has code folding enabled.`)})),foldingStrategy:O(new ge(38,`foldingStrategy`,`auto`,[`auto`,`indentation`],{enumDescriptions:[t(`foldingStrategy.auto`,`Use a language-specific folding strategy if available, else the indentation-based one.`),t(`foldingStrategy.indentation`,`Use the indentation-based folding strategy.`)],description:t(`foldingStrategy`,`Controls the strategy for computing folding ranges.`)})),foldingHighlight:O(new D(39,`foldingHighlight`,!0,{description:t(`foldingHighlight`,`Controls whether the editor should highlight folded ranges.`)})),foldingImportsByDefault:O(new D(40,`foldingImportsByDefault`,!1,{description:t(`foldingImportsByDefault`,`Controls whether the editor automatically collapses import ranges.`)})),unfoldOnClickAfterEndOfLine:O(new D(41,`unfoldOnClickAfterEndOfLine`,!1,{description:t(`unfoldOnClickAfterEndOfLine`,`Controls whether clicking on the empty content after a folded line will unfold the line.`)})),fontFamily:O(new me(42,`fontFamily`,rt.fontFamily,{description:t(`fontFamily`,`Controls the font family.`)})),fontInfo:O(new Oe),fontLigatures2:O(new De),fontSize:O(new ke),fontWeight:O(new Ae),formatOnPaste:O(new D(47,`formatOnPaste`,!1,{description:t(`formatOnPaste`,`Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.`)})),formatOnType:O(new D(48,`formatOnType`,!1,{description:t(`formatOnType`,`Controls whether the editor should automatically format the line after typing.`)})),glyphMargin:O(new D(49,`glyphMargin`,!0,{description:t(`glyphMargin`,`Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.`)})),gotoLocation:O(new je),hideCursorInOverviewRuler:O(new D(51,`hideCursorInOverviewRuler`,!1,{description:t(`hideCursorInOverviewRuler`,`Controls whether the cursor should be hidden in the overview ruler.`)})),hover:O(new Me),inDiffEditor:O(new D(53,`inDiffEditor`,!1)),letterSpacing:O(new pe(55,`letterSpacing`,rt.letterSpacing,e=>pe.clamp(e,-5,20),{description:t(`letterSpacing`,`Controls the letter spacing in pixels.`)})),lightbulb:O(new Pe),lineDecorationsWidth:O(new ue(57,`lineDecorationsWidth`,10)),lineHeight:O(new Ie),lineNumbers:O(new Ue),lineNumbersMinChars:O(new fe(60,`lineNumbersMinChars`,5,1,300)),linkedEditing:O(new D(61,`linkedEditing`,!1,{description:t(`linkedEditing`,`Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.`)})),links:O(new D(62,`links`,!0,{description:t(`links`,`Controls whether the editor should detect links and make them clickable.`)})),matchBrackets:O(new ge(63,`matchBrackets`,`always`,[`always`,`near`,`never`],{description:t(`matchBrackets`,`Highlight matching brackets.`)})),minimap:O(new Le),mouseStyle:O(new ge(65,`mouseStyle`,`text`,[`text`,`default`,`copy`])),mouseWheelScrollSensitivity:O(new pe(66,`mouseWheelScrollSensitivity`,1,e=>e===0?1:e,{markdownDescription:t(`mouseWheelScrollSensitivity`,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:O(new D(67,`mouseWheelZoom`,!1,{markdownDescription:t(`mouseWheelZoom`,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:O(new D(68,`multiCursorMergeOverlapping`,!0,{description:t(`multiCursorMergeOverlapping`,`Merge multiple cursors when they are overlapping.`)})),multiCursorModifier:O(new _e(69,`multiCursorModifier`,`altKey`,`alt`,[`ctrlCmd`,`alt`],Re,{markdownEnumDescriptions:[t(`multiCursorModifier.ctrlCmd`,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),t(`multiCursorModifier.alt`,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:t({key:`multiCursorModifier`,comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},`The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).`)})),multiCursorPaste:O(new ge(70,`multiCursorPaste`,`spread`,[`spread`,`full`],{markdownEnumDescriptions:[t(`multiCursorPaste.spread`,`Each cursor pastes a single line of the text.`),t(`multiCursorPaste.full`,`Each cursor pastes the full text.`)],markdownDescription:t(`multiCursorPaste`,`Controls pasting when the line count of the pasted text matches the cursor count.`)})),occurrencesHighlight:O(new D(71,`occurrencesHighlight`,!0,{description:t(`occurrencesHighlight`,`Controls whether the editor should highlight semantic symbol occurrences.`)})),overviewRulerBorder:O(new D(72,`overviewRulerBorder`,!0,{description:t(`overviewRulerBorder`,`Controls whether a border should be drawn around the overview ruler.`)})),overviewRulerLanes:O(new fe(73,`overviewRulerLanes`,3,0,3)),padding:O(new ze),parameterHints:O(new Be),peekWidgetDefaultFocus:O(new ge(76,`peekWidgetDefaultFocus`,`tree`,[`tree`,`editor`],{enumDescriptions:[t(`peekWidgetDefaultFocus.tree`,`Focus the tree when opening peek`),t(`peekWidgetDefaultFocus.editor`,`Focus the editor when opening peek`)],description:t(`peekWidgetDefaultFocus`,`Controls whether to focus the inline editor or the tree in the peek widget.`)})),definitionLinkOpensInPeek:O(new D(77,`definitionLinkOpensInPeek`,!1,{description:t(`definitionLinkOpensInPeek`,`Controls whether the Go to Definition mouse gesture always opens the peek widget.`)})),quickSuggestions:O(new He),quickSuggestionsDelay:O(new fe(79,`quickSuggestionsDelay`,10,0,1073741824,{description:t(`quickSuggestionsDelay`,`Controls the delay in milliseconds after which quick suggestions will show up.`)})),readOnly:O(new D(80,`readOnly`,!1)),renameOnType:O(new D(81,`renameOnType`,!1,{description:t(`renameOnType`,`Controls whether the editor auto renames on type.`),markdownDeprecationMessage:t(`renameOnTypeDeprecate`,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:O(new D(82,`renderControlCharacters`,!0,{description:t(`renderControlCharacters`,`Controls whether the editor should render control characters.`),restricted:!0})),renderFinalNewline:O(new D(83,`renderFinalNewline`,!0,{description:t(`renderFinalNewline`,`Render last line number when the file ends with a newline.`)})),renderLineHighlight:O(new ge(84,`renderLineHighlight`,`line`,[`none`,`gutter`,`line`,`all`],{enumDescriptions:[``,``,``,t(`renderLineHighlight.all`,`Highlights both the gutter and the current line.`)],description:t(`renderLineHighlight`,`Controls how the editor should render the current line highlight.`)})),renderLineHighlightOnlyWhenFocus:O(new D(85,`renderLineHighlightOnlyWhenFocus`,!1,{description:t(`renderLineHighlightOnlyWhenFocus`,`Controls if the editor should render the current line highlight only when the editor is focused.`)})),renderValidationDecorations:O(new ge(86,`renderValidationDecorations`,`editable`,[`editable`,`on`,`off`])),renderWhitespace:O(new ge(87,`renderWhitespace`,`selection`,[`none`,`boundary`,`selection`,`trailing`,`all`],{enumDescriptions:[``,t(`renderWhitespace.boundary`,`Render whitespace characters except for single spaces between words.`),t(`renderWhitespace.selection`,`Render whitespace characters only on selected text.`),t(`renderWhitespace.trailing`,`Render only trailing whitespace characters.`),``],description:t(`renderWhitespace`,`Controls how the editor should render whitespace characters.`)})),revealHorizontalRightPadding:O(new fe(88,`revealHorizontalRightPadding`,30,0,1e3)),roundedSelection:O(new D(89,`roundedSelection`,!0,{description:t(`roundedSelection`,`Controls whether selections should have rounded corners.`)})),rulers:O(new Ge),scrollbar:O(new qe),scrollBeyondLastColumn:O(new fe(92,`scrollBeyondLastColumn`,5,0,1073741824,{description:t(`scrollBeyondLastColumn`,`Controls the number of extra characters beyond which the editor will scroll horizontally.`)})),scrollBeyondLastLine:O(new D(93,`scrollBeyondLastLine`,!0,{description:t(`scrollBeyondLastLine`,`Controls whether the editor will scroll beyond the last line.`)})),scrollPredominantAxis:O(new D(94,`scrollPredominantAxis`,!0,{description:t(`scrollPredominantAxis`,`Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.`)})),selectionClipboard:O(new D(95,`selectionClipboard`,!0,{description:t(`selectionClipboard`,`Controls whether the Linux primary clipboard should be supported.`),included:m})),selectionHighlight:O(new D(96,`selectionHighlight`,!0,{description:t(`selectionHighlight`,`Controls whether the editor should highlight matches similar to the selection.`)})),selectOnLineNumbers:O(new D(97,`selectOnLineNumbers`,!0)),showFoldingControls:O(new ge(98,`showFoldingControls`,`mouseover`,[`always`,`mouseover`],{enumDescriptions:[t(`showFoldingControls.always`,`Always show the folding controls.`),t(`showFoldingControls.mouseover`,`Only show the folding controls when the mouse is over the gutter.`)],description:t(`showFoldingControls`,`Controls when the folding controls on the gutter are shown.`)})),showUnused:O(new D(99,`showUnused`,!0,{description:t(`showUnused`,`Controls fading out of unused code.`)})),showDeprecated:O(new D(124,`showDeprecated`,!0,{description:t(`showDeprecated`,`Controls strikethrough deprecated variables.`)})),inlayHints:O(new Fe),snippetSuggestions:O(new ge(100,`snippetSuggestions`,`inline`,[`top`,`bottom`,`inline`,`none`],{enumDescriptions:[t(`snippetSuggestions.top`,`Show snippet suggestions on top of other suggestions.`),t(`snippetSuggestions.bottom`,`Show snippet suggestions below other suggestions.`),t(`snippetSuggestions.inline`,`Show snippets suggestions with other suggestions.`),t(`snippetSuggestions.none`,`Do not show snippet suggestions.`)],description:t(`snippetSuggestions`,`Controls whether snippets are shown with other suggestions and how they are sorted.`)})),smartSelect:O(new $e),smoothScrolling:O(new D(102,`smoothScrolling`,!1,{description:t(`smoothScrolling`,`Controls whether the editor will scroll using an animation.`)})),stopRenderingLineAfter:O(new fe(104,`stopRenderingLineAfter`,1e4,-1,1073741824)),suggest:O(new Qe),inlineSuggest:O(new Je),suggestFontSize:O(new fe(106,`suggestFontSize`,0,0,1e3,{markdownDescription:t(`suggestFontSize`,"Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:O(new fe(107,`suggestLineHeight`,0,0,1e3,{markdownDescription:t(`suggestLineHeight`,"Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:O(new D(108,`suggestOnTriggerCharacters`,!0,{description:t(`suggestOnTriggerCharacters`,`Controls whether suggestions should automatically show up when typing trigger characters.`)})),suggestSelection:O(new ge(109,`suggestSelection`,`recentlyUsed`,[`first`,`recentlyUsed`,`recentlyUsedByPrefix`],{markdownEnumDescriptions:[t(`suggestSelection.first`,`Always select the first suggestion.`),t(`suggestSelection.recentlyUsed`,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),t(`suggestSelection.recentlyUsedByPrefix`,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:t(`suggestSelection`,`Controls how suggestions are pre-selected when showing the suggest list.`)})),tabCompletion:O(new ge(110,`tabCompletion`,`off`,[`on`,`off`,`onlySnippets`],{enumDescriptions:[t(`tabCompletion.on`,`Tab complete will insert the best matching suggestion when pressing tab.`),t(`tabCompletion.off`,`Disable tab completions.`),t(`tabCompletion.onlySnippets`,`Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.`)],description:t(`tabCompletion`,`Enables tab completions.`)})),tabIndex:O(new fe(111,`tabIndex`,0,-1,1073741824)),unusualLineTerminators:O(new ge(112,`unusualLineTerminators`,`prompt`,[`auto`,`off`,`prompt`],{enumDescriptions:[t(`unusualLineTerminators.auto`,`Unusual line terminators are automatically removed.`),t(`unusualLineTerminators.off`,`Unusual line terminators are ignored.`),t(`unusualLineTerminators.prompt`,`Unusual line terminators prompt to be removed.`)],description:t(`unusualLineTerminators`,`Remove unusual line terminators that might cause problems.`)})),useShadowDOM:O(new D(113,`useShadowDOM`,!0)),useTabStops:O(new D(114,`useTabStops`,!0,{description:t(`useTabStops`,`Inserting and deleting whitespace follows tab stops.`)})),wordSeparators:O(new me(115,`wordSeparators`,w,{description:t(`wordSeparators`,`Characters that will be used as word separators when doing word related navigations or operations.`)})),wordWrap:O(new ge(116,`wordWrap`,`off`,[`off`,`on`,`wordWrapColumn`,`bounded`],{markdownEnumDescriptions:[t(`wordWrap.off`,`Lines will never wrap.`),t(`wordWrap.on`,`Lines will wrap at the viewport width.`),t({key:`wordWrap.wordWrapColumn`,comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),t({key:`wordWrap.bounded`,comment:[`- viewport means the edge of the visible window size.`,"- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:t({key:`wordWrap`,comment:[`- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.`,"- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},`Controls how lines should wrap.`)})),wordWrapBreakAfterCharacters:O(new me(117,`wordWrapBreakAfterCharacters`,` 	})]?|/&.,;`)),wordWrapBreakBeforeCharacters:O(new me(118,`wordWrapBreakBeforeCharacters`,`([{+`)),wordWrapColumn:O(new fe(119,`wordWrapColumn`,80,1,1073741824,{markdownDescription:t({key:`wordWrapColumn`,comment:["- `editor.wordWrap` refers to a different setting and should not be localized.",`- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized.`]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:O(new ge(120,`wordWrapOverride1`,`inherit`,[`off`,`on`,`inherit`])),wordWrapOverride2:O(new ge(121,`wordWrapOverride2`,`inherit`,[`off`,`on`,`inherit`])),wrappingIndent:O(new _e(122,`wrappingIndent`,1,`same`,[`none`,`same`,`indent`,`deepIndent`],tt,{enumDescriptions:[t(`wrappingIndent.none`,`No indentation. Wrapped lines begin at column 1.`),t(`wrappingIndent.same`,`Wrapped lines get the same indentation as the parent.`),t(`wrappingIndent.indent`,`Wrapped lines get +1 indentation toward the parent.`),t(`wrappingIndent.deepIndent`,`Wrapped lines get +2 indentation toward the parent.`)],description:t(`wrappingIndent`,`Controls the indentation of wrapped lines.`)})),wrappingStrategy:O(new ge(123,`wrappingStrategy`,`simple`,[`simple`,`advanced`],{enumDescriptions:[t(`wrappingStrategy.simple`,`Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width.`),t(`wrappingStrategy.advanced`,`Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.`)],description:t(`wrappingStrategy`,`Controls the algorithm that computes wrapping points.`)})),editorClassName:O(new we),pixelRatio:O(new Ve),tabFocusMode:O(new et),layoutInfo:O(new Ne),wrappingInfo:O(new nt)},st=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function ct(e){ft(e)||st.onUnexpectedError(e)}function lt(e){ft(e)||st.onUnexpectedExternalError(e)}function ut(e){if(e instanceof Error){let{name:t,message:n}=e;return{$isError:!0,name:t,message:n,stack:e.stacktrace||e.stack}}return e}var dt=`Canceled`;function ft(e){return e instanceof Error&&e.name===dt&&e.message===dt}function pt(){let e=Error(dt);return e.name=e.message,e}function mt(e){return e?Error(`Illegal argument: ${e}`):Error(`Illegal argument`)}function ht(e){return e?Error(`Illegal state: ${e}`):Error(`Illegal state`)}var gt=class extends Error{constructor(e){super(`NotSupported`),e&&(this.message=e)}};function _t(e){let t=this,n=!1,r;return function(){return n?r:(n=!0,r=e.apply(t,arguments),r)}}var k;(function(e){function t(e){return e&&typeof e==`object`&&typeof e[Symbol.iterator]==`function`}e.is=t;let n=Object.freeze([]);function r(){return n}e.empty=r;function*i(e){yield e}e.single=i;function a(e){return e||n}e.from=a;function o(e){return!e||e[Symbol.iterator]().next().done===!0}e.isEmpty=o;function s(e){return e[Symbol.iterator]().next().value}e.first=s;function c(e,t){for(let n of e)if(t(n))return!0;return!1}e.some=c;function l(e,t){for(let n of e)if(t(n))return n}e.find=l;function*u(e,t){for(let n of e)t(n)&&(yield n)}e.filter=u;function*d(e,t){let n=0;for(let r of e)yield t(r,n++)}e.map=d;function*f(...e){for(let t of e)for(let e of t)yield e}e.concat=f;function*p(e){for(let t of e)for(let e of t)yield e}e.concatNested=p;function m(e,t,n){let r=n;for(let n of e)r=t(r,n);return r}e.reduce=m;function*h(e,t,n=e.length){for(t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length);t<n;t++)yield e[t]}e.slice=h;function g(t,n=1/0){let r=[];if(n===0)return[r,t];let i=t[Symbol.iterator]();for(let t=0;t<n;t++){let t=i.next();if(t.done)return[r,e.empty()];r.push(t.value)}return[r,{[Symbol.iterator](){return i}}]}e.consume=g;function _(e,t,n=(e,t)=>e===t){let r=e[Symbol.iterator](),i=t[Symbol.iterator]();for(;;){let e=r.next(),t=i.next();if(e.done!==t.done)return!1;if(e.done)return!0;if(!n(e.value,t.value))return!1}}e.equals=_})(k||={});var vt=null;function yt(e){return vt?.trackDisposable(e),e}function bt(e){vt?.markAsDisposed(e)}function xt(e,t){vt?.setParent(e,t)}function St(e,t){if(vt)for(let n of e)vt.setParent(n,t)}function Ct(e){return vt?.markAsSingleton(e),e}var wt=class extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(`, `)}]`),this.errors=e}};function Tt(e){return typeof e.dispose==`function`&&e.dispose.length===0}function Et(e){if(k.is(e)){let t=[];for(let n of e)if(n)try{n.dispose()}catch(e){t.push(e)}if(t.length===1)throw t[0];if(t.length>1)throw new wt(t);return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function Dt(...e){let t=Ot(()=>Et(e));return St(e,t),t}function Ot(e){let t=yt({dispose:_t(()=>{bt(t),e()})});return t}var A=class e{constructor(){this._toDispose=new Set,this._isDisposed=!1,yt(this)}dispose(){this._isDisposed||(bt(this),this._isDisposed=!0,this.clear())}clear(){try{Et(this._toDispose.values())}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw Error(`Cannot register a disposable on itself!`);return xt(t,this),this._isDisposed?e.DISABLE_DISPOSED_WARNING||console.warn(Error(`Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!`).stack):this._toDispose.add(t),t}};A.DISABLE_DISPOSED_WARNING=!1;var j=class{constructor(){this._store=new A,yt(this),xt(this._store,this)}dispose(){bt(this),this._store.dispose()}_register(e){if(e===this)throw Error(`Cannot register a disposable on itself!`);return this._store.add(e)}};j.None=Object.freeze({dispose(){}});var kt=class{constructor(){this._isDisposed=!1,yt(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),e&&xt(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,bt(this),(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&xt(e,null),e}},At=class{constructor(e){this.object=e}dispose(){}},jt=class e{constructor(t){this.element=t,this.next=e.Undefined,this.prev=e.Undefined}};jt.Undefined=new jt(void 0);var Mt=class{constructor(){this._first=jt.Undefined,this._last=jt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===jt.Undefined}clear(){let e=this._first;for(;e!==jt.Undefined;){let t=e.next;e.prev=jt.Undefined,e.next=jt.Undefined,e=t}this._first=jt.Undefined,this._last=jt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new jt(e);if(this._first===jt.Undefined)this._first=n,this._last=n;else if(t){let e=this._last;this._last=n,n.prev=e,e.next=n}else{let e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==jt.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==jt.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==jt.Undefined&&e.next!==jt.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===jt.Undefined&&e.next===jt.Undefined?(this._first=jt.Undefined,this._last=jt.Undefined):e.next===jt.Undefined?(this._last=this._last.prev,this._last.next=jt.Undefined):e.prev===jt.Undefined&&(this._first=this._first.next,this._first.prev=jt.Undefined);--this._size}*[Symbol.iterator](){let e=this._first;for(;e!==jt.Undefined;)yield e.element,e=e.next}},Nt=l.performance&&typeof l.performance.now==`function`,Pt=class e{constructor(e){this._highResolution=Nt&&e,this._startTime=this._now(),this._stopTime=-1}static create(t=!0){return new e(t)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime===-1?this._now()-this._startTime:this._stopTime-this._startTime}_now(){return this._highResolution?l.performance.now():Date.now()}},M;(function(e){e.None=()=>j.None;function t(e){return(t,n=null,r)=>{let i=!1,a;return a=e(e=>{if(!i)return a?a.dispose():i=!0,t.call(n,e)},null,r),i&&a.dispose(),a}}e.once=t;function n(e,t){return c((n,r=null,i)=>e(e=>n.call(r,t(e)),null,i))}e.map=n;function r(e,t){return c((n,r=null,i)=>e(e=>{t(e),n.call(r,e)},null,i))}e.forEach=r;function i(e,t){return c((n,r=null,i)=>e(e=>t(e)&&n.call(r,e),null,i))}e.filter=i;function a(e){return e}e.signal=a;function o(...e){return(t,n=null,r)=>Dt(...e.map(e=>e(e=>t.call(n,e),null,r)))}e.any=o;function s(e,t,r){let i=r;return n(e,e=>(i=t(i,e),i))}e.reduce=s;function c(e){let t,n=new N({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}function l(e,t,n=100,r=!1,i){let a,o,s,c=0,l=new N({leakWarningThreshold:i,onFirstListenerAdd(){a=e(e=>{c++,o=t(o,e),r&&!s&&(l.fire(o),o=void 0),clearTimeout(s),s=setTimeout(()=>{let e=o;o=void 0,s=void 0,(!r||c>1)&&l.fire(e),c=0},n)})},onLastListenerRemove(){a.dispose()}});return l.event}e.debounce=l;function u(e,t=(e,t)=>e===t){let n=!0,r;return i(e,e=>{let i=n||!t(e,r);return n=!1,r=e,i})}e.latch=u;function d(t,n){return[e.filter(t,n),e.filter(t,e=>!n(e))]}e.split=d;function f(e,t=!1,n=[]){let r=n.slice(),i=e(e=>{r?r.push(e):o.fire(e)}),a=()=>{r&&r.forEach(e=>o.fire(e)),r=null},o=new N({onFirstListenerAdd(){i||=e(e=>o.fire(e))},onFirstListenerDidAdd(){r&&(t?setTimeout(a):a())},onLastListenerRemove(){i&&i.dispose(),i=null}});return o.event}e.buffer=f;class p{constructor(e){this.event=e}map(e){return new p(n(this.event,e))}forEach(e){return new p(r(this.event,e))}filter(e){return new p(i(this.event,e))}reduce(e,t){return new p(s(this.event,e,t))}latch(){return new p(u(this.event))}debounce(e,t=100,n=!1,r){return new p(l(this.event,e,t,n,r))}on(e,t,n){return this.event(e,t,n)}once(e,n,r){return t(this.event)(e,n,r)}}function m(e){return new p(e)}e.chain=m;function h(e,t,n=e=>e){let r=(...e)=>i.fire(n(...e)),i=new N({onFirstListenerAdd:()=>e.on(t,r),onLastListenerRemove:()=>e.removeListener(t,r)});return i.event}e.fromNodeEventEmitter=h;function g(e,t,n=e=>e){let r=(...e)=>i.fire(n(...e)),i=new N({onFirstListenerAdd:()=>e.addEventListener(t,r),onLastListenerRemove:()=>e.removeEventListener(t,r)});return i.event}e.fromDOMEventEmitter=g;function _(e){return new Promise(n=>t(e)(n))}e.toPromise=_})(M||={});var Ft=class e{constructor(t){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${t}_${e._idPool++}`}start(e){this._stopWatch=new Pt(!0),this._listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};Ft._idPool=0;var It=-1,Lt=class{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=It;if(typeof this.customThreshold==`number`&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||=new Map;let n=Error().stack.split(`
`).slice(3).join(`
`),r=this._stacks.get(n)||0;if(this._stacks.set(n,r+1),--this._warnCountdown,this._warnCountdown<=0){this._warnCountdown=t*.5;let n,r=0;for(let[e,t]of this._stacks)(!n||r<t)&&(n=e,r=t);console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${r}):`),console.warn(n)}return()=>{let e=this._stacks.get(n)||0;this._stacks.set(n,e-1)}}},N=class{constructor(e){this._disposed=!1,this._options=e,this._leakageMon=It>0?new Lt(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=this._options?._profName?new Ft(this._options._profName):void 0}get event(){return this._event||=(e,t,n)=>{this._listeners||=new Mt;let r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);let i=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let a=this._leakageMon?.check(this._listeners.size),o=Ot(()=>{a&&a(),this._disposed||(i(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof A?n.add(o):Array.isArray(n)&&n.push(o),o},this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||=new Mt;for(let t of this._listeners)this._deliveryQueue.push([t,e]);for((t=this._perfMon)==null||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){let[e,t]=this._deliveryQueue.shift();try{typeof e==`function`?e.call(void 0,t):e[0].call(e[1],t)}catch(e){ct(e)}}(n=this._perfMon)==null||n.stop()}}dispose(){var e,t,n,r,i;this._disposed||(this._disposed=!0,(e=this._listeners)==null||e.clear(),(t=this._deliveryQueue)==null||t.clear(),(r=(n=this._options)?.onLastListenerRemove)==null||r.call(n),(i=this._leakageMon)==null||i.dispose())}},Rt=class extends N{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Mt,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused===0?super.fire(e):this._eventQueue.push(e))}},zt=class extends Rt{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||=(this.pause(),setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},Bt=class{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,r)=>e(e=>{let r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(n,e)):t.call(n,e)},void 0,r)}bufferEvents(e){let t=[];this.buffers.push(t);let n=e();return this.buffers.pop(),t.forEach(e=>e()),n}},Vt=class{constructor(){this.listening=!1,this.inputEvent=M.None,this.inputEventListener=j.None,this.emitter=new N({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}},Ht=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}),Ut;(function(e){function t(t){return t===e.None||t===e.Cancelled||t instanceof Wt?!0:!t||typeof t!=`object`?!1:typeof t.isCancellationRequested==`boolean`&&typeof t.onCancellationRequested==`function`}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:M.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ht})})(Ut||={});var Wt=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ht:(this._emitter||=new N,this._emitter.event)}dispose(){this._emitter&&=(this._emitter.dispose(),null)}},Gt=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||=new Wt,this._token}cancel(){this._token?this._token instanceof Wt&&this._token.cancel():this._token=Ut.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Wt&&this._token.dispose():this._token=Ut.None}},Kt=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},qt=new Kt,Jt=new Kt,Yt=new Kt;const Xt=Array(230),Zt={};var Qt=[],$t=Object.create(null),en=Object.create(null);const tn=[],nn=[];for(let e=0;e<=193;e++)tn[e]=-1;for(let e=0;e<=126;e++)nn[e]=-1;(function(){let e=[[0,1,0,`None`,0,`unknown`,0,`VK_UNKNOWN`,``,``],[0,1,1,`Hyper`,0,``,0,``,``,``],[0,1,2,`Super`,0,``,0,``,``,``],[0,1,3,`Fn`,0,``,0,``,``,``],[0,1,4,`FnLock`,0,``,0,``,``,``],[0,1,5,`Suspend`,0,``,0,``,``,``],[0,1,6,`Resume`,0,``,0,``,``,``],[0,1,7,`Turbo`,0,``,0,``,``,``],[0,1,8,`Sleep`,0,``,0,`VK_SLEEP`,``,``],[0,1,9,`WakeUp`,0,``,0,``,``,``],[31,0,10,`KeyA`,31,`A`,65,`VK_A`,``,``],[32,0,11,`KeyB`,32,`B`,66,`VK_B`,``,``],[33,0,12,`KeyC`,33,`C`,67,`VK_C`,``,``],[34,0,13,`KeyD`,34,`D`,68,`VK_D`,``,``],[35,0,14,`KeyE`,35,`E`,69,`VK_E`,``,``],[36,0,15,`KeyF`,36,`F`,70,`VK_F`,``,``],[37,0,16,`KeyG`,37,`G`,71,`VK_G`,``,``],[38,0,17,`KeyH`,38,`H`,72,`VK_H`,``,``],[39,0,18,`KeyI`,39,`I`,73,`VK_I`,``,``],[40,0,19,`KeyJ`,40,`J`,74,`VK_J`,``,``],[41,0,20,`KeyK`,41,`K`,75,`VK_K`,``,``],[42,0,21,`KeyL`,42,`L`,76,`VK_L`,``,``],[43,0,22,`KeyM`,43,`M`,77,`VK_M`,``,``],[44,0,23,`KeyN`,44,`N`,78,`VK_N`,``,``],[45,0,24,`KeyO`,45,`O`,79,`VK_O`,``,``],[46,0,25,`KeyP`,46,`P`,80,`VK_P`,``,``],[47,0,26,`KeyQ`,47,`Q`,81,`VK_Q`,``,``],[48,0,27,`KeyR`,48,`R`,82,`VK_R`,``,``],[49,0,28,`KeyS`,49,`S`,83,`VK_S`,``,``],[50,0,29,`KeyT`,50,`T`,84,`VK_T`,``,``],[51,0,30,`KeyU`,51,`U`,85,`VK_U`,``,``],[52,0,31,`KeyV`,52,`V`,86,`VK_V`,``,``],[53,0,32,`KeyW`,53,`W`,87,`VK_W`,``,``],[54,0,33,`KeyX`,54,`X`,88,`VK_X`,``,``],[55,0,34,`KeyY`,55,`Y`,89,`VK_Y`,``,``],[56,0,35,`KeyZ`,56,`Z`,90,`VK_Z`,``,``],[22,0,36,`Digit1`,22,`1`,49,`VK_1`,``,``],[23,0,37,`Digit2`,23,`2`,50,`VK_2`,``,``],[24,0,38,`Digit3`,24,`3`,51,`VK_3`,``,``],[25,0,39,`Digit4`,25,`4`,52,`VK_4`,``,``],[26,0,40,`Digit5`,26,`5`,53,`VK_5`,``,``],[27,0,41,`Digit6`,27,`6`,54,`VK_6`,``,``],[28,0,42,`Digit7`,28,`7`,55,`VK_7`,``,``],[29,0,43,`Digit8`,29,`8`,56,`VK_8`,``,``],[30,0,44,`Digit9`,30,`9`,57,`VK_9`,``,``],[21,0,45,`Digit0`,21,`0`,48,`VK_0`,``,``],[3,1,46,`Enter`,3,`Enter`,13,`VK_RETURN`,``,``],[9,1,47,`Escape`,9,`Escape`,27,`VK_ESCAPE`,``,``],[1,1,48,`Backspace`,1,`Backspace`,8,`VK_BACK`,``,``],[2,1,49,`Tab`,2,`Tab`,9,`VK_TAB`,``,``],[10,1,50,`Space`,10,`Space`,32,`VK_SPACE`,``,``],[83,0,51,`Minus`,83,`-`,189,`VK_OEM_MINUS`,`-`,`OEM_MINUS`],[81,0,52,`Equal`,81,`=`,187,`VK_OEM_PLUS`,`=`,`OEM_PLUS`],[87,0,53,`BracketLeft`,87,`[`,219,`VK_OEM_4`,`[`,`OEM_4`],[89,0,54,`BracketRight`,89,`]`,221,`VK_OEM_6`,`]`,`OEM_6`],[88,0,55,`Backslash`,88,`\\`,220,`VK_OEM_5`,`\\`,`OEM_5`],[0,0,56,`IntlHash`,0,``,0,``,``,``],[80,0,57,`Semicolon`,80,`;`,186,`VK_OEM_1`,`;`,`OEM_1`],[90,0,58,`Quote`,90,`'`,222,`VK_OEM_7`,`'`,`OEM_7`],[86,0,59,`Backquote`,86,"`",192,`VK_OEM_3`,"`",`OEM_3`],[82,0,60,`Comma`,82,`,`,188,`VK_OEM_COMMA`,`,`,`OEM_COMMA`],[84,0,61,`Period`,84,`.`,190,`VK_OEM_PERIOD`,`.`,`OEM_PERIOD`],[85,0,62,`Slash`,85,`/`,191,`VK_OEM_2`,`/`,`OEM_2`],[8,1,63,`CapsLock`,8,`CapsLock`,20,`VK_CAPITAL`,``,``],[59,1,64,`F1`,59,`F1`,112,`VK_F1`,``,``],[60,1,65,`F2`,60,`F2`,113,`VK_F2`,``,``],[61,1,66,`F3`,61,`F3`,114,`VK_F3`,``,``],[62,1,67,`F4`,62,`F4`,115,`VK_F4`,``,``],[63,1,68,`F5`,63,`F5`,116,`VK_F5`,``,``],[64,1,69,`F6`,64,`F6`,117,`VK_F6`,``,``],[65,1,70,`F7`,65,`F7`,118,`VK_F7`,``,``],[66,1,71,`F8`,66,`F8`,119,`VK_F8`,``,``],[67,1,72,`F9`,67,`F9`,120,`VK_F9`,``,``],[68,1,73,`F10`,68,`F10`,121,`VK_F10`,``,``],[69,1,74,`F11`,69,`F11`,122,`VK_F11`,``,``],[70,1,75,`F12`,70,`F12`,123,`VK_F12`,``,``],[0,1,76,`PrintScreen`,0,``,0,``,``,``],[79,1,77,`ScrollLock`,79,`ScrollLock`,145,`VK_SCROLL`,``,``],[7,1,78,`Pause`,7,`PauseBreak`,19,`VK_PAUSE`,``,``],[19,1,79,`Insert`,19,`Insert`,45,`VK_INSERT`,``,``],[14,1,80,`Home`,14,`Home`,36,`VK_HOME`,``,``],[11,1,81,`PageUp`,11,`PageUp`,33,`VK_PRIOR`,``,``],[20,1,82,`Delete`,20,`Delete`,46,`VK_DELETE`,``,``],[13,1,83,`End`,13,`End`,35,`VK_END`,``,``],[12,1,84,`PageDown`,12,`PageDown`,34,`VK_NEXT`,``,``],[17,1,85,`ArrowRight`,17,`RightArrow`,39,`VK_RIGHT`,`Right`,``],[15,1,86,`ArrowLeft`,15,`LeftArrow`,37,`VK_LEFT`,`Left`,``],[18,1,87,`ArrowDown`,18,`DownArrow`,40,`VK_DOWN`,`Down`,``],[16,1,88,`ArrowUp`,16,`UpArrow`,38,`VK_UP`,`Up`,``],[78,1,89,`NumLock`,78,`NumLock`,144,`VK_NUMLOCK`,``,``],[108,1,90,`NumpadDivide`,108,`NumPad_Divide`,111,`VK_DIVIDE`,``,``],[103,1,91,`NumpadMultiply`,103,`NumPad_Multiply`,106,`VK_MULTIPLY`,``,``],[106,1,92,`NumpadSubtract`,106,`NumPad_Subtract`,109,`VK_SUBTRACT`,``,``],[104,1,93,`NumpadAdd`,104,`NumPad_Add`,107,`VK_ADD`,``,``],[3,1,94,`NumpadEnter`,3,``,0,``,``,``],[94,1,95,`Numpad1`,94,`NumPad1`,97,`VK_NUMPAD1`,``,``],[95,1,96,`Numpad2`,95,`NumPad2`,98,`VK_NUMPAD2`,``,``],[96,1,97,`Numpad3`,96,`NumPad3`,99,`VK_NUMPAD3`,``,``],[97,1,98,`Numpad4`,97,`NumPad4`,100,`VK_NUMPAD4`,``,``],[98,1,99,`Numpad5`,98,`NumPad5`,101,`VK_NUMPAD5`,``,``],[99,1,100,`Numpad6`,99,`NumPad6`,102,`VK_NUMPAD6`,``,``],[100,1,101,`Numpad7`,100,`NumPad7`,103,`VK_NUMPAD7`,``,``],[101,1,102,`Numpad8`,101,`NumPad8`,104,`VK_NUMPAD8`,``,``],[102,1,103,`Numpad9`,102,`NumPad9`,105,`VK_NUMPAD9`,``,``],[93,1,104,`Numpad0`,93,`NumPad0`,96,`VK_NUMPAD0`,``,``],[107,1,105,`NumpadDecimal`,107,`NumPad_Decimal`,110,`VK_DECIMAL`,``,``],[92,0,106,`IntlBackslash`,92,`OEM_102`,226,`VK_OEM_102`,``,``],[58,1,107,`ContextMenu`,58,`ContextMenu`,93,``,``,``],[0,1,108,`Power`,0,``,0,``,``,``],[0,1,109,`NumpadEqual`,0,``,0,``,``,``],[71,1,110,`F13`,71,`F13`,124,`VK_F13`,``,``],[72,1,111,`F14`,72,`F14`,125,`VK_F14`,``,``],[73,1,112,`F15`,73,`F15`,126,`VK_F15`,``,``],[74,1,113,`F16`,74,`F16`,127,`VK_F16`,``,``],[75,1,114,`F17`,75,`F17`,128,`VK_F17`,``,``],[76,1,115,`F18`,76,`F18`,129,`VK_F18`,``,``],[77,1,116,`F19`,77,`F19`,130,`VK_F19`,``,``],[0,1,117,`F20`,0,``,0,`VK_F20`,``,``],[0,1,118,`F21`,0,``,0,`VK_F21`,``,``],[0,1,119,`F22`,0,``,0,`VK_F22`,``,``],[0,1,120,`F23`,0,``,0,`VK_F23`,``,``],[0,1,121,`F24`,0,``,0,`VK_F24`,``,``],[0,1,122,`Open`,0,``,0,``,``,``],[0,1,123,`Help`,0,``,0,``,``,``],[0,1,124,`Select`,0,``,0,``,``,``],[0,1,125,`Again`,0,``,0,``,``,``],[0,1,126,`Undo`,0,``,0,``,``,``],[0,1,127,`Cut`,0,``,0,``,``,``],[0,1,128,`Copy`,0,``,0,``,``,``],[0,1,129,`Paste`,0,``,0,``,``,``],[0,1,130,`Find`,0,``,0,``,``,``],[0,1,131,`AudioVolumeMute`,112,`AudioVolumeMute`,173,`VK_VOLUME_MUTE`,``,``],[0,1,132,`AudioVolumeUp`,113,`AudioVolumeUp`,175,`VK_VOLUME_UP`,``,``],[0,1,133,`AudioVolumeDown`,114,`AudioVolumeDown`,174,`VK_VOLUME_DOWN`,``,``],[105,1,134,`NumpadComma`,105,`NumPad_Separator`,108,`VK_SEPARATOR`,``,``],[110,0,135,`IntlRo`,110,`ABNT_C1`,193,`VK_ABNT_C1`,``,``],[0,1,136,`KanaMode`,0,``,0,``,``,``],[0,0,137,`IntlYen`,0,``,0,``,``,``],[0,1,138,`Convert`,0,``,0,``,``,``],[0,1,139,`NonConvert`,0,``,0,``,``,``],[0,1,140,`Lang1`,0,``,0,``,``,``],[0,1,141,`Lang2`,0,``,0,``,``,``],[0,1,142,`Lang3`,0,``,0,``,``,``],[0,1,143,`Lang4`,0,``,0,``,``,``],[0,1,144,`Lang5`,0,``,0,``,``,``],[0,1,145,`Abort`,0,``,0,``,``,``],[0,1,146,`Props`,0,``,0,``,``,``],[0,1,147,`NumpadParenLeft`,0,``,0,``,``,``],[0,1,148,`NumpadParenRight`,0,``,0,``,``,``],[0,1,149,`NumpadBackspace`,0,``,0,``,``,``],[0,1,150,`NumpadMemoryStore`,0,``,0,``,``,``],[0,1,151,`NumpadMemoryRecall`,0,``,0,``,``,``],[0,1,152,`NumpadMemoryClear`,0,``,0,``,``,``],[0,1,153,`NumpadMemoryAdd`,0,``,0,``,``,``],[0,1,154,`NumpadMemorySubtract`,0,``,0,``,``,``],[0,1,155,`NumpadClear`,0,``,0,``,``,``],[0,1,156,`NumpadClearEntry`,0,``,0,``,``,``],[5,1,0,``,5,`Ctrl`,17,`VK_CONTROL`,``,``],[4,1,0,``,4,`Shift`,16,`VK_SHIFT`,``,``],[6,1,0,``,6,`Alt`,18,`VK_MENU`,``,``],[57,1,0,``,57,`Meta`,0,`VK_COMMAND`,``,``],[5,1,157,`ControlLeft`,5,``,0,`VK_LCONTROL`,``,``],[4,1,158,`ShiftLeft`,4,``,0,`VK_LSHIFT`,``,``],[6,1,159,`AltLeft`,6,``,0,`VK_LMENU`,``,``],[57,1,160,`MetaLeft`,57,``,0,`VK_LWIN`,``,``],[5,1,161,`ControlRight`,5,``,0,`VK_RCONTROL`,``,``],[4,1,162,`ShiftRight`,4,``,0,`VK_RSHIFT`,``,``],[6,1,163,`AltRight`,6,``,0,`VK_RMENU`,``,``],[57,1,164,`MetaRight`,57,``,0,`VK_RWIN`,``,``],[0,1,165,`BrightnessUp`,0,``,0,``,``,``],[0,1,166,`BrightnessDown`,0,``,0,``,``,``],[0,1,167,`MediaPlay`,0,``,0,``,``,``],[0,1,168,`MediaRecord`,0,``,0,``,``,``],[0,1,169,`MediaFastForward`,0,``,0,``,``,``],[0,1,170,`MediaRewind`,0,``,0,``,``,``],[114,1,171,`MediaTrackNext`,119,`MediaTrackNext`,176,`VK_MEDIA_NEXT_TRACK`,``,``],[115,1,172,`MediaTrackPrevious`,120,`MediaTrackPrevious`,177,`VK_MEDIA_PREV_TRACK`,``,``],[116,1,173,`MediaStop`,121,`MediaStop`,178,`VK_MEDIA_STOP`,``,``],[0,1,174,`Eject`,0,``,0,``,``,``],[117,1,175,`MediaPlayPause`,122,`MediaPlayPause`,179,`VK_MEDIA_PLAY_PAUSE`,``,``],[0,1,176,`MediaSelect`,123,`LaunchMediaPlayer`,181,`VK_MEDIA_LAUNCH_MEDIA_SELECT`,``,``],[0,1,177,`LaunchMail`,124,`LaunchMail`,180,`VK_MEDIA_LAUNCH_MAIL`,``,``],[0,1,178,`LaunchApp2`,125,`LaunchApp2`,183,`VK_MEDIA_LAUNCH_APP2`,``,``],[0,1,179,`LaunchApp1`,0,``,0,`VK_MEDIA_LAUNCH_APP1`,``,``],[0,1,180,`SelectTask`,0,``,0,``,``,``],[0,1,181,`LaunchScreenSaver`,0,``,0,``,``,``],[0,1,182,`BrowserSearch`,115,`BrowserSearch`,170,`VK_BROWSER_SEARCH`,``,``],[0,1,183,`BrowserHome`,116,`BrowserHome`,172,`VK_BROWSER_HOME`,``,``],[112,1,184,`BrowserBack`,117,`BrowserBack`,166,`VK_BROWSER_BACK`,``,``],[113,1,185,`BrowserForward`,118,`BrowserForward`,167,`VK_BROWSER_FORWARD`,``,``],[0,1,186,`BrowserStop`,0,``,0,`VK_BROWSER_STOP`,``,``],[0,1,187,`BrowserRefresh`,0,``,0,`VK_BROWSER_REFRESH`,``,``],[0,1,188,`BrowserFavorites`,0,``,0,`VK_BROWSER_FAVORITES`,``,``],[0,1,189,`ZoomToggle`,0,``,0,``,``,``],[0,1,190,`MailReply`,0,``,0,``,``,``],[0,1,191,`MailForward`,0,``,0,``,``,``],[0,1,192,`MailSend`,0,``,0,``,``,``],[109,1,0,``,109,`KeyInComposition`,229,``,``,``],[111,1,0,``,111,`ABNT_C2`,194,`VK_ABNT_C2`,``,``],[91,1,0,``,91,`OEM_8`,223,`VK_OEM_8`,``,``],[0,1,0,``,0,``,0,`VK_CLEAR`,``,``],[0,1,0,``,0,``,0,`VK_KANA`,``,``],[0,1,0,``,0,``,0,`VK_HANGUL`,``,``],[0,1,0,``,0,``,0,`VK_JUNJA`,``,``],[0,1,0,``,0,``,0,`VK_FINAL`,``,``],[0,1,0,``,0,``,0,`VK_HANJA`,``,``],[0,1,0,``,0,``,0,`VK_KANJI`,``,``],[0,1,0,``,0,``,0,`VK_CONVERT`,``,``],[0,1,0,``,0,``,0,`VK_NONCONVERT`,``,``],[0,1,0,``,0,``,0,`VK_ACCEPT`,``,``],[0,1,0,``,0,``,0,`VK_MODECHANGE`,``,``],[0,1,0,``,0,``,0,`VK_SELECT`,``,``],[0,1,0,``,0,``,0,`VK_PRINT`,``,``],[0,1,0,``,0,``,0,`VK_EXECUTE`,``,``],[0,1,0,``,0,``,0,`VK_SNAPSHOT`,``,``],[0,1,0,``,0,``,0,`VK_HELP`,``,``],[0,1,0,``,0,``,0,`VK_APPS`,``,``],[0,1,0,``,0,``,0,`VK_PROCESSKEY`,``,``],[0,1,0,``,0,``,0,`VK_PACKET`,``,``],[0,1,0,``,0,``,0,`VK_DBE_SBCSCHAR`,``,``],[0,1,0,``,0,``,0,`VK_DBE_DBCSCHAR`,``,``],[0,1,0,``,0,``,0,`VK_ATTN`,``,``],[0,1,0,``,0,``,0,`VK_CRSEL`,``,``],[0,1,0,``,0,``,0,`VK_EXSEL`,``,``],[0,1,0,``,0,``,0,`VK_EREOF`,``,``],[0,1,0,``,0,``,0,`VK_PLAY`,``,``],[0,1,0,``,0,``,0,`VK_ZOOM`,``,``],[0,1,0,``,0,``,0,`VK_NONAME`,``,``],[0,1,0,``,0,``,0,`VK_PA1`,``,``],[0,1,0,``,0,``,0,`VK_OEM_CLEAR`,``,``]],t=[],n=[];for(let r of e){let[e,i,a,o,s,c,l,u,d,f]=r;if(n[a]||(n[a]=!0,Qt[a]=o,$t[o]=a,en[o.toLowerCase()]=a,i&&(tn[a]=s,s!==0&&s!==3&&s!==5&&s!==4&&s!==6&&s!==57&&(nn[s]=a))),!t[s]){if(t[s]=!0,!c)throw Error(`String representation missing for key code ${s} around scan code ${o}`);qt.define(s,c),Jt.define(s,d||c),Yt.define(s,f||d||c)}l&&(Xt[l]=s),u&&(Zt[u]=s)}nn[3]=46})();var rn;(function(e){function t(e){return qt.keyCodeToStr(e)}e.toString=t;function n(e){return qt.strToKeyCode(e)}e.fromString=n;function r(e){return Jt.keyCodeToStr(e)}e.toUserSettingsUS=r;function i(e){return Yt.keyCodeToStr(e)}e.toUserSettingsGeneral=i;function a(e){return Jt.strToKeyCode(e)||Yt.strToKeyCode(e)}e.fromUserSettings=a;function o(e){if(e>=93&&e<=108)return null;switch(e){case 16:return`Up`;case 18:return`Down`;case 15:return`Left`;case 17:return`Right`}return qt.keyCodeToStr(e)}e.toElectronAccelerator=o})(rn||={});function an(e,t){return(e|(t&65535)<<16>>>0)>>>0}var on;if(l.vscode!==void 0&&l.vscode.process!==void 0){let e=l.vscode.process;on={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()},nextTick(e){return y(e)}}}else on=typeof process<`u`?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{}},cwd(){return{}.VSCODE_CWD||process.cwd()},nextTick(e){return process.nextTick(e)}}:{get platform(){return f?`win32`:p?`darwin`:`linux`},get arch(){},nextTick(e){return y(e)},get env(){return{}},cwd(){return`/`}};const sn=on.cwd,cn=on.env,ln=on.platform;var un=65,dn=97,fn=90,pn=122,mn=46,hn=47,gn=92,_n=58,vn=63,yn=class extends Error{constructor(e,t,n){let r;typeof t==`string`&&t.indexOf(`not `)===0?(r=`must not be`,t=t.replace(/^not /,``)):r=`must be`;let i=`The "${e}" ${e.indexOf(`.`)===-1?`argument`:`property`} ${r} of type ${t}`;i+=`. Received type ${typeof n}`,super(i),this.code=`ERR_INVALID_ARG_TYPE`}};function bn(e,t){if(typeof e!=`string`)throw new yn(t,`string`,e)}function P(e){return e===hn||e===gn}function xn(e){return e===hn}function Sn(e){return e>=un&&e<=fn||e>=dn&&e<=pn}function Cn(e,t,n,r){let i=``,a=0,o=-1,s=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else if(r(c))break;else c=hn;if(r(c)){if(!(o===l-1||s===1))if(s===2){if(i.length<2||a!==2||i.charCodeAt(i.length-1)!==mn||i.charCodeAt(i.length-2)!==mn){if(i.length>2){let e=i.lastIndexOf(n);e===-1?(i=``,a=0):(i=i.slice(0,e),a=i.length-1-i.lastIndexOf(n)),o=l,s=0;continue}else if(i.length!==0){i=``,a=0,o=l,s=0;continue}}t&&(i+=i.length>0?`${n}..`:`..`,a=2)}else i.length>0?i+=`${n}${e.slice(o+1,l)}`:i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else c===mn&&s!==-1?++s:s=-1}return i}function wn(e,t){if(typeof t!=`object`||!t)throw new yn(`pathObject`,`Object`,t);let n=t.dir||t.root,r=t.base||`${t.name||``}${t.ext||``}`;return n?n===t.root?`${n}${r}`:`${n}${e}${r}`:r}const Tn={resolve(...e){let t=``,n=``,r=!1;for(let i=e.length-1;i>=-1;i--){let a;if(i>=0){if(a=e[i],bn(a,`path`),a.length===0)continue}else t.length===0?a=sn():(a=cn[`=${t}`]||sn(),(a===void 0||a.slice(0,2).toLowerCase()!==t.toLowerCase()&&a.charCodeAt(2)===gn)&&(a=`${t}\\`));let o=a.length,s=0,c=``,l=!1,u=a.charCodeAt(0);if(o===1)P(u)&&(s=1,l=!0);else if(P(u))if(l=!0,P(a.charCodeAt(1))){let e=2,t=e;for(;e<o&&!P(a.charCodeAt(e));)e++;if(e<o&&e!==t){let n=a.slice(t,e);for(t=e;e<o&&P(a.charCodeAt(e));)e++;if(e<o&&e!==t){for(t=e;e<o&&!P(a.charCodeAt(e));)e++;(e===o||e!==t)&&(c=`\\\\${n}\\${a.slice(t,e)}`,s=e)}}}else s=1;else Sn(u)&&a.charCodeAt(1)===_n&&(c=a.slice(0,2),s=2,o>2&&P(a.charCodeAt(2))&&(l=!0,s=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(n=`${a.slice(s)}\\${n}`,r=l,l&&t.length>0)break}return n=Cn(n,!r,`\\`,P),r?`${t}\\${n}`:`${t}${n}`||`.`},normalize(e){bn(e,`path`);let t=e.length;if(t===0)return`.`;let n=0,r,i=!1,a=e.charCodeAt(0);if(t===1)return xn(a)?`\\`:e;if(P(a))if(i=!0,P(e.charCodeAt(1))){let i=2,a=i;for(;i<t&&!P(e.charCodeAt(i));)i++;if(i<t&&i!==a){let o=e.slice(a,i);for(a=i;i<t&&P(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&!P(e.charCodeAt(i));)i++;if(i===t)return`\\\\${o}\\${e.slice(a)}\\`;i!==a&&(r=`\\\\${o}\\${e.slice(a,i)}`,n=i)}}}else n=1;else Sn(a)&&e.charCodeAt(1)===_n&&(r=e.slice(0,2),n=2,t>2&&P(e.charCodeAt(2))&&(i=!0,n=3));let o=n<t?Cn(e.slice(n),!i,`\\`,P):``;return o.length===0&&!i&&(o=`.`),o.length>0&&P(e.charCodeAt(t-1))&&(o+=`\\`),r===void 0?i?`\\${o}`:o:i?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){bn(e,`path`);let t=e.length;if(t===0)return!1;let n=e.charCodeAt(0);return P(n)||t>2&&Sn(n)&&e.charCodeAt(1)===_n&&P(e.charCodeAt(2))},join(...e){if(e.length===0)return`.`;let t,n;for(let r=0;r<e.length;++r){let i=e[r];bn(i,`path`),i.length>0&&(t===void 0?t=n=i:t+=`\\${i}`)}if(t===void 0)return`.`;let r=!0,i=0;if(typeof n==`string`&&P(n.charCodeAt(0))){++i;let e=n.length;e>1&&P(n.charCodeAt(1))&&(++i,e>2&&(P(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<t.length&&P(t.charCodeAt(i));)i++;i>=2&&(t=`\\${t.slice(i)}`)}return Tn.normalize(t)},relative(e,t){if(bn(e,`from`),bn(t,`to`),e===t)return``;let n=Tn.resolve(e),r=Tn.resolve(t);if(n===r||(e=n.toLowerCase(),t=r.toLowerCase(),e===t))return``;let i=0;for(;i<e.length&&e.charCodeAt(i)===gn;)i++;let a=e.length;for(;a-1>i&&e.charCodeAt(a-1)===gn;)a--;let o=a-i,s=0;for(;s<t.length&&t.charCodeAt(s)===gn;)s++;let c=t.length;for(;c-1>s&&t.charCodeAt(c-1)===gn;)c--;let l=c-s,u=o<l?o:l,d=-1,f=0;for(;f<u;f++){let n=e.charCodeAt(i+f);if(n!==t.charCodeAt(s+f))break;n===gn&&(d=f)}if(f!==u){if(d===-1)return r}else{if(l>u){if(t.charCodeAt(s+f)===gn)return r.slice(s+f+1);if(f===2)return r.slice(s+f)}o>u&&(e.charCodeAt(i+f)===gn?d=f:f===2&&(d=3)),d===-1&&(d=0)}let p=``;for(f=i+d+1;f<=a;++f)(f===a||e.charCodeAt(f)===gn)&&(p+=p.length===0?`..`:`\\..`);return s+=d,p.length>0?`${p}${r.slice(s,c)}`:(r.charCodeAt(s)===gn&&++s,r.slice(s,c))},toNamespacedPath(e){if(typeof e!=`string`)return e;if(e.length===0)return``;let t=Tn.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===gn){if(t.charCodeAt(1)===gn){let e=t.charCodeAt(2);if(e!==vn&&e!==mn)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Sn(t.charCodeAt(0))&&t.charCodeAt(1)===_n&&t.charCodeAt(2)===gn)return`\\\\?\\${t}`;return e},dirname(e){bn(e,`path`);let t=e.length;if(t===0)return`.`;let n=-1,r=0,i=e.charCodeAt(0);if(t===1)return P(i)?e:`.`;if(P(i)){if(n=r=1,P(e.charCodeAt(1))){let i=2,a=i;for(;i<t&&!P(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&P(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&!P(e.charCodeAt(i));)i++;if(i===t)return e;i!==a&&(n=r=i+1)}}}}else Sn(i)&&e.charCodeAt(1)===_n&&(n=t>2&&P(e.charCodeAt(2))?3:2,r=n);let a=-1,o=!0;for(let n=t-1;n>=r;--n)if(P(e.charCodeAt(n))){if(!o){a=n;break}}else o=!1;if(a===-1){if(n===-1)return`.`;a=n}return e.slice(0,a)},basename(e,t){t!==void 0&&bn(t,`ext`),bn(e,`path`);let n=0,r=-1,i=!0,a;if(e.length>=2&&Sn(e.charCodeAt(0))&&e.charCodeAt(1)===_n&&(n=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let o=t.length-1,s=-1;for(a=e.length-1;a>=n;--a){let c=e.charCodeAt(a);if(P(c)){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=s))}return n===r?r=s:r===-1&&(r=e.length),e.slice(n,r)}for(a=e.length-1;a>=n;--a)if(P(e.charCodeAt(a))){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?``:e.slice(n,r)},extname(e){bn(e,`path`);let t=0,n=-1,r=0,i=-1,a=!0,o=0;e.length>=2&&e.charCodeAt(1)===_n&&Sn(e.charCodeAt(0))&&(t=r=2);for(let s=e.length-1;s>=t;--s){let t=e.charCodeAt(s);if(P(t)){if(!a){r=s+1;break}continue}i===-1&&(a=!1,i=s+1),t===mn?n===-1?n=s:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?``:e.slice(n,i)},format:wn.bind(null,`\\`),parse(e){bn(e,`path`);let t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;let n=e.length,r=0,i=e.charCodeAt(0);if(n===1)return P(i)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(P(i)){if(r=1,P(e.charCodeAt(1))){let t=2,i=t;for(;t<n&&!P(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&P(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&!P(e.charCodeAt(t));)t++;t===n?r=t:t!==i&&(r=t+1)}}}}else if(Sn(i)&&e.charCodeAt(1)===_n){if(n<=2)return t.root=t.dir=e,t;if(r=2,P(e.charCodeAt(2))){if(n===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let a=-1,o=r,s=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(i=e.charCodeAt(l),P(i)){if(!c){o=l+1;break}continue}s===-1&&(c=!1,s=l+1),i===mn?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}return s!==-1&&(a===-1||u===0||u===1&&a===s-1&&a===o+1?t.base=t.name=e.slice(o,s):(t.name=e.slice(o,a),t.base=e.slice(o,s),t.ext=e.slice(a,s))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:`\\`,delimiter:`;`,win32:null,posix:null},En={resolve(...e){let t=``,n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:sn();bn(i,`path`),i.length!==0&&(t=`${i}/${t}`,n=i.charCodeAt(0)===hn)}return t=Cn(t,!n,`/`,xn),n?`/${t}`:t.length>0?t:`.`},normalize(e){if(bn(e,`path`),e.length===0)return`.`;let t=e.charCodeAt(0)===hn,n=e.charCodeAt(e.length-1)===hn;return e=Cn(e,!t,`/`,xn),e.length===0?t?`/`:n?`./`:`.`:(n&&(e+=`/`),t?`/${e}`:e)},isAbsolute(e){return bn(e,`path`),e.length>0&&e.charCodeAt(0)===hn},join(...e){if(e.length===0)return`.`;let t;for(let n=0;n<e.length;++n){let r=e[n];bn(r,`path`),r.length>0&&(t===void 0?t=r:t+=`/${r}`)}return t===void 0?`.`:En.normalize(t)},relative(e,t){if(bn(e,`from`),bn(t,`to`),e===t||(e=En.resolve(e),t=En.resolve(t),e===t))return``;let n=e.length,r=n-1,i=t.length-1,a=r<i?r:i,o=-1,s=0;for(;s<a;s++){let n=e.charCodeAt(1+s);if(n!==t.charCodeAt(1+s))break;n===hn&&(o=s)}if(s===a)if(i>a){if(t.charCodeAt(1+s)===hn)return t.slice(1+s+1);if(s===0)return t.slice(1+s)}else r>a&&(e.charCodeAt(1+s)===hn?o=s:s===0&&(o=0));let c=``;for(s=1+o+1;s<=n;++s)(s===n||e.charCodeAt(s)===hn)&&(c+=c.length===0?`..`:`/..`);return`${c}${t.slice(1+o)}`},toNamespacedPath(e){return e},dirname(e){if(bn(e,`path`),e.length===0)return`.`;let t=e.charCodeAt(0)===hn,n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===hn){if(!r){n=t;break}}else r=!1;return n===-1?t?`/`:`.`:t&&n===1?`//`:e.slice(0,n)},basename(e,t){t!==void 0&&bn(t,`ext`),bn(e,`path`);let n=0,r=-1,i=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let o=t.length-1,s=-1;for(a=e.length-1;a>=0;--a){let c=e.charCodeAt(a);if(c===hn){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=s))}return n===r?r=s:r===-1&&(r=e.length),e.slice(n,r)}for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===hn){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?``:e.slice(n,r)},extname(e){bn(e,`path`);let t=-1,n=0,r=-1,i=!0,a=0;for(let o=e.length-1;o>=0;--o){let s=e.charCodeAt(o);if(s===hn){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),s===mn?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||r===-1||a===0||a===1&&t===r-1&&t===n+1?``:e.slice(t,r)},format:wn.bind(null,`/`),parse(e){bn(e,`path`);let t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;let n=e.charCodeAt(0)===hn,r;n?(t.root=`/`,r=1):r=0;let i=-1,a=0,o=-1,s=!0,c=e.length-1,l=0;for(;c>=r;--c){let t=e.charCodeAt(c);if(t===hn){if(!s){a=c+1;break}continue}o===-1&&(s=!1,o=c+1),t===mn?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(o!==-1){let r=a===0&&n?1:a;i===-1||l===0||l===1&&i===o-1&&i===a+1?t.base=t.name=e.slice(r,o):(t.name=e.slice(r,i),t.base=e.slice(r,o),t.ext=e.slice(i,o))}return a>0?t.dir=e.slice(0,a-1):n&&(t.dir=`/`),t},sep:`/`,delimiter:`:`,win32:null,posix:null};En.win32=Tn.win32=Tn,En.posix=Tn.posix=En;const Dn=ln===`win32`?Tn.normalize:En.normalize,On=ln===`win32`?Tn.resolve:En.resolve,kn=ln===`win32`?Tn.relative:En.relative,An=ln===`win32`?Tn.dirname:En.dirname,jn=ln===`win32`?Tn.basename:En.basename,Mn=ln===`win32`?Tn.extname:En.extname,Nn=ln===`win32`?Tn.sep:En.sep;var Pn=/^\w[\w\d+.-]*$/,Fn=/^\//,In=/^\/\//;function Ln(e,t){if(!e.scheme&&t)throw Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!Pn.test(e.scheme))throw Error(`[UriError]: Scheme contains illegal characters.`);if(e.path){if(e.authority){if(!Fn.test(e.path))throw Error(`[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character`)}else if(In.test(e.path))throw Error(`[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")`)}}function Rn(e,t){return!e&&!t?`file`:e}function zn(e,t){switch(e){case`https`:case`http`:case`file`:t?t[0]!==Vn&&(t=Vn+t):t=Vn;break}return t}var Bn=``,Vn=`/`,Hn=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,F=class e{constructor(e,t,n,r,i,a=!1){typeof e==`object`?(this.scheme=e.scheme||Bn,this.authority=e.authority||Bn,this.path=e.path||Bn,this.query=e.query||Bn,this.fragment=e.fragment||Bn):(this.scheme=Rn(e,a),this.authority=t||Bn,this.path=zn(this.scheme,n||Bn),this.query=r||Bn,this.fragment=i||Bn,Ln(this,a))}static isUri(t){return t instanceof e?!0:t?typeof t.authority==`string`&&typeof t.fragment==`string`&&typeof t.path==`string`&&typeof t.query==`string`&&typeof t.scheme==`string`&&typeof t.fsPath==`string`&&typeof t.with==`function`&&typeof t.toString==`function`:!1}get fsPath(){return Jn(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:i,fragment:a}=e;return t===void 0?t=this.scheme:t===null&&(t=Bn),n===void 0?n=this.authority:n===null&&(n=Bn),r===void 0?r=this.path:r===null&&(r=Bn),i===void 0?i=this.query:i===null&&(i=Bn),a===void 0?a=this.fragment:a===null&&(a=Bn),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&a===this.fragment?this:new Wn(t,n,r,i,a)}static parse(e,t=!1){let n=Hn.exec(e);return n?new Wn(n[2]||Bn,Qn(n[4]||Bn),Qn(n[5]||Bn),Qn(n[7]||Bn),Qn(n[9]||Bn),t):new Wn(Bn,Bn,Bn,Bn,Bn)}static file(e){let t=Bn;if(f&&(e=e.replace(/\\/g,Vn)),e[0]===Vn&&e[1]===Vn){let n=e.indexOf(Vn,2);n===-1?(t=e.substring(2),e=Vn):(t=e.substring(2,n),e=e.substring(n)||Vn)}return new Wn(`file`,t,e,Bn,Bn)}static from(e){let t=new Wn(e.scheme,e.authority,e.path,e.query,e.fragment);return Ln(t,!0),t}static joinPath(t,...n){if(!t.path)throw Error(`[UriError]: cannot call joinPath on URI without path`);let r;return r=f&&t.scheme===`file`?e.file(Tn.join(Jn(t,!0),...n)).path:En.join(t.path,...n),t.with({path:r})}toString(e=!1){return Yn(this,e)}toJSON(){return this}static revive(t){if(t){if(t instanceof e)return t;{let e=new Wn(t);return e._formatted=t.external,e._fsPath=t._sep===Un?t.fsPath:null,e}}else return t}},Un=f?1:void 0,Wn=class extends F{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||=Jn(this,!1),this._fsPath}toString(e=!1){return e?Yn(this,!0):(this._formatted||=Yn(this,!1),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Un),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Gn={58:`%3A`,47:`%2F`,63:`%3F`,35:`%23`,91:`%5B`,93:`%5D`,64:`%40`,33:`%21`,36:`%24`,38:`%26`,39:`%27`,40:`%28`,41:`%29`,42:`%2A`,43:`%2B`,44:`%2C`,59:`%3B`,61:`%3D`,32:`%20`};function Kn(e,t){let n,r=-1;for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||t&&a===47)r!==-1&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n!==void 0&&(n+=e.charAt(i));else{n===void 0&&(n=e.substr(0,i));let t=Gn[a];t===void 0?r===-1&&(r=i):(r!==-1&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=t)}}return r!==-1&&(n+=encodeURIComponent(e.substring(r))),n===void 0?e:n}function qn(e){let t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r===35||r===63?(t===void 0&&(t=e.substr(0,n)),t+=Gn[r]):t!==void 0&&(t+=e[n])}return t===void 0?e:t}function Jn(e,t){let n;return n=e.authority&&e.path.length>1&&e.scheme===`file`?`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,f&&(n=n.replace(/\//g,`\\`)),n}function Yn(e,t){let n=t?qn:Kn,r=``,{scheme:i,authority:a,path:o,query:s,fragment:c}=e;if(i&&(r+=i,r+=`:`),(a||i===`file`)&&(r+=Vn,r+=Vn),a){let e=a.indexOf(`@`);if(e!==-1){let t=a.substr(0,e);a=a.substr(e+1),e=t.indexOf(`:`),e===-1?r+=n(t,!1):(r+=n(t.substr(0,e),!1),r+=`:`,r+=n(t.substr(e+1),!1)),r+=`@`}a=a.toLowerCase(),e=a.indexOf(`:`),e===-1?r+=n(a,!1):(r+=n(a.substr(0,e),!1),r+=a.substr(e))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){let e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){let e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}r+=n(o,!0)}return s&&(r+=`?`,r+=n(s,!1)),c&&(r+=`#`,r+=t?c:Kn(c,!1)),r}function Xn(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Xn(e.substr(3)):e}}var Zn=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Qn(e){return e.match(Zn)?e.replace(Zn,e=>Xn(e)):e}var I=class e{constructor(e,t){this.lineNumber=e,this.column=t}with(t=this.lineNumber,n=this.column){return t===this.lineNumber&&n===this.column?this:new e(t,n)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(t){return e.equals(this,t)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(t){return e.isBefore(this,t)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(t){return e.isBeforeOrEqual(this,t)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,r=t.lineNumber|0;return n===r?(e.column|0)-(t.column|0):n-r}clone(){return new e(this.lineNumber,this.column)}toString(){return`(`+this.lineNumber+`,`+this.column+`)`}static lift(t){return new e(t.lineNumber,t.column)}static isIPosition(e){return e&&typeof e.lineNumber==`number`&&typeof e.column==`number`}},L=class e{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return e.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(t){return e.containsPosition(this,t)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(t){return e.containsRange(this,t)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(t){return e.strictContainsRange(this,t)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(t){return e.plusRange(this,t)}static plusRange(t,n){let r,i,a,o;return n.startLineNumber<t.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===t.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,t.startColumn)):(r=t.startLineNumber,i=t.startColumn),n.endLineNumber>t.endLineNumber?(a=n.endLineNumber,o=n.endColumn):n.endLineNumber===t.endLineNumber?(a=n.endLineNumber,o=Math.max(n.endColumn,t.endColumn)):(a=t.endLineNumber,o=t.endColumn),new e(r,i,a,o)}intersectRanges(t){return e.intersectRanges(this,t)}static intersectRanges(t,n){let r=t.startLineNumber,i=t.startColumn,a=t.endLineNumber,o=t.endColumn,s=n.startLineNumber,c=n.startColumn,l=n.endLineNumber,u=n.endColumn;return r<s?(r=s,i=c):r===s&&(i=Math.max(i,c)),a>l?(a=l,o=u):a===l&&(o=Math.min(o,u)),r>a||r===a&&i>o?null:new e(r,i,a,o)}equalsRange(t){return e.equalsRange(this,t)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return e.getEndPosition(this)}static getEndPosition(e){return new I(e.endLineNumber,e.endColumn)}getStartPosition(){return e.getStartPosition(this)}static getStartPosition(e){return new I(e.startLineNumber,e.startColumn)}toString(){return`[`+this.startLineNumber+`,`+this.startColumn+` -> `+this.endLineNumber+`,`+this.endColumn+`]`}setEndPosition(t,n){return new e(this.startLineNumber,this.startColumn,t,n)}setStartPosition(t,n){return new e(t,n,this.endLineNumber,this.endColumn)}collapseToStart(){return e.collapseToStart(this)}static collapseToStart(t){return new e(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}static fromPositions(t,n=t){return new e(t.lineNumber,t.column,n.lineNumber,n.column)}static lift(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber==`number`&&typeof e.startColumn==`number`&&typeof e.endLineNumber==`number`&&typeof e.endColumn==`number`}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let n=e.startLineNumber|0,r=t.startLineNumber|0;if(n===r){let n=e.startColumn|0,r=t.startColumn|0;if(n===r){let n=e.endLineNumber|0,r=t.endLineNumber|0;return n===r?(e.endColumn|0)-(t.endColumn|0):n-r}return n-r}return n-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},$n=class e extends L{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return`[`+this.selectionStartLineNumber+`,`+this.selectionStartColumn+` -> `+this.positionLineNumber+`,`+this.positionColumn+`]`}equalsSelection(t){return e.selectionsEqual(this,t)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,n){return this.getDirection()===0?new e(this.startLineNumber,this.startColumn,t,n):new e(t,n,this.startLineNumber,this.startColumn)}getPosition(){return new I(this.positionLineNumber,this.positionColumn)}setStartPosition(t,n){return this.getDirection()===0?new e(t,n,this.endLineNumber,this.endColumn):new e(this.endLineNumber,this.endColumn,t,n)}static fromPositions(t,n=t){return new e(t.lineNumber,t.column,n.lineNumber,n.column)}static liftSelection(t){return new e(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber==`number`&&typeof e.selectionStartColumn==`number`&&typeof e.positionLineNumber==`number`&&typeof e.positionColumn==`number`}static createWithDirection(t,n,r,i,a){return a===0?new e(t,n,r,i):new e(r,i,t,n)}},er=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=n}toString(){return`(`+this.offset+`, `+this.type+`)`}},tr=class{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}},nr=class{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}},rr;(function(e){e[e.Unknown=0]=`Unknown`,e[e.Disabled=1]=`Disabled`,e[e.Enabled=2]=`Enabled`})(rr||={});var ir;(function(e){e[e.KeepWhitespace=1]=`KeepWhitespace`,e[e.InsertAsSnippet=4]=`InsertAsSnippet`})(ir||={});var ar;(function(e){e[e.Method=0]=`Method`,e[e.Function=1]=`Function`,e[e.Constructor=2]=`Constructor`,e[e.Field=3]=`Field`,e[e.Variable=4]=`Variable`,e[e.Class=5]=`Class`,e[e.Struct=6]=`Struct`,e[e.Interface=7]=`Interface`,e[e.Module=8]=`Module`,e[e.Property=9]=`Property`,e[e.Event=10]=`Event`,e[e.Operator=11]=`Operator`,e[e.Unit=12]=`Unit`,e[e.Value=13]=`Value`,e[e.Constant=14]=`Constant`,e[e.Enum=15]=`Enum`,e[e.EnumMember=16]=`EnumMember`,e[e.Keyword=17]=`Keyword`,e[e.Text=18]=`Text`,e[e.Color=19]=`Color`,e[e.File=20]=`File`,e[e.Reference=21]=`Reference`,e[e.Customcolor=22]=`Customcolor`,e[e.Folder=23]=`Folder`,e[e.TypeParameter=24]=`TypeParameter`,e[e.User=25]=`User`,e[e.Issue=26]=`Issue`,e[e.Snippet=27]=`Snippet`})(ar||={});var or;(function(e){e[e.Deprecated=1]=`Deprecated`})(or||={});var sr;(function(e){e[e.Invoke=0]=`Invoke`,e[e.TriggerCharacter=1]=`TriggerCharacter`,e[e.TriggerForIncompleteCompletions=2]=`TriggerForIncompleteCompletions`})(sr||={});var cr;(function(e){e[e.EXACT=0]=`EXACT`,e[e.ABOVE=1]=`ABOVE`,e[e.BELOW=2]=`BELOW`})(cr||={});var lr;(function(e){e[e.NotSet=0]=`NotSet`,e[e.ContentFlush=1]=`ContentFlush`,e[e.RecoverFromMarkers=2]=`RecoverFromMarkers`,e[e.Explicit=3]=`Explicit`,e[e.Paste=4]=`Paste`,e[e.Undo=5]=`Undo`,e[e.Redo=6]=`Redo`})(lr||={});var ur;(function(e){e[e.LF=1]=`LF`,e[e.CRLF=2]=`CRLF`})(ur||={});var dr;(function(e){e[e.Text=0]=`Text`,e[e.Read=1]=`Read`,e[e.Write=2]=`Write`})(dr||={});var fr;(function(e){e[e.None=0]=`None`,e[e.Keep=1]=`Keep`,e[e.Brackets=2]=`Brackets`,e[e.Advanced=3]=`Advanced`,e[e.Full=4]=`Full`})(fr||={});var pr;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]=`acceptSuggestionOnCommitCharacter`,e[e.acceptSuggestionOnEnter=1]=`acceptSuggestionOnEnter`,e[e.accessibilitySupport=2]=`accessibilitySupport`,e[e.accessibilityPageSize=3]=`accessibilityPageSize`,e[e.ariaLabel=4]=`ariaLabel`,e[e.autoClosingBrackets=5]=`autoClosingBrackets`,e[e.autoClosingDelete=6]=`autoClosingDelete`,e[e.autoClosingOvertype=7]=`autoClosingOvertype`,e[e.autoClosingQuotes=8]=`autoClosingQuotes`,e[e.autoIndent=9]=`autoIndent`,e[e.automaticLayout=10]=`automaticLayout`,e[e.autoSurround=11]=`autoSurround`,e[e.bracketPairColorization=12]=`bracketPairColorization`,e[e.guides=13]=`guides`,e[e.codeLens=14]=`codeLens`,e[e.codeLensFontFamily=15]=`codeLensFontFamily`,e[e.codeLensFontSize=16]=`codeLensFontSize`,e[e.colorDecorators=17]=`colorDecorators`,e[e.columnSelection=18]=`columnSelection`,e[e.comments=19]=`comments`,e[e.contextmenu=20]=`contextmenu`,e[e.copyWithSyntaxHighlighting=21]=`copyWithSyntaxHighlighting`,e[e.cursorBlinking=22]=`cursorBlinking`,e[e.cursorSmoothCaretAnimation=23]=`cursorSmoothCaretAnimation`,e[e.cursorStyle=24]=`cursorStyle`,e[e.cursorSurroundingLines=25]=`cursorSurroundingLines`,e[e.cursorSurroundingLinesStyle=26]=`cursorSurroundingLinesStyle`,e[e.cursorWidth=27]=`cursorWidth`,e[e.disableLayerHinting=28]=`disableLayerHinting`,e[e.disableMonospaceOptimizations=29]=`disableMonospaceOptimizations`,e[e.domReadOnly=30]=`domReadOnly`,e[e.dragAndDrop=31]=`dragAndDrop`,e[e.emptySelectionClipboard=32]=`emptySelectionClipboard`,e[e.extraEditorClassName=33]=`extraEditorClassName`,e[e.fastScrollSensitivity=34]=`fastScrollSensitivity`,e[e.find=35]=`find`,e[e.fixedOverflowWidgets=36]=`fixedOverflowWidgets`,e[e.folding=37]=`folding`,e[e.foldingStrategy=38]=`foldingStrategy`,e[e.foldingHighlight=39]=`foldingHighlight`,e[e.foldingImportsByDefault=40]=`foldingImportsByDefault`,e[e.unfoldOnClickAfterEndOfLine=41]=`unfoldOnClickAfterEndOfLine`,e[e.fontFamily=42]=`fontFamily`,e[e.fontInfo=43]=`fontInfo`,e[e.fontLigatures=44]=`fontLigatures`,e[e.fontSize=45]=`fontSize`,e[e.fontWeight=46]=`fontWeight`,e[e.formatOnPaste=47]=`formatOnPaste`,e[e.formatOnType=48]=`formatOnType`,e[e.glyphMargin=49]=`glyphMargin`,e[e.gotoLocation=50]=`gotoLocation`,e[e.hideCursorInOverviewRuler=51]=`hideCursorInOverviewRuler`,e[e.hover=52]=`hover`,e[e.inDiffEditor=53]=`inDiffEditor`,e[e.inlineSuggest=54]=`inlineSuggest`,e[e.letterSpacing=55]=`letterSpacing`,e[e.lightbulb=56]=`lightbulb`,e[e.lineDecorationsWidth=57]=`lineDecorationsWidth`,e[e.lineHeight=58]=`lineHeight`,e[e.lineNumbers=59]=`lineNumbers`,e[e.lineNumbersMinChars=60]=`lineNumbersMinChars`,e[e.linkedEditing=61]=`linkedEditing`,e[e.links=62]=`links`,e[e.matchBrackets=63]=`matchBrackets`,e[e.minimap=64]=`minimap`,e[e.mouseStyle=65]=`mouseStyle`,e[e.mouseWheelScrollSensitivity=66]=`mouseWheelScrollSensitivity`,e[e.mouseWheelZoom=67]=`mouseWheelZoom`,e[e.multiCursorMergeOverlapping=68]=`multiCursorMergeOverlapping`,e[e.multiCursorModifier=69]=`multiCursorModifier`,e[e.multiCursorPaste=70]=`multiCursorPaste`,e[e.occurrencesHighlight=71]=`occurrencesHighlight`,e[e.overviewRulerBorder=72]=`overviewRulerBorder`,e[e.overviewRulerLanes=73]=`overviewRulerLanes`,e[e.padding=74]=`padding`,e[e.parameterHints=75]=`parameterHints`,e[e.peekWidgetDefaultFocus=76]=`peekWidgetDefaultFocus`,e[e.definitionLinkOpensInPeek=77]=`definitionLinkOpensInPeek`,e[e.quickSuggestions=78]=`quickSuggestions`,e[e.quickSuggestionsDelay=79]=`quickSuggestionsDelay`,e[e.readOnly=80]=`readOnly`,e[e.renameOnType=81]=`renameOnType`,e[e.renderControlCharacters=82]=`renderControlCharacters`,e[e.renderFinalNewline=83]=`renderFinalNewline`,e[e.renderLineHighlight=84]=`renderLineHighlight`,e[e.renderLineHighlightOnlyWhenFocus=85]=`renderLineHighlightOnlyWhenFocus`,e[e.renderValidationDecorations=86]=`renderValidationDecorations`,e[e.renderWhitespace=87]=`renderWhitespace`,e[e.revealHorizontalRightPadding=88]=`revealHorizontalRightPadding`,e[e.roundedSelection=89]=`roundedSelection`,e[e.rulers=90]=`rulers`,e[e.scrollbar=91]=`scrollbar`,e[e.scrollBeyondLastColumn=92]=`scrollBeyondLastColumn`,e[e.scrollBeyondLastLine=93]=`scrollBeyondLastLine`,e[e.scrollPredominantAxis=94]=`scrollPredominantAxis`,e[e.selectionClipboard=95]=`selectionClipboard`,e[e.selectionHighlight=96]=`selectionHighlight`,e[e.selectOnLineNumbers=97]=`selectOnLineNumbers`,e[e.showFoldingControls=98]=`showFoldingControls`,e[e.showUnused=99]=`showUnused`,e[e.snippetSuggestions=100]=`snippetSuggestions`,e[e.smartSelect=101]=`smartSelect`,e[e.smoothScrolling=102]=`smoothScrolling`,e[e.stickyTabStops=103]=`stickyTabStops`,e[e.stopRenderingLineAfter=104]=`stopRenderingLineAfter`,e[e.suggest=105]=`suggest`,e[e.suggestFontSize=106]=`suggestFontSize`,e[e.suggestLineHeight=107]=`suggestLineHeight`,e[e.suggestOnTriggerCharacters=108]=`suggestOnTriggerCharacters`,e[e.suggestSelection=109]=`suggestSelection`,e[e.tabCompletion=110]=`tabCompletion`,e[e.tabIndex=111]=`tabIndex`,e[e.unusualLineTerminators=112]=`unusualLineTerminators`,e[e.useShadowDOM=113]=`useShadowDOM`,e[e.useTabStops=114]=`useTabStops`,e[e.wordSeparators=115]=`wordSeparators`,e[e.wordWrap=116]=`wordWrap`,e[e.wordWrapBreakAfterCharacters=117]=`wordWrapBreakAfterCharacters`,e[e.wordWrapBreakBeforeCharacters=118]=`wordWrapBreakBeforeCharacters`,e[e.wordWrapColumn=119]=`wordWrapColumn`,e[e.wordWrapOverride1=120]=`wordWrapOverride1`,e[e.wordWrapOverride2=121]=`wordWrapOverride2`,e[e.wrappingIndent=122]=`wrappingIndent`,e[e.wrappingStrategy=123]=`wrappingStrategy`,e[e.showDeprecated=124]=`showDeprecated`,e[e.inlayHints=125]=`inlayHints`,e[e.editorClassName=126]=`editorClassName`,e[e.pixelRatio=127]=`pixelRatio`,e[e.tabFocusMode=128]=`tabFocusMode`,e[e.layoutInfo=129]=`layoutInfo`,e[e.wrappingInfo=130]=`wrappingInfo`})(pr||={});var mr;(function(e){e[e.TextDefined=0]=`TextDefined`,e[e.LF=1]=`LF`,e[e.CRLF=2]=`CRLF`})(mr||={});var hr;(function(e){e[e.LF=0]=`LF`,e[e.CRLF=1]=`CRLF`})(hr||={});var gr;(function(e){e[e.None=0]=`None`,e[e.Indent=1]=`Indent`,e[e.IndentOutdent=2]=`IndentOutdent`,e[e.Outdent=3]=`Outdent`})(gr||={});var _r;(function(e){e[e.Other=0]=`Other`,e[e.Type=1]=`Type`,e[e.Parameter=2]=`Parameter`})(_r||={});var vr;(function(e){e[e.Automatic=0]=`Automatic`,e[e.Explicit=1]=`Explicit`})(vr||={});var yr;(function(e){e[e.DependsOnKbLayout=-1]=`DependsOnKbLayout`,e[e.Unknown=0]=`Unknown`,e[e.Backspace=1]=`Backspace`,e[e.Tab=2]=`Tab`,e[e.Enter=3]=`Enter`,e[e.Shift=4]=`Shift`,e[e.Ctrl=5]=`Ctrl`,e[e.Alt=6]=`Alt`,e[e.PauseBreak=7]=`PauseBreak`,e[e.CapsLock=8]=`CapsLock`,e[e.Escape=9]=`Escape`,e[e.Space=10]=`Space`,e[e.PageUp=11]=`PageUp`,e[e.PageDown=12]=`PageDown`,e[e.End=13]=`End`,e[e.Home=14]=`Home`,e[e.LeftArrow=15]=`LeftArrow`,e[e.UpArrow=16]=`UpArrow`,e[e.RightArrow=17]=`RightArrow`,e[e.DownArrow=18]=`DownArrow`,e[e.Insert=19]=`Insert`,e[e.Delete=20]=`Delete`,e[e.Digit0=21]=`Digit0`,e[e.Digit1=22]=`Digit1`,e[e.Digit2=23]=`Digit2`,e[e.Digit3=24]=`Digit3`,e[e.Digit4=25]=`Digit4`,e[e.Digit5=26]=`Digit5`,e[e.Digit6=27]=`Digit6`,e[e.Digit7=28]=`Digit7`,e[e.Digit8=29]=`Digit8`,e[e.Digit9=30]=`Digit9`,e[e.KeyA=31]=`KeyA`,e[e.KeyB=32]=`KeyB`,e[e.KeyC=33]=`KeyC`,e[e.KeyD=34]=`KeyD`,e[e.KeyE=35]=`KeyE`,e[e.KeyF=36]=`KeyF`,e[e.KeyG=37]=`KeyG`,e[e.KeyH=38]=`KeyH`,e[e.KeyI=39]=`KeyI`,e[e.KeyJ=40]=`KeyJ`,e[e.KeyK=41]=`KeyK`,e[e.KeyL=42]=`KeyL`,e[e.KeyM=43]=`KeyM`,e[e.KeyN=44]=`KeyN`,e[e.KeyO=45]=`KeyO`,e[e.KeyP=46]=`KeyP`,e[e.KeyQ=47]=`KeyQ`,e[e.KeyR=48]=`KeyR`,e[e.KeyS=49]=`KeyS`,e[e.KeyT=50]=`KeyT`,e[e.KeyU=51]=`KeyU`,e[e.KeyV=52]=`KeyV`,e[e.KeyW=53]=`KeyW`,e[e.KeyX=54]=`KeyX`,e[e.KeyY=55]=`KeyY`,e[e.KeyZ=56]=`KeyZ`,e[e.Meta=57]=`Meta`,e[e.ContextMenu=58]=`ContextMenu`,e[e.F1=59]=`F1`,e[e.F2=60]=`F2`,e[e.F3=61]=`F3`,e[e.F4=62]=`F4`,e[e.F5=63]=`F5`,e[e.F6=64]=`F6`,e[e.F7=65]=`F7`,e[e.F8=66]=`F8`,e[e.F9=67]=`F9`,e[e.F10=68]=`F10`,e[e.F11=69]=`F11`,e[e.F12=70]=`F12`,e[e.F13=71]=`F13`,e[e.F14=72]=`F14`,e[e.F15=73]=`F15`,e[e.F16=74]=`F16`,e[e.F17=75]=`F17`,e[e.F18=76]=`F18`,e[e.F19=77]=`F19`,e[e.NumLock=78]=`NumLock`,e[e.ScrollLock=79]=`ScrollLock`,e[e.Semicolon=80]=`Semicolon`,e[e.Equal=81]=`Equal`,e[e.Comma=82]=`Comma`,e[e.Minus=83]=`Minus`,e[e.Period=84]=`Period`,e[e.Slash=85]=`Slash`,e[e.Backquote=86]=`Backquote`,e[e.BracketLeft=87]=`BracketLeft`,e[e.Backslash=88]=`Backslash`,e[e.BracketRight=89]=`BracketRight`,e[e.Quote=90]=`Quote`,e[e.OEM_8=91]=`OEM_8`,e[e.IntlBackslash=92]=`IntlBackslash`,e[e.Numpad0=93]=`Numpad0`,e[e.Numpad1=94]=`Numpad1`,e[e.Numpad2=95]=`Numpad2`,e[e.Numpad3=96]=`Numpad3`,e[e.Numpad4=97]=`Numpad4`,e[e.Numpad5=98]=`Numpad5`,e[e.Numpad6=99]=`Numpad6`,e[e.Numpad7=100]=`Numpad7`,e[e.Numpad8=101]=`Numpad8`,e[e.Numpad9=102]=`Numpad9`,e[e.NumpadMultiply=103]=`NumpadMultiply`,e[e.NumpadAdd=104]=`NumpadAdd`,e[e.NUMPAD_SEPARATOR=105]=`NUMPAD_SEPARATOR`,e[e.NumpadSubtract=106]=`NumpadSubtract`,e[e.NumpadDecimal=107]=`NumpadDecimal`,e[e.NumpadDivide=108]=`NumpadDivide`,e[e.KEY_IN_COMPOSITION=109]=`KEY_IN_COMPOSITION`,e[e.ABNT_C1=110]=`ABNT_C1`,e[e.ABNT_C2=111]=`ABNT_C2`,e[e.AudioVolumeMute=112]=`AudioVolumeMute`,e[e.AudioVolumeUp=113]=`AudioVolumeUp`,e[e.AudioVolumeDown=114]=`AudioVolumeDown`,e[e.BrowserSearch=115]=`BrowserSearch`,e[e.BrowserHome=116]=`BrowserHome`,e[e.BrowserBack=117]=`BrowserBack`,e[e.BrowserForward=118]=`BrowserForward`,e[e.MediaTrackNext=119]=`MediaTrackNext`,e[e.MediaTrackPrevious=120]=`MediaTrackPrevious`,e[e.MediaStop=121]=`MediaStop`,e[e.MediaPlayPause=122]=`MediaPlayPause`,e[e.LaunchMediaPlayer=123]=`LaunchMediaPlayer`,e[e.LaunchMail=124]=`LaunchMail`,e[e.LaunchApp2=125]=`LaunchApp2`,e[e.MAX_VALUE=126]=`MAX_VALUE`})(yr||={});var br;(function(e){e[e.Hint=1]=`Hint`,e[e.Info=2]=`Info`,e[e.Warning=4]=`Warning`,e[e.Error=8]=`Error`})(br||={});var xr;(function(e){e[e.Unnecessary=1]=`Unnecessary`,e[e.Deprecated=2]=`Deprecated`})(xr||={});var Sr;(function(e){e[e.Inline=1]=`Inline`,e[e.Gutter=2]=`Gutter`})(Sr||={});var Cr;(function(e){e[e.UNKNOWN=0]=`UNKNOWN`,e[e.TEXTAREA=1]=`TEXTAREA`,e[e.GUTTER_GLYPH_MARGIN=2]=`GUTTER_GLYPH_MARGIN`,e[e.GUTTER_LINE_NUMBERS=3]=`GUTTER_LINE_NUMBERS`,e[e.GUTTER_LINE_DECORATIONS=4]=`GUTTER_LINE_DECORATIONS`,e[e.GUTTER_VIEW_ZONE=5]=`GUTTER_VIEW_ZONE`,e[e.CONTENT_TEXT=6]=`CONTENT_TEXT`,e[e.CONTENT_EMPTY=7]=`CONTENT_EMPTY`,e[e.CONTENT_VIEW_ZONE=8]=`CONTENT_VIEW_ZONE`,e[e.CONTENT_WIDGET=9]=`CONTENT_WIDGET`,e[e.OVERVIEW_RULER=10]=`OVERVIEW_RULER`,e[e.SCROLLBAR=11]=`SCROLLBAR`,e[e.OVERLAY_WIDGET=12]=`OVERLAY_WIDGET`,e[e.OUTSIDE_EDITOR=13]=`OUTSIDE_EDITOR`})(Cr||={});var wr;(function(e){e[e.TOP_RIGHT_CORNER=0]=`TOP_RIGHT_CORNER`,e[e.BOTTOM_RIGHT_CORNER=1]=`BOTTOM_RIGHT_CORNER`,e[e.TOP_CENTER=2]=`TOP_CENTER`})(wr||={});var Tr;(function(e){e[e.Left=1]=`Left`,e[e.Center=2]=`Center`,e[e.Right=4]=`Right`,e[e.Full=7]=`Full`})(Tr||={});var Er;(function(e){e[e.Off=0]=`Off`,e[e.On=1]=`On`,e[e.Relative=2]=`Relative`,e[e.Interval=3]=`Interval`,e[e.Custom=4]=`Custom`})(Er||={});var Dr;(function(e){e[e.None=0]=`None`,e[e.Text=1]=`Text`,e[e.Blocks=2]=`Blocks`})(Dr||={});var Or;(function(e){e[e.Smooth=0]=`Smooth`,e[e.Immediate=1]=`Immediate`})(Or||={});var kr;(function(e){e[e.Auto=1]=`Auto`,e[e.Hidden=2]=`Hidden`,e[e.Visible=3]=`Visible`})(kr||={});var Ar;(function(e){e[e.LTR=0]=`LTR`,e[e.RTL=1]=`RTL`})(Ar||={});var jr;(function(e){e[e.Invoke=1]=`Invoke`,e[e.TriggerCharacter=2]=`TriggerCharacter`,e[e.ContentChange=3]=`ContentChange`})(jr||={});var Mr;(function(e){e[e.File=0]=`File`,e[e.Module=1]=`Module`,e[e.Namespace=2]=`Namespace`,e[e.Package=3]=`Package`,e[e.Class=4]=`Class`,e[e.Method=5]=`Method`,e[e.Property=6]=`Property`,e[e.Field=7]=`Field`,e[e.Constructor=8]=`Constructor`,e[e.Enum=9]=`Enum`,e[e.Interface=10]=`Interface`,e[e.Function=11]=`Function`,e[e.Variable=12]=`Variable`,e[e.Constant=13]=`Constant`,e[e.String=14]=`String`,e[e.Number=15]=`Number`,e[e.Boolean=16]=`Boolean`,e[e.Array=17]=`Array`,e[e.Object=18]=`Object`,e[e.Key=19]=`Key`,e[e.Null=20]=`Null`,e[e.EnumMember=21]=`EnumMember`,e[e.Struct=22]=`Struct`,e[e.Event=23]=`Event`,e[e.Operator=24]=`Operator`,e[e.TypeParameter=25]=`TypeParameter`})(Mr||={});var Nr;(function(e){e[e.Deprecated=1]=`Deprecated`})(Nr||={});var Pr;(function(e){e[e.Hidden=0]=`Hidden`,e[e.Blink=1]=`Blink`,e[e.Smooth=2]=`Smooth`,e[e.Phase=3]=`Phase`,e[e.Expand=4]=`Expand`,e[e.Solid=5]=`Solid`})(Pr||={});var Fr;(function(e){e[e.Line=1]=`Line`,e[e.Block=2]=`Block`,e[e.Underline=3]=`Underline`,e[e.LineThin=4]=`LineThin`,e[e.BlockOutline=5]=`BlockOutline`,e[e.UnderlineThin=6]=`UnderlineThin`})(Fr||={});var Ir;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]=`AlwaysGrowsWhenTypingAtEdges`,e[e.NeverGrowsWhenTypingAtEdges=1]=`NeverGrowsWhenTypingAtEdges`,e[e.GrowsOnlyWhenTypingBefore=2]=`GrowsOnlyWhenTypingBefore`,e[e.GrowsOnlyWhenTypingAfter=3]=`GrowsOnlyWhenTypingAfter`})(Ir||={});var Lr;(function(e){e[e.None=0]=`None`,e[e.Same=1]=`Same`,e[e.Indent=2]=`Indent`,e[e.DeepIndent=3]=`DeepIndent`})(Lr||={});var Rr=class{static chord(e,t){return an(e,t)}};Rr.CtrlCmd=2048,Rr.Shift=1024,Rr.Alt=512,Rr.WinCtrl=256;function zr(){return{editor:void 0,languages:void 0,CancellationTokenSource:Gt,Emitter:N,KeyCode:yr,KeyMod:Rr,Position:I,Range:L,Selection:$n,SelectionDirection:Ar,MarkerSeverity:br,MarkerTag:xr,Uri:F,Token:er}}var Br;(function(e){e.serviceIds=new Map,e.DI_TARGET=`$di$target`,e.DI_DEPENDENCIES=`$di$dependencies`;function t(t){return t[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Br||={});const Vr=Ur(`instantiationService`);function Hr(e,t,n,r){t[Br.DI_TARGET]===t?t[Br.DI_DEPENDENCIES].push({id:e,index:n,optional:r}):(t[Br.DI_DEPENDENCIES]=[{id:e,index:n,optional:r}],t[Br.DI_TARGET]=t)}function Ur(e){if(Br.serviceIds.has(e))return Br.serviceIds.get(e);let t=function(e,n,r){if(arguments.length!==3)throw Error(`@IServiceName-decorator can only be used to decorate a parameter`);Hr(t,e,r,!1)};return t.toString=()=>e,Br.serviceIds.set(e,t),t}function Wr(e){return function(t,n,r){if(arguments.length!==3)throw Error(`@optional-decorator can only be used to decorate a parameter`);Hr(e,t,r,!0)}}const Gr=Ur(`codeEditorService`);var Kr=class{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new N,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement(`canvas`).getContext(`2d`);return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}};Kr.INSTANCE=new Kr;function qr(){return Kr.INSTANCE.getZoomLevel()}function Jr(){return Kr.INSTANCE.getTimeSinceLastZoomLevelChanged()}function Yr(e){return Kr.INSTANCE.onDidChangeZoomLevel(e)}function Xr(){return Kr.INSTANCE.getZoomFactor()}function Zr(){return Kr.INSTANCE.getPixelRatio()}var Qr=navigator.userAgent;const $r=Qr.indexOf(`Firefox`)>=0,ei=Qr.indexOf(`AppleWebKit`)>=0,ti=Qr.indexOf(`Chrome`)>=0,ni=!ti&&Qr.indexOf(`Safari`)>=0,ri=!ti&&!ni&&ei,ii=Qr.indexOf(`Android`)>=0,ai=window.matchMedia&&window.matchMedia(`(display-mode: standalone)`).matches,oi={clipboard:{writeText:h||document.queryCommandSupported&&document.queryCommandSupported(`copy`)||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:h||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>h||ai?0:navigator.keyboard||ni?1:2)(),touch:`ontouchstart`in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&(`ontouchstart`in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function si(e,t){if(e===0)return null;let n=(e&65535)>>>0,r=(e&4294901760)>>>16;return r===0?new ui([ci(n,t)]):new ui([ci(n,t),ci(r,t)])}function ci(e,t){let n=!!(e&2048),r=!!(e&256);return new li(t===2?r:n,!!(e&1024),!!(e&512),t===2?n:r,e&255)}var li=class{constructor(e,t,n,r,i){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=i}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new ui([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},ui=class{constructor(e){if(e.length===0)throw mt(`parts`);this.parts=e}},di=class{constructor(e,t,n,r,i,a){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=i,this.keyAriaLabel=a}},fi=class{};function pi(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return rn.fromString(t)}let t=e.keyCode;if(t===3)return 7;if($r){if(t===59)return 80;if(t===107)return 81;if(t===109)return 83;if(p&&t===224)return 57}else if(ei&&(t===91||p&&t===93||!p&&t===92))return 57;return Xt[t]||0}var mi=p?256:2048,hi=512,gi=1024,_i=p?2048:256,vi=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=pi(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=mi),this.altKey&&(t|=hi),this.shiftKey&&(t|=gi),this.metaKey&&(t|=_i),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new li(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},yi=!1,bi=null;function xi(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,n=e.parent.location;if(t.origin!==`null`&&n.origin!==`null`&&t.origin!==n.origin)return yi=!0,null}catch{return yi=!0,null}return e.parent}var Si=class{static getSameOriginWindowChain(){if(!bi){bi=[];let e=window,t;do t=xi(e),t?bi.push({window:e,iframeElement:e.frameElement||null}):bi.push({window:e,iframeElement:null}),e=t;while(e)}return bi.slice(0)}static hasDifferentOriginAncestor(){return bi||this.getSameOriginWindowChain(),yi}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0,i=this.getSameOriginWindowChain();for(let e of i){if(n+=e.window.scrollY,r+=e.window.scrollX,e.window===t||!e.iframeElement)break;let i=e.iframeElement.getBoundingClientRect();n+=i.top,r+=i.left}return{top:n,left:r}}},Ci=class{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type===`dblclick`&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX==`number`?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=Si.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},wi=class{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let t=e,n=e;if(t.wheelDeltaY!==void 0)this.deltaY=t.wheelDeltaY/120;else if(n.VERTICAL_AXIS!==void 0&&n.axis===n.VERTICAL_AXIS)this.deltaY=-n.detail/3;else if(e.type===`wheel`){let t=e;t.deltaMode===t.DOM_DELTA_LINE?$r&&!p?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(t.wheelDeltaX!==void 0)ni&&f?this.deltaX=-(t.wheelDeltaX/120):this.deltaX=t.wheelDeltaX/120;else if(n.HORIZONTAL_AXIS!==void 0&&n.axis===n.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type===`wheel`){let t=e;t.deltaMode===t.DOM_DELTA_LINE?$r&&!p?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}},Ti=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function Ei(e){return!!e&&typeof e.then==`function`}function Di(e){let t=new Gt,n=e(t.token),r=new Promise((e,r)=>{let i=t.token.onCancellationRequested(()=>{i.dispose(),t.dispose(),r(pt())});Promise.resolve(n).then(n=>{i.dispose(),t.dispose(),e(n)},e=>{i.dispose(),t.dispose(),r(e)})});return new class{cancel(){t.cancel()}then(e,t){return r.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return r.finally(e)}}}function Oi(e,t,n){return Promise.race([e,new Promise(e=>t.onCancellationRequested(()=>e(n)))])}var ki=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let e=()=>{this.queuedPromise=null;let e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}},Ai=class{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let e=this.task;return this.task=null,e()}}),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&=(this.doReject&&this.doReject(pt()),null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}},ji=class{constructor(e){this.delayer=new Ai(e),this.throttler=new ki}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}};function Mi(e,t){return t?new Promise((n,r)=>{let i=setTimeout(()=>{a.dispose(),n()},e),a=t.onCancellationRequested(()=>{clearTimeout(i),a.dispose(),r(pt())})}):Di(t=>Mi(e,t))}function Ni(e,t=0){let n=setTimeout(e,t);return Ot(()=>clearTimeout(n))}function Pi(e,t=e=>!!e,n=null){let r=0,i=e.length,a=()=>{if(r>=i)return Promise.resolve(n);let o=e[r++];return Promise.resolve(o()).then(e=>t(e)?Promise.resolve(e):a())};return a()}var Fi=class{constructor(e,t){this._token=-1,typeof e==`function`&&typeof t==`number`&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Ii=class{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}},Li=class{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}};let Ri;(function(){Ri=typeof requestIdleCallback!=`function`||typeof cancelIdleCallback!=`function`?e=>{let t=setTimeout(()=>{let t=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))}),n=!1;return{dispose(){n||(n=!0,clearTimeout(t))}}}:(e,t)=>{let n=requestIdleCallback(e,typeof t==`number`?{timeout:t}:void 0),r=!1;return{dispose(){r||(r=!0,cancelIdleCallback(n))}}}})();var zi=class{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=Ri(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},Bi;(function(e){function t(e){return Ti(this,void 0,void 0,function*(){let t,n=yield Promise.all(e.map(e=>e.then(e=>e,e=>{t||=e})));if(t!==void 0)throw t;return n})}e.settled=t;function n(e){return new Promise((t,n)=>Ti(this,void 0,void 0,function*(){try{yield e(t,n)}catch(e){n(e)}}))}e.withAsyncBody=n})(Bi||={});var Vi;(function(e){e.inMemory=`inmemory`,e.vscode=`vscode`,e.internal=`private`,e.walkThrough=`walkThrough`,e.walkThroughSnippet=`walkThroughSnippet`,e.http=`http`,e.https=`https`,e.file=`file`,e.mailto=`mailto`,e.untitled=`untitled`,e.data=`data`,e.command=`command`,e.vscodeRemote=`vscode-remote`,e.vscodeRemoteResource=`vscode-remote-resource`,e.userData=`vscode-userdata`,e.vscodeCustomEditor=`vscode-custom-editor`,e.vscodeNotebook=`vscode-notebook`,e.vscodeNotebookCell=`vscode-notebook-cell`,e.vscodeNotebookCellMetadata=`vscode-notebook-cell-metadata`,e.vscodeNotebookCellOutput=`vscode-notebook-cell-output`,e.vscodeInteractive=`vscode-interactive`,e.vscodeInteractiveInput=`vscode-interactive-input`,e.vscodeSettings=`vscode-settings`,e.vscodeWorkspaceTrust=`vscode-workspace-trust`,e.vscodeTerminal=`vscode-terminal`,e.webviewPanel=`webview-panel`,e.vscodeWebview=`vscode-webview`,e.extension=`extension`,e.vscodeFileResource=`vscode-file`,e.tmp=`tmp`})(Vi||={});const Hi=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema=`http`,this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);let t=e.authority,n=this._hosts[t];n&&n.indexOf(`:`)!==-1&&(n=`[${n}]`);let r=this._ports[t],i=this._connectionTokens[t],a=`path=${encodeURIComponent(e.path)}`;return typeof i==`string`&&(a+=`&tkn=${encodeURIComponent(i)}`),F.from({scheme:g?this._preferredWebSchema:Vi.vscodeRemoteResource,authority:`${n}:${r}`,path:`/vscode-remote-resource`,query:a})}};var Ui=class e{asBrowserUri(t,n){let r=this.toUri(t,n);return r.scheme===Vi.vscodeRemote?Hi.rewrite(r):r.scheme===Vi.file&&(h||typeof l.importScripts==`function`&&l.origin===`${Vi.vscodeFileResource}://${e.FALLBACK_AUTHORITY}`)?r.with({scheme:Vi.vscodeFileResource,authority:r.authority||e.FALLBACK_AUTHORITY,query:null,fragment:null}):r}toUri(e,t){return F.isUri(e)?e:F.parse(t.toUrl(e))}};Ui.FALLBACK_AUTHORITY=`vscode-app`;const Wi=new Ui;function Gi(e){for(;e.firstChild;)e.firstChild.remove()}function Ki(e){return e?.isConnected??!1}var qi=class{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&=(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,null)}};function R(e,t,n,r){return new qi(e,t,n,r)}function Ji(e){return function(t){return e(new Ci(t))}}function Yi(e){return function(t){return e(new vi(t))}}let Xi=function(e,t,n,r){let i=n;return t===`click`||t===`mousedown`?i=Ji(n):(t===`keydown`||t===`keypress`||t===`keyup`)&&(i=Yi(n)),R(e,t,i,r)},Zi=function(e,t,n){return Qi(e,Ji(t),n)};function Qi(e,t,n){return R(e,_&&oi.pointerEvents?z.POINTER_DOWN:z.MOUSE_DOWN,t,n)}function $i(e,t,n){return R(e,_&&oi.pointerEvents?z.POINTER_UP:z.MOUSE_UP,t,n)}function ea(e,t){return R(e,`mouseout`,n=>{let r=n.relatedTarget;for(;r&&r!==e;)r=r.parentNode;r!==e&&t(n)})}function ta(e,t){return R(e,`pointerout`,n=>{let r=n.relatedTarget;for(;r&&r!==e;)r=r.parentNode;r!==e&&t(n)})}var na=null;function ra(e){return na||=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||(e=>setTimeout(()=>e(new Date().getTime()),0)),na.call(self,e)}let ia,aa;var oa=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){ct(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=[],t=null,n=!1,r=!1,i=()=>{for(n=!1,t=e,e=[],r=!0;t.length>0;)t.sort(oa.sort),t.shift().execute();r=!1};aa=(t,r=0)=>{let a=new oa(t,r);return e.push(a),n||(n=!0,ra(i)),a},ia=(e,n)=>{if(r){let r=new oa(e,n);return t.push(r),r}else return aa(e,n)}})();var sa=8,ca=function(e,t){return t},la=class extends j{constructor(e,t,n,r=ca,i=sa){super();let a=null,o=0,s=this._register(new Fi),c=()=>{o=new Date().getTime(),n(a),a=null};this._register(R(e,t,e=>{a=r(a,e);let t=new Date().getTime()-o;t>=i?(s.cancel(),c()):s.setIfNotSet(c,i-t)}))}};function ua(e,t,n,r,i){return new la(e,t,n,r,i)}function da(e){return document.defaultView.getComputedStyle(e,null)}function fa(e){if(e!==document.body)return new ma(e.clientWidth,e.clientHeight);if(_&&window.visualViewport)return new ma(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new ma(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new ma(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new ma(document.documentElement.clientWidth,document.documentElement.clientHeight);throw Error(`Unable to figure out browser width and height`)}var pa=class e{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(t,n,r){let i=da(t),a=`0`;return i&&(a=i.getPropertyValue?i.getPropertyValue(n):i.getAttribute(r)),e.convertToPixels(t,a)}static getBorderLeftWidth(t){return e.getDimension(t,`border-left-width`,`borderLeftWidth`)}static getBorderRightWidth(t){return e.getDimension(t,`border-right-width`,`borderRightWidth`)}static getBorderTopWidth(t){return e.getDimension(t,`border-top-width`,`borderTopWidth`)}static getBorderBottomWidth(t){return e.getDimension(t,`border-bottom-width`,`borderBottomWidth`)}static getPaddingLeft(t){return e.getDimension(t,`padding-left`,`paddingLeft`)}static getPaddingRight(t){return e.getDimension(t,`padding-right`,`paddingRight`)}static getPaddingTop(t){return e.getDimension(t,`padding-top`,`paddingTop`)}static getPaddingBottom(t){return e.getDimension(t,`padding-bottom`,`paddingBottom`)}static getMarginLeft(t){return e.getDimension(t,`margin-left`,`marginLeft`)}static getMarginTop(t){return e.getDimension(t,`margin-top`,`marginTop`)}static getMarginRight(t){return e.getDimension(t,`margin-right`,`marginRight`)}static getMarginBottom(t){return e.getDimension(t,`margin-bottom`,`marginBottom`)}},ma=class e{constructor(e,t){this.width=e,this.height=t}with(t=this.width,n=this.height){return t!==this.width||n!==this.height?new e(t,n):this}static is(e){return typeof e==`object`&&typeof e.height==`number`&&typeof e.width==`number`}static lift(t){return t instanceof e?t:new e(t.width,t.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function ha(e){let t=e.offsetParent,n=e.offsetTop,r=e.offsetLeft;for(;(e=e.parentNode)!==null&&e!==document.body&&e!==document.documentElement;){n-=e.scrollTop;let i=Ea(e)?null:da(e);i&&(r-=i.direction===`rtl`?-e.scrollLeft:e.scrollLeft),e===t&&(r+=pa.getBorderLeftWidth(e),n+=pa.getBorderTopWidth(e),n+=e.offsetTop,r+=e.offsetLeft,t=e.offsetParent)}return{left:r,top:n}}function ga(e,t,n){typeof t==`number`&&(e.style.width=`${t}px`),typeof n==`number`&&(e.style.height=`${n}px`)}function _a(e){let t=e.getBoundingClientRect();return{left:t.left+va.scrollX,top:t.top+va.scrollY,width:t.width,height:t.height}}const va=new class{get scrollX(){return typeof window.scrollX==`number`?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY==`number`?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function ya(e){let t=pa.getMarginLeft(e)+pa.getMarginRight(e);return e.offsetWidth+t}function ba(e){let t=pa.getBorderLeftWidth(e)+pa.getBorderRightWidth(e),n=pa.getPaddingLeft(e)+pa.getPaddingRight(e);return e.offsetWidth-t-n}function xa(e){let t=pa.getBorderTopWidth(e)+pa.getBorderBottomWidth(e),n=pa.getPaddingTop(e)+pa.getPaddingBottom(e);return e.offsetHeight-t-n}function Sa(e){let t=pa.getMarginTop(e)+pa.getMarginBottom(e);return e.offsetHeight+t}function Ca(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function wa(e,t,n){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(n){if(typeof n==`string`){if(e.classList.contains(n))return null}else if(e===n)return null}e=e.parentNode}return null}function Ta(e,t,n){return!!wa(e,t,n)}function Ea(e){return e&&!!e.host&&!!e.mode}function Da(e){return!!Oa(e)}function Oa(e){for(;e.parentNode;){if(e===document.body)return null;e=e.parentNode}return Ea(e)?e:null}function ka(){let e=document.activeElement;for(;e?.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Aa(e=document.getElementsByTagName(`head`)[0]){let t=document.createElement(`style`);return t.type=`text/css`,t.media=`screen`,e.appendChild(t),t}var ja=null;function Ma(){return ja||=Aa(),ja}function Na(e){return e?.sheet?.rules?e.sheet.rules:e?.sheet?.cssRules?e.sheet.cssRules:[]}function Pa(e,t,n=Ma()){!n||!t||n.sheet.insertRule(e+`{`+t+`}`,0)}function Fa(e,t=Ma()){if(!t)return;let n=Na(t),r=[];for(let t=0;t<n.length;t++)n[t].selectorText.indexOf(e)!==-1&&r.push(t);for(let e=r.length-1;e>=0;e--)t.sheet.deleteRule(r[e])}function Ia(e){return typeof HTMLElement==`object`?e instanceof HTMLElement:e&&typeof e==`object`&&e.nodeType===1&&typeof e.nodeName==`string`}const z={CLICK:`click`,AUXCLICK:`auxclick`,DBLCLICK:`dblclick`,MOUSE_UP:`mouseup`,MOUSE_DOWN:`mousedown`,MOUSE_OVER:`mouseover`,MOUSE_MOVE:`mousemove`,MOUSE_OUT:`mouseout`,MOUSE_ENTER:`mouseenter`,MOUSE_LEAVE:`mouseleave`,MOUSE_WHEEL:`wheel`,POINTER_UP:`pointerup`,POINTER_DOWN:`pointerdown`,POINTER_MOVE:`pointermove`,CONTEXT_MENU:`contextmenu`,WHEEL:`wheel`,KEY_DOWN:`keydown`,KEY_PRESS:`keypress`,KEY_UP:`keyup`,LOAD:`load`,BEFORE_UNLOAD:`beforeunload`,UNLOAD:`unload`,ABORT:`abort`,ERROR:`error`,RESIZE:`resize`,SCROLL:`scroll`,FULLSCREEN_CHANGE:`fullscreenchange`,WK_FULLSCREEN_CHANGE:`webkitfullscreenchange`,SELECT:`select`,CHANGE:`change`,SUBMIT:`submit`,RESET:`reset`,FOCUS:`focus`,FOCUS_IN:`focusin`,FOCUS_OUT:`focusout`,BLUR:`blur`,INPUT:`input`,STORAGE:`storage`,DRAG_START:`dragstart`,DRAG:`drag`,DRAG_ENTER:`dragenter`,DRAG_LEAVE:`dragleave`,DRAG_OVER:`dragover`,DROP:`drop`,DRAG_END:`dragend`,ANIMATION_START:ei?`webkitAnimationStart`:`animationstart`,ANIMATION_END:ei?`webkitAnimationEnd`:`animationend`,ANIMATION_ITERATION:ei?`webkitAnimationIteration`:`animationiteration`},La={stop:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}};function Ra(e){let t=[];for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}function za(e,t){for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}var Ba=class extends j{constructor(e){super(),this._onDidFocus=this._register(new N),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new N),this.onDidBlur=this._onDidBlur.event;let t=Ca(document.activeElement,e),n=!1,r=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},i=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Ca(document.activeElement,e)!==t&&(t?i():r())},this._register(R(e,z.FOCUS,r,!0)),this._register(R(e,z.BLUR,i,!0))}};function Va(e){return new Ba(e)}function B(e,...t){if(e.append(...t),t.length===1&&typeof t[0]!=`string`)return t[0]}function Ha(e,t){return e.insertBefore(t,e.firstChild),t}function Ua(e,...t){e.innerText=``,B(e,...t)}var Wa=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/,Ga;(function(e){e.HTML=`http://www.w3.org/1999/xhtml`,e.SVG=`http://www.w3.org/2000/svg`})(Ga||={});function Ka(e,t,n,...r){let i=Wa.exec(t);if(!i)throw Error(`Bad use of emmet`);n=Object.assign({},n||{});let a=i[1]||`div`,o;return o=e===Ga.HTML?document.createElement(a):document.createElementNS(e,a),i[3]&&(o.id=i[3]),i[4]&&(o.className=i[4].replace(/\./g,` `).trim()),Object.keys(n).forEach(e=>{let t=n[e];t!==void 0&&(/^on\w+$/.test(e)?o[e]=t:e===`selected`?t&&o.setAttribute(e,`true`):o.setAttribute(e,t))}),o.append(...r),o}function V(e,t,...n){return Ka(Ga.HTML,e,t,...n)}V.SVG=function(e,t,...n){return Ka(Ga.SVG,e,t,...n)};function qa(...e){for(let t of e)t.style.display=``,t.removeAttribute(`aria-hidden`)}function Ja(...e){for(let t of e)t.style.display=`none`,t.setAttribute(`aria-hidden`,`true`)}function Ya(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)}function Xa(e){let t=window.devicePixelRatio*e;return Math.max(1,Math.floor(t))/window.devicePixelRatio}function Za(e){window.open(e,`_blank`,`noopener`)}function Qa(e){let t=()=>{e(),n=aa(t)},n=aa(t);return Ot(()=>n.dispose())}Hi.setPreferredWebSchema(/^https:/.test(window.location.href)?`https`:`http`);function $a(e){return e?`url('${Wi.asBrowserUri(e).toString(!0).replace(/'/g,`%27`)}')`:`url('')`}function eo(e){return`'${e.replace(/'/g,`%27`)}'`}var to=class e extends N{constructor(){super(),this._subscriptions=new A,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(R(window,`keydown`,e=>{if(e.defaultPrevented)return;let t=new vi(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed=`alt`;else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed=`ctrl`;else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed=`meta`;else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed=`shift`;else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(R(window,`keyup`,e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased=`alt`:!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased=`ctrl`:!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased=`meta`:!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased=`shift`:this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(R(document.body,`mousedown`,()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(R(document.body,`mouseup`,()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(R(document.body,`mousemove`,e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(R(window,`blur`,()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return e.instance||=new e,e.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};function no(e,t){let n=window.matchMedia(e);typeof n.addEventListener==`function`?n.addEventListener(`change`,t):n.addListener(t)}function ro(e){return!e||typeof e!=`string`?!0:e.trim().length===0}var io=/{(\d+)}/g;function ao(e,...t){return t.length===0?e:e.replace(io,function(e,n){let r=parseInt(n,10);return isNaN(r)||r<0||r>=t.length?e:t[r]})}function oo(e){return e.replace(/[<>&]/g,function(e){switch(e){case`<`:return`&lt;`;case`>`:return`&gt;`;case`&`:return`&amp;`;default:return e}})}function so(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,`\\$&`)}function co(e,t=` `){return uo(lo(e,t),t)}function lo(e,t){if(!e||!t)return e;let n=t.length;if(n===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r+=n;return e.substring(r)}function uo(e,t){if(!e||!t)return e;let n=t.length,r=e.length;if(n===0||r===0)return e;let i=r,a=-1;for(;a=e.lastIndexOf(t,i-1),!(a===-1||a+n!==i);){if(a===0)return``;i=a}return e.substring(0,i)}function fo(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,`\\$&`).replace(/[\*]/g,`.*`)}function po(e){return e.replace(/\*/g,``)}function mo(e,t,n={}){if(!e)throw Error(`Cannot create regex from empty string`);t||(e=so(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e=`\\b`+e),/\B/.test(e.charAt(e.length-1))||(e+=`\\b`));let r=``;return n.global&&(r+=`g`),n.matchCase||(r+=`i`),n.multiline&&(r+=`m`),n.unicode&&(r+=`u`),new RegExp(e,r)}function ho(e){return e.source===`^`||e.source===`^$`||e.source===`$`||e.source===`^\\s*$`?!1:!!(e.exec(``)&&e.lastIndex===0)}function go(e){return(e.global?`g`:``)+(e.ignoreCase?`i`:``)+(e.multiline?`m`:``)+(e.unicode?`u`:``)}function _o(e){return e.split(/\r\n|\r|\n/)}function vo(e){for(let t=0,n=e.length;t<n;t++){let n=e.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function yo(e,t=0,n=e.length){for(let r=t;r<n;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(t,r)}return e.substring(t,n)}function bo(e,t=e.length-1){for(let n=t;n>=0;n--){let t=e.charCodeAt(n);if(t!==32&&t!==9)return n}return-1}function xo(e,t){return e<t?-1:e>t?1:0}function So(e,t,n=0,r=e.length,i=0,a=t.length){for(;n<r&&i<a;n++,i++){let r=e.charCodeAt(n),a=t.charCodeAt(i);if(r<a)return-1;if(r>a)return 1}let o=r-n,s=a-i;return o<s?-1:o>s?1:0}function Co(e,t){return wo(e,t,0,e.length,0,t.length)}function wo(e,t,n=0,r=e.length,i=0,a=t.length){for(;n<r&&i<a;n++,i++){let o=e.charCodeAt(n),s=t.charCodeAt(i);if(o===s)continue;if(o>=128||s>=128)return So(e.toLowerCase(),t.toLowerCase(),n,r,i,a);To(o)&&(o-=32),To(s)&&(s-=32);let c=o-s;if(c!==0)return c}let o=r-n,s=a-i;return o<s?-1:o>s?1:0}function To(e){return e>=97&&e<=122}function Eo(e){return e>=65&&e<=90}function Do(e,t){return e.length===t.length&&wo(e,t)===0}function Oo(e,t){let n=t.length;return t.length>e.length?!1:wo(e,t,0,n)===0}function ko(e,t){let n,r=Math.min(e.length,t.length);for(n=0;n<r;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return r}function Ao(e,t){let n,r=Math.min(e.length,t.length),i=e.length-1,a=t.length-1;for(n=0;n<r;n++)if(e.charCodeAt(i-n)!==t.charCodeAt(a-n))return n;return r}function jo(e){return 55296<=e&&e<=56319}function Mo(e){return 56320<=e&&e<=57343}function No(e,t){return(e-55296<<10)+(t-56320)+65536}function Po(e,t,n){let r=e.charCodeAt(n);if(jo(r)&&n+1<t){let t=e.charCodeAt(n+1);if(Mo(t))return No(r,t)}return r}function Fo(e,t){let n=e.charCodeAt(t-1);if(Mo(n)&&t>1){let r=e.charCodeAt(t-2);if(jo(r))return No(r,n)}return n}function Io(e,t){let n=es.getInstance(),r=t,i=e.length,a=Po(e,i,t);t+=a>=65536?2:1;let o=n.getGraphemeBreakType(a);for(;t<i;){let r=Po(e,i,t),a=n.getGraphemeBreakType(r);if($o(o,a))break;t+=r>=65536?2:1,o=a}return t-r}function Lo(e,t){let n=es.getInstance(),r=t,i=Fo(e,t);t-=i>=65536?2:1;let a=n.getGraphemeBreakType(i);for(;t>0;){let r=Fo(e,t),i=n.getGraphemeBreakType(r);if($o(i,a))break;t-=r>=65536?2:1,a=i}return r-t}var Ro=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function zo(e){return Ro.test(e)}var Bo=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function Vo(e){return Bo.test(e)}var Ho=/^[\t\n\r\x20-\x7E]*$/;function Uo(e){return Ho.test(e)}const Wo=/[\u2028\u2029]/;function Go(e){return Wo.test(e)}function Ko(e){for(let t=0,n=e.length;t<n;t++)if(qo(e.charCodeAt(t)))return!0;return!1}function qo(e){return e=+e,e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function Jo(e){return e>=127462&&e<=127487||e===8986||e===8987||e===9200||e===9203||e>=9728&&e<=10175||e===11088||e===11093||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129003||e>=129280&&e<=129535||e>=129648&&e<=129750}function Yo(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function Xo(e,t=!1){return e?(t&&(e=e.replace(/\\./g,``)),e.toLowerCase()!==e):!1}function Zo(e){return e%=52,e<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function Qo(e){return es.getInstance().getGraphemeBreakType(e)}function $o(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var es=class e{constructor(){this._data=ts()}static getInstance(){return e._INSTANCE||=new e,e._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}};es._INSTANCE=null;function ts(){return JSON.parse(`[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]`)}function ns(e,t){if(e===0)return 0;let n=rs(e,t);if(n!==void 0)return n;let r=Fo(t,e);return e-=is(r),e}function rs(e,t){let n=Fo(t,e);for(e-=is(n);as(n)||n===65039||n===8419;){if(e===0)return;n=Fo(t,e),e-=is(n)}if(Jo(n)){if(e>=0){let n=Fo(t,e);n===8205&&(e-=is(n))}return e}}function is(e){return e>=65536?2:1}function as(e){return 127995<=e&&e<=127999}var os,ss,cs=class{constructor(){this._value=``,this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}},ls=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?So(e,this._value,0,e.length,this._from,this._to):wo(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},us=class{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,``),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){let t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?So(e,this._value,0,e.length,this._from,this._to):wo(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},ds=class{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new us(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Co(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Co(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return xo(e,this._value.query);if(this._states[this._stateIdx]===5)return xo(e,this._value.fragment);throw Error()}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw Error()}},fs=class{constructor(){this.height=1}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},ps=class e{constructor(e){this._iter=e}static forUris(t=()=>!1){return new e(new ds(t))}static forStrings(){return new e(new cs)}static forConfigKeys(){return new e(new ls)}clear(){this._root=void 0}set(e,t){let n=this._iter.reset(e),r;this._root||(this._root=new fs,this._root.segment=n.value());let i=[];for(r=this._root;;){let e=n.cmp(r.segment);if(e>0)r.left||(r.left=new fs,r.left.segment=n.value()),i.push([-1,r]),r=r.left;else if(e<0)r.right||(r.right=new fs,r.right.segment=n.value()),i.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new fs,r.mid.segment=n.value()),i.push([0,r]),r=r.mid;else break}let a=r.value;r.value=t,r.key=e;for(let e=i.length-1;e>=0;e--){let t=i[e][1];t.updateHeight();let n=t.balanceFactor();if(n<-1||n>1){let n=i[e][0],r=i[e+1][0];if(n===1&&r===1)i[e][1]=t.rotateLeft();else if(n===-1&&r===-1)i[e][1]=t.rotateRight();else if(n===1&&r===-1)t.right=i[e+1][1]=i[e+1][1].rotateRight(),i[e][1]=t.rotateLeft();else if(n===-1&&r===1)t.left=i[e+1][1]=i[e+1][1].rotateLeft(),i[e][1]=t.rotateRight();else throw Error();if(e>0)switch(i[e-1][0]){case-1:i[e-1][1].left=i[e][1];break;case 1:i[e-1][1].right=i[e][1];break;case 0:i[e-1][1].mid=i[e][1];break}else this._root=i[0][1]}}return a}get(e){return this._getNode(e)?.value}_getNode(e){let t=this._iter.reset(e),n=this._root;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){let t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let n=this._iter.reset(e),r=[],i=this._root;for(;i;){let e=n.cmp(i.segment);if(e>0)r.push([-1,i]),i=i.left;else if(e<0)r.push([1,i]),i=i.right;else if(n.hasNext())n.next(),r.push([0,i]),i=i.mid;else break}if(i){if(t?(i.left=void 0,i.mid=void 0,i.right=void 0,i.height=1):(i.key=void 0,i.value=void 0),!i.mid&&!i.value)if(i.left&&i.right){let e=this._min(i.right),{key:t,value:n,segment:r}=e;this._delete(e.key,!1),i.key=t,i.value=n,i.segment=r}else{let e=i.left??i.right;if(r.length>0){let[t,n]=r[r.length-1];switch(t){case-1:n.left=e;break;case 0:n.mid=e;break;case 1:n.right=e;break}}else this._root=e}for(let e=r.length-1;e>=0;e--){let t=r[e][1];t.updateHeight();let n=t.balanceFactor();if(n>1?(t.right.balanceFactor()>=0||(t.right=r[e+1][1]=r[e+1][1].rotateRight()),r[e][1]=t.rotateLeft()):n<-1&&(t.left.balanceFactor()<=0||(t.left=r[e+1][1]=r[e+1][1].rotateLeft()),r[e][1]=t.rotateRight()),e>0)switch(r[e-1][0]){case-1:r[e-1][1].left=r[e][1];break;case 1:r[e-1][1].right=r[e][1];break;case 0:r[e-1][1].mid=r[e][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t=this._iter.reset(e),n=this._root,r;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){let t=this._iter.reset(e),n=this._root;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else if(n.mid)return this._entries(n.mid);else return}}forEach(e){for(let[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}},ms=class{constructor(e,t){this.uri=e,this.value=t}},hs=class e{constructor(t,n){this[os]=`ResourceMap`,t instanceof e?(this.map=new Map(t.map),this.toKey=n??e.defaultToKey):(this.map=new Map,this.toKey=t??e.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new ms(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){t!==void 0&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(os=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};hs.defaultToKey=e=>e.toString();var gs=class{constructor(){this[ss]=`LinkedMap`,this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let r=this._map.get(e);if(r)r.value=t,n!==0&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error(`Invalid list`);let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error(`LinkedMap got modified during iteration.`);r=r.next}}keys(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:n.key,done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}values(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:n.value,done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}entries(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:[n.key,n.value],done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}[(ss=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw Error(`Invalid list`);this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error(`Invalid list`);this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error(`Invalid list`);e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error(`Invalid list`);e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw Error(`Invalid list`);t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error(`Invalid list`);if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},_s=class extends gs{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}},vs=typeof Buffer<`u`,ys,bs=class e{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(t){return vs&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new e(t)}toString(){return vs?this.buffer.toString():(ys||=new TextDecoder,ys.decode(this.buffer))}};function xs(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function Ss(e,t,n){e[n+0]=t&255,t>>>=8,e[n+1]=t&255}function Cs(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function ws(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}function Ts(e,t){return e[t]}function Es(e,t,n){e[n]=t}function Ds(e){let t=JSON.parse(e);return t=Os(t),t}function Os(e,t=0){if(!e||t>200)return e;if(typeof e==`object`){switch(e.$mid){case 1:return F.revive(e);case 2:return new RegExp(e.source,e.flags)}if(e instanceof bs||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let n=0;n<e.length;++n)e[n]=Os(e[n],t+1);else for(let n in e)Object.hasOwnProperty.call(e,n)&&(e[n]=Os(e[n],t+1))}return e}function ks(e){return e.replace(/[\\/]/g,En.sep)}function As(e){return e.indexOf(`/`)===-1&&(e=ks(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e=`/`+e),e}function js(e,t,n,r=Nn){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(n){if(!Oo(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function Ms(e){return e>=65&&e<=90||e>=97&&e<=122}function Ns(e){let t=Dn(e);return f?e.length>3?!1:Ps(t)&&(e.length===2||t.charCodeAt(2)===92):t===En.sep}function Ps(e){return f?Ms(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function Fs(e){return Jn(e,!0)}const Is=new class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:xo(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return F.joinPath(e,...t)}basenameOrAuthority(e){return zs(e)||e.authority}basename(e){return En.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Vi.file?t=F.file(An(Fs(e))).path:(t=En.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t=`/`)),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===Vi.file?F.file(Dn(Fs(e))).path:En.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Vi.file){let n=F.file(On(Fs(e),t));return e.with({authority:n.authority,path:n.path})}return t=As(t),e.with({path:En.resolve(e.path,t)})}}(()=>!1),Ls=Is.isEqual.bind(Is),Rs=Is.basenameOrAuthority.bind(Is),zs=Is.basename.bind(Is),Bs=Is.dirname.bind(Is),Vs=Is.joinPath.bind(Is),Hs=Is.normalizePath.bind(Is),Us=Is.resolvePath.bind(Is);var Ws;(function(e){e.META_DATA_LABEL=`label`,e.META_DATA_DESCRIPTION=`description`,e.META_DATA_SIZE=`size`,e.META_DATA_MIME=`mime`;function t(t){let n=new Map;t.path.substring(t.path.indexOf(`;`)+1,t.path.lastIndexOf(`;`)).split(`;`).forEach(e=>{let[t,r]=e.split(`:`);t&&r&&n.set(t,r)});let r=t.path.substring(0,t.path.indexOf(`;`));return r&&n.set(e.META_DATA_MIME,r),n}e.parseMetaData=t})(Ws||={});function Gs(e){return Array.isArray(e)}function Ks(e){return typeof e==`string`}function qs(e){return typeof e==`object`&&!!e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function Js(e){return typeof e==`number`&&!isNaN(e)}function Ys(e){return e===!0||e===!1}function Xs(e){return e===void 0}function Zs(e){return!Qs(e)}function Qs(e){return Xs(e)||e===null}function $s(e,t){if(!e)throw Error(t?`Unexpected type, expected '${t}'`:`Unexpected type`)}function ec(e){if(Qs(e))throw Error(`Assertion Failed: argument is undefined or null`);return e}function tc(e){return typeof e==`function`}function nc(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)rc(e[r],t[r])}function rc(e,t){if(Ks(t)){if(typeof e!==t)throw Error(`argument does not match constraint: typeof ${t}`)}else if(tc(t)){try{if(e instanceof t)return}catch{}if(!Qs(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw Error(`argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true`)}}function ic(e){let t=[],n=Object.getPrototypeOf(e);for(;Object.prototype!==n;)t=t.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return t}function ac(e){let t=[];for(let n of ic(e))typeof e[n]==`function`&&t.push(n);return t}function oc(e,t){let n=e=>function(){return t(e,Array.prototype.slice.call(arguments,0))},r={};for(let t of e)r[t]=n(t);return r}function sc(e){return e===null?void 0:e}function cc(e,t=`Unreachable`){throw Error(t)}const lc=Ur(`commandService`),uc=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new N,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw Error(`invalid command`);if(typeof e==`string`){if(!t)throw Error(`invalid command`);return this.registerCommand({id:e,handler:t})}if(e.description){let t=[];for(let n of e.description.args)t.push(n.constraint);let n=e.handler;e.handler=function(e,...r){return nc(r,t),n(e,...r)}}let{id:n}=e,r=this._commands.get(n);r||(r=new Mt,this._commands.set(n,r));let i=r.unshift(e),a=Ot(()=>{i(),this._commands.get(n)?.isEmpty()&&this._commands.delete(n)});return this._onDidRegisterCommand.fire(n),a}registerCommandAlias(e,t){return uc.registerCommand(e,(e,...n)=>e.get(lc).executeCommand(t,...n))}getCommand(e){let t=this._commands.get(e);if(!(!t||t.isEmpty()))return k.first(t)}getCommands(){let e=new Map;for(let t of this._commands.keys()){let n=this.getCommand(t);n&&e.set(t,n)}return e}};uc.registerCommand(`noop`,()=>{});var dc;(function(e){e[e.API=0]=`API`,e[e.USER=1]=`USER`})(dc||={});var fc=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};const pc=Ur(`openerService`),mc=Object.freeze({_serviceBrand:void 0,registerOpener(){return j.None},registerValidator(){return j.None},registerExternalUriResolver(){return j.None},setDefaultExternalOpener(){},registerExternalOpener(){return j.None},open(){return fc(this,void 0,void 0,function*(){return!1})},resolveExternalUri(e){return fc(this,void 0,void 0,function*(){return{resolved:e,dispose(){}}})}});function hc(e,t){return F.isUri(e)?Do(e.scheme,t):Oo(e,t+`:`)}var gc=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},_c=function(e,t){return function(n,r){t(n,r,e)}},vc=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},yc=class{constructor(e){this._commandService=e}open(e,t){return vc(this,void 0,void 0,function*(){if(!hc(e,Vi.command))return!1;if(!t?.allowCommands)return!0;typeof e==`string`&&(e=F.parse(e));let n=[];try{n=Ds(decodeURIComponent(e.query))}catch{try{n=Ds(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};yc=gc([_c(0,lc)],yc);var bc=class{constructor(e){this._editorService=e}open(e,t){return vc(this,void 0,void 0,function*(){typeof e==`string`&&(e=F.parse(e));let n,r=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return r&&(n={startLineNumber:parseInt(r[1]),startColumn:r[2]?parseInt(r[2]):1},e=e.with({fragment:``})),e.scheme===Vi.file&&(e=Hs(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t?.fromUserGesture?dc.USER:dc.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}};bc=gc([_c(0,Gr)],bc);var xc=class{constructor(e,t){this._openers=new Mt,this._validators=new Mt,this._resolvers=new Mt,this._resolvedUriTargets=new hs(e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Mt,this._defaultExternalOpener={openExternal:e=>vc(this,void 0,void 0,function*(){return hc(e,Vi.http)||hc(e,Vi.https)?Za(e):window.location.href=e,!0})},this._openers.push({open:(e,t)=>vc(this,void 0,void 0,function*(){return t?.openExternal||hc(e,Vi.mailto)||hc(e,Vi.http)||hc(e,Vi.https)?(yield this._doOpenExternal(e,t),!0):!1})}),this._openers.push(new yc(t)),this._openers.push(new bc(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){return vc(this,void 0,void 0,function*(){let n=typeof e==`string`?F.parse(e):e,r=this._resolvedUriTargets.get(n)??e;for(let e of this._validators)if(!(yield e.shouldOpen(r)))return!1;for(let n of this._openers)if(yield n.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return vc(this,void 0,void 0,function*(){for(let n of this._resolvers)try{let r=yield n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw Error(`Could not resolve external URI: `+e.toString())})}_doOpenExternal(e,t){return vc(this,void 0,void 0,function*(){let n=typeof e==`string`?F.parse(e):e,r;try{r=(yield this.resolveExternalUri(n,t)).resolved}catch{r=n}let i;if(i=typeof e==`string`&&n.toString()===r.toString()?e:encodeURI(r.toString(!0)),t?.allowContributedOpeners){let e=typeof t?.allowContributedOpeners==`string`?t?.allowContributedOpeners:void 0;for(let t of this._externalOpeners)if(yield t.openExternal(i,{sourceUri:n,preferredOpenerId:e},Ut.None))return!0}return this._defaultExternalOpener.openExternal(i,{sourceUri:n},Ut.None)})}dispose(){this._validators.clear()}};xc=gc([_c(0,Gr),_c(1,lc)],xc);function Sc(e,t){if(!e)throw Error(t?`Assertion failed (${t})`:`Assertion Failed`)}function Cc(e){if(!e||typeof e!=`object`||e instanceof RegExp)return e;let t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(n=>{e[n]&&typeof e[n]==`object`?t[n]=Cc(e[n]):t[n]=e[n]}),t}function wc(e){if(!e||typeof e!=`object`)return e;let t=[e];for(;t.length>0;){let e=t.shift();for(let n in Object.freeze(e),e)if(Tc.call(e,n)){let r=e[n];typeof r==`object`&&!Object.isFrozen(r)&&t.push(r)}}return e}var Tc=Object.prototype.hasOwnProperty;function Ec(e,t){return Dc(e,t,new Set)}function Dc(e,t,n){if(Qs(e))return e;let r=t(e);if(r!==void 0)return r;if(Gs(e)){let r=[];for(let i of e)r.push(Dc(i,t,n));return r}if(qs(e)){if(n.has(e))throw Error(`Cannot clone recursive data-structure`);n.add(e);let r={};for(let i in e)Tc.call(e,i)&&(r[i]=Dc(e[i],t,n));return n.delete(e),r}return e}function Oc(e,t,n=!0){return qs(e)?(qs(t)&&Object.keys(t).forEach(r=>{r in e?n&&(qs(e[r])&&qs(t[r])?Oc(e[r],t[r],n):e[r]=t[r]):e[r]=t[r]}),e):t}function kc(e,t){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t||typeof e!=`object`||Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!kc(e[n],t[n]))return!1}else{let i=[];for(r in e)i.push(r);i.sort();let a=[];for(r in t)a.push(r);if(a.sort(),!kc(i,a))return!1;for(n=0;n<i.length;n++)if(!kc(e[i[n]],t[i[n]]))return!1}return!0}function Ac(e,t,n){let r=t(e);return r===void 0?n:r}var jc={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},Mc=class extends j{constructor(e,t={}){super(),this._onDidUpdate=this._register(new N),this._editor=e,this._options=Oc(t,jc,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(e=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(e=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach(e=>{this.ranges.push({rhs:!0,range:new L(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})}):e.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new L(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new L(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})}),this.ranges.sort((e,t)=>L.compareRangesUsingStarts(e.range,t.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let r=0,i=this.ranges.length;r<i&&!t;r++){let i=this.ranges[r].range;n.isBeforeOrEqual(i.getStartPosition())&&(this.nextIdx=r+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Sc(!this.disposed,`Illegal State - diff navigator has been disposed`),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(--this.nextIdx,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let e=n.range.getStartPosition();this._editor.setPosition(e),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}};const Nc=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new N,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var Pc=p?1.5:1.35,Fc=8,Ic=class e{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(t,n,r,i){let a=t.get(42),o=t.get(46),s=t.get(45),c=t.get(44),l=t.get(58),u=t.get(55);return e._create(a,o,s,c,l,u,n,r,i)}static _create(t,n,r,i,a,o,s,c,l){a===0?a=Pc*r:a<Fc&&(a*=r),a=Math.round(a),a<Fc&&(a=Fc);let u=1+(l?0:Nc.getZoomLevel()*.1);return r*=u,a*=u,new e({zoomLevel:s,pixelRatio:c,fontFamily:t,fontWeight:n,fontSize:r,fontFeatureSettings:i,lineHeight:a,letterSpacing:o})}getId(){return this.zoomLevel+`-`+this.pixelRatio+`-`+this.fontFamily+`-`+this.fontWeight+`-`+this.fontSize+`-`+this.fontFeatureSettings+`-`+this.lineHeight+`-`+this.letterSpacing}getMassagedFontFamily(t){let n=e._wrapInQuotes(this.fontFamily);return t&&this.fontFamily!==t?`${n}, ${t}`:n}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},Lc=class extends Ic{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=1,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};function Rc(e){return e&&typeof e.id==`string`}const zc={ICodeEditor:`vs.editor.ICodeEditor`,IDiffEditor:`vs.editor.IDiffEditor`};var Bc;(function(e){e[e.Left=1]=`Left`,e[e.Center=2]=`Center`,e[e.Right=4]=`Right`,e[e.Full=7]=`Full`})(Bc||={});var Vc;(function(e){e[e.Inline=1]=`Inline`,e[e.Gutter=2]=`Gutter`})(Vc||={});var Hc=class{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&kc(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},Uc=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},Wc;(function(e){e[e.Disabled=0]=`Disabled`,e[e.EnabledForActive=1]=`EnabledForActive`,e[e.Enabled=2]=`Enabled`})(Wc||={});var Gc=class{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}},Kc=class{constructor(e,t){this.top=e,this.endColumn=t}},qc=class{constructor(e,t,n,r,i,a){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=i,this._isTracked=a}},Jc=class{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}};function Yc(e){return Xc(e,0)}function Xc(e,t){switch(typeof e){case`object`:return e===null?Zc(349,t):Array.isArray(e)?el(e,t):tl(e,t);case`string`:return $c(e,t);case`boolean`:return Qc(e,t);case`number`:return Zc(e,t);case`undefined`:return Zc(937,t);default:return Zc(617,t)}}function Zc(e,t){return(t<<5)-t+e|0}function Qc(e,t){return Zc(e?433:863,t)}function $c(e,t){t=Zc(149417,t);for(let n=0,r=e.length;n<r;n++)t=Zc(e.charCodeAt(n),t);return t}function el(e,t){return t=Zc(104579,t),e.reduce((e,t)=>Xc(t,e),t)}function tl(e,t){return t=Zc(181387,t),Object.keys(e).sort().reduce((t,n)=>(t=$c(n,t),Xc(e[n],t)),t)}function nl(e,t,n=32){let r=n-t,i=~((1<<r)-1);return(e<<t|(i&e)>>>r)>>>0}function rl(e,t=0,n=e.byteLength,r=0){for(let i=0;i<n;i++)e[t+i]=r}function il(e,t,n=`0`){for(;e.length<t;)e=n+e;return e}function al(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,`0`)).join(``):il((e>>>0).toString(16),t/4)}var ol=class e{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,r=this._buffLen,i=this._leftoverHighSurrogate,a,o;for(i===0?(a=e.charCodeAt(0),o=0):(a=i,o=-1,i=0);;){let s=a;if(jo(a))if(o+1<t){let t=e.charCodeAt(o+1);Mo(t)?(o++,s=No(a,t)):s=65533}else{i=a;break}else Mo(a)&&(s=65533);if(r=this._push(n,r,s),o++,o<t)a=e.charCodeAt(o);else break}this._buffLen=r,this._leftoverHighSurrogate=i}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),al(this._h0)+al(this._h1)+al(this._h2)+al(this._h3)+al(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,rl(this._buff,this._buffLen),this._buffLen>56&&(this._step(),rl(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let t=e._bigBlock32,n=this._buffDV;for(let e=0;e<64;e+=4)t.setUint32(e,n.getUint32(e,!1),!1);for(let e=64;e<320;e+=4)t.setUint32(e,nl(t.getUint32(e-12,!1)^t.getUint32(e-32,!1)^t.getUint32(e-56,!1)^t.getUint32(e-64,!1),1),!1);let r=this._h0,i=this._h1,a=this._h2,o=this._h3,s=this._h4,c,l,u;for(let e=0;e<80;e++)e<20?(c=i&a|~i&o,l=1518500249):e<40?(c=i^a^o,l=1859775393):e<60?(c=i&a|i&o|a&o,l=2400959708):(c=i^a^o,l=3395469782),u=nl(r,5)+c+s+l+t.getUint32(e*4,!1)&4294967295,s=o,o=a,a=nl(i,30),i=r,r=u;this._h0=this._h0+r&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+s&4294967295}};ol._bigBlock32=new DataView(new ArrayBuffer(320));function sl(e,t,n){return Math.min(Math.max(e,t),n)}var cl=class{constructor(){this._n=1,this._val=0}update(e){return this._val+=(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}},ll=`**`,ul=`/`,dl=`[/\\\\]`,fl=`[^/\\\\]`,pl=/\//g;function ml(e){switch(e){case 0:return``;case 1:return`${fl}*?`;default:return`(?:${dl}|${fl}+${dl}|${dl}${fl}+)*?`}}function hl(e,t){if(!e)return[];let n=[],r=!1,i=!1,a=``;for(let o of e){switch(o){case t:if(!r&&!i){n.push(a),a=``;continue}break;case`{`:r=!0;break;case`}`:r=!1;break;case`[`:i=!0;break;case`]`:i=!1;break}a+=o}return a&&n.push(a),n}function gl(e){if(!e)return``;let t=``,n=hl(e,ul);if(n.every(e=>e===ll))t=`.*`;else{let e=!1;n.forEach((r,i)=>{if(r===ll){e||=(t+=ml(2),!0);return}let a=!1,o=``,s=!1,c=``;for(let e of r){if(e!==`}`&&a){o+=e;continue}if(s&&(e!==`]`||!c)){let t;t=e===`-`?e:(e===`^`||e===`!`)&&!c?`^`:e===ul?``:so(e),c+=t;continue}switch(e){case`{`:a=!0;continue;case`[`:s=!0;continue;case`}`:let n=`(?:${hl(o,`,`).map(e=>gl(e)).join(`|`)})`;t+=n,a=!1,o=``;break;case`]`:t+=`[`+c+`]`,s=!1,c=``;break;case`?`:t+=fl;continue;case`*`:t+=ml(1);continue;default:t+=so(e)}}i<n.length-1&&(n[i+1]!==ll||i+2<n.length)&&(t+=dl),e=!1})}return t}var _l=/^\*\*\/\*\.[\w\.-]+$/,vl=/^\*\*\/([\w\.-]+)\/?$/,yl=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,bl=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,xl=/^\*\*((\/[\w\.-]+)+)\/?$/,Sl=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Cl=new _s(1e4),wl=function(){return!1},Tl=function(){return null};function El(e,t){if(!e)return Tl;let n;n=typeof e==`string`?e:e.pattern,n=n.trim();let r=`${n}_${!!t.trimForExclusions}`,i=Cl.get(r);if(i)return Dl(i,e);let a;if(_l.test(n)){let e=n.substr(4);i=function(t,r){return typeof t==`string`&&t.endsWith(e)?n:null}}else i=(a=vl.exec(Ol(n,t)))?kl(a[1],n):(t.trimForExclusions?bl:yl).test(n)?Al(n,t):(a=xl.exec(Ol(n,t)))?jl(a[1].substr(1),n,!0):(a=Sl.exec(Ol(n,t)))?jl(a[1],n,!1):Ml(n);return Cl.set(r,i),Dl(i,e)}function Dl(e,t){return typeof t==`string`?e:function(n,r){return js(n,t.base)?e(kn(t.base,n),r):null}}function Ol(e,t){return t.trimForExclusions&&e.endsWith(`/**`)?e.substr(0,e.length-2):e}function kl(e,t){let n=`/${e}`,r=`\\${e}`,i=function(i,a){return typeof i==`string`?a?a===e?t:null:i===e||i.endsWith(n)||i.endsWith(r)?t:null:null},a=[e];return i.basenames=a,i.patterns=[t],i.allBasenames=a,i}function Al(e,t){let n=Rl(e.slice(1,-1).split(`,`).map(e=>El(e,t)).filter(e=>e!==Tl),e),r=n.length;if(!r)return Tl;if(r===1)return n[0];let i=function(t,r){for(let i=0,a=n.length;i<a;i++)if(n[i](t,r))return e;return null},a=n.find(e=>!!e.allBasenames);a&&(i.allBasenames=a.allBasenames);let o=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(i.allPaths=o),i}function jl(e,t,n){let r=Nn===En.sep,i=r?e:e.replace(pl,Nn),a=Nn+i,o=En.sep+e,s=n?function(n,s){return typeof n==`string`&&(n===i||n.endsWith(a)||!r&&(n===e||n.endsWith(o)))?t:null}:function(n,a){return typeof n==`string`&&(n===i||!r&&n===e)?t:null};return s.allPaths=[(n?`*/`:`./`)+e],s}function Ml(e){try{let t=RegExp(`^${gl(e)}$`);return function(n){return t.lastIndex=0,typeof n==`string`&&t.test(n)?e:null}}catch{return Tl}}function Nl(e,t,n){return!e||typeof t!=`string`?!1:Pl(e)(t,void 0,n)}function Pl(e,t={}){if(!e)return wl;if(typeof e==`string`||Fl(e)){let n=El(e,t);if(n===Tl)return wl;let r=function(e,t){return!!n(e,t)};return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return Il(e,t)}function Fl(e){let t=e;return t&&typeof t.base==`string`&&typeof t.pattern==`string`}function Il(e,t){let n=Rl(Object.getOwnPropertyNames(e).map(n=>Ll(n,e[n],t)).filter(e=>e!==Tl)),r=n.length;if(!r)return Tl;if(!n.some(e=>!!e.requiresSiblings)){if(r===1)return n[0];let e=function(e,t){for(let r=0,i=n.length;r<i;r++){let i=n[r](e,t);if(i)return i}return null},t=n.find(e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);let i=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return i.length&&(e.allPaths=i),e}let i=function(e,t,r){let i;for(let a=0,o=n.length;a<o;a++){let o=n[a];o.requiresSiblings&&r&&(t||=jn(e),i||=t.substr(0,t.length-Mn(e).length));let s=o(e,t,i,r);if(s)return s}return null},a=n.find(e=>!!e.allBasenames);a&&(i.allBasenames=a.allBasenames);let o=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(i.allPaths=o),i}function Ll(e,t,n){if(t===!1)return Tl;let r=El(e,n);if(r===Tl)return Tl;if(typeof t==`boolean`)return r;if(t){let n=t.when;if(typeof n==`string`){let t=(t,i,a,o)=>{if(!o||!r(t,i))return null;let s=o(n.replace(`$(basename)`,a));return Ei(s)?s.then(t=>t?e:null):s?e:null};return t.requiresSiblings=!0,t}}return r}function Rl(e,t){let n=e.filter(e=>!!e.basenames);if(n.length<2)return e;let r=n.reduce((e,t)=>{let n=t.basenames;return n?e.concat(n):e},[]),i;if(t){i=[];for(let e=0,n=r.length;e<n;e++)i.push(t)}else i=n.reduce((e,t)=>{let n=t.patterns;return n?e.concat(n):e},[]);let a=function(e,t){if(typeof e!=`string`)return null;if(!t){let n;for(n=e.length;n>0;n--){let t=e.charCodeAt(n-1);if(t===47||t===92)break}t=e.substr(n)}let n=r.indexOf(t);return n===-1?null:i[n]};a.basenames=r,a.patterns=i,a.allBasenames=r;let o=e.filter(e=>!e.basenames);return o.push(a),o}function zl(e,t,n,r){if(Array.isArray(e)){let i=0;for(let a of e){let e=zl(a,t,n,r);if(e===10)return e;e>i&&(i=e)}return i}else if(typeof e==`string`)return r?e===`*`?5:e===n?10:0:0;else if(e){let{language:i,pattern:a,scheme:o,hasAccessToAllModels:s}=e;if(!r&&!s)return 0;let c=0;if(o)if(o===t.scheme)c=10;else if(o===`*`)c=5;else return 0;if(i)if(i===n)c=10;else if(i===`*`)c=Math.max(c,5);else return 0;if(a){let e;if(e=typeof a==`string`?a:Object.assign(Object.assign({},a),{base:Dn(a.base)}),e===t.fsPath||Nl(e,t.fsPath))c=10;else return 0}return c}else return 0}const Bl=Ur(`modelService`);function Vl(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}function Hl(e){return typeof e==`string`?!1:Array.isArray(e)?e.every(Hl):!!e.exclusive}var Ul=class e{constructor(){this._clock=0,this._entries=[],this._onDidChange=new N}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Ot(()=>{if(n){let e=this._entries.indexOf(n);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);let t=[];for(let e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e){let t=[];return this._orderedForEach(e,e=>t.push(e.provider)),t}orderedGroups(e){let t=[],n,r;return this._orderedForEach(e,e=>{n&&r===e._score?n.push(e.provider):(r=e._score,n=[e.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(let e of this._entries)e._score>0&&t(e)}}_updateScores(t){let n={uri:t.uri.toString(),language:t.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===n.language&&this._lastCandidate.uri===n.uri)){this._lastCandidate=n;for(let e of this._entries)if(e._score=zl(e.selector,t.uri,t.getLanguageId(),Vl(t)),Hl(e.selector)&&e._score>0){for(let e of this._entries)e._score=0;e._score=1e3;break}this._entries.sort(e._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}},Wl=new WeakMap,Gl=0;function Kl(e){let t=Wl.get(e);return t===void 0&&(t=++Gl,Wl.set(e,t)),t}var ql=class{constructor(e,t,n=2**53-1){this._registry=e,this.min=t,this.max=n,this._cache=new _s(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((e,t)=>Xc(Kl(t),e),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){let t=this._key(e),n=this._cache.get(t);return this._clamp(n?.value)}update(e,t){let n=this._key(e),r=this._cache.get(n);return r||(r=new cl,this._cache.set(n,r)),r.update(t),this.get(e)}},Jl=class{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new N,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Ot(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,r=!1;return this._promises.set(e,t.then(t=>{this._promises.delete(e),!(r||!t)&&(n=this.register(e,t))})),Ot(()=>{r=!0,n&&n.dispose()})}getPromise(e){let t=this.get(e);if(t)return Promise.resolve(t);let n=this._promises.get(e);return n?n.then(t=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},Yl=new class{constructor(){this._icons=new Map,this._onDidRegister=new N}add(e){let t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const Xl=Yl;function Zl(e,t){return new $l(e,t)}function Ql(e){return e?e.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():``}var $l=class{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,Yl.add(this)}get classNames(){return`codicon codicon-`+this.id}get classNamesArray(){return[`codicon`,`codicon-`+this.id]}get cssSelector(){return`.codicon.codicon-`+this.id}},eu;(function(e){e.iconNameSegment=`[A-Za-z0-9]+`,e.iconNameExpression=`[A-Za-z0-9\\-]+`,e.iconModifierExpression=`~[A-Za-z]+`;let t=RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function n(e){if(e instanceof $l)return[`codicon`,`codicon-`+e.id];let r=t.exec(e.id);if(!r)return n($l.error);let[,i,a]=r,o=[`codicon`,`codicon-`+i];return a&&o.push(`codicon-modifier-`+a.substr(1)),o}e.asClassNameArray=n;function r(e){return n(e).join(` `)}e.asClassName=r;function i(e){return`.`+n(e).join(`.`)}e.asCSSSelector=i})(eu||={}),(function(e){e.add=new e(`add`,{fontCharacter:`\\ea60`}),e.plus=new e(`plus`,e.add.definition),e.gistNew=new e(`gist-new`,e.add.definition),e.repoCreate=new e(`repo-create`,e.add.definition),e.lightbulb=new e(`lightbulb`,{fontCharacter:`\\ea61`}),e.lightBulb=new e(`light-bulb`,{fontCharacter:`\\ea61`}),e.repo=new e(`repo`,{fontCharacter:`\\ea62`}),e.repoDelete=new e(`repo-delete`,{fontCharacter:`\\ea62`}),e.gistFork=new e(`gist-fork`,{fontCharacter:`\\ea63`}),e.repoForked=new e(`repo-forked`,{fontCharacter:`\\ea63`}),e.gitPullRequest=new e(`git-pull-request`,{fontCharacter:`\\ea64`}),e.gitPullRequestAbandoned=new e(`git-pull-request-abandoned`,{fontCharacter:`\\ea64`}),e.recordKeys=new e(`record-keys`,{fontCharacter:`\\ea65`}),e.keyboard=new e(`keyboard`,{fontCharacter:`\\ea65`}),e.tag=new e(`tag`,{fontCharacter:`\\ea66`}),e.tagAdd=new e(`tag-add`,{fontCharacter:`\\ea66`}),e.tagRemove=new e(`tag-remove`,{fontCharacter:`\\ea66`}),e.person=new e(`person`,{fontCharacter:`\\ea67`}),e.personFollow=new e(`person-follow`,{fontCharacter:`\\ea67`}),e.personOutline=new e(`person-outline`,{fontCharacter:`\\ea67`}),e.personFilled=new e(`person-filled`,{fontCharacter:`\\ea67`}),e.gitBranch=new e(`git-branch`,{fontCharacter:`\\ea68`}),e.gitBranchCreate=new e(`git-branch-create`,{fontCharacter:`\\ea68`}),e.gitBranchDelete=new e(`git-branch-delete`,{fontCharacter:`\\ea68`}),e.sourceControl=new e(`source-control`,{fontCharacter:`\\ea68`}),e.mirror=new e(`mirror`,{fontCharacter:`\\ea69`}),e.mirrorPublic=new e(`mirror-public`,{fontCharacter:`\\ea69`}),e.star=new e(`star`,{fontCharacter:`\\ea6a`}),e.starAdd=new e(`star-add`,{fontCharacter:`\\ea6a`}),e.starDelete=new e(`star-delete`,{fontCharacter:`\\ea6a`}),e.starEmpty=new e(`star-empty`,{fontCharacter:`\\ea6a`}),e.comment=new e(`comment`,{fontCharacter:`\\ea6b`}),e.commentAdd=new e(`comment-add`,{fontCharacter:`\\ea6b`}),e.alert=new e(`alert`,{fontCharacter:`\\ea6c`}),e.warning=new e(`warning`,{fontCharacter:`\\ea6c`}),e.search=new e(`search`,{fontCharacter:`\\ea6d`}),e.searchSave=new e(`search-save`,{fontCharacter:`\\ea6d`}),e.logOut=new e(`log-out`,{fontCharacter:`\\ea6e`}),e.signOut=new e(`sign-out`,{fontCharacter:`\\ea6e`}),e.logIn=new e(`log-in`,{fontCharacter:`\\ea6f`}),e.signIn=new e(`sign-in`,{fontCharacter:`\\ea6f`}),e.eye=new e(`eye`,{fontCharacter:`\\ea70`}),e.eyeUnwatch=new e(`eye-unwatch`,{fontCharacter:`\\ea70`}),e.eyeWatch=new e(`eye-watch`,{fontCharacter:`\\ea70`}),e.circleFilled=new e(`circle-filled`,{fontCharacter:`\\ea71`}),e.primitiveDot=new e(`primitive-dot`,{fontCharacter:`\\ea71`}),e.closeDirty=new e(`close-dirty`,{fontCharacter:`\\ea71`}),e.debugBreakpoint=new e(`debug-breakpoint`,{fontCharacter:`\\ea71`}),e.debugBreakpointDisabled=new e(`debug-breakpoint-disabled`,{fontCharacter:`\\ea71`}),e.debugHint=new e(`debug-hint`,{fontCharacter:`\\ea71`}),e.primitiveSquare=new e(`primitive-square`,{fontCharacter:`\\ea72`}),e.edit=new e(`edit`,{fontCharacter:`\\ea73`}),e.pencil=new e(`pencil`,{fontCharacter:`\\ea73`}),e.info=new e(`info`,{fontCharacter:`\\ea74`}),e.issueOpened=new e(`issue-opened`,{fontCharacter:`\\ea74`}),e.gistPrivate=new e(`gist-private`,{fontCharacter:`\\ea75`}),e.gitForkPrivate=new e(`git-fork-private`,{fontCharacter:`\\ea75`}),e.lock=new e(`lock`,{fontCharacter:`\\ea75`}),e.mirrorPrivate=new e(`mirror-private`,{fontCharacter:`\\ea75`}),e.close=new e(`close`,{fontCharacter:`\\ea76`}),e.removeClose=new e(`remove-close`,{fontCharacter:`\\ea76`}),e.x=new e(`x`,{fontCharacter:`\\ea76`}),e.repoSync=new e(`repo-sync`,{fontCharacter:`\\ea77`}),e.sync=new e(`sync`,{fontCharacter:`\\ea77`}),e.clone=new e(`clone`,{fontCharacter:`\\ea78`}),e.desktopDownload=new e(`desktop-download`,{fontCharacter:`\\ea78`}),e.beaker=new e(`beaker`,{fontCharacter:`\\ea79`}),e.microscope=new e(`microscope`,{fontCharacter:`\\ea79`}),e.vm=new e(`vm`,{fontCharacter:`\\ea7a`}),e.deviceDesktop=new e(`device-desktop`,{fontCharacter:`\\ea7a`}),e.file=new e(`file`,{fontCharacter:`\\ea7b`}),e.fileText=new e(`file-text`,{fontCharacter:`\\ea7b`}),e.more=new e(`more`,{fontCharacter:`\\ea7c`}),e.ellipsis=new e(`ellipsis`,{fontCharacter:`\\ea7c`}),e.kebabHorizontal=new e(`kebab-horizontal`,{fontCharacter:`\\ea7c`}),e.mailReply=new e(`mail-reply`,{fontCharacter:`\\ea7d`}),e.reply=new e(`reply`,{fontCharacter:`\\ea7d`}),e.organization=new e(`organization`,{fontCharacter:`\\ea7e`}),e.organizationFilled=new e(`organization-filled`,{fontCharacter:`\\ea7e`}),e.organizationOutline=new e(`organization-outline`,{fontCharacter:`\\ea7e`}),e.newFile=new e(`new-file`,{fontCharacter:`\\ea7f`}),e.fileAdd=new e(`file-add`,{fontCharacter:`\\ea7f`}),e.newFolder=new e(`new-folder`,{fontCharacter:`\\ea80`}),e.fileDirectoryCreate=new e(`file-directory-create`,{fontCharacter:`\\ea80`}),e.trash=new e(`trash`,{fontCharacter:`\\ea81`}),e.trashcan=new e(`trashcan`,{fontCharacter:`\\ea81`}),e.history=new e(`history`,{fontCharacter:`\\ea82`}),e.clock=new e(`clock`,{fontCharacter:`\\ea82`}),e.folder=new e(`folder`,{fontCharacter:`\\ea83`}),e.fileDirectory=new e(`file-directory`,{fontCharacter:`\\ea83`}),e.symbolFolder=new e(`symbol-folder`,{fontCharacter:`\\ea83`}),e.logoGithub=new e(`logo-github`,{fontCharacter:`\\ea84`}),e.markGithub=new e(`mark-github`,{fontCharacter:`\\ea84`}),e.github=new e(`github`,{fontCharacter:`\\ea84`}),e.terminal=new e(`terminal`,{fontCharacter:`\\ea85`}),e.console=new e(`console`,{fontCharacter:`\\ea85`}),e.repl=new e(`repl`,{fontCharacter:`\\ea85`}),e.zap=new e(`zap`,{fontCharacter:`\\ea86`}),e.symbolEvent=new e(`symbol-event`,{fontCharacter:`\\ea86`}),e.error=new e(`error`,{fontCharacter:`\\ea87`}),e.stop=new e(`stop`,{fontCharacter:`\\ea87`}),e.variable=new e(`variable`,{fontCharacter:`\\ea88`}),e.symbolVariable=new e(`symbol-variable`,{fontCharacter:`\\ea88`}),e.array=new e(`array`,{fontCharacter:`\\ea8a`}),e.symbolArray=new e(`symbol-array`,{fontCharacter:`\\ea8a`}),e.symbolModule=new e(`symbol-module`,{fontCharacter:`\\ea8b`}),e.symbolPackage=new e(`symbol-package`,{fontCharacter:`\\ea8b`}),e.symbolNamespace=new e(`symbol-namespace`,{fontCharacter:`\\ea8b`}),e.symbolObject=new e(`symbol-object`,{fontCharacter:`\\ea8b`}),e.symbolMethod=new e(`symbol-method`,{fontCharacter:`\\ea8c`}),e.symbolFunction=new e(`symbol-function`,{fontCharacter:`\\ea8c`}),e.symbolConstructor=new e(`symbol-constructor`,{fontCharacter:`\\ea8c`}),e.symbolBoolean=new e(`symbol-boolean`,{fontCharacter:`\\ea8f`}),e.symbolNull=new e(`symbol-null`,{fontCharacter:`\\ea8f`}),e.symbolNumeric=new e(`symbol-numeric`,{fontCharacter:`\\ea90`}),e.symbolNumber=new e(`symbol-number`,{fontCharacter:`\\ea90`}),e.symbolStructure=new e(`symbol-structure`,{fontCharacter:`\\ea91`}),e.symbolStruct=new e(`symbol-struct`,{fontCharacter:`\\ea91`}),e.symbolParameter=new e(`symbol-parameter`,{fontCharacter:`\\ea92`}),e.symbolTypeParameter=new e(`symbol-type-parameter`,{fontCharacter:`\\ea92`}),e.symbolKey=new e(`symbol-key`,{fontCharacter:`\\ea93`}),e.symbolText=new e(`symbol-text`,{fontCharacter:`\\ea93`}),e.symbolReference=new e(`symbol-reference`,{fontCharacter:`\\ea94`}),e.goToFile=new e(`go-to-file`,{fontCharacter:`\\ea94`}),e.symbolEnum=new e(`symbol-enum`,{fontCharacter:`\\ea95`}),e.symbolValue=new e(`symbol-value`,{fontCharacter:`\\ea95`}),e.symbolRuler=new e(`symbol-ruler`,{fontCharacter:`\\ea96`}),e.symbolUnit=new e(`symbol-unit`,{fontCharacter:`\\ea96`}),e.activateBreakpoints=new e(`activate-breakpoints`,{fontCharacter:`\\ea97`}),e.archive=new e(`archive`,{fontCharacter:`\\ea98`}),e.arrowBoth=new e(`arrow-both`,{fontCharacter:`\\ea99`}),e.arrowDown=new e(`arrow-down`,{fontCharacter:`\\ea9a`}),e.arrowLeft=new e(`arrow-left`,{fontCharacter:`\\ea9b`}),e.arrowRight=new e(`arrow-right`,{fontCharacter:`\\ea9c`}),e.arrowSmallDown=new e(`arrow-small-down`,{fontCharacter:`\\ea9d`}),e.arrowSmallLeft=new e(`arrow-small-left`,{fontCharacter:`\\ea9e`}),e.arrowSmallRight=new e(`arrow-small-right`,{fontCharacter:`\\ea9f`}),e.arrowSmallUp=new e(`arrow-small-up`,{fontCharacter:`\\eaa0`}),e.arrowUp=new e(`arrow-up`,{fontCharacter:`\\eaa1`}),e.bell=new e(`bell`,{fontCharacter:`\\eaa2`}),e.bold=new e(`bold`,{fontCharacter:`\\eaa3`}),e.book=new e(`book`,{fontCharacter:`\\eaa4`}),e.bookmark=new e(`bookmark`,{fontCharacter:`\\eaa5`}),e.debugBreakpointConditionalUnverified=new e(`debug-breakpoint-conditional-unverified`,{fontCharacter:`\\eaa6`}),e.debugBreakpointConditional=new e(`debug-breakpoint-conditional`,{fontCharacter:`\\eaa7`}),e.debugBreakpointConditionalDisabled=new e(`debug-breakpoint-conditional-disabled`,{fontCharacter:`\\eaa7`}),e.debugBreakpointDataUnverified=new e(`debug-breakpoint-data-unverified`,{fontCharacter:`\\eaa8`}),e.debugBreakpointData=new e(`debug-breakpoint-data`,{fontCharacter:`\\eaa9`}),e.debugBreakpointDataDisabled=new e(`debug-breakpoint-data-disabled`,{fontCharacter:`\\eaa9`}),e.debugBreakpointLogUnverified=new e(`debug-breakpoint-log-unverified`,{fontCharacter:`\\eaaa`}),e.debugBreakpointLog=new e(`debug-breakpoint-log`,{fontCharacter:`\\eaab`}),e.debugBreakpointLogDisabled=new e(`debug-breakpoint-log-disabled`,{fontCharacter:`\\eaab`}),e.briefcase=new e(`briefcase`,{fontCharacter:`\\eaac`}),e.broadcast=new e(`broadcast`,{fontCharacter:`\\eaad`}),e.browser=new e(`browser`,{fontCharacter:`\\eaae`}),e.bug=new e(`bug`,{fontCharacter:`\\eaaf`}),e.calendar=new e(`calendar`,{fontCharacter:`\\eab0`}),e.caseSensitive=new e(`case-sensitive`,{fontCharacter:`\\eab1`}),e.check=new e(`check`,{fontCharacter:`\\eab2`}),e.checklist=new e(`checklist`,{fontCharacter:`\\eab3`}),e.chevronDown=new e(`chevron-down`,{fontCharacter:`\\eab4`}),e.dropDownButton=new e(`drop-down-button`,e.chevronDown.definition),e.chevronLeft=new e(`chevron-left`,{fontCharacter:`\\eab5`}),e.chevronRight=new e(`chevron-right`,{fontCharacter:`\\eab6`}),e.chevronUp=new e(`chevron-up`,{fontCharacter:`\\eab7`}),e.chromeClose=new e(`chrome-close`,{fontCharacter:`\\eab8`}),e.chromeMaximize=new e(`chrome-maximize`,{fontCharacter:`\\eab9`}),e.chromeMinimize=new e(`chrome-minimize`,{fontCharacter:`\\eaba`}),e.chromeRestore=new e(`chrome-restore`,{fontCharacter:`\\eabb`}),e.circleOutline=new e(`circle-outline`,{fontCharacter:`\\eabc`}),e.debugBreakpointUnverified=new e(`debug-breakpoint-unverified`,{fontCharacter:`\\eabc`}),e.circleSlash=new e(`circle-slash`,{fontCharacter:`\\eabd`}),e.circuitBoard=new e(`circuit-board`,{fontCharacter:`\\eabe`}),e.clearAll=new e(`clear-all`,{fontCharacter:`\\eabf`}),e.clippy=new e(`clippy`,{fontCharacter:`\\eac0`}),e.closeAll=new e(`close-all`,{fontCharacter:`\\eac1`}),e.cloudDownload=new e(`cloud-download`,{fontCharacter:`\\eac2`}),e.cloudUpload=new e(`cloud-upload`,{fontCharacter:`\\eac3`}),e.code=new e(`code`,{fontCharacter:`\\eac4`}),e.collapseAll=new e(`collapse-all`,{fontCharacter:`\\eac5`}),e.colorMode=new e(`color-mode`,{fontCharacter:`\\eac6`}),e.commentDiscussion=new e(`comment-discussion`,{fontCharacter:`\\eac7`}),e.compareChanges=new e(`compare-changes`,{fontCharacter:`\\eafd`}),e.creditCard=new e(`credit-card`,{fontCharacter:`\\eac9`}),e.dash=new e(`dash`,{fontCharacter:`\\eacc`}),e.dashboard=new e(`dashboard`,{fontCharacter:`\\eacd`}),e.database=new e(`database`,{fontCharacter:`\\eace`}),e.debugContinue=new e(`debug-continue`,{fontCharacter:`\\eacf`}),e.debugDisconnect=new e(`debug-disconnect`,{fontCharacter:`\\ead0`}),e.debugPause=new e(`debug-pause`,{fontCharacter:`\\ead1`}),e.debugRestart=new e(`debug-restart`,{fontCharacter:`\\ead2`}),e.debugStart=new e(`debug-start`,{fontCharacter:`\\ead3`}),e.debugStepInto=new e(`debug-step-into`,{fontCharacter:`\\ead4`}),e.debugStepOut=new e(`debug-step-out`,{fontCharacter:`\\ead5`}),e.debugStepOver=new e(`debug-step-over`,{fontCharacter:`\\ead6`}),e.debugStop=new e(`debug-stop`,{fontCharacter:`\\ead7`}),e.debug=new e(`debug`,{fontCharacter:`\\ead8`}),e.deviceCameraVideo=new e(`device-camera-video`,{fontCharacter:`\\ead9`}),e.deviceCamera=new e(`device-camera`,{fontCharacter:`\\eada`}),e.deviceMobile=new e(`device-mobile`,{fontCharacter:`\\eadb`}),e.diffAdded=new e(`diff-added`,{fontCharacter:`\\eadc`}),e.diffIgnored=new e(`diff-ignored`,{fontCharacter:`\\eadd`}),e.diffModified=new e(`diff-modified`,{fontCharacter:`\\eade`}),e.diffRemoved=new e(`diff-removed`,{fontCharacter:`\\eadf`}),e.diffRenamed=new e(`diff-renamed`,{fontCharacter:`\\eae0`}),e.diff=new e(`diff`,{fontCharacter:`\\eae1`}),e.discard=new e(`discard`,{fontCharacter:`\\eae2`}),e.editorLayout=new e(`editor-layout`,{fontCharacter:`\\eae3`}),e.emptyWindow=new e(`empty-window`,{fontCharacter:`\\eae4`}),e.exclude=new e(`exclude`,{fontCharacter:`\\eae5`}),e.extensions=new e(`extensions`,{fontCharacter:`\\eae6`}),e.eyeClosed=new e(`eye-closed`,{fontCharacter:`\\eae7`}),e.fileBinary=new e(`file-binary`,{fontCharacter:`\\eae8`}),e.fileCode=new e(`file-code`,{fontCharacter:`\\eae9`}),e.fileMedia=new e(`file-media`,{fontCharacter:`\\eaea`}),e.filePdf=new e(`file-pdf`,{fontCharacter:`\\eaeb`}),e.fileSubmodule=new e(`file-submodule`,{fontCharacter:`\\eaec`}),e.fileSymlinkDirectory=new e(`file-symlink-directory`,{fontCharacter:`\\eaed`}),e.fileSymlinkFile=new e(`file-symlink-file`,{fontCharacter:`\\eaee`}),e.fileZip=new e(`file-zip`,{fontCharacter:`\\eaef`}),e.files=new e(`files`,{fontCharacter:`\\eaf0`}),e.filter=new e(`filter`,{fontCharacter:`\\eaf1`}),e.flame=new e(`flame`,{fontCharacter:`\\eaf2`}),e.foldDown=new e(`fold-down`,{fontCharacter:`\\eaf3`}),e.foldUp=new e(`fold-up`,{fontCharacter:`\\eaf4`}),e.fold=new e(`fold`,{fontCharacter:`\\eaf5`}),e.folderActive=new e(`folder-active`,{fontCharacter:`\\eaf6`}),e.folderOpened=new e(`folder-opened`,{fontCharacter:`\\eaf7`}),e.gear=new e(`gear`,{fontCharacter:`\\eaf8`}),e.gift=new e(`gift`,{fontCharacter:`\\eaf9`}),e.gistSecret=new e(`gist-secret`,{fontCharacter:`\\eafa`}),e.gist=new e(`gist`,{fontCharacter:`\\eafb`}),e.gitCommit=new e(`git-commit`,{fontCharacter:`\\eafc`}),e.gitCompare=new e(`git-compare`,{fontCharacter:`\\eafd`}),e.gitMerge=new e(`git-merge`,{fontCharacter:`\\eafe`}),e.githubAction=new e(`github-action`,{fontCharacter:`\\eaff`}),e.githubAlt=new e(`github-alt`,{fontCharacter:`\\eb00`}),e.globe=new e(`globe`,{fontCharacter:`\\eb01`}),e.grabber=new e(`grabber`,{fontCharacter:`\\eb02`}),e.graph=new e(`graph`,{fontCharacter:`\\eb03`}),e.gripper=new e(`gripper`,{fontCharacter:`\\eb04`}),e.heart=new e(`heart`,{fontCharacter:`\\eb05`}),e.home=new e(`home`,{fontCharacter:`\\eb06`}),e.horizontalRule=new e(`horizontal-rule`,{fontCharacter:`\\eb07`}),e.hubot=new e(`hubot`,{fontCharacter:`\\eb08`}),e.inbox=new e(`inbox`,{fontCharacter:`\\eb09`}),e.issueClosed=new e(`issue-closed`,{fontCharacter:`\\eba4`}),e.issueReopened=new e(`issue-reopened`,{fontCharacter:`\\eb0b`}),e.issues=new e(`issues`,{fontCharacter:`\\eb0c`}),e.italic=new e(`italic`,{fontCharacter:`\\eb0d`}),e.jersey=new e(`jersey`,{fontCharacter:`\\eb0e`}),e.json=new e(`json`,{fontCharacter:`\\eb0f`}),e.kebabVertical=new e(`kebab-vertical`,{fontCharacter:`\\eb10`}),e.key=new e(`key`,{fontCharacter:`\\eb11`}),e.law=new e(`law`,{fontCharacter:`\\eb12`}),e.lightbulbAutofix=new e(`lightbulb-autofix`,{fontCharacter:`\\eb13`}),e.linkExternal=new e(`link-external`,{fontCharacter:`\\eb14`}),e.link=new e(`link`,{fontCharacter:`\\eb15`}),e.listOrdered=new e(`list-ordered`,{fontCharacter:`\\eb16`}),e.listUnordered=new e(`list-unordered`,{fontCharacter:`\\eb17`}),e.liveShare=new e(`live-share`,{fontCharacter:`\\eb18`}),e.loading=new e(`loading`,{fontCharacter:`\\eb19`}),e.location=new e(`location`,{fontCharacter:`\\eb1a`}),e.mailRead=new e(`mail-read`,{fontCharacter:`\\eb1b`}),e.mail=new e(`mail`,{fontCharacter:`\\eb1c`}),e.markdown=new e(`markdown`,{fontCharacter:`\\eb1d`}),e.megaphone=new e(`megaphone`,{fontCharacter:`\\eb1e`}),e.mention=new e(`mention`,{fontCharacter:`\\eb1f`}),e.milestone=new e(`milestone`,{fontCharacter:`\\eb20`}),e.mortarBoard=new e(`mortar-board`,{fontCharacter:`\\eb21`}),e.move=new e(`move`,{fontCharacter:`\\eb22`}),e.multipleWindows=new e(`multiple-windows`,{fontCharacter:`\\eb23`}),e.mute=new e(`mute`,{fontCharacter:`\\eb24`}),e.noNewline=new e(`no-newline`,{fontCharacter:`\\eb25`}),e.note=new e(`note`,{fontCharacter:`\\eb26`}),e.octoface=new e(`octoface`,{fontCharacter:`\\eb27`}),e.openPreview=new e(`open-preview`,{fontCharacter:`\\eb28`}),e.package_=new e(`package`,{fontCharacter:`\\eb29`}),e.paintcan=new e(`paintcan`,{fontCharacter:`\\eb2a`}),e.pin=new e(`pin`,{fontCharacter:`\\eb2b`}),e.play=new e(`play`,{fontCharacter:`\\eb2c`}),e.run=new e(`run`,{fontCharacter:`\\eb2c`}),e.plug=new e(`plug`,{fontCharacter:`\\eb2d`}),e.preserveCase=new e(`preserve-case`,{fontCharacter:`\\eb2e`}),e.preview=new e(`preview`,{fontCharacter:`\\eb2f`}),e.project=new e(`project`,{fontCharacter:`\\eb30`}),e.pulse=new e(`pulse`,{fontCharacter:`\\eb31`}),e.question=new e(`question`,{fontCharacter:`\\eb32`}),e.quote=new e(`quote`,{fontCharacter:`\\eb33`}),e.radioTower=new e(`radio-tower`,{fontCharacter:`\\eb34`}),e.reactions=new e(`reactions`,{fontCharacter:`\\eb35`}),e.references=new e(`references`,{fontCharacter:`\\eb36`}),e.refresh=new e(`refresh`,{fontCharacter:`\\eb37`}),e.regex=new e(`regex`,{fontCharacter:`\\eb38`}),e.remoteExplorer=new e(`remote-explorer`,{fontCharacter:`\\eb39`}),e.remote=new e(`remote`,{fontCharacter:`\\eb3a`}),e.remove=new e(`remove`,{fontCharacter:`\\eb3b`}),e.replaceAll=new e(`replace-all`,{fontCharacter:`\\eb3c`}),e.replace=new e(`replace`,{fontCharacter:`\\eb3d`}),e.repoClone=new e(`repo-clone`,{fontCharacter:`\\eb3e`}),e.repoForcePush=new e(`repo-force-push`,{fontCharacter:`\\eb3f`}),e.repoPull=new e(`repo-pull`,{fontCharacter:`\\eb40`}),e.repoPush=new e(`repo-push`,{fontCharacter:`\\eb41`}),e.report=new e(`report`,{fontCharacter:`\\eb42`}),e.requestChanges=new e(`request-changes`,{fontCharacter:`\\eb43`}),e.rocket=new e(`rocket`,{fontCharacter:`\\eb44`}),e.rootFolderOpened=new e(`root-folder-opened`,{fontCharacter:`\\eb45`}),e.rootFolder=new e(`root-folder`,{fontCharacter:`\\eb46`}),e.rss=new e(`rss`,{fontCharacter:`\\eb47`}),e.ruby=new e(`ruby`,{fontCharacter:`\\eb48`}),e.saveAll=new e(`save-all`,{fontCharacter:`\\eb49`}),e.saveAs=new e(`save-as`,{fontCharacter:`\\eb4a`}),e.save=new e(`save`,{fontCharacter:`\\eb4b`}),e.screenFull=new e(`screen-full`,{fontCharacter:`\\eb4c`}),e.screenNormal=new e(`screen-normal`,{fontCharacter:`\\eb4d`}),e.searchStop=new e(`search-stop`,{fontCharacter:`\\eb4e`}),e.server=new e(`server`,{fontCharacter:`\\eb50`}),e.settingsGear=new e(`settings-gear`,{fontCharacter:`\\eb51`}),e.settings=new e(`settings`,{fontCharacter:`\\eb52`}),e.shield=new e(`shield`,{fontCharacter:`\\eb53`}),e.smiley=new e(`smiley`,{fontCharacter:`\\eb54`}),e.sortPrecedence=new e(`sort-precedence`,{fontCharacter:`\\eb55`}),e.splitHorizontal=new e(`split-horizontal`,{fontCharacter:`\\eb56`}),e.splitVertical=new e(`split-vertical`,{fontCharacter:`\\eb57`}),e.squirrel=new e(`squirrel`,{fontCharacter:`\\eb58`}),e.starFull=new e(`star-full`,{fontCharacter:`\\eb59`}),e.starHalf=new e(`star-half`,{fontCharacter:`\\eb5a`}),e.symbolClass=new e(`symbol-class`,{fontCharacter:`\\eb5b`}),e.symbolColor=new e(`symbol-color`,{fontCharacter:`\\eb5c`}),e.symbolConstant=new e(`symbol-constant`,{fontCharacter:`\\eb5d`}),e.symbolEnumMember=new e(`symbol-enum-member`,{fontCharacter:`\\eb5e`}),e.symbolField=new e(`symbol-field`,{fontCharacter:`\\eb5f`}),e.symbolFile=new e(`symbol-file`,{fontCharacter:`\\eb60`}),e.symbolInterface=new e(`symbol-interface`,{fontCharacter:`\\eb61`}),e.symbolKeyword=new e(`symbol-keyword`,{fontCharacter:`\\eb62`}),e.symbolMisc=new e(`symbol-misc`,{fontCharacter:`\\eb63`}),e.symbolOperator=new e(`symbol-operator`,{fontCharacter:`\\eb64`}),e.symbolProperty=new e(`symbol-property`,{fontCharacter:`\\eb65`}),e.wrench=new e(`wrench`,{fontCharacter:`\\eb65`}),e.wrenchSubaction=new e(`wrench-subaction`,{fontCharacter:`\\eb65`}),e.symbolSnippet=new e(`symbol-snippet`,{fontCharacter:`\\eb66`}),e.tasklist=new e(`tasklist`,{fontCharacter:`\\eb67`}),e.telescope=new e(`telescope`,{fontCharacter:`\\eb68`}),e.textSize=new e(`text-size`,{fontCharacter:`\\eb69`}),e.threeBars=new e(`three-bars`,{fontCharacter:`\\eb6a`}),e.thumbsdown=new e(`thumbsdown`,{fontCharacter:`\\eb6b`}),e.thumbsup=new e(`thumbsup`,{fontCharacter:`\\eb6c`}),e.tools=new e(`tools`,{fontCharacter:`\\eb6d`}),e.triangleDown=new e(`triangle-down`,{fontCharacter:`\\eb6e`}),e.triangleLeft=new e(`triangle-left`,{fontCharacter:`\\eb6f`}),e.triangleRight=new e(`triangle-right`,{fontCharacter:`\\eb70`}),e.triangleUp=new e(`triangle-up`,{fontCharacter:`\\eb71`}),e.twitter=new e(`twitter`,{fontCharacter:`\\eb72`}),e.unfold=new e(`unfold`,{fontCharacter:`\\eb73`}),e.unlock=new e(`unlock`,{fontCharacter:`\\eb74`}),e.unmute=new e(`unmute`,{fontCharacter:`\\eb75`}),e.unverified=new e(`unverified`,{fontCharacter:`\\eb76`}),e.verified=new e(`verified`,{fontCharacter:`\\eb77`}),e.versions=new e(`versions`,{fontCharacter:`\\eb78`}),e.vmActive=new e(`vm-active`,{fontCharacter:`\\eb79`}),e.vmOutline=new e(`vm-outline`,{fontCharacter:`\\eb7a`}),e.vmRunning=new e(`vm-running`,{fontCharacter:`\\eb7b`}),e.watch=new e(`watch`,{fontCharacter:`\\eb7c`}),e.whitespace=new e(`whitespace`,{fontCharacter:`\\eb7d`}),e.wholeWord=new e(`whole-word`,{fontCharacter:`\\eb7e`}),e.window=new e(`window`,{fontCharacter:`\\eb7f`}),e.wordWrap=new e(`word-wrap`,{fontCharacter:`\\eb80`}),e.zoomIn=new e(`zoom-in`,{fontCharacter:`\\eb81`}),e.zoomOut=new e(`zoom-out`,{fontCharacter:`\\eb82`}),e.listFilter=new e(`list-filter`,{fontCharacter:`\\eb83`}),e.listFlat=new e(`list-flat`,{fontCharacter:`\\eb84`}),e.listSelection=new e(`list-selection`,{fontCharacter:`\\eb85`}),e.selection=new e(`selection`,{fontCharacter:`\\eb85`}),e.listTree=new e(`list-tree`,{fontCharacter:`\\eb86`}),e.debugBreakpointFunctionUnverified=new e(`debug-breakpoint-function-unverified`,{fontCharacter:`\\eb87`}),e.debugBreakpointFunction=new e(`debug-breakpoint-function`,{fontCharacter:`\\eb88`}),e.debugBreakpointFunctionDisabled=new e(`debug-breakpoint-function-disabled`,{fontCharacter:`\\eb88`}),e.debugStackframeActive=new e(`debug-stackframe-active`,{fontCharacter:`\\eb89`}),e.debugStackframeDot=new e(`debug-stackframe-dot`,{fontCharacter:`\\eb8a`}),e.debugStackframe=new e(`debug-stackframe`,{fontCharacter:`\\eb8b`}),e.debugStackframeFocused=new e(`debug-stackframe-focused`,{fontCharacter:`\\eb8b`}),e.debugBreakpointUnsupported=new e(`debug-breakpoint-unsupported`,{fontCharacter:`\\eb8c`}),e.symbolString=new e(`symbol-string`,{fontCharacter:`\\eb8d`}),e.debugReverseContinue=new e(`debug-reverse-continue`,{fontCharacter:`\\eb8e`}),e.debugStepBack=new e(`debug-step-back`,{fontCharacter:`\\eb8f`}),e.debugRestartFrame=new e(`debug-restart-frame`,{fontCharacter:`\\eb90`}),e.callIncoming=new e(`call-incoming`,{fontCharacter:`\\eb92`}),e.callOutgoing=new e(`call-outgoing`,{fontCharacter:`\\eb93`}),e.menu=new e(`menu`,{fontCharacter:`\\eb94`}),e.expandAll=new e(`expand-all`,{fontCharacter:`\\eb95`}),e.feedback=new e(`feedback`,{fontCharacter:`\\eb96`}),e.groupByRefType=new e(`group-by-ref-type`,{fontCharacter:`\\eb97`}),e.ungroupByRefType=new e(`ungroup-by-ref-type`,{fontCharacter:`\\eb98`}),e.account=new e(`account`,{fontCharacter:`\\eb99`}),e.bellDot=new e(`bell-dot`,{fontCharacter:`\\eb9a`}),e.debugConsole=new e(`debug-console`,{fontCharacter:`\\eb9b`}),e.library=new e(`library`,{fontCharacter:`\\eb9c`}),e.output=new e(`output`,{fontCharacter:`\\eb9d`}),e.runAll=new e(`run-all`,{fontCharacter:`\\eb9e`}),e.syncIgnored=new e(`sync-ignored`,{fontCharacter:`\\eb9f`}),e.pinned=new e(`pinned`,{fontCharacter:`\\eba0`}),e.githubInverted=new e(`github-inverted`,{fontCharacter:`\\eba1`}),e.debugAlt=new e(`debug-alt`,{fontCharacter:`\\eb91`}),e.serverProcess=new e(`server-process`,{fontCharacter:`\\eba2`}),e.serverEnvironment=new e(`server-environment`,{fontCharacter:`\\eba3`}),e.pass=new e(`pass`,{fontCharacter:`\\eba4`}),e.stopCircle=new e(`stop-circle`,{fontCharacter:`\\eba5`}),e.playCircle=new e(`play-circle`,{fontCharacter:`\\eba6`}),e.record=new e(`record`,{fontCharacter:`\\eba7`}),e.debugAltSmall=new e(`debug-alt-small`,{fontCharacter:`\\eba8`}),e.vmConnect=new e(`vm-connect`,{fontCharacter:`\\eba9`}),e.cloud=new e(`cloud`,{fontCharacter:`\\ebaa`}),e.merge=new e(`merge`,{fontCharacter:`\\ebab`}),e.exportIcon=new e(`export`,{fontCharacter:`\\ebac`}),e.graphLeft=new e(`graph-left`,{fontCharacter:`\\ebad`}),e.magnet=new e(`magnet`,{fontCharacter:`\\ebae`}),e.notebook=new e(`notebook`,{fontCharacter:`\\ebaf`}),e.redo=new e(`redo`,{fontCharacter:`\\ebb0`}),e.checkAll=new e(`check-all`,{fontCharacter:`\\ebb1`}),e.pinnedDirty=new e(`pinned-dirty`,{fontCharacter:`\\ebb2`}),e.passFilled=new e(`pass-filled`,{fontCharacter:`\\ebb3`}),e.circleLargeFilled=new e(`circle-large-filled`,{fontCharacter:`\\ebb4`}),e.circleLargeOutline=new e(`circle-large-outline`,{fontCharacter:`\\ebb5`}),e.combine=new e(`combine`,{fontCharacter:`\\ebb6`}),e.gather=new e(`gather`,{fontCharacter:`\\ebb6`}),e.table=new e(`table`,{fontCharacter:`\\ebb7`}),e.variableGroup=new e(`variable-group`,{fontCharacter:`\\ebb8`}),e.typeHierarchy=new e(`type-hierarchy`,{fontCharacter:`\\ebb9`}),e.typeHierarchySub=new e(`type-hierarchy-sub`,{fontCharacter:`\\ebba`}),e.typeHierarchySuper=new e(`type-hierarchy-super`,{fontCharacter:`\\ebbb`}),e.gitPullRequestCreate=new e(`git-pull-request-create`,{fontCharacter:`\\ebbc`}),e.runAbove=new e(`run-above`,{fontCharacter:`\\ebbd`}),e.runBelow=new e(`run-below`,{fontCharacter:`\\ebbe`}),e.notebookTemplate=new e(`notebook-template`,{fontCharacter:`\\ebbf`}),e.debugRerun=new e(`debug-rerun`,{fontCharacter:`\\ebc0`}),e.workspaceTrusted=new e(`workspace-trusted`,{fontCharacter:`\\ebc1`}),e.workspaceUntrusted=new e(`workspace-untrusted`,{fontCharacter:`\\ebc2`}),e.workspaceUnspecified=new e(`workspace-unspecified`,{fontCharacter:`\\ebc3`}),e.terminalCmd=new e(`terminal-cmd`,{fontCharacter:`\\ebc4`}),e.terminalDebian=new e(`terminal-debian`,{fontCharacter:`\\ebc5`}),e.terminalLinux=new e(`terminal-linux`,{fontCharacter:`\\ebc6`}),e.terminalPowershell=new e(`terminal-powershell`,{fontCharacter:`\\ebc7`}),e.terminalTmux=new e(`terminal-tmux`,{fontCharacter:`\\ebc8`}),e.terminalUbuntu=new e(`terminal-ubuntu`,{fontCharacter:`\\ebc9`}),e.terminalBash=new e(`terminal-bash`,{fontCharacter:`\\ebca`}),e.arrowSwap=new e(`arrow-swap`,{fontCharacter:`\\ebcb`}),e.copy=new e(`copy`,{fontCharacter:`\\ebcc`}),e.personAdd=new e(`person-add`,{fontCharacter:`\\ebcd`}),e.filterFilled=new e(`filter-filled`,{fontCharacter:`\\ebce`}),e.wand=new e(`wand`,{fontCharacter:`\\ebcf`}),e.debugLineByLine=new e(`debug-line-by-line`,{fontCharacter:`\\ebd0`}),e.inspect=new e(`inspect`,{fontCharacter:`\\ebd1`}),e.layers=new e(`layers`,{fontCharacter:`\\ebd2`}),e.layersDot=new e(`layers-dot`,{fontCharacter:`\\ebd3`}),e.layersActive=new e(`layers-active`,{fontCharacter:`\\ebd4`}),e.compass=new e(`compass`,{fontCharacter:`\\ebd5`}),e.compassDot=new e(`compass-dot`,{fontCharacter:`\\ebd6`}),e.compassActive=new e(`compass-active`,{fontCharacter:`\\ebd7`}),e.azure=new e(`azure`,{fontCharacter:`\\ebd8`}),e.issueDraft=new e(`issue-draft`,{fontCharacter:`\\ebd9`}),e.gitPullRequestClosed=new e(`git-pull-request-closed`,{fontCharacter:`\\ebda`}),e.gitPullRequestDraft=new e(`git-pull-request-draft`,{fontCharacter:`\\ebdb`}),e.debugAll=new e(`debug-all`,{fontCharacter:`\\ebdc`}),e.debugCoverage=new e(`debug-coverage`,{fontCharacter:`\\ebdd`}),e.runErrors=new e(`run-errors`,{fontCharacter:`\\ebde`}),e.folderLibrary=new e(`folder-library`,{fontCharacter:`\\ebdf`}),e.debugContinueSmall=new e(`debug-continue-small`,{fontCharacter:`\\ebe0`}),e.beakerStop=new e(`beaker-stop`,{fontCharacter:`\\ebe1`}),e.graphLine=new e(`graph-line`,{fontCharacter:`\\ebe2`}),e.graphScatter=new e(`graph-scatter`,{fontCharacter:`\\ebe3`}),e.pieChart=new e(`pie-chart`,{fontCharacter:`\\ebe4`}),e.bracket=new e(`bracket`,e.json.definition),e.bracketDot=new e(`bracket-dot`,{fontCharacter:`\\ebe5`}),e.bracketError=new e(`bracket-error`,{fontCharacter:`\\ebe6`}),e.lockSmall=new e(`lock-small`,{fontCharacter:`\\ebe7`}),e.azureDevops=new e(`azure-devops`,{fontCharacter:`\\ebe8`}),e.verifiedFilled=new e(`verified-filled`,{fontCharacter:`\\ebe9`})})($l||={});var tu=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let t=`mtk`+this.getForeground(e),n=this.getFontStyle(e);return n&1&&(t+=` mtki`),n&2&&(t+=` mtkb`),n&4&&(t+=` mtku`),t}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),r=this.getFontStyle(e),i=`color: ${t[n]};`;return r&1&&(i+=`font-style: italic;`),r&2&&(i+=`font-weight: bold;`),r&4&&(i+=`text-decoration: underline;`),i}};const nu=(function(){let e=Object.create(null);return e[0]=`symbol-method`,e[1]=`symbol-function`,e[2]=`symbol-constructor`,e[3]=`symbol-field`,e[4]=`symbol-variable`,e[5]=`symbol-class`,e[6]=`symbol-struct`,e[7]=`symbol-interface`,e[8]=`symbol-module`,e[9]=`symbol-property`,e[10]=`symbol-event`,e[11]=`symbol-operator`,e[12]=`symbol-unit`,e[13]=`symbol-value`,e[14]=`symbol-constant`,e[15]=`symbol-enum`,e[16]=`symbol-enum-member`,e[17]=`symbol-keyword`,e[27]=`symbol-snippet`,e[18]=`symbol-text`,e[19]=`symbol-color`,e[20]=`symbol-file`,e[21]=`symbol-reference`,e[22]=`symbol-customcolor`,e[23]=`symbol-folder`,e[24]=`symbol-type-parameter`,e[25]=`account`,e[26]=`issues`,function(t){let n=e[t],r=n&&Xl.get(n);return r||=(console.info(`No codicon found for CompletionItemKind `+t),$l.symbolProperty),r.classNames}})();let ru=(function(){let e=Object.create(null);return e.method=0,e.function=1,e.constructor=2,e.field=3,e.variable=4,e.class=5,e.struct=6,e.interface=7,e.module=8,e.property=9,e.event=10,e.operator=11,e.unit=12,e.value=13,e.constant=14,e.enum=15,e[`enum-member`]=16,e.enumMember=16,e.keyword=17,e.snippet=27,e.text=18,e.color=19,e.file=20,e.reference=21,e.customcolor=22,e.folder=23,e[`type-parameter`]=24,e.typeParameter=24,e.account=25,e.issue=26,function(t,n){let r=e[t];return r===void 0&&!n&&(r=9),r}})();var iu;(function(e){e[e.Automatic=0]=`Automatic`,e[e.Explicit=1]=`Explicit`})(iu||={});var au;(function(e){e[e.Invoke=1]=`Invoke`,e[e.TriggerCharacter=2]=`TriggerCharacter`,e[e.ContentChange=3]=`ContentChange`})(au||={});var ou;(function(e){e[e.Text=0]=`Text`,e[e.Read=1]=`Read`,e[e.Write=2]=`Write`})(ou||={});function su(e){return e&&F.isUri(e.uri)&&L.isIRange(e.range)&&(L.isIRange(e.originSelectionRange)||L.isIRange(e.targetSelectionRange))}var cu;(function(e){let t=new Map;t.set(`file`,0),t.set(`module`,1),t.set(`namespace`,2),t.set(`package`,3),t.set(`class`,4),t.set(`method`,5),t.set(`property`,6),t.set(`field`,7),t.set(`constructor`,8),t.set(`enum`,9),t.set(`interface`,10),t.set(`function`,11),t.set(`variable`,12),t.set(`constant`,13),t.set(`string`,14),t.set(`number`,15),t.set(`boolean`,16),t.set(`array`,17),t.set(`object`,18),t.set(`key`,19),t.set(`null`,20),t.set(`enum-member`,21),t.set(`struct`,22),t.set(`event`,23),t.set(`operator`,24),t.set(`type-parameter`,25);let n=new Map;n.set(0,`file`),n.set(1,`module`),n.set(2,`namespace`),n.set(3,`package`),n.set(4,`class`),n.set(5,`method`),n.set(6,`property`),n.set(7,`field`),n.set(8,`constructor`),n.set(9,`enum`),n.set(10,`interface`),n.set(11,`function`),n.set(12,`variable`),n.set(13,`constant`),n.set(14,`string`),n.set(15,`number`),n.set(16,`boolean`),n.set(17,`array`),n.set(18,`object`),n.set(19,`key`),n.set(20,`null`),n.set(21,`enum-member`),n.set(22,`struct`),n.set(23,`event`),n.set(24,`operator`),n.set(25,`type-parameter`);function r(e){return t.get(e)}e.fromString=r;function i(e){return n.get(e)}e.toString=i;function a(e,t){let r=n.get(e),i=r&&Xl.get(`symbol-`+r);return i||=(console.info(`No codicon found for SymbolKind `+e),$l.symbolProperty),`${t?`inline`:`block`} ${i.classNames}`}e.toCssClassName=a})(cu||={});var lu=class{constructor(e){this.value=e}};lu.Comment=new lu(`comment`),lu.Imports=new lu(`imports`),lu.Region=new lu(`region`);var uu;(function(e){e[e.Other=0]=`Other`,e[e.Type=1]=`Type`,e[e.Parameter=2]=`Parameter`})(uu||={});const du=new Ul,fu=new Ul,pu=new Ul,mu=new Ul,hu=new Ul,gu=new Ul,_u=new Ul,vu=new Ul,yu=new Ul,bu=new Ul,xu=new Ul,Su=new Ul,Cu=new Ul,wu=new Ul,Tu=new Ul,Eu=new Ul,Du=new Ul,Ou=new Ul,ku=new Ul,Au=new Ul,ju=new Ul,Mu=new Ul,Nu=new Ul,Pu=new Ul,Fu=new Ul,Iu=new Jl,Lu=new class{clone(){return this}equals(e){return this===e}},Ru=`vs.editor.nullMode`;function zu(e,t,n,r){return new tr([new er(r,``,e)],n)}function Bu(e,t,n,r){let i=new Uint32Array(2);return i[0]=r,i[1]=(e<<0|16793600)>>>0,new nr(i,n===null?Lu:n)}const Vu=Ur(`editorWorkerService`),Hu=Ur(`modeService`),Uu=Ur(`textModelService`);var Wu=`$initialize`,Gu=!1;function Ku(e){g&&(Gu||(Gu=!0,console.warn(`Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq`)),console.warn(e.message))}var qu=class{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.method=n,this.args=r,this.type=0}},Ju=class{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=1}},Yu=class{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=r,this.type=2}},Xu=class{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}},Zu=class{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}},Qu=class{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){let n=String(++this._lastSentReq);return new Promise((r,i)=>{this._pendingReplies[n]={resolve:r,reject:i},this._send(new qu(this._workerId,n,e,t))})}listen(e,t){let n=null,r=new N({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new Yu(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new Zu(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn(`Got reply to unknown seq`);return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=Error(),n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(e=>{this._send(new Ju(this._workerId,t,e,void 0))},e=>{e.detail instanceof Error&&(e.detail=ut(e.detail)),this._send(new Ju(this._workerId,t,void 0,ut(e)))})}_handleSubscribeEventMessage(e){let t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(e=>{this._send(new Xu(this._workerId,t,e))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn(`Got event for unknown req`);return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn(`Got unsubscribe for unknown req`);return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},$u=class extends j{constructor(e,t,n){super();let r=null;this._worker=this._register(e.create(`vs/base/common/worker/simpleWorker`,e=>{this._protocol.handleMessage(e)},e=>{r&&r(e)})),this._protocol=new Qu({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t)=>{if(typeof n[e]!=`function`)return Promise.reject(Error(`Missing method `+e+` on main thread host.`));try{return Promise.resolve(n[e].apply(n,t))}catch(e){return Promise.reject(e)}},handleEvent:(e,t)=>{if(td(e)){let r=n[e].call(n,t);if(typeof r!=`function`)throw Error(`Missing dynamic event ${e} on main thread host.`);return r}if(ed(e)){let t=n[e];if(typeof t!=`function`)throw Error(`Missing event ${e} on main thread host.`);return t}throw Error(`Malformed event name ${e}`)}}),this._protocol.setWorkerId(this._worker.getId());let i=null;l.require!==void 0&&typeof l.require.getConfig==`function`?i=l.require.getConfig():l.requirejs!==void 0&&(i=l.requirejs.s.contexts._.config);let a=ac(n);this._onModuleLoaded=this._protocol.sendMessage(Wu,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t,a]);let o=(e,t)=>this._request(e,t),s=(e,t)=>this._protocol.listen(e,t);this._lazyProxy=new Promise((e,n)=>{r=n,this._onModuleLoaded.then(t=>{e(nd(t,o,s))},e=>{n(e),this._onError(`Worker failed to load `+t,e)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,r)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,r)},r)})}_onError(e,t){console.error(e),console.info(t)}};function ed(e){return e[0]===`o`&&e[1]===`n`&&Eo(e.charCodeAt(2))}function td(e){return/^onDynamic/.test(e)&&Eo(e.charCodeAt(9))}function nd(e,t,n){let r=e=>function(){return t(e,Array.prototype.slice.call(arguments,0))},i=e=>function(t){return n(e,t)},a={};for(let t of e){if(td(t)){a[t]=i(t);continue}if(ed(t)){a[t]=n(t,void 0);continue}a[t]=r(t)}return a}var rd=window.trustedTypes?.createPolicy(`defaultWorkerFactory`,{createScriptURL:e=>e});function id(e,t){if(l.MonacoEnvironment){if(typeof l.MonacoEnvironment.getWorker==`function`)return l.MonacoEnvironment.getWorker(e,t);if(typeof l.MonacoEnvironment.getWorkerUrl==`function`){let n=l.MonacoEnvironment.getWorkerUrl(e,t);return new Worker(rd?rd.createScriptURL(n):n,{name:t})}}throw Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker`)}function ad(e){return typeof e.then==`function`}var od=class{constructor(e,t,n,r,i){this.id=t;let a=id(`workerMain.js`,n);ad(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(e,[]),this.worker.then(e=>{e.onmessage=function(e){r(e.data)},e.onmessageerror=i,typeof e.addEventListener==`function`&&e.addEventListener(`error`,i)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}},sd=class e{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(t,n,r){let i=++e.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new od(t,i,this._label||`anonymous`+i,n,e=>{Ku(e),this._webWorkerFailedBeforeError=e,r(e)})}};sd.LAST_WORKER_ID=0;var cd;(function(e){e[e.None=0]=`None`,e[e.Indent=1]=`Indent`,e[e.IndentOutdent=2]=`IndentOutdent`,e[e.Outdent=3]=`Outdent`})(cd||={});var ld=class{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case`string`:this._standardTokenMask|=2;break;case`comment`:this._standardTokenMask|=1;break;case`regex`:this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}},ud=class{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)dd(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),dd(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),dd(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),dd(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&dd(this.autoClosingPairsCloseSingleChar,t.close,t)}};function dd(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}function fd(e,t){let n=e.getCount(),r=e.findTokenIndexAtOffset(t),i=e.getLanguageId(r),a=r;for(;a+1<n&&e.getLanguageId(a+1)===i;)a++;let o=r;for(;o>0&&e.getLanguageId(o-1)===i;)o--;return new pd(e,i,o,a+1,e.getStartOffset(o),e.getEndOffset(a))}var pd=class{constructor(e,t,n,r,i,a){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=i,this._lastCharOffset=a}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}};function md(e){return(e&7)!=0}var hd=class e{constructor(t){if(t.autoClosingPairs?this._autoClosingPairs=t.autoClosingPairs.map(e=>new ld(e)):t.brackets?this._autoClosingPairs=t.brackets.map(e=>new ld({open:e[0],close:e[1]})):this._autoClosingPairs=[],t.colorizedBracketPairs?this._colorizedBracketPairs=gd(t.colorizedBracketPairs.map(e=>[e[0],e[1]])):t.brackets?this._colorizedBracketPairs=gd(t.brackets.map(e=>[e[0],e[1]]).filter(e=>!(e[0]===`<`&&e[1]===`>`))):this._colorizedBracketPairs=[],t.__electricCharacterSupport&&t.__electricCharacterSupport.docComment){let e=t.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new ld({open:e.open,close:e.close||``}))}this._autoCloseBefore=typeof t.autoCloseBefore==`string`?t.autoCloseBefore:e.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=t.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,n){if(t.getTokenCount()===0)return!0;let r=t.findTokenIndexAtOffset(n-2),i=t.getStandardTokenType(r);return e.isOK(i)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}};hd.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function gd(e){return e.filter(([e,t])=>e!==``&&t!==``)}var _d;function vd(){return _d||=new TextDecoder(`UTF-16LE`),_d}var yd;function bd(){return yd||=new TextDecoder(`UTF-16BE`),yd}var xd;function Sd(){return xd||=C()?vd():bd(),xd}const Cd=typeof TextDecoder<`u`;let wd,Td;Cd?(wd=e=>new Od(e),Td=Ed):(wd=e=>new kd,Td=Dd);function Ed(e,t,n){let r=new Uint16Array(e.buffer,t,n);return n>0&&(r[0]===65279||r[0]===65534)?Dd(e,t,n):vd().decode(r)}function Dd(e,t,n){let r=[],i=0;for(let a=0;a<n;a++){let n=xs(e,t);t+=2,r[i++]=String.fromCharCode(n)}return r.join(``)}var Od=class{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings===null?this._buildBuffer():(this._flushBuffer(),this._completedStrings.join(``))}_buildBuffer(){if(this._bufferLength===0)return``;let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Sd().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){let t=this._capacity-this._bufferLength;t<=1&&(t===0||jo(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}},kd=class{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join(``)}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}},Ad=class e{constructor(t,n,r,i,a,o){this._richEditBracketBrand=void 0,this.languageId=t,this.index=n,this.open=r,this.close=i,this.forwardRegex=a,this.reversedRegex=o,this._openSet=e._toSet(this.open),this._closeSet=e._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function jd(e){let t=e.length;e=e.map(e=>[e[0].toLowerCase(),e[1].toLowerCase()]);let n=[];for(let e=0;e<t;e++)n[e]=e;let r=(e,t)=>{let[n,r]=e,[i,a]=t;return n===i||n===a||r===i||r===a},i=(e,r)=>{let i=Math.min(e,r),a=Math.max(e,r);for(let e=0;e<t;e++)n[e]===a&&(n[e]=i)};for(let a=0;a<t;a++){let o=e[a];for(let s=a+1;s<t;s++){let t=e[s];r(o,t)&&i(n[a],n[s])}}let a=[];for(let r=0;r<t;r++){let i=[],o=[];for(let a=0;a<t;a++)if(n[a]===r){let[t,n]=e[a];i.push(t),o.push(n)}i.length>0&&a.push({open:i,close:o})}return a}var Md=class{constructor(e,t){this._richEditBracketsBrand=void 0;let n=jd(t);this.brackets=n.map((t,r)=>new Ad(e,r,t.open,t.close,Id(t.open,t.close,n,r),Ld(t.open,t.close,n,r))),this.forwardRegex=Rd(this.brackets),this.reversedRegex=zd(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let e of this.brackets){for(let t of e.open)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,t.length);for(let t of e.close)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,t.length)}}};function Nd(e,t,n,r){for(let i=0,a=t.length;i<a;i++){if(i===n)continue;let a=t[i];for(let t of a.open)t.indexOf(e)>=0&&r.push(t);for(let t of a.close)t.indexOf(e)>=0&&r.push(t)}}function Pd(e,t){return e.length-t.length}function Fd(e){if(e.length<=1)return e;let t=[],n=new Set;for(let r of e)n.has(r)||(t.push(r),n.add(r));return t}function Id(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)Nd(i[e],n,r,i);return i=Fd(i),i.sort(Pd),i.reverse(),Vd(i)}function Ld(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)Nd(i[e],n,r,i);return i=Fd(i),i.sort(Pd),i.reverse(),Vd(i.map(Hd))}function Rd(e){let t=[];for(let n of e){for(let e of n.open)t.push(e);for(let e of n.close)t.push(e)}return t=Fd(t),Vd(t)}function zd(e){let t=[];for(let n of e){for(let e of n.open)t.push(e);for(let e of n.close)t.push(e)}return t=Fd(t),Vd(t.map(Hd))}function Bd(e){let t=/^[\w ]+$/.test(e);return e=so(e),t?`\\b${e}\\b`:e}function Vd(e){return mo(`(${e.map(Bd).join(`)|(`)})`,!0)}var Hd=(function(){function e(e){if(Cd){let t=new Uint16Array(e.length),n=0;for(let r=e.length-1;r>=0;r--)t[n++]=e.charCodeAt(r);return Sd().decode(t)}else{let t=[],n=0;for(let r=e.length-1;r>=0;r--)t[n++]=e.charAt(r);return t.join(``)}}let t=null,n=null;return function(r){return t!==r&&(t=r,n=e(t)),n}})(),Ud=class{static _findPrevBracketInText(e,t,n,r){let i=n.match(e);if(!i)return null;let a=n.length-(i.index||0),o=i[0].length,s=r+a;return new L(t,s-o+1,t,s+1)}static findPrevBracketInRange(e,t,n,r,i){let a=Hd(n).substring(n.length-i,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){let i=n.match(e);if(!i)return null;let a=i.index||0,o=i[0].length;if(o===0)return null;let s=r+a;return new L(t,s+1,t,s+1+o)}static findNextBracketInRange(e,t,n,r,i){let a=n.substring(r,i);return this.findNextBracketInText(e,t,a,r)}},Wd=class{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let t=n.charAt(n.length-1);e.push(t)}return e=e.filter((e,t,n)=>n.indexOf(e)===t),e}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let r=t.findTokenIndexAtOffset(n-1);if(md(t.getStandardTokenType(r)))return null;let i=this._richEditBrackets.reversedRegex,a=t.getLineContent().substring(0,n-1)+e,o=Ud.findPrevBracketInRange(i,1,a,0,a.length);if(!o)return null;let s=a.substring(o.startColumn-1,o.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[s])return null;let c=t.getActualLineContentBefore(o.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:s}:null}};function Gd(e){return e.global&&(e.lastIndex=0),!0}var Kd=class{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Gd(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Gd(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Gd(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Gd(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}},qd=class e{constructor(t){t||={},t.brackets=t.brackets||[[`(`,`)`],[`{`,`}`],[`[`,`]`]],this._brackets=[],t.brackets.forEach(t=>{let n=e._createOpenBracketRegExp(t[0]),r=e._createCloseBracketRegExp(t[1]);n&&r&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:r})}),this._regExpRules=t.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let e=0,i=this._regExpRules.length;e<i;e++){let i=this._regExpRules[e];if([{reg:i.beforeText,text:n},{reg:i.afterText,text:r},{reg:i.previousLineText,text:t}].every(e=>e.reg?(e.reg.lastIndex=0,e.reg.test(e.text)):!0))return i.action}if(e>=2&&n.length>0&&r.length>0)for(let e=0,t=this._brackets.length;e<t;e++){let t=this._brackets[e];if(t.openRegExp.test(n)&&t.closeRegExp.test(r))return{indentAction:cd.IndentOutdent}}if(e>=2&&n.length>0){for(let e=0,t=this._brackets.length;e<t;e++)if(this._brackets[e].openRegExp.test(n))return{indentAction:cd.Indent}}return null}static _createOpenBracketRegExp(t){let n=so(t);return/\B/.test(n.charAt(0))||(n=`\\b`+n),n+=`\\s*$`,e._safeRegExp(n)}static _createCloseBracketRegExp(t){let n=so(t);return/\B/.test(n.charAt(n.length-1))||(n+=`\\b`),n=`^\\s*`+n,e._safeRegExp(n)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return ct(e),null}}};const Jd=new class{constructor(){this.data=new Map}add(e,t){Sc(Ks(e)),Sc(qs(t)),Sc(!this.data.has(e),`There is already an extension with this id`),this.data.set(e,t)}as(e){return this.data.get(e)||null}},Yd={JSONContribution:`base.contributions.json`};function Xd(e){return e.length>0&&e.charAt(e.length-1)===`#`?e.substring(0,e.length-1):e}var Zd=new class{constructor(){this._onDidChangeSchema=new N,this.schemasById={}}registerSchema(e,t){this.schemasById[Xd(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};Jd.add(Yd.JSONContribution,Zd);const Qd={Configuration:`base.contributions.configuration`},$d={properties:{},patternProperties:{}},ef={properties:{},patternProperties:{}},tf={properties:{},patternProperties:{}},nf={properties:{},patternProperties:{}},rf={properties:{},patternProperties:{}},af={properties:{},patternProperties:{}},of=`vscode://schemas/settings/resourceLanguage`;var sf=Jd.as(Yd.JSONContribution),cf=class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new N,this._onDidUpdateConfiguration=new N,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:`defaultOverrides`,title:t(`defaultLanguageConfigurationOverrides.title`,`Default Language Configuration Overrides`),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:`Unknown editor configuration setting`,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},sf.registerSchema(of,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=this.doRegisterConfigurations(e,t);sf.registerSchema(of,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){let n=[];return e.forEach(e=>{n.push(...this.validateAndRegisterProperties(e,t,e.extensionInfo)),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}),n}validateAndRegisterProperties(e,t=!0,n,r=3){r=Qs(e.scope)?r:e.scope;let i=[],a=e.properties;if(a)for(let e in a){if(t&&pf(e)){delete a[e];continue}let o=a[e];if(this.updatePropertyDefaultValue(e,o),lf.test(e)?o.scope=void 0:(o.scope=Qs(o.scope)?r:o.scope,o.restricted=Qs(o.restricted)?!!(n?.restrictedConfigurations)?.includes(e):o.restricted),a[e].hasOwnProperty(`included`)&&!a[e].included){this.excludedConfigurationProperties[e]=a[e],delete a[e];continue}else this.configurationProperties[e]=a[e];!a[e].deprecationMessage&&a[e].markdownDeprecationMessage&&(a[e].deprecationMessage=a[e].markdownDeprecationMessage),i.push(e)}let o=e.allOf;if(o)for(let e of o)i.push(...this.validateAndRegisterProperties(e,t,n,r));return i}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){let t=e=>{let n=e.properties;if(n)for(let e in n)this.updateSchema(e,n[e]);let r=e.allOf;r&&r.forEach(t)};t(e)}updateSchema(e,t){switch($d.properties[e]=t,t.scope){case 1:ef.properties[e]=t;break;case 2:tf.properties[e]=t;break;case 6:nf.properties[e]=t;break;case 3:rf.properties[e]=t;break;case 4:af.properties[e]=t;break;case 5:af.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let n=`[${e}]`,r={type:`object`,description:t(`overrideSettings.defaultDescription`,`Configure editor settings to be overridden for a language.`),errorMessage:t(`overrideSettings.errorMessage`,`This setting does not support per-language configuration.`),$ref:of};this.updatePropertyDefaultValue(n,r),$d.properties[n]=r,ef.properties[n]=r,tf.properties[n]=r,nf.properties[n]=r,rf.properties[n]=r,af.properties[n]=r}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];Xs(n)&&(n=t.default),Xs(n)&&(n=df(t.type)),t.default=n}};const lf=RegExp(`\\[.*\\]$`);function uf(e){return e.substring(1,e.length-1)}function df(e){switch(Array.isArray(e)?e[0]:e){case`boolean`:return!1;case`integer`:case`number`:return 0;case`string`:return``;case`array`:return[];case`object`:return{};default:return null}}var ff=new cf;Jd.add(Qd.Configuration,ff);function pf(e){return e.trim()?lf.test(e)?t(`config.property.languageDefault`,`Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`,e):ff.getConfigurationProperties()[e]===void 0?null:t(`config.property.duplicate`,`Cannot register '{0}'. This property is already registered.`,e):t(`config.property.empty`,`Cannot register an empty property`)}const mf=Ur(`configurationService`);function hf(e,t){let n=Object.create(null);for(let r in e)gf(n,r,e[r],t);return n}function gf(e,t,n,r){let i=t.split(`.`),a=i.pop(),o=e;for(let e=0;e<i.length;e++){let n=i[e],a=o[n];switch(typeof a){case`undefined`:a=o[n]=Object.create(null);break;case`object`:break;default:r(`Ignoring ${t} as ${i.slice(0,e+1).join(`.`)} is ${JSON.stringify(a)}`);return}o=a}if(typeof o==`object`&&o)try{o[a]=n}catch{r(`Ignoring ${t} as ${i.join(`.`)} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${i.join(`.`)} is ${JSON.stringify(o)}`)}function _f(e,t){vf(e,t.split(`.`))}function vf(e,t){let n=t.shift();if(t.length===0){delete e[n];return}if(Object.keys(e).indexOf(n)!==-1){let r=e[n];typeof r==`object`&&!Array.isArray(r)&&(vf(r,t),Object.keys(r).length===0&&delete e[n])}}function yf(e,t,n){function r(e,t){let n=e;for(let e of t){if(typeof n!=`object`||!n)return;n=n[e]}return n}let i=r(e,t.split(`.`));return i===void 0?n:i}function bf(){let e=Jd.as(Qd.Configuration).getConfigurationProperties();return Object.keys(e)}function xf(){let e=Object.create(null),t=Jd.as(Qd.Configuration).getConfigurationProperties();for(let n in t){let r=t[n].default;gf(e,n,r,e=>console.error(`Conflict in default settings: ${e}`))}return e}var Sf=class{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}},Cf=[];function wf(e,t,n){t instanceof Sf||(t=new Sf(t,[],n)),Cf.push([e,t])}function Tf(){return Cf}var Ef=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Df=function(e,t){return function(n,r){t(n,r,e)}},Of=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}};const kf=Ur(`languageConfigurationService`);var Af=class extends j{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new N),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let n=new Set(Object.values(Mf));this._register(this.configurationService.onDidChangeConfiguration(e=>{let t=e.change.keys.some(e=>n.has(e)),r=e.change.overrides.filter(([e,t])=>t.some(e=>n.has(e))).map(([e])=>this.modeService.validateLanguageId(e));if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new Of(void 0));else for(let e of r)e&&(this.configurations.delete(e),this.onDidChangeEmitter.fire(new Of(e)))})),this._register(If.onDidChange(e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new Of(e.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=jf(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};Af=Ef([Df(0,mf),Df(1,Hu)],Af);function jf(e,t,n){let r=If.getLanguageConfiguration(e);if(!r){let t=n.validateLanguageId(e);if(!t)throw Error(`Unexpected languageId`);r=new Bf(t,{})}let i=Nf(r.languageId,t),a=Rf([r.underlyingConfig,i]);return new Bf(r.languageId,a)}var Mf={brackets:`editor.language.brackets`,colorizedBracketPairs:`editor.language.colorizedBracketPairs`};function Nf(e,t){let n=t.getValue(Mf.brackets,{overrideIdentifier:e}),r=t.getValue(Mf.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:Pf(n),colorizedBracketPairs:Pf(r)}}function Pf(e){if(Array.isArray(e))return e.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}var Ff=class{constructor(e){this.languageId=e}};const If=new class{constructor(){this._entries=new Map,this._onDidChange=new N,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let r=this._entries.get(e);r||(r=new Lf(e),this._entries.set(e,r));let i=r.register(t,n);return this._onDidChange.fire(new Ff(e)),Ot(()=>{i.dispose(),this._onDidChange.fire(new Ff(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}getIndentationRules(e){let t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let r=fd(t,n-1),i=this._getElectricCharacterSupport(r.languageId);return i?i.onElectricCharacter(e,r,n-r.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){let t=this._getCharacterPairSupport(e);return new ud(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():hd.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,n){let r=fd(t,n-1);return hd.shouldAutoClosePair(e,r,n-r.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return te(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let r=e.getLanguageIdAtPosition(t,0);if(t>1){let i,a=-1;for(i=t-1;i>=1;i--){if(e.getLanguageIdAtPosition(i,0)!==r)return a;let t=e.getLineContent(i);if(n.shouldIgnore(t)||/^\s+$/.test(t)||t===``){a=i;continue}return i}}return-1}getInheritIndentForLine(e,t,n,r=!0){if(e<4)return null;let i=this.getIndentRulesSupport(t.getLanguageId());if(!i)return null;if(n<=1)return{indentation:``,action:null};let a=this.getPrecedingValidLine(t,n,i);if(a<0)return null;if(a<1)return{indentation:``,action:null};let o=t.getLineContent(a);if(i.shouldIncrease(o)||i.shouldIndentNextLine(o))return{indentation:yo(o),action:cd.Indent,line:a};if(i.shouldDecrease(o))return{indentation:yo(o),action:null,line:a};{if(a===1)return{indentation:yo(t.getLineContent(a)),action:null,line:a};let e=a-1,n=i.getIndentMetadata(t.getLineContent(e));if(!(n&3)&&n&4){let n=0;for(let r=e-1;r>0;r--)if(!i.shouldIndentNextLine(t.getLineContent(r))){n=r;break}return{indentation:yo(t.getLineContent(n+1)),action:null,line:n+1}}if(r)return{indentation:yo(t.getLineContent(a)),action:null,line:a};for(let e=a;e>0;e--){let n=t.getLineContent(e);if(i.shouldIncrease(n))return{indentation:yo(n),action:cd.Indent,line:e};if(i.shouldIndentNextLine(n)){let n=0;for(let r=e-1;r>0;r--)if(!i.shouldIndentNextLine(t.getLineContent(e))){n=r;break}return{indentation:yo(t.getLineContent(n+1)),action:null,line:n+1}}else if(i.shouldDecrease(n))return{indentation:yo(n),action:null,line:e}}return{indentation:yo(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,r,i){if(e<4)return null;let a=this.getLanguageConfiguration(n);if(!a)return null;let o=this.getIndentRulesSupport(n);if(!o)return null;let s=this.getInheritIndentForLine(e,t,r),c=t.getLineContent(r);if(s){let n=s.line;if(n!==void 0){let r=a.onEnter(e,``,t.getLineContent(n),``);if(r){let e=yo(t.getLineContent(n));return r.removeText&&(e=e.substring(0,e.length-r.removeText)),r.indentAction===cd.Indent||r.indentAction===cd.IndentOutdent?e=i.shiftIndent(e):r.indentAction===cd.Outdent&&(e=i.unshiftIndent(e)),o.shouldDecrease(c)&&(e=i.unshiftIndent(e)),r.appendText&&(e+=r.appendText),yo(e)}}return o.shouldDecrease(c)?s.action===cd.Indent?s.indentation:i.unshiftIndent(s.indentation):s.action===cd.Indent?i.shiftIndent(s.indentation):s.indentation}return null}getIndentForEnter(e,t,n,r){if(e<4)return null;t.forceTokenization(n.startLineNumber);let i=t.getLineTokens(n.startLineNumber),a=fd(i,n.startColumn-1),o=a.getLineContent(),s=!1,c;a.firstCharOffset>0&&i.getLanguageId(0)!==a.languageId?(s=!0,c=o.substr(0,n.startColumn-1-a.firstCharOffset)):c=i.getLineContent().substring(0,n.startColumn-1);let l;l=n.isEmpty()?o.substr(n.startColumn-1-a.firstCharOffset):this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-a.firstCharOffset);let u=this.getIndentRulesSupport(a.languageId);if(!u)return null;let d=c,f=yo(c),p={getLineTokens:e=>t.getLineTokens(e),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(e,n)=>t.getLanguageIdAtPosition(e,n),getLineContent:e=>e===n.startLineNumber?d:t.getLineContent(e)},m=yo(i.getLineContent()),h=this.getInheritIndentForLine(e,p,n.startLineNumber+1);if(!h){let e=s?m:f;return{beforeEnter:e,afterEnter:e}}let g=s?m:h.indentation;return h.action===cd.Indent&&(g=r.shiftIndent(g)),u.shouldDecrease(l)&&(g=r.unshiftIndent(g)),{beforeEnter:s?m:f,afterEnter:g}}getIndentActionForType(e,t,n,r,i){if(e<4)return null;let a=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(a.firstCharOffset)return null;let o=this.getIndentRulesSupport(a.languageId);if(!o)return null;let s=a.getLineContent(),c=s.substr(0,n.startColumn-1-a.firstCharOffset),l;if(l=n.isEmpty()?s.substr(n.startColumn-1-a.firstCharOffset):this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-a.firstCharOffset),!o.shouldDecrease(c+l)&&o.shouldDecrease(c+r+l)){let r=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!r)return null;let a=r.indentation;return r.action!==cd.Indent&&(a=i.unshiftIndent(a)),a}return null}getIndentMetadata(e,t){let n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){let r=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),i=this.getLanguageConfiguration(r.languageId);if(!i)return null;let a=r.getLineContent(),o=a.substr(0,n.startColumn-1-r.firstCharOffset),s;s=n.isEmpty()?a.substr(n.startColumn-1-r.firstCharOffset):this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset);let c=``;if(n.startLineNumber>1&&r.firstCharOffset===0){let e=this.getScopedLineTokens(t,n.startLineNumber-1);e.languageId===r.languageId&&(c=e.getLineContent())}let l=i.onEnter(e,c,o,s);if(!l)return null;let u=l.indentAction,d=l.appendText,f=l.removeText||0;d?u===cd.Indent&&(d=`	`+d):d=u===cd.Indent||u===cd.IndentOutdent?`	`:``;let p=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return f&&(p=p.substring(0,p.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:p}}getIndentationAtPosition(e,t,n){let r=yo(e.getLineContent(t));return r.length>n-1&&(r=r.substring(0,n-1)),r}getScopedLineTokens(e,t,n){return e.forceTokenization(t),fd(e.getLineTokens(t),n===void 0?e.getLineMaxColumn(t)-1:n-1)}};var Lf=class{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){let n=new zf(e,t,++this._order);return this._entries.push(n),this._resolved=null,Ot(()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===n){this._entries.splice(e,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new Bf(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(zf.cmp),Rf(this._entries.map(e=>e.configuration)))}};function Rf(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let n of e)t={comments:n.comments||t.comments,brackets:n.brackets||t.brackets,wordPattern:n.wordPattern||t.wordPattern,indentationRules:n.indentationRules||t.indentationRules,onEnterRules:n.onEnterRules||t.onEnterRules,autoClosingPairs:n.autoClosingPairs||t.autoClosingPairs,surroundingPairs:n.surroundingPairs||t.surroundingPairs,autoCloseBefore:n.autoCloseBefore||t.autoCloseBefore,folding:n.folding||t.folding,colorizedBracketPairs:n.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:n.__electricCharacterSupport||t.__electricCharacterSupport};return t}var zf=class{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},Bf=class e{constructor(t,n){this.languageId=t,this.underlyingConfig=n,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new qd(this.underlyingConfig):null,this.comments=e._handleComments(this.underlyingConfig),this.characterPair=new hd(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||ee,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Kd(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return te(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Md(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||=new Wd(this.brackets),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[e,r]=t.blockComment;n.blockCommentStartToken=e,n.blockCommentEndToken=r}return n}};wf(kf,Af);var Vf=class{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},Hf=class{constructor(e){this.source=e}getElements(){let e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}};function Uf(e,t,n){return new qf(new Hf(e),new Hf(t)).ComputeDiff(n).changes}var Wf=class{static Assert(e,t){if(!e)throw Error(t)}},Gf=class{static Copy(e,t,n,r,i){for(let a=0;a<i;a++)n[r+a]=e[t+a]}static Copy2(e,t,n,r,i){for(let a=0;a<i;a++)n[r+a]=e[t+a]}},Kf=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Vf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},qf=class e{constructor(t,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=t,this._modifiedSequence=n;let[i,a,o]=e._getElements(t),[s,c,l]=e._getElements(n);this._hasStrings=o&&l,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=s,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]==`string`}static _getElements(t){let n=t.getElements();if(e._isStringArray(n)){let e=new Int32Array(n.length);for(let t=0,r=n.length;t<r;t++)e[t]=$c(n[t],0);return[n,e,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]?this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0:!1}ElementsAreStrictEqual(t,n){return this.ElementsAreEqual(t,n)?e._getStrictElement(this._originalSequence,t)===e._getStrictElement(this._modifiedSequence,n):!1}static _getStrictElement(e,t){return typeof e.getStrictElement==`function`?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]?this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0:!1}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]?this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0:!1}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,i){let a=[!1],o=this.ComputeDiffRecursive(e,t,n,r,a);return i&&(o=this.PrettifyChanges(o)),{quitEarly:a[0],changes:o}}ComputeDiffRecursive(e,t,n,r,i){for(i[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let i;return n<=r?(Wf.Assert(e===t+1,`originalStart should only be one more than originalEnd`),i=[new Vf(e,0,n,r-n+1)]):e<=t?(Wf.Assert(n===r+1,`modifiedStart should only be one more than modifiedEnd`),i=[new Vf(e,t-e+1,n,0)]):(Wf.Assert(e===t+1,`originalStart should only be one more than originalEnd`),Wf.Assert(n===r+1,`modifiedStart should only be one more than modifiedEnd`),i=[]),i}let a=[0],o=[0],s=this.ComputeRecursionPoint(e,t,n,r,a,o,i),c=a[0],l=o[0];if(s!==null)return s;if(!i[0]){let a=this.ComputeDiffRecursive(e,c,n,l,i),o=[];return o=i[0]?[new Vf(c+1,t-(c+1)+1,l+1,r-(l+1)+1)]:this.ComputeDiffRecursive(c+1,t,l+1,r,i),this.ConcatenateChanges(a,o)}return[new Vf(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){let v=null,y=null,b=new Kf,x=t,S=n,C=f[0]-h[0]-r,w=-1073741824,T=this.m_forwardHistory.length-1;do{let t=C+e;t===x||t<S&&c[t-1]<c[t+1]?(u=c[t+1],p=u-C-r,u<w&&b.MarkNextChange(),w=u,b.AddModifiedElement(u+1,p),C=t+1-e):(u=c[t-1]+1,p=u-C-r,u<w&&b.MarkNextChange(),w=u-1,b.AddOriginalElement(u,p+1),C=t-1-e),T>=0&&(c=this.m_forwardHistory[T],e=c[0],x=1,S=c.length-1)}while(--T>=-1);if(v=b.getReverseChanges(),_[0]){let e=f[0]+1,t=h[0]+1;if(v!==null&&v.length>0){let n=v[v.length-1];e=Math.max(e,n.getOriginalEnd()),t=Math.max(t,n.getModifiedEnd())}y=[new Vf(e,d-e+1,t,m-t+1)]}else{b=new Kf,x=a,S=o,C=f[0]-h[0]-s,w=1073741824,T=g?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let e=C+i;e===x||e<S&&l[e-1]>=l[e+1]?(u=l[e+1]-1,p=u-C-s,u>w&&b.MarkNextChange(),w=u+1,b.AddOriginalElement(u+1,p+1),C=e+1-i):(u=l[e-1],p=u-C-s,u>w&&b.MarkNextChange(),w=u,b.AddModifiedElement(u+1,p+1),C=e-1-i),T>=0&&(l=this.m_reverseHistory[T],i=l[0],x=1,S=l.length-1)}while(--T>=-1);y=b.getChanges()}return this.ConcatenateChanges(v,y)}ComputeRecursionPoint(e,t,n,r,i,a,o){let s=0,c=0,l=0,u=0,d=0,f=0;e--,n--,i[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let p=t-e+(r-n),m=p+1,h=new Int32Array(m),g=new Int32Array(m),_=r-n,v=t-e,y=e-n,b=t-r,x=(v-_)%2==0;h[_]=e,g[v]=t,o[0]=!1;for(let S=1;S<=p/2+1;S++){let p=0,C=0;l=this.ClipDiagonalBound(_-S,S,_,m),u=this.ClipDiagonalBound(_+S,S,_,m);for(let e=l;e<=u;e+=2){s=e===l||e<u&&h[e-1]<h[e+1]?h[e+1]:h[e-1]+1,c=s-(e-_)-y;let n=s;for(;s<t&&c<r&&this.ElementsAreEqual(s+1,c+1);)s++,c++;if(h[e]=s,s+c>p+C&&(p=s,C=c),!x&&Math.abs(e-v)<=S-1&&s>=g[e])return i[0]=s,a[0]=c,n<=g[e]&&S<=1448?this.WALKTRACE(_,l,u,y,v,d,f,b,h,g,s,t,i,c,r,a,x,o):null}let w=(p-e+(C-n)-S)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(p,w))return o[0]=!0,i[0]=p,a[0]=C,w>0&&S<=1448?this.WALKTRACE(_,l,u,y,v,d,f,b,h,g,s,t,i,c,r,a,x,o):(e++,n++,[new Vf(e,t-e+1,n,r-n+1)]);d=this.ClipDiagonalBound(v-S,S,v,m),f=this.ClipDiagonalBound(v+S,S,v,m);for(let p=d;p<=f;p+=2){s=p===d||p<f&&g[p-1]>=g[p+1]?g[p+1]-1:g[p-1],c=s-(p-v)-b;let m=s;for(;s>e&&c>n&&this.ElementsAreEqual(s,c);)s--,c--;if(g[p]=s,x&&Math.abs(p-_)<=S&&s<=h[p])return i[0]=s,a[0]=c,m>=h[p]&&S<=1448?this.WALKTRACE(_,l,u,y,v,d,f,b,h,g,s,t,i,c,r,a,x,o):null}if(S<=1447){let e=new Int32Array(u-l+2);e[0]=_-l+1,Gf.Copy2(h,l,e,1,u-l+1),this.m_forwardHistory.push(e),e=new Int32Array(f-d+2),e[0]=v-d+1,Gf.Copy2(g,d,e,1,f-d+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(_,l,u,y,v,d,f,b,h,g,s,t,i,c,r,a,x,o)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,i=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,a=n.originalLength>0,o=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<i&&(!a||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!o||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let e=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!e)break;n.originalStart++,n.modifiedStart++}let s=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],s)){e[t]=s[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],r=0,i=0;if(t>0){let n=e[t-1];r=n.originalStart+n.originalLength,i=n.modifiedStart+n.modifiedLength}let a=n.originalLength>0,o=n.modifiedLength>0,s=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let e=1;;e++){let t=n.originalStart-e,l=n.modifiedStart-e;if(t<r||l<i||a&&!this.OriginalElementsAreEqual(t,t+n.originalLength)||o&&!this.ModifiedElementsAreEqual(l,l+n.modifiedLength))break;let u=(t===r&&l===i?5:0)+this._boundaryScore(t,n.originalLength,l,n.modifiedLength);u>c&&(c=u,s=e)}n.originalStart-=s,n.modifiedStart-=s;let l=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],l)){e[t-1]=l[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let n=e[t-1],r=e[t],i=r.originalStart-n.originalStart-n.originalLength,a=n.originalStart,o=r.originalStart+r.originalLength,s=o-a,c=n.modifiedStart,l=r.modifiedStart+r.modifiedLength,u=l-c;if(i<5&&s<20&&u<20){let e=this._findBetterContiguousSequence(a,s,c,u,i);if(e){let[t,a]=e;(t!==n.originalStart+n.originalLength||a!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=t-n.originalStart,n.modifiedLength=a-n.modifiedStart,r.originalStart=t+i,r.modifiedStart=a+i,r.originalLength=o-r.originalStart,r.modifiedLength=l-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,i){if(t<i||r<i)return null;let a=e+t-i+1,o=n+r-i+1,s=0,c=0,l=0;for(let t=e;t<a;t++)for(let e=n;e<o;e++){let n=this._contiguousSequenceScore(t,e,i);n>0&&n>s&&(s=n,c=t,l=e)}return s>0?[c,l]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let i=0;i<n;i++){if(!this.ElementsAreEqual(e+i,t+i))return 0;r+=this._originalStringElements[e+i].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(n,r)?1:0)}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let r=Array(e.length+t.length-1);return Gf.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],Gf.Copy(t,1,r,e.length,t.length-1),r}else{let n=Array(e.length+t.length);return Gf.Copy(e,0,n,0,e.length),Gf.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,n){if(Wf.Assert(e.originalStart<=t.originalStart,`Left change is not less than or equal to right change`),Wf.Assert(e.modifiedStart<=t.modifiedStart,`Left change is not less than or equal to right change`),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let r=e.originalStart,i=e.originalLength,a=e.modifiedStart,o=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(i=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(o=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Vf(r,i,a,o),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;let i=n,a=r-n-1,o=t%2==0;return e<0?o===(i%2==0)?0:1:o===(a%2==0)?r-1:r-2}},Jf=3;function Yf(e,t,n,r){return new qf(e,t,n).ComputeDiff(r)}var Xf=class{constructor(e){let t=[],n=[];for(let r=0,i=e.length;r<i;r++)t[r]=np(e[r],1),n[r]=rp(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){let e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){let r=[],i=[],a=[],o=0;for(let s=t;s<=n;s++){let t=this.lines[s],n=e?this._startColumns[s]:1,c=e?this._endColumns[s]:t.length+1;for(let e=n;e<c;e++)r[o]=t.charCodeAt(e-1),i[o]=s+1,a[o]=e,o++}return new Zf(r,i,a)}},Zf=class{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}},Qf=class e{constructor(e,t,n,r,i,a,o,s){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=r,this.modifiedStartLineNumber=i,this.modifiedStartColumn=a,this.modifiedEndLineNumber=o,this.modifiedEndColumn=s}static createFromDiffChange(t,n,r){let i,a,o,s,c,l,u,d;return t.originalLength===0?(i=0,a=0,o=0,s=0):(i=n.getStartLineNumber(t.originalStart),a=n.getStartColumn(t.originalStart),o=n.getEndLineNumber(t.originalStart+t.originalLength-1),s=n.getEndColumn(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(c=0,l=0,u=0,d=0):(c=r.getStartLineNumber(t.modifiedStart),l=r.getStartColumn(t.modifiedStart),u=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1),d=r.getEndColumn(t.modifiedStart+t.modifiedLength-1)),new e(i,a,o,s,c,l,u,d)}};function $f(e){if(e.length<=1)return e;let t=[e[0]],n=t[0];for(let r=1,i=e.length;r<i;r++){let i=e[r],a=i.originalStart-(n.originalStart+n.originalLength),o=i.modifiedStart-(n.modifiedStart+n.modifiedLength);Math.min(a,o)<Jf?(n.originalLength=i.originalStart+i.originalLength-n.originalStart,n.modifiedLength=i.modifiedStart+i.modifiedLength-n.modifiedStart):(t.push(i),n=i)}return t}var ep=class e{constructor(e,t,n,r,i){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=r,this.charChanges=i}static createFromDiffResult(t,n,r,i,a,o,s){let c,l,u,d,f;if(n.originalLength===0?(c=r.getStartLineNumber(n.originalStart)-1,l=0):(c=r.getStartLineNumber(n.originalStart),l=r.getEndLineNumber(n.originalStart+n.originalLength-1)),n.modifiedLength===0?(u=i.getStartLineNumber(n.modifiedStart)-1,d=0):(u=i.getStartLineNumber(n.modifiedStart),d=i.getEndLineNumber(n.modifiedStart+n.modifiedLength-1)),o&&n.originalLength>0&&n.originalLength<20&&n.modifiedLength>0&&n.modifiedLength<20&&a()){let e=r.createCharSequence(t,n.originalStart,n.originalStart+n.originalLength-1),o=i.createCharSequence(t,n.modifiedStart,n.modifiedStart+n.modifiedLength-1),c=Yf(e,o,a,!0).changes;s&&(c=$f(c)),f=[];for(let t=0,n=c.length;t<n;t++)f.push(Qf.createFromDiffChange(c[t],e,o))}return new e(c,l,u,d,f)}},tp=class{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Xf(e),this.modified=new Xf(t),this.continueLineDiff=ip(n.maxComputationTime),this.continueCharDiff=ip(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};let e=Yf(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){let e=[];for(let n=0,r=t.length;n<r;n++)e.push(ep.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[n],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:e}}let r=[],i=0,a=0;for(let e=-1,n=t.length;e<n;e++){let o=e+1<n?t[e+1]:null,s=o?o.originalStart:this.originalLines.length,c=o?o.modifiedStart:this.modifiedLines.length;for(;i<s&&a<c;){let e=this.originalLines[i],t=this.modifiedLines[a];if(e!==t){{let n=np(e,1),o=np(t,1);for(;n>1&&o>1&&e.charCodeAt(n-2)===t.charCodeAt(o-2);)n--,o--;(n>1||o>1)&&this._pushTrimWhitespaceCharChange(r,i+1,1,n,a+1,1,o)}{let n=rp(e,1),o=rp(t,1),s=e.length+1,c=t.length+1;for(;n<s&&o<c&&e.charCodeAt(n-1)===e.charCodeAt(o-1);)n++,o++;(n<s||o<c)&&this._pushTrimWhitespaceCharChange(r,i+1,n,s,a+1,o,c)}}i++,a++}o&&(r.push(ep.createFromDiffResult(this.shouldIgnoreTrimWhitespace,o,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),i+=o.originalLength,a+=o.modifiedLength)}return{quitEarly:n,changes:r}}_pushTrimWhitespaceCharChange(e,t,n,r,i,a,o){if(this._mergeTrimWhitespaceCharChange(e,t,n,r,i,a,o))return;let s;this.shouldComputeCharChanges&&(s=[new Qf(t,n,t,r,i,a,i,o)]),e.push(new ep(t,t,i,i,s))}_mergeTrimWhitespaceCharChange(e,t,n,r,i,a,o){let s=e.length;if(s===0)return!1;let c=e[s-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===i?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=i,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Qf(t,n,t,r,i,a,i,o)),!0):!1}};function np(e,t){let n=vo(e);return n===-1?t:n+1}function rp(e,t){let n=bo(e);return n===-1?t:n+2}function ip(e){if(e===0)return()=>!0;let t=Date.now();return()=>Date.now()-t<e}function ap(e){return e<0?0:e>255?255:e|0}function op(e){return e<0?0:e>4294967295?4294967295:e|0}var sp=class{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},cp=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=op(e);let n=this.values,r=this.prefixSum,i=t.length;return i===0?!1:(this.values=new Uint32Array(n.length+i),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+i),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=op(e),t=op(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=op(e),t=op(t);let n=this.values,r=this.prefixSum;if(e>=n.length)return!1;let i=n.length-e;return t>=i&&(t=i),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=op(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,r=0,i=0,a=0;for(;t<=n;)if(r=t+(n-t)/2|0,i=this.prefixSum[r],a=i-this.values[r],e<a)n=r-1;else if(e>=i)t=r+1;else break;return new sp(r,e-a)}},lp=class{constructor(e,t,n,r){this._uri=e,this._lines=t,this._eol=n,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);let t=e.changes;for(let e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new I(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=this._lines[r].length+e;this._lineStarts=new cp(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=_o(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let r=new Uint32Array(n.length-1);for(let t=1;t<n.length;t++)this._lines.splice(e.lineNumber+t-1,0,n[t]),r[t-1]=n[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}},up=class e{constructor(t){let n=ap(t);this._defaultValue=n,this._asciiMap=e._createAsciiMap(n),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=ap(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}},dp=class{constructor(){this._actual=new up(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}},fp=class{constructor(e,t,n){let r=new Uint8Array(e*t);for(let i=0,a=e*t;i<a;i++)r[i]=n;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}},pp=class{constructor(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++){let[i,a,o]=e[r];a>t&&(t=a),i>n&&(n=i),o>n&&(n=o)}t++,n++;let r=new fp(n,t,0);for(let t=0,n=e.length;t<n;t++){let[n,i,a]=e[t];r.set(n,i,a)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}},mp=null;function hp(){return mp===null&&(mp=new pp([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),mp}var gp=null;function _p(){if(gp===null){gp=new up(0);for(let e=0;e<35;e++)gp.set(` 	<>'"`.charCodeAt(e),1);for(let e=0;e<3;e++)gp.set(`.,;`.charCodeAt(e),2)}return gp}var vp=class e{static _createLink(e,t,n,r,i){let a=i-1;do{let n=t.charCodeAt(a);if(e.get(n)!==2)break;a--}while(a>r);if(r>0){let e=t.charCodeAt(r-1),n=t.charCodeAt(a);(e===40&&n===41||e===91&&n===93||e===123&&n===125)&&a--}return{range:{startLineNumber:n,startColumn:r+1,endLineNumber:n,endColumn:a+2},url:t.substring(r,a+1)}}static computeLinks(t,n=hp()){let r=_p(),i=[];for(let a=1,o=t.getLineCount();a<=o;a++){let o=t.getLineContent(a),s=o.length,c=0,l=0,u=0,d=1,f=!1,p=!1,m=!1,h=!1;for(;c<s;){let t=!1,s=o.charCodeAt(c);if(d===13){let n;switch(s){case 40:f=!0,n=0;break;case 41:n=f?0:1;break;case 91:m=!0,p=!0,n=0;break;case 93:m=!1,n=p?0:1;break;case 123:h=!0,n=0;break;case 125:n=h?0:1;break;case 39:n=u===34||u===96?0:1;break;case 34:n=u===39||u===96?0:1;break;case 96:n=u===39||u===34?0:1;break;case 42:n=u===42?1:0;break;case 124:n=u===124?1:0;break;case 32:n=m?0:1;break;default:n=r.get(s)}n===1&&(i.push(e._createLink(r,o,a,l,c)),t=!0)}else if(d===12){let e;s===91?(p=!0,e=0):e=r.get(s),e===1?t=!0:d=13}else d=n.nextState(d,s),d===0&&(t=!0);t&&(d=1,f=!1,p=!1,h=!1,l=c+1,u=s),c++}d===13&&i.push(e._createLink(r,o,a,l,s))}return i}};function yp(e){return!e||typeof e.getLineCount!=`function`||typeof e.getLineContent!=`function`?[]:vp.computeLinks(e)}var bp=class{constructor(){this._defaultValueSet=[[`true`,`false`],[`True`,`False`],[`Private`,`Public`,`Friend`,`ReadOnly`,`Partial`,`Protected`,`WriteOnly`],[`public`,`protected`,`private`]]}navigateValueSet(e,t,n,r,i){if(e&&t){let n=this.doNavigateValueSet(t,i);if(n)return{range:e,value:n}}if(n&&r){let e=this.doNavigateValueSet(r,i);if(e)return{range:n,value:e}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n===null?this.textReplace(e,t):n}numberReplace(e,t){let n=10**(e.length-(e.lastIndexOf(`.`)+1)),r=Number(e),i=parseFloat(e);return!isNaN(r)&&!isNaN(i)&&r===i?r===0&&!t?null:(r=Math.floor(r*n),r+=t?n:-n,String(r/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let r=null;for(let i=0,a=e.length;r===null&&i<a;i++)r=this.valueSetReplace(e[i],t,n);return r}valueSetReplace(e,t,n){let r=e.indexOf(t);return r>=0?(r+=n?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}};bp.INSTANCE=new bp;var xp=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},Sp=class extends lp{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=re(e.column,te(t),this._lines[e.lineNumber-1],0);return n?new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){let t=this._lines,n=this._wordenize.bind(this),r=0,i=``,a=0,o=[];return{*[Symbol.iterator](){for(;;)if(a<o.length){let e=i.substring(o[a].start,o[a].end);a+=1,yield e}else if(r<t.length)i=t[r],o=n(i,e),a=0,r+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],r=this._wordenize(n,t),i=[];for(let e of r)i.push({word:n.substring(e.start,e.end),startColumn:e.start+1,endColumn:e.end+1});return i}_wordenize(e,t){let n=[],r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)n.push({start:r.index,end:r.index+r[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,r=e.endLineNumber-1,i=[];i.push(this._lines[n].substring(e.startColumn-1));for(let e=n+1;e<r;e++)i.push(this._lines[e]);return i.push(this._lines[r].substring(0,e.endColumn-1)),i.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){let t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!I.isIPosition(e))throw Error(`bad position`);let{lineNumber:t,column:n}=e,r=!1;if(t<1)t=1,n=1,r=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,r=!0;else{let e=this._lines[t-1].length+1;n<1?(n=1,r=!0):n>e&&(n=e,r=!0)}return r?{lineNumber:t,column:n}:e}},Cp=class e{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new Sp(F.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){this._models[e]&&this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeDiff(e,t,n,r){return xp(this,void 0,void 0,function*(){let i=this._getModel(e),a=this._getModel(t);if(!i||!a)return null;let o=new tp(i.getLinesContent(),a.getLinesContent(),{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:r}).computeDiff(),s=o.changes.length>0?!1:this._modelsAreIdentical(i,a);return{quitEarly:o.quitEarly,identical:s,changes:o.changes}})}_modelsAreIdentical(e,t){let n=e.getLineCount();if(n!==t.getLineCount())return!1;for(let r=1;r<=n;r++)if(e.getLineContent(r)!==t.getLineContent(r))return!1;return!0}computeMoreMinimalEdits(t,n){return xp(this,void 0,void 0,function*(){let r=this._getModel(t);if(!r)return n;let i=[],a;n=n.slice(0).sort((e,t)=>e.range&&t.range?L.compareRangesUsingStarts(e.range,t.range):(e.range?0:1)-(t.range?0:1));for(let{range:t,text:o,eol:s}of n){if(typeof s==`number`&&(a=s),L.isEmpty(t)&&!o)continue;let n=r.getValueInRange(t);if(o=o.replace(/\r\n|\n|\r/g,r.eol),n===o)continue;if(Math.max(o.length,n.length)>e._diffLimit){i.push({range:t,text:o});continue}let c=Uf(n,o,!1),l=r.offsetAt(L.lift(t).getStartPosition());for(let e of c){let t=r.positionAt(l+e.originalStart),n=r.positionAt(l+e.originalStart+e.originalLength),a={text:o.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}};r.getValueInRange(a.range)!==a.text&&i.push(a)}}return typeof a==`number`&&i.push({eol:a,text:``,range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return xp(this,void 0,void 0,function*(){let t=this._getModel(e);return t?yp(t):null})}textualSuggest(t,n,r,i){return xp(this,void 0,void 0,function*(){let a=new Pt(!0),o=new RegExp(r,i),s=new Set;outer:for(let r of t){let t=this._getModel(r);if(t){for(let r of t.words(o))if(!(r===n||!isNaN(Number(r)))&&(s.add(r),s.size>e._suggestionsLimit))break outer}}return{words:Array.from(s),duration:a.elapsed()}})}computeWordRanges(e,t,n,r){return xp(this,void 0,void 0,function*(){let i=this._getModel(e);if(!i)return Object.create(null);let a=new RegExp(n,r),o=Object.create(null);for(let e=t.startLineNumber;e<t.endLineNumber;e++){let t=i.getLineWords(e,a);for(let n of t){if(!isNaN(Number(n.word)))continue;let t=o[n.word];t||(t=[],o[n.word]=t),t.push({startLineNumber:e,startColumn:n.startColumn,endLineNumber:e,endColumn:n.endColumn})}}return o})}navigateValueSet(e,t,n,r,i){return xp(this,void 0,void 0,function*(){let a=this._getModel(e);if(!a)return null;let o=new RegExp(r,i);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let s=a.getValueInRange(t),c=a.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},o);if(!c)return null;let l=a.getValueInRange(c);return bp.INSTANCE.navigateValueSet(t,s,c,l,n)})}loadForeignModule(e,t,n){let r={host:oc(n,(e,t)=>this._host.fhr(e,t)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(ac(this._foreignModule))):Promise.reject(Error(`Unexpected usage`))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!=`function`)return Promise.reject(Error(`Missing requestHandler or method: `+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(e){return Promise.reject(e)}}};Cp._diffLimit=1e5,Cp._suggestionsLimit=1e4,typeof importScripts==`function`&&(l.monaco=zr());const wp=Ur(`textResourceConfigurationService`),Tp=Ur(`textResourcePropertiesService`);function Ep(e,t=0){return e[e.length-(1+t)]}function Dp(e){if(e.length===0)throw Error(`Invalid tail call`);return[e.slice(0,e.length-1),e[e.length-1]]}function Op(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function kp(e,t,n){let r=0,i=e.length-1;for(;r<=i;){let a=(r+i)/2|0,o=n(e[a],t);if(o<0)r=a+1;else if(o>0)i=a-1;else return a}return-(r+1)}function Ap(e,t){let n=0,r=e.length;if(r===0)return 0;for(;n<r;){let i=Math.floor((n+r)/2);t(e[i])?r=i:n=i+1}return n}function jp(e,t,n){if(e|=0,e>=t.length)throw TypeError(`invalid index`);let r=t[Math.floor(t.length*Math.random())],i=[],a=[],o=[];for(let e of t){let t=n(e,r);t<0?i.push(e):t>0?a.push(e):o.push(e)}return e<i.length?jp(e,i,n):e<i.length+o.length?o[0]:jp(e-(i.length+o.length),a,n)}function Mp(e,t){let n=[],r;for(let i of e.slice(0).sort(t))!r||t(r[0],i)!==0?(r=[i],n.push(r)):r.push(i);return n}function Np(e){return e.filter(e=>!!e)}function Pp(e){return!Array.isArray(e)||e.length===0}function Fp(e){return Array.isArray(e)&&e.length>0}function Ip(e,t=e=>e){let n=new Set;return e.filter(e=>{let r=t(e);return n.has(r)?!1:(n.add(r),!0)})}function Lp(e,t){let n=Rp(e,t);if(n!==-1)return e[n]}function Rp(e,t){for(let n=e.length-1;n>=0;n--){let r=e[n];if(t(r))return n}return-1}function zp(e,t){return e.length>0?e[0]:t}function Bp(e){return[].concat(...e)}function Vp(e,t){let n=typeof t==`number`?e:0;typeof t==`number`?n=e:(n=0,t=e);let r=[];if(n<=t)for(let e=n;e<t;e++)r.push(e);else for(let e=n;e>t;e--)r.push(e);return r}function Hp(e,t,n){let r=e.slice(0,t),i=e.slice(t);return r.concat(n,i)}function Up(e,t){let n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function Wp(e,t){let n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function Gp(e){return Array.isArray(e)?e:[e]}function Kp(e,t,n){let r=Jp(e,t),i=e.length,a=n.length;e.length=i+a;for(let t=i-1;t>=r;t--)e[t+a]=e[t];for(let t=0;t<a;t++)e[t+r]=n[t]}function qp(e,t,n,r){let i=Jp(e,t),a=e.splice(i,n);return Kp(e,i,r),a}function Jp(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}var Yp=class{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}};const Xp=Ur(`logService`);var Zp;(function(e){e[e.Trace=0]=`Trace`,e[e.Debug=1]=`Debug`,e[e.Info=2]=`Info`,e[e.Warning=3]=`Warning`,e[e.Error=4]=`Error`,e[e.Critical=5]=`Critical`,e[e.Off=6]=`Off`})(Zp||={});const Qp=Zp.Info;var $p=class extends j{constructor(){super(...arguments),this.level=Qp,this._onDidChangeLogLevel=this._register(new N)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}},em=class extends $p{constructor(e=Qp){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Zp.Trace&&console.log(`%cTRACE`,`color: #888`,e,...t)}debug(e,...t){this.getLevel()<=Zp.Debug&&console.log(`%cDEBUG`,`background: #eee; color: #888`,e,...t)}info(e,...t){this.getLevel()<=Zp.Info&&console.log(`%c INFO`,`color: #33f`,e,...t)}error(e,...t){this.getLevel()<=Zp.Error&&console.log(`%c  ERR`,`color: #f33`,e,...t)}dispose(){}},tm=class extends j{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}},nm=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rm=function(e,t){return function(n,r){t(n,r,e)}},im=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},am=60*1e3,om=300*1e3;function sm(e,t){let n=e.getModel(t);return!(!n||n.isTooLargeForSyncing())}var cm=class extends j{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new um(this._modelService)),this._logService=n,this._register(Au.register({language:`*`,hasAccessToAllModels:!0},{provideLinks:(e,t)=>sm(this._modelService,e.uri)?this._workerManager.withWorker().then(t=>t.computeLinks(e.uri)).then(e=>e&&{links:e}):Promise.resolve({links:[]})})),this._register(pu.register(`*`,new lm(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,n,r){return this._workerManager.withWorker().then(i=>i.computeDiff(e,t,n,r))}computeMoreMinimalEdits(e,t){if(Fp(t)){if(!sm(this._modelService,e))return Promise.resolve(t);let n=Pt.create(!0),r=this._workerManager.withWorker().then(n=>n.computeMoreMinimalEdits(e,t));return r.finally(()=>this._logService.trace(`FORMAT#computeMoreMinimalEdits`,e.toString(!0),n.elapsed())),Promise.race([r,Mi(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return sm(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(r=>r.navigateValueSet(e,t,n))}canComputeWordRanges(e){return sm(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};cm=nm([rm(0,Bl),rm(1,wp),rm(2,Xp)],cm);var lm=class{constructor(e,t,n){this._debugDisplayName=`wordbasedCompletions`,this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return im(this,void 0,void 0,function*(){let n=this._configurationService.getValue(e.uri,t,`editor`);if(!n.wordBasedSuggestions)return;let r=[];if(n.wordBasedSuggestionsMode===`currentDocument`)sm(this._modelService,e.uri)&&r.push(e.uri);else for(let t of this._modelService.getModels())sm(this._modelService,t.uri)&&(t===e?r.unshift(t.uri):(n.wordBasedSuggestionsMode===`allDocuments`||t.getLanguageId()===e.getLanguageId())&&r.push(t.uri));if(r.length===0)return;let i=If.getWordDefinition(e.getLanguageId()),a=e.getWordAtPosition(t),o=a?new L(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):L.fromPositions(t),s=o.setEndPosition(t.lineNumber,t.column),c=yield(yield this._workerManager.withWorker()).textualSuggest(r,a?.word,i);if(c)return{duration:c.duration,suggestions:c.words.map(e=>({kind:18,label:e,insertText:e,range:{insert:s,replace:o}}))}})}},um=class extends j{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Ii).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(om/2)),this._register(this._modelService.onModelRemoved(e=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&=(this._editorWorkerClient.dispose(),null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&new Date().getTime()-this._lastWorkerUsedTime>om&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||=new mm(this._modelService,!1,`editorWorkerService`),Promise.resolve(this._editorWorkerClient)}},dm=class extends j{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let e=new Ii;e.cancelAndSet(()=>this._checkStopModelSync(),Math.round(am/2)),this._register(e)}}dispose(){for(let e in this._syncedModels)Et(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(let n of e){let e=n.toString();this._syncedModels[e]||this._beginModelSync(n,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>am&&t.push(n);for(let e of t)this._stopModelSync(e)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let r=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});let i=new A;i.add(n.onDidChangeContent(e=>{this._proxy.acceptModelChanged(r.toString(),e)})),i.add(n.onWillDispose(()=>{this._stopModelSync(r)})),i.add(Ot(()=>{this._proxy.acceptRemovedModel(r)})),this._syncedModels[r]=i}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Et(t)}},fm=class{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}},pm=class{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}},mm=class extends j{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new sd(n),this._worker=null,this._modelManager=null}fhr(e,t){throw Error(`Not implemented!`)}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new $u(this._workerFactory,`vs/editor/common/services/editorSimpleWorker`,new pm(this)))}catch(e){Ku(e),this._worker=new fm(new Cp(new pm(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(Ku(e),this._worker=new fm(new Cp(new pm(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||=this._register(new dm(e,this._modelService,this._keepIdleModels)),this._modelManager}_withSyncedResources(e,t=!1){return im(this,void 0,void 0,function*(){return this._disposed?Promise.reject(pt()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computeDiff(e,t,n,r){return this._withSyncedResources([e,t],!0).then(i=>i.computeDiff(e.toString(),t.toString(),n,r))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return im(this,void 0,void 0,function*(){let r=yield this._withSyncedResources(e),i=n.source,a=go(n);return r.textualSuggest(e.map(e=>e.toString()),t,i,a)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let r=this._modelService.getModel(e);if(!r)return Promise.resolve(null);let i=If.getWordDefinition(r.getLanguageId()),a=i.source,o=go(i);return n.computeWordRanges(e.toString(),t,a,o)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(r=>{let i=this._modelService.getModel(e);if(!i)return null;let a=If.getWordDefinition(i.getLanguageId()),o=a.source,s=go(a);return r.navigateValueSet(e.toString(),t,n,o,s)})}dispose(){super.dispose(),this._disposed=!0}};function hm(e,t){return new gm(e,t)}var gm=class extends mm{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!=`function`)return Promise.reject(Error(`Missing method `+e+` or missing main thread foreign host.`));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(e){return Promise.reject(e)}}_getForeignProxy(){return this._foreignProxy||=this._getProxy().then(e=>{let t=this._foreignModuleHost?ac(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(t=>{this._foreignModuleCreateData=null;let n=(t,n)=>e.fmr(t,n),r=(e,t)=>function(){return t(e,Array.prototype.slice.call(arguments,0))},i={};for(let e of t)i[e]=r(e,n);return i})}),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(e=>this.getProxy())}},_m=class e{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(t,n){let r=e.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=t.length,i[1]=r,new e(i,t,n)}equals(t){return t instanceof e?this.slicedEquals(t,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let r=t<<1,i=r+(n<<1);for(let t=r;t<i;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=tu.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return tu.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return tu.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return tu.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return tu.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(t){return e.findIndexInTokensArray(this._tokens,t)}inflate(){return this}sliceAndInflate(e,t,n){return new vm(this,e,t,n)}static convertToEndOffset(e,t){let n=(e.length>>>1)-1;for(let t=0;t<n;t++)e[t<<1]=e[t+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){let i=n+Math.floor((r-n)/2),a=e[i<<1];if(a===t)return i+1;a<t?n=i+1:a>t&&(r=i)}return n}withInserted(t){if(t.length===0)return this;let n=0,r=0,i=``,a=[],o=0;for(;;){let e=n<this._tokensCount?this._tokens[n<<1]:-1,s=r<t.length?t[r]:null;if(e!==-1&&(s===null||e<=s.offset)){i+=this._text.substring(o,e);let t=this._tokens[(n<<1)+1];a.push(i.length,t),n++,o=e}else if(s){if(s.offset>o){i+=this._text.substring(o,s.offset);let e=this._tokens[(n<<1)+1];a.push(i.length,e),o=s.offset}i+=s.text,a.push(i.length,s.tokenMetadata),r++}else break}return new e(new Uint32Array(a),i,this._languageIdCodec)}};_m.defaultTokenMetadata=16793600;var vm=class e{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let t=this._firstTokenIndex,r=e.getCount();t<r&&!(e.getStartOffset(t)>=n);t++)this._tokensCount++}equals(t){return t instanceof e?this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}},ym=class e{constructor(e,t,n,r){this.startColumn=e,this.endColumn=t,this.className=n,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(t,n){let r=t.length;if(r!==n.length)return!1;for(let i=0;i<r;i++)if(!e._equals(t[i],n[i]))return!1;return!0}static extractWrapped(t,n,r){if(t.length===0)return t;let i=n+1,a=r+1,o=r-n,s=[],c=0;for(let n of t)n.endColumn<=i||n.startColumn>=a||(s[c++]=new e(Math.max(1,n.startColumn-i+1),Math.min(o+1,n.endColumn-i+1),n.className,n.type));return s}static filter(t,n,r,i){if(t.length===0)return[];let a=[],o=0;for(let s=0,c=t.length;s<c;s++){let c=t[s],l=c.range;if(l.endLineNumber<n||l.startLineNumber>n||l.isEmpty()&&(c.type===0||c.type===3))continue;let u=l.startLineNumber===n?l.startColumn:r,d=l.endLineNumber===n?l.endColumn:i;a[o++]=new e(u,d,c.inlineClassName,c.type)}return a}static _typeCompare(e,t){let n=[2,0,1,3];return n[e]-n[t]}static compare(t,n){if(t.startColumn!==n.startColumn)return t.startColumn-n.startColumn;if(t.endColumn!==n.endColumn)return t.endColumn-n.endColumn;let r=e._typeCompare(t.type,n.type);return r===0?t.className===n.className?0:t.className<n.className?-1:1:r}},bm=class{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=r}},xm=class e{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,r=e.length;n<r;n++)t|=e[n];return t}consumeLowerThan(t,n,r){for(;this.count>0&&this.stopOffsets[0]<t;){let t=0;for(;t+1<this.count&&this.stopOffsets[t]===this.stopOffsets[t+1];)t++;r.push(new bm(n,this.stopOffsets[t],this.classNames.join(` `),e._metadata(this.metadata))),n=this.stopOffsets[t]+1,this.stopOffsets.splice(0,t+1),this.classNames.splice(0,t+1),this.metadata.splice(0,t+1),this.count-=t+1}return this.count>0&&n<t&&(r.push(new bm(n,t-1,this.classNames.join(` `),e._metadata(this.metadata))),n=t),n}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,n);break}this.count++}},Sm=class{static normalize(e,t){if(t.length===0)return[];let n=[],r=new xm,i=0;for(let a=0,o=t.length;a<o;a++){let o=t[a],s=o.startColumn,c=o.endColumn,l=o.className,u=o.type===1?2:o.type===2?4:0;s>1&&jo(e.charCodeAt(s-2))&&s--,c>1&&jo(e.charCodeAt(c-2))&&c--;let d=s-1,f=c-2;i=r.consumeLowerThan(d,i,n),r.count===0&&(i=d),r.insert(f,l,u)}return r.consumeLowerThan(1073741824,i,n),n}},Cm=class{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}},wm=class{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}},Tm=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=r,this.isBasicASCII=i,this.containsRTL=a,this.fauxIndentLength=o,this.lineTokens=s,this.lineDecorations=c.sort(ym.compare),this.tabSize=l,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=m,this.renderWhitespace=h===`all`?4:h===`boundary`?1:h===`selection`?2:h===`trailing`?3:0,this.renderControlCharacters=g,this.fontLigatures=_,this.selectionsOnLine=v&&v.sort((e,t)=>e.startOffset<t.startOffset?-1:1),Math.abs(p-d)<Math.abs(f-d)?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ym.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}},Em=class{constructor(e,t){this.partIndex=e,this.charIndex=t}},Dm=class e{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,r){let i=(t<<16|n<<0)>>>0;this._data[e-1]=i,this._absoluteOffsets[e-1]=r+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(t){let n=this.charOffsetToPartData(t-1);return new Em(e.getPartIndex(n),e.getCharIndex(n))}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(t,n,r){if(this.length===0)return 0;let i=(t<<16|r<<0)>>>0,a=0,o=this.length-1;for(;a+1<o;){let e=a+o>>>1,t=this._data[e];if(t===i)return e;t>i?o=e:a=e}if(a===o)return a;let s=this._data[a],c=this._data[o];if(s===i)return a;if(c===i)return o;let l=e.getPartIndex(s),u=e.getCharIndex(s),d=e.getPartIndex(c),f;return f=l===d?e.getCharIndex(c):n,r-u<=f-r?a:o}},Om=class{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}};function km(e,t){if(e.lineContent.length===0){if(e.lineDecorations.length>0){t.appendASCIIString(`<span>`);let n=0,r=0,i=0;for(let a of e.lineDecorations)(a.type===1||a.type===2)&&(t.appendASCIIString(`<span class="`),t.appendASCIIString(a.className),t.appendASCIIString(`"></span>`),a.type===1&&(i|=1,n++),a.type===2&&(i|=2,r++));t.appendASCIIString(`</span>`);let a=new Dm(1,n+r);return a.setColumnInfo(1,n,0,0),new Om(a,!1,i)}return t.appendASCIIString(`<span><span></span></span>`),new Om(new Dm(0,0),!1,0)}return Bm(Nm(e),t)}var Am=class{constructor(e,t,n,r){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=r}};function jm(e){let t=wd(1e4),n=km(e,t);return new Am(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}var Mm=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=r,this.isOverflowing=i,this.parts=a,this.containsForeignElements=o,this.fauxIndentLength=s,this.tabSize=c,this.startVisibleColumn=l,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=p,this.renderControlCharacters=m}};function Nm(e){let t=e.lineContent,n,r;e.stopRenderingLineAfter!==-1&&e.stopRenderingLineAfter<t.length?(n=!0,r=e.stopRenderingLineAfter):(n=!1,r=t.length);let i=Pm(e.lineTokens,e.fauxIndentLength,r);(e.renderWhitespace===4||e.renderWhitespace===1||e.renderWhitespace===2&&e.selectionsOnLine||e.renderWhitespace===3)&&(i=Rm(e,t,r,i));let a=0;if(e.lineDecorations.length>0){for(let t=0,n=e.lineDecorations.length;t<n;t++){let n=e.lineDecorations[t];n.type===3||n.type===1?a|=1:n.type===2&&(a|=2)}i=zm(t,r,i,e.lineDecorations)}return e.containsRTL||(i=Fm(t,i,!e.isBasicASCII||e.fontLigatures)),e.renderControlCharacters&&!e.isBasicASCII&&(i=Lm(t,i)),new Mm(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,t,r,n,i,a,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}function Pm(e,t,n){let r=[],i=0;t>0&&(r[i++]=new Cm(t,``,0));for(let a=0,o=e.getCount();a<o;a++){let o=e.getEndOffset(a);if(o<=t)continue;let s=e.getClassName(a);if(o>=n){r[i++]=new Cm(n,s,0);break}r[i++]=new Cm(o,s,0)}return r}function Fm(e,t,n){let r=0,i=[],a=0;if(n)for(let n=0,o=t.length;n<o;n++){let o=t[n],s=o.endIndex;if(r+50<s){let t=o.type,n=o.metadata,c=-1,l=r;for(let o=r;o<s;o++)e.charCodeAt(o)===32&&(c=o),c!==-1&&o-l>=50&&(i[a++]=new Cm(c+1,t,n),l=c+1,c=-1);l!==s&&(i[a++]=new Cm(s,t,n))}else i[a++]=o;r=s}else for(let e=0,n=t.length;e<n;e++){let n=t[e],o=n.endIndex,s=o-r;if(s>50){let e=n.type,t=n.metadata,c=Math.ceil(s/50);for(let n=1;n<c;n++){let o=r+n*50;i[a++]=new Cm(o,e,t)}i[a++]=new Cm(o,e,t)}else i[a++]=n;r=o}return i}function Im(e){return e<32?e!==9:e===127||e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||e===1564}function Lm(e,t){let n=[],r=new Cm(0,``,0),i=0;for(let a of t){let t=a.endIndex;for(;i<t;i++)Im(e.charCodeAt(i))&&(i>r.endIndex&&(r=new Cm(i,a.type,a.metadata),n.push(r)),r=new Cm(i+1,`mtkcontrol`,a.metadata),n.push(r));i>r.endIndex&&(r=new Cm(t,a.type,a.metadata),n.push(r))}return n}function Rm(e,t,n,r){let i=e.continuesWithWrappedLine,a=e.fauxIndentLength,o=e.tabSize,s=e.startVisibleColumn,c=e.useMonospaceOptimizations,l=e.selectionsOnLine,u=e.renderWhitespace===1,d=e.renderWhitespace===3,f=e.renderSpaceWidth!==e.spaceWidth,p=[],m=0,h=0,g=r[h].type,_=r[h].endIndex,v=r.length,y=!1,b=vo(t),x;b===-1?(y=!0,b=n,x=n):x=bo(t);let S=!1,C=0,w=l&&l[C],T=s%o;for(let e=a;e<n;e++){let i=t.charCodeAt(e);w&&e>=w.endOffset&&(C++,w=l&&l[C]);let s;if(e<b||e>x)s=!0;else if(i===9)s=!0;else if(i===32)if(u)if(S)s=!0;else{let r=e+1<n?t.charCodeAt(e+1):0;s=r===32||r===9}else s=!0;else s=!1;if(s&&l&&(s=!!w&&w.startOffset<=e&&w.endOffset>e),s&&d&&(s=y||e>x),S){if(!s||!c&&T>=o){if(f){let t=m>0?p[m-1].endIndex:a;for(let n=t+1;n<=e;n++)p[m++]=new Cm(n,`mtkw`,1)}else p[m++]=new Cm(e,`mtkw`,1);T%=o}}else (e===_||s&&e>a)&&(p[m++]=new Cm(e,g,0),T%=o);for(i===9?T=o:qo(i)?T+=2:T++,S=s;e===_&&(h++,h<v);)g=r[h].type,_=r[h].endIndex}let ee=!1;if(S)if(i&&u){let e=n>0?t.charCodeAt(n-1):0,r=n>1?t.charCodeAt(n-2):0;e===32&&r!==32&&r!==9||(ee=!0)}else ee=!0;if(ee)if(f){let e=m>0?p[m-1].endIndex:a;for(let t=e+1;t<=n;t++)p[m++]=new Cm(t,`mtkw`,1)}else p[m++]=new Cm(n,`mtkw`,1);else p[m++]=new Cm(n,g,0);return p}function zm(e,t,n,r){r.sort(ym.compare);let i=Sm.normalize(e,r),a=i.length,o=0,s=[],c=0,l=0;for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.endIndex,u=t.type,d=t.metadata;for(;o<a&&i[o].startOffset<r;){let e=i[o];if(e.startOffset>l&&(l=e.startOffset,s[c++]=new Cm(l,u,d)),e.endOffset+1<=r)l=e.endOffset+1,s[c++]=new Cm(l,u+` `+e.className,d|e.metadata),o++;else{l=r,s[c++]=new Cm(l,u+` `+e.className,d|e.metadata);break}}r>l&&(l=r,s[c++]=new Cm(l,u,d))}let u=n[n.length-1].endIndex;if(o<a&&i[o].startOffset===u)for(;o<a&&i[o].startOffset===u;){let e=i[o];s[c++]=new Cm(l,e.className,e.metadata),o++}return s}function Bm(e,t){let n=e.fontIsMonospace,r=e.canUseHalfwidthRightwardsArrow,i=e.containsForeignElements,a=e.lineContent,o=e.len,s=e.isOverflowing,c=e.parts,l=e.fauxIndentLength,u=e.tabSize,d=e.startVisibleColumn,f=e.containsRTL,p=e.spaceWidth,m=e.renderSpaceCharCode,h=e.renderWhitespace,g=e.renderControlCharacters,_=new Dm(o+1,c.length),v=!1,y=0,b=d,x=0,S=0,C=0,w=0;f?t.appendASCIIString(`<span dir="ltr">`):t.appendASCIIString(`<span>`);for(let e=0,s=c.length;e<s;e++){w+=C;let s=c[e],d=s.endIndex,f=s.type,T=h!==0&&s.isWhitespace(),ee=T&&!n&&(f===`mtkw`||!i),te=y===d&&s.isPseudoAfter();if(x=0,t.appendASCIIString(`<span class="`),t.appendASCIIString(ee?`mtkz`:f),t.appendASCII(34),T){let n=0;{let e=y,t=b;for(;e<d;e++){let r=(a.charCodeAt(e)===9?u-t%u:1)|0;n+=r,e>=l&&(t+=r)}}for(ee&&(t.appendASCIIString(` style="width:`),t.appendASCIIString(String(p*n)),t.appendASCIIString(`px"`)),t.appendASCII(62);y<d;y++){_.setColumnInfo(y+1,e-S,x,w),S=0;let n=a.charCodeAt(y),i;if(n===9){i=u-b%u|0,!r||i>1?t.write1(8594):t.write1(65515);for(let e=2;e<=i;e++)t.write1(160)}else i=1,t.write1(m);x+=i,y>=l&&(b+=i)}C=n}else{let n=0;for(t.appendASCII(62);y<d;y++){_.setColumnInfo(y+1,e-S,x,w),S=0;let r=a.charCodeAt(y),i=1,o=1;switch(r){case 9:i=u-b%u,o=i;for(let e=1;e<=i;e++)t.write1(160);break;case 32:t.write1(160);break;case 60:t.appendASCIIString(`&lt;`);break;case 62:t.appendASCIIString(`&gt;`);break;case 38:t.appendASCIIString(`&amp;`);break;case 0:g?t.write1(9216):t.appendASCIIString(`&#00;`);break;case 65279:case 8232:case 8233:case 133:t.write1(65533);break;default:qo(r)&&o++,g&&r<32?t.write1(9216+r):g&&r===127?t.write1(9249):g&&Im(r)?(t.appendASCIIString(`[U+`),t.appendASCIIString(Vm(r)),t.appendASCIIString(`]`),i=8):t.write1(r)}x+=i,n+=i,y>=l&&(b+=o)}C=n}te?S++:S=0,y>=o&&!v&&s.isPseudoAfter()&&(v=!0,_.setColumnInfo(y+1,e,x,w)),t.appendASCIIString(`</span>`)}return v||_.setColumnInfo(o+1,c.length-1,x,w),s&&t.appendASCIIString(`<span>&hellip;</span>`),t.appendASCIIString(`</span>`),new Om(_,f,i)}function Vm(e){return e.toString(16).toUpperCase().padStart(4,`0`)}var Hm=class{constructor(e,t,n,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=r|0}},Um=class{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){let n=this.outputLineIndex>0?t:0;return new I(e+this.outputLineIndex,n+this.outputOffset+1)}},Wm=class{constructor(e,t,n,r,i){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=n,this.injectionOffsets=r,this.injectionOptions=i}getInputOffsetOfOutputPosition(e,t){let n=0;if(n=e===0?t:this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let e=0;e<this.injectionOffsets.length&&n>this.injectionOffsets[e];e++)n<this.injectionOffsets[e]+this.injectionOptions[e].content.length?n=this.injectionOffsets[e]:n-=this.injectionOptions[e].content.length;return n}getOutputPositionOfInputOffset(e,t=2){let n=0;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)n+=this.injectionOptions[r].content.length;return e+=n,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let n=0,r=this.breakOffsets.length-1,i=0,a=0;for(;n<=r;){i=n+(r-n)/2|0;let o=this.breakOffsets[i];if(a=i>0?this.breakOffsets[i-1]:0,t===0)if(e<=a)r=i-1;else if(e>o)n=i+1;else break;else if(e<a)r=i-1;else if(e>=o)n=i+1;else break}return new Um(i,e-a)}outputPositionToOffsetInUnwrappedLine(e,t){let n=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(n-=this.wrappedTextIndentLength),n}normalizeOffsetAroundInjections(e,t){let n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInUnwrappedLine+n.length?n.offsetInUnwrappedLine+n.length:n.offsetInUnwrappedLine;if(t===1){let e=n.offsetInUnwrappedLine+n.length,t=n.injectedTextIndex;for(;t+1<this.injectionOffsets.length&&this.injectionOffsets[t+1]===this.injectionOffsets[t];)e+=this.injectionOptions[t+1].content.length,t++;return e}let r=n.offsetInUnwrappedLine,i=n.injectedTextIndex;for(;i-1>=0&&this.injectionOffsets[i-1]===this.injectionOffsets[i];)r-=this.injectionOptions[i-1].content.length,i++;return r}getInjectedText(e,t){let n=this.outputPositionToOffsetInUnwrappedLine(e,t),r=this.getInjectedTextAtOffset(n);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let r=0;for(let i=0;i<t.length;i++){let a=n[i].content.length,o=t[i]+r,s=t[i]+r+a;if(o>e)break;if(e<=s)return{injectedTextIndex:i,offsetInUnwrappedLine:o,length:a};r+=a}}}},Gm=class{constructor(e,t){this.tabSize=e,this.data=t}},Km=class{constructor(e,t,n,r,i,a,o){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=r,this.startVisibleColumn=i,this.tokens=a,this.inlineDecorations=o}},qm=class e{constructor(t,n,r,i,a,o,s,c,l,u){this.minColumn=t,this.maxColumn=n,this.content=r,this.continuesWithWrappedLine=i,this.isBasicASCII=e.isBasicASCII(r,o),this.containsRTL=e.containsRTL(r,this.isBasicASCII,a),this.tokens=s,this.inlineDecorations=c,this.tabSize=l,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?Uo(e):!0}static containsRTL(e,t,n){return!t&&n?zo(e):!1}},Jm=class{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}},Ym=class{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new Jm(new L(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}},Xm=class{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}},Zm=class{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}};function Qm(e){return Array.isArray(e)}function $m(e){return!Qm(e)}function eh(e){return typeof e==`string`}function th(e){return!eh(e)}function nh(e){return!e}function rh(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function ih(e){return e.replace(/[&<>'"_]/g,`-`)}function ah(e,t){console.log(`${e.languageId}: ${t}`)}function oh(e,t){return Error(`${e.languageId}: ${t}`)}function sh(e,t,n,r,i){let a=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,o=null;return t.replace(a,function(t,a,s,c,l,u,d,f,p){return nh(s)?nh(c)?!nh(l)&&l<r.length?rh(e,r[l]):!nh(d)&&e&&typeof e[d]==`string`?e[d]:(o===null&&(o=i.split(`.`),o.unshift(i)),!nh(u)&&u<o.length?rh(e,o[u]):``):rh(e,n):`$`})}function ch(e,t){let n=t;for(;n&&n.length>0;){let t=e.tokenizer[n];if(t)return t;let r=n.lastIndexOf(`.`);n=r<0?null:n.substr(0,r)}return null}function lh(e,t){let n=t;for(;n&&n.length>0;){if(e.stateNames[n])return!0;let t=n.lastIndexOf(`.`);n=t<0?null:n.substr(0,t)}return!1}var uh=5,dh=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new fh(e,t);let n=fh.getStackElementId(e);n.length>0&&(n+=`|`),n+=t;let r=this._entries[n];return r||(r=new fh(e,t),this._entries[n]=r,r)}};dh._INSTANCE=new dh(uh);var fh=class e{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t=``;for(;e!==null;)t.length>0&&(t+=`|`),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(t){return e._equals(this,t)}push(e){return dh.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return dh.create(this.parent,e)}},ph=class e{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new e(this.languageId,this.state)}},mh=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null||e!==null&&e.depth>=this._maxCacheDepth)return new hh(e,t);let n=fh.getStackElementId(e),r=this._entries[n];return r||(r=new hh(e,null),this._entries[n]=r,r)}};mh._INSTANCE=new mh(uh);var hh=class e{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:mh.create(this.stack,this.embeddedModeData)}equals(t){return!(t instanceof e)||!this.stack.equals(t.stack)?!1:this.embeddedModeData===null&&t.embeddedModeData===null?!0:this.embeddedModeData===null||t.embeddedModeData===null?!1:this.embeddedModeData.equals(t.embeddedModeData)}},gh=class{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new er(e,t,this._languageId)))}nestedModeTokenize(e,t,n,r){let i=n.languageId,a=n.state,o=Iu.get(i);if(!o)return this.enterMode(r,i),this.emit(r,``),a;let s=o.tokenize(e,t,a,r);return this._tokens=this._tokens.concat(s.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,s.endState}finalize(e){return new tr(this._tokens,e)}},_h=class e{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let r=e===null?0:e.length,i=t.length,a=n===null?0:n.length;if(r===0&&i===0&&a===0)return new Uint32Array;if(r===0&&i===0)return n;if(i===0&&a===0)return e;let o=new Uint32Array(r+i+a);e!==null&&o.set(e);for(let e=0;e<i;e++)o[r+e]=t[e];return n!==null&&o.set(n,r+i),o}nestedModeTokenize(t,n,r,i){let a=r.languageId,o=r.state,s=Iu.get(a);if(!s)return this.enterMode(i,a),this.emit(i,``),o;let c=s.tokenize2(t,n,o,i);return this._prependTokens=e._merge(this._prependTokens,this._tokens,c.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,c.endState}finalize(t){return new nr(e._merge(this._prependTokens,this._tokens,null),t)}},vh=class e{constructor(e,t,n,r){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=r,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let i=!1;this._tokenizationRegistryListener=Iu.onDidChange(e=>{if(i)return;let t=!1;for(let n=0,r=e.changedLanguages.length;n<r;n++){let r=e.changedLanguages[n];if(this._embeddedModes[r]){t=!0;break}}t&&(i=!0,Iu.fire([this._languageId]),i=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let t=[];for(let n in this._embeddedModes){let r=Iu.get(n);if(r){if(r instanceof e){let e=r.getLoadStatus();e.loaded===!1&&t.push(e.promise)}continue}let i=Iu.getPromise(n);i&&t.push(i)}return t.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(t).then(e=>void 0)}}getInitialState(){let e=dh.create(null,this._lexer.start);return mh.create(e,null)}tokenize(e,t,n,r){let i=new gh,a=this._tokenize(e,t,n,r,i);return i.finalize(a)}tokenize2(e,t,n,r){let i=new _h(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),a=this._tokenize(e,t,n,r,i);return i.finalize(a)}_tokenize(e,t,n,r,i){return n.embeddedModeData?this._nestedTokenize(e,t,n,r,i):this._myTokenize(e,t,n,r,i)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=ch(this._lexer,t.stack.state),!n))throw oh(this._lexer,`tokenizer state is not defined: `+t.stack.state);let r=-1,i=!1;for(let t of n){if(!th(t.action)||t.action.nextEmbedded!==`@pop`)continue;i=!0;let n=t.regex,a=t.regex.source;if(a.substr(0,4)===`^(?:`&&a.substr(a.length-1,1)===`)`){let e=(n.ignoreCase?`i`:``)+(n.unicode?`u`:``);n=new RegExp(a.substr(4,a.length-5),e)}let o=e.search(n);o===-1||o!==0&&t.matchOnlyAtLineStart||(r===-1||o<r)&&(r=o)}if(!i)throw oh(this._lexer,`no rule containing nextEmbedded: "@pop" in tokenizer embedded state: `+t.stack.state);return r}_nestedTokenize(e,t,n,r,i){let a=this._findLeavingNestedModeOffset(e,n);if(a===-1){let a=i.nestedModeTokenize(e,t,n.embeddedModeData,r);return mh.create(n.stack,new ph(n.embeddedModeData.languageId,a))}let o=e.substring(0,a);o.length>0&&i.nestedModeTokenize(o,!1,n.embeddedModeData,r);let s=e.substring(a);return this._myTokenize(s,t,n,r+a,i)}_safeRuleName(e){return e?e.name:`(unknown)`}_myTokenize(e,t,n,r,i){i.enterMode(r,this._languageId);let a=e.length,o=t&&this._lexer.includeLF?e+`
`:e,s=o.length,c=n.embeddedModeData,l=n.stack,u=0,d=null,f=!0;for(;f||u<s;){let n=u,p=l.depth,m=d?d.groups.length:0,h=l.state,g=null,_=null,v=null,y=null,b=null;if(d){g=d.matches;let e=d.groups.shift();_=e.matched,v=e.action,y=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&u>=s)break;f=!1;let e=this._lexer.tokenizer[h];if(!e&&(e=ch(this._lexer,h),!e))throw oh(this._lexer,`tokenizer state is not defined: `+h);let t=o.substr(u);for(let n of e)if((u===0||!n.matchOnlyAtLineStart)&&(g=t.match(n.regex),g)){_=g[0],v=n.action;break}}if(g||(g=[``],_=``),v||=(u<s&&(g=[o.charAt(u)],_=g[0]),this._lexer.defaultToken),_===null)break;for(u+=_.length;$m(v)&&th(v)&&v.test;)v=v.test(_,g,h,u===s);let x=null;if(typeof v==`string`||Array.isArray(v))x=v;else if(v.group)x=v.group;else if(v.token!==null&&v.token!==void 0){if(x=v.tokenSubst?sh(this._lexer,v.token,_,g,h):v.token,v.nextEmbedded)if(v.nextEmbedded===`@pop`){if(!c)throw oh(this._lexer,`cannot pop embedded mode if not inside one`);c=null}else if(c)throw oh(this._lexer,`cannot enter embedded mode from within an embedded mode`);else b=sh(this._lexer,v.nextEmbedded,_,g,h);if(v.goBack&&(u=Math.max(0,u-v.goBack)),v.switchTo&&typeof v.switchTo==`string`){let e=sh(this._lexer,v.switchTo,_,g,h);if(e[0]===`@`&&(e=e.substr(1)),ch(this._lexer,e))l=l.switchTo(e);else throw oh(this._lexer,`trying to switch to a state '`+e+`' that is undefined in rule: `+this._safeRuleName(y))}else if(v.transform&&typeof v.transform==`function`)throw oh(this._lexer,`action.transform not supported`);else if(v.next)if(v.next===`@push`){if(l.depth>=this._lexer.maxStack)throw oh(this._lexer,`maximum tokenizer stack size reached: [`+l.state+`,`+l.parent.state+`,...]`);l=l.push(h)}else if(v.next===`@pop`){if(l.depth<=1)throw oh(this._lexer,`trying to pop an empty stack in rule: `+this._safeRuleName(y));l=l.pop()}else if(v.next===`@popall`)l=l.popall();else{let e=sh(this._lexer,v.next,_,g,h);if(e[0]===`@`&&(e=e.substr(1)),ch(this._lexer,e))l=l.push(e);else throw oh(this._lexer,`trying to set a next state '`+e+`' that is undefined in rule: `+this._safeRuleName(y))}v.log&&typeof v.log==`string`&&ah(this._lexer,this._lexer.languageId+`: `+sh(this._lexer,v.log,_,g,h))}if(x===null)throw oh(this._lexer,`lexer rule has no well-defined action in rule: `+this._safeRuleName(y));let S=n=>{let a=this._modeService.getModeIdForLanguageName(n);a&&(n=a);let o=this._getNestedEmbeddedModeData(n);if(u<s){let n=e.substr(u);return this._nestedTokenize(n,t,mh.create(l,o),r+u,i)}else return mh.create(l,o)};if(Array.isArray(x)){if(d&&d.groups.length>0)throw oh(this._lexer,`groups cannot be nested: `+this._safeRuleName(y));if(g.length!==x.length+1)throw oh(this._lexer,`matched number of groups does not match the number of actions in rule: `+this._safeRuleName(y));let e=0;for(let t=1;t<g.length;t++)e+=g[t].length;if(e!==_.length)throw oh(this._lexer,`with groups, all characters should be matched in consecutive groups in rule: `+this._safeRuleName(y));d={rule:y,matches:g,groups:[]};for(let e=0;e<x.length;e++)d.groups[e]={action:x[e],matched:g[e+1]};u-=_.length;continue}else{if(x===`@rematch`&&(u-=_.length,_=``,g=null,x=``,b!==null))return S(b);if(_.length===0){if(s===0||p!==l.depth||h!==l.state||(d?d.groups.length:0)!==m)continue;throw oh(this._lexer,`no progress in tokenizer in rule: `+this._safeRuleName(y))}let e=null;if(eh(x)&&x.indexOf(`@brackets`)===0){let t=x.substr(9),n=yh(this._lexer,_);if(!n)throw oh(this._lexer,`@brackets token returned but no bracket defined as: `+_);e=ih(n.token+t)}else e=ih(x===``?``:x+this._lexer.tokenPostfix);n<a&&i.emit(n+r,e)}if(b!==null)return S(b)}return mh.create(l,c)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let e=Iu.get(t);if(e)return new ph(t,e.getInitialState())}return new ph(t||`vs.editor.nullMode`,Lu)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;let t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}};function yh(e,t){if(!t)return null;t=rh(e,t);let n=e.brackets;for(let e of n)if(e.open===t)return{token:e.token,bracketType:1};else if(e.close===t)return{token:e.token,bracketType:-1};return null}function bh(e,t,n,r){return new vh(e,t,n,r)}var xh=window.trustedTypes?.createPolicy(`standaloneColorizer`,{createHTML:e=>e}),Sh=class{static colorizeElement(e,t,n,r){r||={};let i=r.theme||`vs`,a=r.mimeType||n.getAttribute(`lang`)||n.getAttribute(`data-lang`);if(!a)return console.error(`Mode not detected`),Promise.resolve();e.setTheme(i);let o=n.firstChild?n.firstChild.nodeValue:``;return n.className+=` `+i,this.colorize(t,o||``,a,r).then(e=>{n.innerHTML=xh?.createHTML(e)??e},e=>console.error(e))}static colorize(e,t,n,r){let i=e.languageIdCodec,a=4;r&&typeof r.tabSize==`number`&&(a=r.tabSize),Yo(t)&&(t=t.substr(1));let o=_o(t),s=e.getModeId(n);if(!s)return Promise.resolve(wh(o,a,i));e.triggerMode(s);let c=Iu.get(s);if(c)return Ch(o,a,c,i);let l=Iu.getPromise(s);return l?new Promise((e,t)=>{l.then(n=>{Ch(o,a,n,i).then(e,t)},t)}):new Promise((e,t)=>{let n=null,r=null,c=()=>{n&&=(n.dispose(),null),r&&=(r.dispose(),null);let c=Iu.get(s);if(c){Ch(o,a,c,i).then(e,t);return}e(wh(o,a,i))};r=new Fi,r.cancelAndSet(c,500),n=Iu.onDidChange(e=>{e.changedLanguages.indexOf(s)>=0&&c()})})}static colorizeLine(e,t,n,r,i=4){let a=qm.isBasicASCII(e,t);return jm(new Tm(!1,!0,e,!1,a,qm.containsRTL(e,a,n),0,r,[],i,0,0,0,0,-1,`none`,!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let r=e.getLineContent(t);e.forceTokenization(t);let i=e.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),i,n)}};function Ch(e,t,n,r){return new Promise((i,a)=>{let o=()=>{let s=Th(e,t,n,r);if(n instanceof vh){let e=n.getLoadStatus();if(e.loaded===!1){e.promise.then(o,a);return}}i(s)};o()})}function wh(e,t,n){let r=[],i=new Uint32Array(2);i[0]=0,i[1]=16793600;for(let a=0,o=e.length;a<o;a++){let o=e[a];i[0]=o.length;let s=new _m(i,o,n),c=qm.isBasicASCII(o,!0),l=jm(new Tm(!1,!0,o,!1,c,qm.containsRTL(o,c,!0),0,s,[],t,0,0,0,0,-1,`none`,!1,!1,null));r=r.concat(l.html),r.push(`<br/>`)}return r.join(``)}function Th(e,t,n,r){let i=[],a=n.getInitialState();for(let o=0,s=e.length;o<s;o++){let s=e[o],c=n.tokenize2(s,!0,a,0);_m.convertToEndOffset(c.tokens,s.length);let l=new _m(c.tokens,s,r),u=qm.isBasicASCII(s,!0),d=jm(new Tm(!1,!0,s,!1,u,qm.containsRTL(s,u,!0),0,l.inflate(),[],t,0,0,0,0,-1,`none`,!1,!1,null));i=i.concat(d.html),i.push(`<br/>`),a=c.endState}return i.join(``)}var Eh;(function(e){e[e.Ignore=0]=`Ignore`,e[e.Info=1]=`Info`,e[e.Warning=2]=`Warning`,e[e.Error=3]=`Error`})(Eh||={}),(function(e){let t=`error`,n=`warning`,r=`info`;function i(i){return i?Do(t,i)?e.Error:Do(n,i)||Do(`warn`,i)?e.Warning:Do(r,i)?e.Info:e.Ignore:e.Ignore}e.fromValue=i;function a(i){switch(i){case e.Error:return t;case e.Warning:return n;case e.Info:return r;default:return`ignore`}}e.toString=a})(Eh||={});var Dh=Eh;function Oh(e){return e&&typeof e.getEditorType==`function`?e.getEditorType()===zc.ICodeEditor:!1}function kh(e){return e&&typeof e.getEditorType==`function`?e.getEditorType()===zc.IDiffEditor:!1}function Ah(e){return Oh(e)?e:kh(e)?e.getModifiedEditor():null}const jh=Ur(`IWorkspaceEditService`);function Mh(e){return qs(e)&&(!!e.newUri||!!e.oldUri)}function Nh(e){return qs(e)&&F.isUri(e.resource)&&qs(e.edit)}var Ph=class{constructor(e){this.metadata=e}static convert(e){return e.edits.map(e=>{if(Nh(e))return new Fh(e.resource,e.edit,e.modelVersionId,e.metadata);if(Mh(e))return new Ih(e.oldUri,e.newUri,e.options,e.metadata);throw Error(`Unsupported edit`)})}},Fh=class extends Ph{constructor(e,t,n,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}},Ih=class extends Ph{constructor(e,t,n,r){super(r),this.oldResource=e,this.newResource=t,this.options=n}},Lh=Object.prototype.hasOwnProperty;function Rh(e,t){for(let n in e)if(Lh.call(e,n)&&t({key:n,value:e[n]},function(){delete e[n]})===!1)return}var zh=class{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}};const Bh=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new N,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}};var Vh=Object.hasOwnProperty,Hh=class{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},Uh=class{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}},Wh=class e{static readOptions(e){let t=e,n=new Uh;for(let e of at){let r=e.name===`_never_`?void 0:t[e.name];n._write(e.id,r)}return n}static validateOptions(e){let t=new oe;for(let n of at)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){let n=new Hh;for(let r of at)n._write(r.id,r.compute(t,n,e._read(r.id)));return n}static _deepEquals(t,n){if(typeof t!=`object`||typeof n!=`object`)return t===n;if(Array.isArray(t)||Array.isArray(n))return Array.isArray(t)&&Array.isArray(n)?Op(t,n):!1;for(let r in t)if(!e._deepEquals(t[r],n[r]))return!1;return!0}static checkEquals(t,n){let r=[],i=!1;for(let a of at){let o=!e._deepEquals(t._read(a.id),n._read(a.id));r[a.id]=o,o&&(i=!0)}return i?new ae(r):null}};function Gh(e){let t=e.wordWrap;t===!0?e.wordWrap=`on`:t===!1&&(e.wordWrap=`off`);let n=e.lineNumbers;n===!0?e.lineNumbers=`on`:n===!1&&(e.lineNumbers=`off`),e.autoClosingBrackets===!1&&(e.autoClosingBrackets=`never`,e.autoClosingQuotes=`never`,e.autoSurround=`never`),e.cursorBlinking===`visible`&&(e.cursorBlinking=`solid`);let r=e.renderWhitespace;r===!0?e.renderWhitespace=`boundary`:r===!1&&(e.renderWhitespace=`none`);let i=e.renderLineHighlight;i===!0?e.renderLineHighlight=`line`:i===!1&&(e.renderLineHighlight=`none`);let a=e.acceptSuggestionOnEnter;a===!0?e.acceptSuggestionOnEnter=`on`:a===!1&&(e.acceptSuggestionOnEnter=`off`);let o=e.tabCompletion;o===!1?e.tabCompletion=`off`:o===!0&&(e.tabCompletion=`onlySnippets`);let s=e.suggest;if(s&&typeof s.filteredTypes==`object`&&s.filteredTypes){let e={};e.method=`showMethods`,e.function=`showFunctions`,e.constructor=`showConstructors`,e.deprecated=`showDeprecated`,e.field=`showFields`,e.variable=`showVariables`,e.class=`showClasses`,e.struct=`showStructs`,e.interface=`showInterfaces`,e.module=`showModules`,e.property=`showProperties`,e.event=`showEvents`,e.operator=`showOperators`,e.unit=`showUnits`,e.value=`showValues`,e.constant=`showConstants`,e.enum=`showEnums`,e.enumMember=`showEnumMembers`,e.keyword=`showKeywords`,e.text=`showWords`,e.color=`showColors`,e.file=`showFiles`,e.reference=`showReferences`,e.folder=`showFolders`,e.typeParameter=`showTypeParameters`,e.snippet=`showSnippets`,Rh(e,e=>{let t=s.filteredTypes[e.key];t===!1&&(s[e.value]=t)})}let c=e.hover;c===!0?e.hover={enabled:!0}:c===!1&&(e.hover={enabled:!1});let l=e.parameterHints;l===!0?e.parameterHints={enabled:!0}:l===!1&&(e.parameterHints={enabled:!1});let u=e.autoIndent;u===!0?e.autoIndent=`full`:u===!1&&(e.autoIndent=`advanced`);let d=e.matchBrackets;d===!0?e.matchBrackets=`always`:d===!1&&(e.matchBrackets=`never`);let{renderIndentGuides:f,highlightActiveIndentGuide:p}=e;e.guides||={},f!==void 0&&(e.guides.indentation=!!f),p!==void 0&&(e.guides.highlightActiveIndentation=!!p)}function Kh(e){let t=Cc(e);return Gh(t),t}var qh=class e extends j{constructor(e,t){super(),this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new N),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new se,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=Kh(t),this._readOptions=Wh.readOptions(this._rawOptions),this._validatedOptions=Wh.validateOptions(this._readOptions),this._register(Nc.onDidChangeZoomLevel(e=>this._recomputeOptions())),this._register(Bh.onDidChangeTabFocus(e=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){let e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{let n=Wh.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){let e=this._getEnvConfiguration(),t=Ic.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Bh.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Wh.computeOptions(this._validatedOptions,n)}static _subsetEquals(e,t){for(let n in t)if(Vh.call(t,n)){let r=t[n],i=e[n];if(i===r)continue;if(Array.isArray(i)&&Array.isArray(r)){if(!Op(i,r))return!1;continue}if(i&&typeof i==`object`&&r&&typeof r==`object`){if(!this._subsetEquals(i,r))return!1;continue}return!1}return!0}updateOptions(t){if(t===void 0)return;let n=Kh(t);e._subsetEquals(this._rawOptions,n)||(this._rawOptions=Oc(this._rawOptions,n||{}),this._readOptions=Wh.readOptions(this._rawOptions),this._validatedOptions=Wh.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(t){let n=e._digitCount(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}};const Jh=Object.freeze({id:`editor`,order:5,type:`object`,title:t(`editorConfigurationTitle`,`Editor`),scope:5});var Yh=Jd.as(Qd.Configuration),Xh=Object.assign(Object.assign({},Jh),{properties:{"editor.tabSize":{type:`number`,default:it.tabSize,minimum:1,markdownDescription:t(`tabSize`,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:`boolean`,default:it.insertSpaces,markdownDescription:t(`insertSpaces`,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:`boolean`,default:it.detectIndentation,markdownDescription:t(`detectIndentation`,"Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:`boolean`,default:it.trimAutoWhitespace,description:t(`trimAutoWhitespace`,`Remove trailing auto inserted whitespace.`)},"editor.largeFileOptimizations":{type:`boolean`,default:it.largeFileOptimizations,description:t(`largeFileOptimizations`,`Special handling for large files to disable certain memory intensive features.`)},"editor.wordBasedSuggestions":{type:`boolean`,default:!0,description:t(`wordBasedSuggestions`,`Controls whether completions should be computed based on words in the document.`)},"editor.wordBasedSuggestionsMode":{enum:[`currentDocument`,`matchingDocuments`,`allDocuments`],default:`matchingDocuments`,enumDescriptions:[t(`wordBasedSuggestionsMode.currentDocument`,`Only suggest words from the active document.`),t(`wordBasedSuggestionsMode.matchingDocuments`,`Suggest words from all open documents of the same language.`),t(`wordBasedSuggestionsMode.allDocuments`,`Suggest words from all open documents.`)],description:t(`wordBasedSuggestionsMode`,`Controls from which documents word based completions are computed.`)},"editor.semanticHighlighting.enabled":{enum:[!0,!1,`configuredByTheme`],enumDescriptions:[t(`semanticHighlighting.true`,`Semantic highlighting enabled for all color themes.`),t(`semanticHighlighting.false`,`Semantic highlighting disabled for all color themes.`),t(`semanticHighlighting.configuredByTheme`,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:`configuredByTheme`,description:t(`semanticHighlighting.enabled`,`Controls whether the semanticHighlighting is shown for the languages that support it.`)},"editor.stablePeek":{type:`boolean`,default:!1,markdownDescription:t(`stablePeek`,"Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:`integer`,default:2e4,description:t(`maxTokenizationLineLength`,`Lines above this length will not be tokenized for performance reasons`)},"editor.language.brackets":{type:`array`,default:!1,description:t(`schema.brackets`,`Defines the bracket symbols that increase or decrease the indentation.`),items:{type:`array`,items:[{type:`string`,description:t(`schema.openBracket`,`The opening bracket character or string sequence.`)},{type:`string`,description:t(`schema.closeBracket`,`The closing bracket character or string sequence.`)}]}},"editor.language.colorizedBracketPairs":{type:`array`,default:!1,description:t(`schema.colorizedBracketPairs`,`Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled.`),items:{type:`array`,items:[{type:`string`,description:t(`schema.openBracket`,`The opening bracket character or string sequence.`)},{type:`string`,description:t(`schema.closeBracket`,`The closing bracket character or string sequence.`)}]}},"diffEditor.maxComputationTime":{type:`number`,default:5e3,description:t(`maxComputationTime`,`Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.`)},"diffEditor.maxFileSize":{type:`number`,default:50,description:t(`maxFileSize`,`Maximum file size in MB for which to compute diffs. Use 0 for no limit.`)},"diffEditor.renderSideBySide":{type:`boolean`,default:!0,description:t(`sideBySide`,`Controls whether the diff editor shows the diff side by side or inline.`)},"diffEditor.ignoreTrimWhitespace":{type:`boolean`,default:!0,description:t(`ignoreTrimWhitespace`,`When enabled, the diff editor ignores changes in leading or trailing whitespace.`)},"diffEditor.renderIndicators":{type:`boolean`,default:!0,description:t(`renderIndicators`,`Controls whether the diff editor shows +/- indicators for added/removed changes.`)},"diffEditor.codeLens":{type:`boolean`,default:!1,description:t(`codeLens`,`Controls whether the editor shows CodeLens.`)},"diffEditor.wordWrap":{type:`string`,enum:[`off`,`on`,`inherit`],default:`inherit`,markdownEnumDescriptions:[t(`wordWrap.off`,`Lines will never wrap.`),t(`wordWrap.on`,`Lines will wrap at the viewport width.`),t(`wordWrap.inherit`,"Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function Zh(e){return e.type!==void 0||e.anyOf!==void 0}for(let e of at){let t=e.schema;if(t!==void 0)if(Zh(t))Xh.properties[`editor.${e.name}`]=t;else for(let e in t)Vh.call(t,e)&&(Xh.properties[e]=t[e])}var Qh=null;function $h(){return Qh===null&&(Qh=Object.create(null),Object.keys(Xh.properties).forEach(e=>{Qh[e]=!0})),Qh}function eg(e){return $h()[`editor.${e}`]||!1}function tg(e){return $h()[`diffEditor.${e}`]||!1}Yh.registerConfiguration(Xh);var ng=class{static insert(e,t){return{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},rg=class e{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?yf(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...t){let n=Cc(this.contents),r=Cc(this.overrides),i=[...this.keys];for(let e of t){this.mergeContents(n,e.contents);for(let t of e.overrides){let[e]=r.filter(e=>Op(e.identifiers,t.identifiers));e?this.mergeContents(e.contents,t.contents):r.push(Cc(t))}for(let t of e.keys)i.indexOf(t)===-1&&i.push(t)}return new e(n,i,r)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(t){let n=this.getContentsForOverrideIdentifer(t);if(!n||typeof n!=`object`||!Object.keys(n).length)return this;let r={};for(let e of Ip([...Object.keys(this.contents),...Object.keys(n)])){let t=this.contents[e],i=n[e];i&&(typeof t==`object`&&typeof i==`object`?(t=Cc(t),this.mergeContents(t,i)):t=i),r[e]=t}return new e(r,this.keys,this.overrides)}mergeContents(e,t){for(let n of Object.keys(t)){if(n in e&&qs(e[n])&&qs(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Cc(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?wc(e):e}getContentsForOverrideIdentifer(e){for(let t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),gf(this.contents,e,t,e=>{throw Error(e)})}removeValue(e){this.removeKey(e)&&_f(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t===-1?!1:(this.keys.splice(t,1),!0)}},ig=class extends rg{constructor(){let e=xf(),t=bf(),n=[];for(let t of Object.keys(e))lf.test(t)&&n.push({identifiers:[uf(t).trim()],keys:Object.keys(e[t]),contents:hf(e[t],e=>console.error(`Conflict in default settings file: ${e}`))});super(e,t,n)}},ag=class e{constructor(e,t,n=new rg,r=new rg,i=new hs,a=new rg,o=new hs,s=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=r,this._folderConfigurations=i,this._memoryConfiguration=a,this._memoryConfigurationByResource=o,this._freeze=s,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new hs,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new rg,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){let r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);let i=this._memoryConfigurationByResource.get(e);i&&(n=n.merge(i))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:n,overrides:r,keys:i}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:i}]),e},[])}}static parse(t){let n=this.parseConfigurationModel(t.defaults),r=this.parseConfigurationModel(t.user),i=this.parseConfigurationModel(t.workspace),a=t.folders.reduce((e,t)=>(e.set(F.revive(t[0]),this.parseConfigurationModel(t[1])),e),new hs);return new e(n,r,new rg,i,a,new rg,new hs,!1)}static parseConfigurationModel(e){return new rg(e.contents,e.keys,e.overrides).freeze()}},og=class{constructor(e,t,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this._previousConfiguration=void 0;let i=new Set;e.keys.forEach(e=>i.add(e)),e.overrides.forEach(([,e])=>e.forEach(e=>i.add(e))),this.affectedKeys=[...i.values()];let a=new rg;this.affectedKeys.forEach(e=>a.setValue(e,{})),this.affectedKeysTree=a.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=ag.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){return this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)?t?!kc(this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace)):!0:!1}doesAffectedKeysTreeContains(e,t){let n=hf({[t]:!0},()=>{}),r;for(;typeof n==`object`&&(r=Object.keys(n)[0]);){if(e=e[r],!e)return!1;n=n[r]}return!0}},sg=/^(cursor|delete)/,cg=class extends j{constructor(e,t,n,r,i){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=i,this._onDidUpdateKeybindings=this._register(new N),this._currentChord=null,this._currentChordChecker=new Ii,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=lg.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Fi,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:M.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){let n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){let n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn(`Unexpected keyboard event mapped to a chord`),null;let[r]=n.getDispatchParts();if(r===null)return null;let i=this._contextKeyService.getContext(t),a=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(i,a,r)}_enterChordMode(e,n){this._currentChord={keypress:e,label:n},this._currentChordStatusMessage=this._notificationService.status(t(`first.chord`,`({0}) was pressed. Waiting for second key of chord...`,n));let r=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-r>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&=(this._currentChordStatusMessage.dispose(),null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchParts();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=lg.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=lg.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log(`+ Clearing single modifier due to 300ms elapsed.`),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[i]=n.getParts();return this._ignoreSingleModifiers=new lg(i),this._currentSingleModifier!==null&&this._log(`+ Clearing single modifier due to other key up.`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,n,r=!1){let i=!1;if(e.isChord())return console.warn(`Unexpected keyboard event mapped to a chord`),!1;let a=null,o=null;if(r){let[t]=e.getSingleModifierDispatchParts();a=t,o=t}else [a]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(a===null)return this._log(`\\ Keyboard event cannot be dispatched in keydown phase.`),i;let s=this._contextKeyService.getContext(n),c=e.getLabel(),l=this._getResolver().resolve(s,o,a);return this._logService.trace(`KeybindingService#dispatch`,c,l?.commandId),l&&l.enterChord?(i=!0,this._enterChordMode(a,c),i):(this._currentChord&&(!l||!l.commandId)&&(this._notificationService.status(t(`missing.chord`,`The key combination ({0}, {1}) is not a command.`,this._currentChord.label,c),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),l&&l.commandId&&(l.bubble||(i=!0),l.commandArgs===void 0?this._commandService.executeCommand(l.commandId).then(void 0,e=>this._notificationService.warn(e)):this._commandService.executeCommand(l.commandId,l.commandArgs).then(void 0,e=>this._notificationService.warn(e)),sg.test(l.commandId)||this._telemetryService.publicLog2(`workbenchActionExecuted`,{id:l.commandId,from:`keybinding`})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}},lg=class{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case`ctrl`:return this._ctrlKey;case`shift`:return this._shiftKey;case`alt`:return this._altKey;case`meta`:return this._metaKey}}};lg.EMPTY=new lg(null);var ug=v||``,dg=new Map;dg.set(`false`,!1),dg.set(`true`,!0),dg.set(`isMac`,p),dg.set(`isLinux`,m),dg.set(`isWindows`,f),dg.set(`isWeb`,g),dg.set(`isMacNative`,p&&!g),dg.set(`isEdge`,ug.indexOf(`Edg/`)>=0),dg.set(`isFirefox`,ug.indexOf(`Firefox`)>=0),dg.set(`isChrome`,ug.indexOf(`Chrome`)>=0),dg.set(`isSafari`,ug.indexOf(`Safari`)>=0);var fg=Object.prototype.hasOwnProperty,pg=class{static has(e){return vg.create(e)}static equals(e,t){return yg.create(e,t)}static regex(e,t){return kg.create(e,t)}static not(e){return Cg.create(e)}static and(...e){return Mg.create(e,null)}static or(...e){return Ng.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split(`||`);return Ng.create(n.map(e=>this._deserializeAndExpression(e,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split(`&&`);return Mg.create(n.map(e=>this._deserializeOne(e,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf(`!=`)>=0){let n=e.split(`!=`);return Sg.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf(`==`)>=0){let n=e.split(`==`);return yg.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf(`=~`)>=0){let n=e.split(`=~`);return kg.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(` in `)>=0){let t=e.split(` in `);return bg.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){let t=e.split(`>=`);return Eg.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){let t=e.split(`>`);return Tg.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){let t=e.split(`<=`);return Og.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){let t=e.split(`<`);return Dg.create(t[0].trim(),t[1].trim())}return/^\!\s*/.test(e)?Cg.create(e.substr(1).trim()):vg.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e===`true`)return!0;if(e===`false`)return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(ro(e)){if(t)throw Error(`missing regexp-value for =~-expression`);return console.warn(`missing regexp-value for =~-expression`),null}let n=e.indexOf(`/`),r=e.lastIndexOf(`/`);if(n===r||n<0){if(t)throw Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let i=e.slice(n+1,r),a=e[r+1]===`i`?`i`:``;try{return new RegExp(i,a)}catch(n){if(t)throw Error(`bad regexp-value '${e}', parse error: ${n}`);return console.warn(`bad regexp-value '${e}', parse error: ${n}`),null}}};function mg(e,t){let n=e?e.substituteConstants():void 0,r=t?t.substituteConstants():void 0;return!n&&!r?!0:!n||!r?!1:n.equals(r)}function hg(e,t){return e.cmp(t)}var gg=class{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return`false`}keys(){return[]}negate(){return _g.INSTANCE}};gg.INSTANCE=new gg;var _g=class{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return`true`}keys(){return[]}negate(){return gg.INSTANCE}};_g.INSTANCE=new _g;var vg=class e{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(t,n=null){let r=dg.get(t);return typeof r==`boolean`?r?_g.INSTANCE:gg.INSTANCE:new e(t,n)}cmp(e){return e.type===this.type?Fg(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=dg.get(this.key);return typeof e==`boolean`?e?_g.INSTANCE:gg.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||=Cg.create(this.key,this),this.negated}},yg=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(t,n,r=null){if(typeof n==`boolean`)return n?vg.create(t,r):Cg.create(t,r);let i=dg.get(t);return typeof i==`boolean`?n===(i?`true`:`false`)?_g.INSTANCE:gg.INSTANCE:new e(t,n,r)}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=dg.get(this.key);if(typeof e==`boolean`){let t=e?`true`:`false`;return this.value===t?_g.INSTANCE:gg.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||=Sg.create(this.key,this.value,this),this.negated}},bg=class e{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(t,n){return new e(t,n)}cmp(e){return e.type===this.type?Ig(this.key,this.valueKey,e.key,e.valueKey):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n==`string`&&typeof t==`object`&&t?fg.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||=xg.create(this),this.negated}},xg=class e{constructor(e){this._actual=e,this.type=11}static create(t){return new e(t)}cmp(e){return e.type===this.type?this._actual.cmp(e._actual):this.type-e.type}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw Error(`Method not implemented.`)}keys(){return this._actual.keys()}negate(){return this._actual}},Sg=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(t,n,r=null){if(typeof n==`boolean`)return n?Cg.create(t,r):vg.create(t,r);let i=dg.get(t);return typeof i==`boolean`?n===(i?`true`:`false`)?gg.INSTANCE:_g.INSTANCE:new e(t,n,r)}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=dg.get(this.key);if(typeof e==`boolean`){let t=e?`true`:`false`;return this.value===t?gg.INSTANCE:_g.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||=yg.create(this.key,this.value,this),this.negated}},Cg=class e{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(t,n=null){let r=dg.get(t);return typeof r==`boolean`?r?gg.INSTANCE:_g.INSTANCE:new e(t,n)}cmp(e){return e.type===this.type?Fg(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=dg.get(this.key);return typeof e==`boolean`?e?gg.INSTANCE:_g.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||=vg.create(this.key,this),this.negated}};function wg(e,t){if(typeof e==`string`){let t=parseFloat(e);isNaN(t)||(e=t)}return typeof e==`string`||typeof e==`number`?t(e):gg.INSTANCE}var Tg=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(t,n,r=null){return wg(n,n=>new e(t,n,r))}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||=Og.create(this.key,this.value,this),this.negated}},Eg=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(t,n,r=null){return wg(n,n=>new e(t,n,r))}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||=Dg.create(this.key,this.value,this),this.negated}},Dg=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(t,n,r=null){return wg(n,n=>new e(t,n,r))}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||=Eg.create(this.key,this.value,this),this.negated}},Og=class e{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(t,n,r=null){return wg(n,n=>new e(t,n,r))}cmp(e){return e.type===this.type?Ig(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||=Tg.create(this.key,this.value,this),this.negated}},kg=class e{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(t,n){return new e(t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:``,n=e.regexp?e.regexp.source:``;return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:``,n=e.regexp?e.regexp.source:``;return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?`i`:``}`:`/invalid/`;return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||=Ag.create(this),this.negated}},Ag=class e{constructor(e){this._actual=e,this.type=8}static create(t){return new e(t)}cmp(e){return e.type===this.type?this._actual.cmp(e._actual):this.type-e.type}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw Error(`Method not implemented.`)}keys(){return this._actual.keys()}negate(){return this._actual}};function jg(e){let t=null;for(let n=0,r=e.length;n<r;n++){let r=e[n].substituteConstants();if(e[n]!==r&&t===null){t=[];for(let r=0;r<n;r++)t[r]=e[r]}t!==null&&(t[n]=r)}return t===null?e:t}var Mg=class e{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(t,n){return e._normalizeArr(t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let n=hg(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=jg(this.expr);return t===this.expr?this:e.create(t,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(t,n){let r=[],i=!1;for(let e of t)if(e){if(e.type===1){i=!0;continue}if(e.type===0)return gg.INSTANCE;if(e.type===6){r.push(...e.expr);continue}r.push(e)}if(r.length===0&&i)return _g.INSTANCE;if(r.length!==0){if(r.length===1)return r[0];r.sort(hg);for(let e=1;e<r.length;e++)r[e-1].equals(r[e])&&(r.splice(e,1),e--);if(r.length===1)return r[0];for(;r.length>1;){let t=r[r.length-1];if(t.type!==9)break;r.pop();let n=r.pop(),i=r.length===0,a=Ng.create(t.expr.map(t=>e.create([t,n],null)),null,i);a&&(r.push(a),r.sort(hg))}return r.length===1?r[0]:new e(r,n)}}serialize(){return this.expr.map(e=>e.serialize()).join(` && `)}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=Ng.create(e,this,!0)}return this.negated}},Ng=class e{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(t,n,r){return e._normalizeArr(t,n,r)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let n=hg(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=jg(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(t,n,r){let i=[],a=!1;if(t){for(let e=0,n=t.length;e<n;e++){let n=t[e];if(n){if(n.type===0){a=!0;continue}if(n.type===1)return _g.INSTANCE;if(n.type===9){i=i.concat(n.expr);continue}i.push(n)}}if(i.length===0&&a)return gg.INSTANCE;i.sort(hg)}if(i.length!==0){if(i.length===1)return i[0];for(let e=1;e<i.length;e++)i[e-1].equals(i[e])&&(i.splice(e,1),e--);if(i.length===1)return i[0];if(r){for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++)Lg(i[e],i[t])&&(i.splice(t,1),t--);if(i.length===1)return i[0]}return new e(i,n)}}serialize(){return this.expr.map(e=>e.serialize()).join(` || `)}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let t=[];for(let e of this.expr)t.push(e.negate());for(;t.length>1;){let n=t.shift(),r=t.shift(),i=[];for(let e of Rg(n))for(let t of Rg(r))i.push(Mg.create([e,t],null));let a=t.length===0;t.unshift(e.create(i,null,a))}this.negated=t[0]}return this.negated}},H=class e extends vg{constructor(t,n,r){super(t,null),this._defaultValue=n,typeof r==`object`?e._info.push(Object.assign(Object.assign({},r),{key:t})):r!==!0&&e._info.push({key:t,description:r,type:n==null?void 0:typeof n})}static all(){return e._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return yg.create(this.key,e)}};H._info=[];const Pg=Ur(`contextKeyService`);function Fg(e,t){return e<t?-1:e>t?1:0}function Ig(e,t,n,r){return e<n?-1:e>n?1:t<r?-1:t>r?1:0}function Lg(e,t){if(t.type===6&&e.type!==9&&e.type!==6){for(let n of t.expr)if(e.equals(n))return!0}let n=Rg(e.negate()).concat(Rg(t));n.sort(hg);for(let e=0;e<n.length;e++){let t=n[e].negate();for(let r=e+1;r<n.length;r++){let e=n[r];if(t.equals(e))return!0}}return!1}function Rg(e){return e.type===9?e.expr:[e]}var zg=class e{constructor(t,n,r){this._log=r,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(let e=0,n=t.length;e<n;e++){let n=t[e].command;n&&this._defaultBoundCommands.set(n,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=e.combine(t,n);for(let e=0,t=this._keybindings.length;e<t;e++){let t=this._keybindings[e];t.keypressParts.length!==0&&(t.when&&t.when.type===0||this._addKeyPress(t.keypressParts[0],t))}}static _isTargetedForRemoval(e,t,n,r,i){return!(e.command!==r||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||i&&(!e.when||!mg(i,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(let r of t){if(!r.command||r.command.length===0||r.command.charAt(0)!==`-`){n.push(r);continue}let t=r.command.substr(1),i=r.keypressParts[0],a=r.keypressParts[1],o=r.when;for(let n=e.length-1;n>=0;n--)this._isTargetedForRemoval(e[n],i,a,t,o)&&e.splice(n,1)}return e.concat(n)}_addKeyPress(t,n){let r=this._map.get(t);if(r===void 0){this._map.set(t,[n]),this._addToLookupMap(n);return}for(let t=r.length-1;t>=0;t--){let i=r[t];if(i.command===n.command)continue;let a=i.keypressParts.length>1,o=n.keypressParts.length>1;a&&o&&i.keypressParts[1]!==n.keypressParts[1]||e.whenIsEntirelyIncluded(i.when,n.when)&&this._removeFromLookupMap(i)}r.push(n),this._addToLookupMap(n)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);t===void 0?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(t!==void 0){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:Lg(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){let n=this._lookupMap.get(e);if(n===void 0||n.length===0)return null;if(n.length===1)return n[0];for(let e=n.length-1;e>=0;e--){let r=n[e];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:``}`);let r=null;if(t!==null){let e=this._map.get(t);if(e===void 0)return this._log(`\\ No keybinding entries.`),null;r=[];for(let t=0,i=e.length;t<i;t++){let i=e[t];i.keypressParts[1]===n&&r.push(i)}}else{let e=this._map.get(n);if(e===void 0)return this._log(`\\ No keybinding entries.`),null;r=e}let i=this._findCommand(e,r);return i?t===null&&i.keypressParts.length>1&&i.keypressParts[1]!==null?(this._log(`\\ From ${r.length} keybinding entries, matched chord, when: ${Bg(i.when)}, source: ${Vg(i)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${r.length} keybinding entries, matched ${i.command}, when: ${Bg(i.when)}, source: ${Vg(i)}.`),{enterChord:!1,leaveChord:i.keypressParts.length>1,commandId:i.command,commandArgs:i.commandArgs,bubble:i.bubble}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(t,n){for(let r=n.length-1;r>=0;r--){let i=n[r];if(e.contextMatchesRules(t,i.when))return i}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}};function Bg(e){return e?`${e.serialize()}`:`no when condition`}function Vg(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?`built-in`:`user`}const Hg=new class e{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(b===1){if(e&&e.win)return e.win}else if(b===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(t){let n=e.bindToCurrentPlatform(t);if(n&&n.primary){let e=si(n.primary,b);e&&this._registerDefaultKeybinding(e,t.id,t.args,t.weight,0,t.when)}if(n&&Array.isArray(n.secondary))for(let e=0,r=n.secondary.length;e<r;e++){let r=n.secondary[e],i=si(r,b);i&&this._registerDefaultKeybinding(i,t.id,t.args,t.weight,-e-1,t.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),uc.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(t,n){t.ctrlKey&&t.altKey&&!t.metaKey&&e._mightProduceChar(t.keyCode)&&console.warn(`Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: `,t,` for `,n)}_registerDefaultKeybinding(e,t,n,r,i,a){b===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:a,weight1:r,weight2:i,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings,this._extensionKeybindings),this._cachedMergedKeybindings.sort(Ug)),this._cachedMergedKeybindings.slice(0)}};Jd.add({EditorModes:`platform.keybindingsRegistry`}.EditorModes,Hg);function Ug(e,t){return e.weight1===t.weight1?e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2:e.weight1-t.weight1}var Wg=class{constructor(e,t,n,r,i,a,o){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?Gg(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=Gg(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=i,this.extensionId=a,this.isBuiltinExtension=o}};function Gg(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r)return t;t.push(r)}return t}var Kg=class{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=n(a);if(o===null)return null;r[i]=Xg(a,o,this.modifierLabels[e])}return r.join(` `)}};const qg=new Kg({ctrlKey:``,shiftKey:``,altKey:``,metaKey:``,separator:``},{ctrlKey:t({key:`ctrlKey`,comment:[`This is the short form for the Control key on the keyboard`]},`Ctrl`),shiftKey:t({key:`shiftKey`,comment:[`This is the short form for the Shift key on the keyboard`]},`Shift`),altKey:t({key:`altKey`,comment:[`This is the short form for the Alt key on the keyboard`]},`Alt`),metaKey:t({key:`windowsKey`,comment:[`This is the short form for the Windows key on the keyboard`]},`Windows`),separator:`+`},{ctrlKey:t({key:`ctrlKey`,comment:[`This is the short form for the Control key on the keyboard`]},`Ctrl`),shiftKey:t({key:`shiftKey`,comment:[`This is the short form for the Shift key on the keyboard`]},`Shift`),altKey:t({key:`altKey`,comment:[`This is the short form for the Alt key on the keyboard`]},`Alt`),metaKey:t({key:`superKey`,comment:[`This is the short form for the Super key on the keyboard`]},`Super`),separator:`+`}),Jg=new Kg({ctrlKey:t({key:`ctrlKey.long`,comment:[`This is the long form for the Control key on the keyboard`]},`Control`),shiftKey:t({key:`shiftKey.long`,comment:[`This is the long form for the Shift key on the keyboard`]},`Shift`),altKey:t({key:`altKey.long`,comment:[`This is the long form for the Alt key on the keyboard`]},`Alt`),metaKey:t({key:`cmdKey.long`,comment:[`This is the long form for the Command key on the keyboard`]},`Command`),separator:`+`},{ctrlKey:t({key:`ctrlKey.long`,comment:[`This is the long form for the Control key on the keyboard`]},`Control`),shiftKey:t({key:`shiftKey.long`,comment:[`This is the long form for the Shift key on the keyboard`]},`Shift`),altKey:t({key:`altKey.long`,comment:[`This is the long form for the Alt key on the keyboard`]},`Alt`),metaKey:t({key:`windowsKey.long`,comment:[`This is the long form for the Windows key on the keyboard`]},`Windows`),separator:`+`},{ctrlKey:t({key:`ctrlKey.long`,comment:[`This is the long form for the Control key on the keyboard`]},`Control`),shiftKey:t({key:`shiftKey.long`,comment:[`This is the long form for the Shift key on the keyboard`]},`Shift`),altKey:t({key:`altKey.long`,comment:[`This is the long form for the Alt key on the keyboard`]},`Alt`),metaKey:t({key:`superKey.long`,comment:[`This is the long form for the Super key on the keyboard`]},`Super`),separator:`+`}),Yg=new Kg({ctrlKey:`Ctrl`,shiftKey:`Shift`,altKey:`Alt`,metaKey:`Cmd`,separator:`+`},{ctrlKey:`Ctrl`,shiftKey:`Shift`,altKey:`Alt`,metaKey:`Super`,separator:`+`});function Xg(e,t,n){if(t===null)return``;let r=[];return e.ctrlKey&&r.push(n.ctrlKey),e.shiftKey&&r.push(n.shiftKey),e.altKey&&r.push(n.altKey),e.metaKey&&r.push(n.metaKey),t!==``&&r.push(t),r.join(n.separator)}var Zg=class extends fi{constructor(e,t){if(super(),t.length===0)throw mt(`parts`);this._os=e,this._parts=t}getLabel(){return qg.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return Jg.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:Yg.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new di(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}},Qg=class e extends Zg{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return``;case 16:return``;case 17:return``;case 18:return``}return rn.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?``:this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?``:rn.toString(e.keyCode)}_getElectronAccelerator(e){return rn.toElectronAccelerator(e.keyCode)}_getDispatchPart(t){return e.getDispatchStr(t)}static getDispatchStr(e){if(e.isModifierKey())return null;let t=``;return e.ctrlKey&&(t+=`ctrl+`),e.shiftKey&&(t+=`shift+`),e.altKey&&(t+=`alt+`),e.metaKey&&(t+=`meta+`),t+=rn.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?`ctrl`:e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?`shift`:e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?`alt`:e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?`meta`:null}static _scanCodeToKeyCode(e){let t=tn[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof li)return e;let t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new li(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(t,n){let r=Gg(t.map(e=>this._resolveSimpleUserBinding(e)));return r.length>0?[new e(new ui(r),n)]:[]}};const $g=Ur(`notificationService`);var e_=class{};const t_=Ur(`contextService`);var n_=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}},r_;(function(e){e.noSelection=t(`noSelection`,`No selection`),e.singleSelectionRange=t(`singleSelectionRange`,`Line {0}, Column {1} ({2} selected)`),e.singleSelection=t(`singleSelection`,`Line {0}, Column {1}`),e.multiSelectionRange=t(`multiSelectionRange`,`{0} selections ({1} characters selected)`),e.multiSelection=t(`multiSelection`,`{0} selections`),e.emergencyConfOn=t(`emergencyConfOn`,"Now changing the setting `accessibilitySupport` to 'on'."),e.openingDocs=t(`openingDocs`,`Now opening the Editor Accessibility documentation page.`),e.readonlyDiffEditor=t(`readonlyDiffEditor`,` in a read-only pane of a diff editor.`),e.editableDiffEditor=t(`editableDiffEditor`,` in a pane of a diff editor.`),e.readonlyEditor=t(`readonlyEditor`,` in a read-only code editor`),e.editableEditor=t(`editableEditor`,` in a code editor`),e.changeConfigToOnMac=t(`changeConfigToOnMac`,`To configure the editor to be optimized for usage with a Screen Reader press Command+E now.`),e.changeConfigToOnWinLinux=t(`changeConfigToOnWinLinux`,`To configure the editor to be optimized for usage with a Screen Reader press Control+E now.`),e.auto_on=t(`auto_on`,`The editor is configured to be optimized for usage with a Screen Reader.`),e.auto_off=t(`auto_off`,`The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time.`),e.tabFocusModeOnMsg=t(`tabFocusModeOnMsg`,`Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}.`),e.tabFocusModeOnMsgNoKb=t(`tabFocusModeOnMsgNoKb`,`Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding.`),e.tabFocusModeOffMsg=t(`tabFocusModeOffMsg`,`Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}.`),e.tabFocusModeOffMsgNoKb=t(`tabFocusModeOffMsgNoKb`,`Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding.`),e.openDocMac=t(`openDocMac`,`Press Command+H now to open a browser window with more information related to editor accessibility.`),e.openDocWinLinux=t(`openDocWinLinux`,`Press Control+H now to open a browser window with more information related to editor accessibility.`),e.outroMsg=t(`outroMsg`,`You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape.`),e.showAccessibilityHelpAction=t(`showAccessibilityHelpAction`,`Show Accessibility Help`)})(r_||={});var i_;(function(e){e.inspectTokensAction=t(`inspectTokens`,`Developer: Inspect Tokens`)})(i_||={});var a_;(function(e){e.gotoLineActionLabel=t(`gotoLineActionLabel`,`Go to Line/Column...`)})(a_||={});var o_;(function(e){e.helpQuickAccessActionLabel=t(`helpQuickAccess`,`Show all Quick Access Providers`)})(o_||={});var s_;(function(e){e.quickCommandActionLabel=t(`quickCommandActionLabel`,`Command Palette`),e.quickCommandHelp=t(`quickCommandActionHelp`,`Show And Run Commands`)})(s_||={});var c_;(function(e){e.quickOutlineActionLabel=t(`quickOutlineActionLabel`,`Go to Symbol...`),e.quickOutlineByCategoryActionLabel=t(`quickOutlineByCategoryActionLabel`,`Go to Symbol by Category...`)})(c_||={});var l_;(function(e){e.editorViewAccessibleLabel=t(`editorViewAccessibleLabel`,`Editor content`),e.accessibilityHelpMessage=t(`accessibilityHelpMessage`,`Press Alt+F1 for Accessibility Options.`)})(l_||={});var u_;(function(e){e.toggleHighContrast=t(`toggleHighContrast`,`Toggle High Contrast Theme`)})(u_||={});var d_;(function(e){e.bulkEditServiceSummary=t(`bulkEditServiceSummary`,`Made {0} edits in {1} files`)})(d_||={});var f_=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p_=function(e,t){return function(n,r){t(n,r,e)}},m_=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},h_=class{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new N}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}};function g_(e,t,n){return Oh(e)?t(e):n(e)}var __=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=g_(this.editor,t=>this.findModel(t,e),t=>this.findModel(t.getOriginalEditor(),e)||this.findModel(t.getModifiedEditor(),e))),t?Promise.resolve(new At(new h_(t))):Promise.reject(Error(`Model not found`))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};__=f_([p_(0,Bl)],__);var v_=class e{show(){return e.NULL_PROGRESS_RUNNER}showWhile(e,t){return m_(this,void 0,void 0,function*(){yield e})}};v_.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};var y_=class{confirm(e){return this.doConfirm(e).then(e=>({confirmed:e,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,r){return Promise.resolve({choice:0})}},b_=class e{info(e){return this.notify({severity:Dh.Info,message:e})}warn(e){return this.notify({severity:Dh.Warning,message:e})}error(e){return this.notify({severity:Dh.Error,message:e})}notify(t){switch(t.severity){case Dh.Error:console.error(t.message);break;case Dh.Warning:console.warn(t.message);break;default:console.log(t.message);break}return e.NO_OP}status(e,t){return j.None}};b_.NO_OP=new e_;var x_=class{constructor(e){this._onWillExecuteCommand=new N,this._onDidExecuteCommand=new N,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){let n=uc.getCommand(e);if(!n)return Promise.reject(Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});let r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(e){return Promise.reject(e)}}},S_=class extends cg{constructor(e,t,n,r,i,a){super(e,t,n,r,i),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(R(a,z.KEY_DOWN,e=>{let t=new vi(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())})),this._register(R(window,z.KEY_UP,e=>{let t=new vi(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()}))}addDynamicKeybinding(e,t,n,r){let i=si(t,b),a=new A;return i&&(this._dynamicKeybindings.push({keybinding:i.parts,command:e,when:r,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),a.add(Ot(()=>{for(let t=0;t<this._dynamicKeybindings.length;t++)if(this._dynamicKeybindings[t].command===e){this._dynamicKeybindings.splice(t,1),this.updateResolver({source:1});return}}))),a.add(uc.registerCommand(e,n)),this.updateResolver({source:1}),a}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){return this._cachedResolver||=new zg(this._toNormalizedKeybindingItems(Hg.getDefaultKeybindings(),!0),this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1),e=>this._log(e)),this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],r=0;for(let i of e){let e=i.when||void 0,a=i.keybinding;if(!a)n[r++]=new Wg(void 0,i.command,i.commandArgs,e,t,null,!1);else{let o=Qg.resolveUserBinding(a,b);for(let a of o)n[r++]=new Wg(a,i.command,i.commandArgs,e,t,null,!1)}}return n}resolveKeyboardEvent(e){return new Qg(new li(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord(),b)}};function C_(e){return e&&typeof e==`object`&&(!e.overrideIdentifier||typeof e.overrideIdentifier==`string`)&&(!e.resource||e.resource instanceof F)}var w_=class{constructor(){this._onDidChangeConfiguration=new N,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new ag(new ig,new rg)}getValue(e,t){let n=typeof e==`string`?e:void 0,r=C_(e)?e:C_(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){let t={data:this._configuration.toData()},n=[];for(let t of e){let[e,r]=t;this.getValue(e)!==r&&(this._configuration.updateValue(e,r),n.push(e))}if(n.length>0){let e=new og({keys:n,overrides:[]},t,this._configuration);e.source=7,e.sourceConfig=null,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}},T_=class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new N,this.configurationService.onDidChangeConfiguration(e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,n)=>e.affectsConfiguration(n)})})}getValue(e,t,n){let r=I.isIPosition(t)&&t?typeof n==`string`?n:void 0:typeof t==`string`?t:void 0;return r===void 0?this.configurationService.getValue():this.configurationService.getValue(r)}},E_=class{constructor(e){this.configurationService=e}getEOL(e,t){let n=this.configurationService.getValue(`files.eol`,{overrideIdentifier:t,resource:e});return n&&typeof n==`string`&&n!==`auto`?n:m||p?`
`:`\r
`}};E_=f_([p_(0,mf)],E_);var D_=class{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}},O_=class e{constructor(){this.workspace={id:`4064f6ec-cb38-4ad0-af64-ee6467e63c82`,folders:[new n_({uri:F.from({scheme:e.SCHEME,authority:`model`,path:`/`}),name:``,index:0})]}}getWorkspace(){return this.workspace}};O_.SCHEME=`inmemory`;function k_(e,t,n){if(!t||!(e instanceof w_))return;let r=[];Object.keys(t).forEach(e=>{eg(e)&&r.push([`editor.${e}`,t[e]]),n&&tg(e)&&r.push([`diffEditor.${e}`,t[e]])}),r.length>0&&e.updateValues(r)}var A_=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return m_(this,void 0,void 0,function*(){let t=new Map;for(let n of e){if(!(n instanceof Fh))throw Error(`bad edit - only text edits are supported`);let e=this._modelService.getModel(n.resource);if(!e)throw Error(`bad edit - model not found`);if(typeof n.versionId==`number`&&e.getVersionId()!==n.versionId)throw Error(`bad state - model changed in the meantime`);let r=t.get(e);r||(r=[],t.set(e,r)),r.push(ng.replaceMove(L.lift(n.textEdit.range),n.textEdit.text))}let n=0,r=0;for(let[e,i]of t)e.pushStackElement(),e.pushEditOperations([],i,()=>[]),e.pushStackElement(),r+=1,n+=i.length;return{ariaSummary:ao(d_.bulkEditServiceSummary,n,r)}})}},j_=class{getUriLabel(e,t){return e.scheme===`file`?e.fsPath:e.path}},M_=class{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=M.None}get dimension(){return this._dimension||=fa(window.document.body),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}},N_=2e4,P_,F_,I_,L_,R_;function z_(e){P_=document.createElement(`div`),P_.className=`monaco-aria-container`;let t=()=>{let e=document.createElement(`div`);return e.className=`monaco-alert`,e.setAttribute(`role`,`alert`),e.setAttribute(`aria-atomic`,`true`),P_.appendChild(e),e};F_=t(),I_=t();let n=()=>{let e=document.createElement(`div`);return e.className=`monaco-status`,e.setAttribute(`role`,`complementary`),e.setAttribute(`aria-live`,`polite`),e.setAttribute(`aria-atomic`,`true`),P_.appendChild(e),e};L_=n(),R_=n(),e.appendChild(P_)}function B_(e){P_&&(F_.textContent===e?(Gi(F_),H_(I_,e)):(Gi(I_),H_(F_,e)))}function V_(e){P_&&(p?B_(e):L_.textContent===e?(Gi(L_),H_(R_,e)):(Gi(R_),H_(L_,e)))}function H_(e,t){Gi(e),t.length>N_&&(t=t.substr(0,N_)),e.textContent=t,e.style.visibility=`hidden`,e.style.visibility=`visible`}const U_=Ur(`markerDecorationsService`);var W_=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},G_=class extends j{constructor(e,t=``,n=``,r=!0,i){super(),this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=i}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||``}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return W_(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}},K_=class extends j{constructor(){super(...arguments),this._onBeforeRun=this._register(new N),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new N),this.onDidRun=this._onDidRun.event}run(e,t){return W_(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(e){n=e}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return W_(this,void 0,void 0,function*(){yield e.run(t)})}},q_=class e extends G_{constructor(t){super(e.ID,t,t?`separator text`:`separator`),this.checked=!1,this.enabled=!1}};q_.ID=`vs.actions.separator`;var J_=class{constructor(e,t,n,r){this.tooltip=``,this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=r,this._actions=n}get actions(){return this._actions}dispose(){}run(){return W_(this,void 0,void 0,function*(){})}},Y_=class e extends G_{constructor(){super(e.ID,t(`submenu.empty`,`(empty)`),void 0,!1)}};Y_.ID=`vs.actions.empty`;var X_;(function(e){e.DARK=`dark`,e.LIGHT=`light`,e.HIGH_CONTRAST=`hc`})(X_||={});const Z_=Ur(`themeService`);var Q_;(function(e){function t(e){return e&&typeof e==`object`&&typeof e.id==`string`}e.isThemeColor=t})(Q_||={});function $_(e){return{id:e}}var ev;(function(e){function t(e){return e&&typeof e==`object`&&typeof e.id==`string`&&(e.color===void 0||Q_.isThemeColor(e.color))}e.isThemeIcon=t;let n=RegExp(`^\\$\\((${eu.iconNameExpression}(?:${eu.iconModifierExpression})?)\\)$`);function r(e){let t=n.exec(e);if(!t)return;let[,r]=t;return{id:r}}e.fromString=r;function i(e,t){let n=e.id,r=n.lastIndexOf(`~`);return r!==-1&&(n=n.substring(0,r)),t&&(n=`${n}~${t}`),{id:n}}e.modify=i;function a(e,t){return e.id===t.id&&e.color?.id===t.color?.id}e.isEqual=a;function o(e,t){return{id:e.id,color:t?$_(t):void 0}}e.asThemeIcon=o,e.asClassNameArray=eu.asClassNameArray,e.asClassName=eu.asClassName,e.asCSSSelector=eu.asCSSSelector})(ev||={});function tv(e){switch(e){case X_.DARK:return`vs-dark`;case X_.HIGH_CONTRAST:return`hc-black`;default:return`vs`}}const nv={ThemingContribution:`base.contributions.theming`};var rv=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new N}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Ot(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}};Jd.add(nv.ThemingContribution,rv);function iv(e){return rv.onColorThemeChange(e)}var av=class extends j{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(e=>this.onThemeChange(e)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}},ov=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},sv=function(e,t){return function(n,r){t(n,r,e)}};function cv(e){return e.command!==void 0}var lv=class e{constructor(t){this.id=e._idPool++,this._debugName=t}};lv._idPool=0,lv.CommandPalette=new lv(`CommandPalette`),lv.EditorContext=new lv(`EditorContext`),lv.SimpleEditorContext=new lv(`SimpleEditorContext`),lv.EditorContextCopy=new lv(`EditorContextCopy`),lv.EditorContextPeek=new lv(`EditorContextPeek`),lv.MenubarEditMenu=new lv(`MenubarEditMenu`),lv.MenubarCopy=new lv(`MenubarCopy`),lv.MenubarGoMenu=new lv(`MenubarGoMenu`),lv.MenubarSelectionMenu=new lv(`MenubarSelectionMenu`),lv.InlineCompletionsActions=new lv(`InlineCompletionsActions`);const uv=Ur(`menuService`),dv=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new N,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:e=>e===lv.CommandPalette}}addCommand(e){return this.addCommands(k.single(e))}addCommands(e){for(let t of e)this._commands.set(t.id,t);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Ot(()=>{let t=!1;for(let n of e)t=this._commands.delete(n.id)||t;t&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(e){return this._commands.get(e)}getCommands(){let e=new Map;return this._commands.forEach((t,n)=>e.set(n,t)),e}appendMenuItem(e,t){return this.appendMenuItems(k.single({id:e,item:t}))}appendMenuItems(e){let t=new Set,n=new Mt;for(let{id:r,item:i}of e){let e=this._menuItems.get(r);e||(e=new Mt,this._menuItems.set(r,e)),n.push(e.push(i)),t.add(r)}return this._onDidChangeMenu.fire(t),Ot(()=>{if(n.size>0){for(let e of n)e();this._onDidChangeMenu.fire(t),n.clear()}})}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===lv.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){let t=new Set;for(let n of e)cv(n)&&(t.add(n.command.id),n.alt&&t.add(n.alt.id));this._commands.forEach((n,r)=>{t.has(r)||e.push({command:n})})}};var fv=class extends J_{constructor(e,t,n,r){super(`submenuitem.${e.submenu.id}`,typeof e.title==`string`?e.title:e.title.value,[],`submenu`),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=r}get actions(){let e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(let[,t]of n)t.length>0&&(e.push(...t),e.push(new q_));return e.length&&e.pop(),e}},pv=class e{constructor(t,n,r,i,a){if(this._commandService=a,this.id=t.id,this.label=r?.renderShortTitle&&t.shortTitle?typeof t.shortTitle==`string`?t.shortTitle:t.shortTitle.value:typeof t.title==`string`?t.title:t.title.value,this.tooltip=(typeof t.tooltip==`string`?t.tooltip:t.tooltip?.value)??``,this.enabled=!t.precondition||i.contextMatchesRules(t.precondition),this.checked=void 0,t.toggled){let e=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=i.contextMatchesRules(e.condition),this.checked&&e.tooltip&&(this.tooltip=typeof e.tooltip==`string`?e.tooltip:e.tooltip.value),e.title&&(this.label=typeof e.title==`string`?e.title:e.title.value)}this.item=t,this.alt=n?new e(n,void 0,r,i,a):void 0,this._options=r,ev.isThemeIcon(t.icon)&&(this.class=eu.asClassName(t.icon))}dispose(){}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};pv=ov([sv(3,Pg),sv(4,lc)],pv);const mv=Ur(`telemetryService`);var hv=class{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let e=t.kbExpr;this.precondition&&(e=e?pg.and(e,this.precondition):this.precondition);let n={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Hg.registerKeybindingRule(n)}}uc.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){dv.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},gv=class extends hv{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===n){this._implementations.splice(e,1);return}}}}runCommand(e,t){let n=e.get(Xp);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let r of this._implementations){let i=r.implementation(e,t);if(i)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof i==`boolean`?void 0:i}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},_v=class extends hv{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}},vv=class e extends hv{static bindToContribution(t){return class extends e{constructor(e){super(e),this._callback=e.handler}runEditorCommand(e,n,r){t(n)&&this._callback(t(n),r)}}}runCommand(e,t){let n=e.get(Gr),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(e=>{if(e.get(Pg).contextMatchesRules(sc(this.precondition)))return this.runEditorCommand(e,r,t)})}},yv=class e extends vv{constructor(t){super(e.convertOptions(t)),this.label=t.label,this.alias=t.alias}static convertOptions(e){let t;t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[];function n(t){return t.menuId||=lv.EditorContext,t.title||=e.label,t.when=pg.and(e.precondition,t.when),t}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(mv).publicLog2(`editorActionInvoked`,{name:this.label,id:this.id})}},bv=class extends yv{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((e,t)=>t[0]-e[0]),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===t){this._implementations.splice(e,1);return}}}}run(e,t,n){for(let r of this._implementations){let i=r[1](e,t,n);if(i)return typeof i==`boolean`?void 0:i}}};function xv(e,t){uc.registerCommand(e,function(e,...n){let[r,i]=n;$s(F.isUri(r)),$s(I.isIPosition(i));let a=e.get(Bl).getModel(r);return a?t(a,I.lift(i),...n.slice(2)):e.get(Uu).createModelReference(r).then(e=>new Promise((r,a)=>{try{r(t(e.object.textEditorModel,I.lift(i),n.slice(2)))}catch(e){a(e)}}).finally(()=>{e.dispose()}))})}function Sv(e,t){uc.registerCommand(e,function(e,...n){let[r]=n;$s(F.isUri(r));let i=e.get(Bl).getModel(r);return i?t(i,...n.slice(1)):e.get(Uu).createModelReference(r).then(e=>new Promise((r,i)=>{try{r(t(e.object.textEditorModel,n.slice(1)))}catch(e){i(e)}}).finally(()=>{e.dispose()}))})}function U(e){return kv.INSTANCE.registerEditorCommand(e),e}function Cv(e){let t=new e;return kv.INSTANCE.registerEditorAction(t),t}function wv(e){return kv.INSTANCE.registerEditorAction(e),e}function Tv(e){kv.INSTANCE.registerEditorAction(e)}function Ev(e,t){kv.INSTANCE.registerEditorContribution(e,t)}var Dv;(function(e){function t(e){return kv.INSTANCE.getEditorCommand(e)}e.getEditorCommand=t;function n(){return kv.INSTANCE.getEditorActions()}e.getEditorActions=n;function r(){return kv.INSTANCE.getEditorContributions()}e.getEditorContributions=r;function i(e){return kv.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)}e.getSomeEditorContributions=i;function a(){return kv.INSTANCE.getDiffEditorContributions()}e.getDiffEditorContributions=a})(Dv||={});var Ov={EditorCommonContributions:`editor.contributions`},kv=class{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};kv.INSTANCE=new kv,Jd.add(Ov.EditorCommonContributions,kv.INSTANCE);function Av(e){return e.register(),e}const jv=Av(new gv({id:`undo`,precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:lv.MenubarEditMenu,group:`1_do`,title:t({key:`miUndo`,comment:[`&& denotes a mnemonic`]},`&&Undo`),order:1},{menuId:lv.CommandPalette,group:``,title:t(`undo`,`Undo`),order:1}]}));Av(new _v(jv,{id:`default:undo`,precondition:void 0}));const Mv=Av(new gv({id:`redo`,precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:lv.MenubarEditMenu,group:`1_do`,title:t({key:`miRedo`,comment:[`&& denotes a mnemonic`]},`&&Redo`),order:2},{menuId:lv.CommandPalette,group:``,title:t(`redo`,`Redo`),order:1}]}));Av(new _v(Mv,{id:`default:redo`,precondition:void 0}));const Nv=Av(new gv({id:`editor.action.selectAll`,precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:lv.MenubarSelectionMenu,group:`1_basic`,title:t({key:`miSelectAll`,comment:[`&& denotes a mnemonic`]},`&&Select All`),order:1},{menuId:lv.CommandPalette,group:``,title:t(`selectAll`,`Select All`),order:1}]}));var Pv=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Fv=function(e,t){return function(n,r){t(n,r,e)}},Iv=class{constructor(e,t){}dispose(){}};Iv.ID=`editor.contrib.markerDecorations`,Iv=Pv([Fv(1,U_)],Iv),Ev(Iv.ID,Iv);var Lv=class{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},Rv=class e{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let t=this._bareFontInfo.getMassagedFontFamily(ni?rt.fontFamily:null),n=document.createElement(`div`);n.style.position=`absolute`,n.style.top=`-50000px`,n.style.width=`50000px`;let r=document.createElement(`div`);r.style.fontFamily=t,r.style.fontWeight=this._bareFontInfo.fontWeight,r.style.fontSize=this._bareFontInfo.fontSize+`px`,r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+`px`,r.style.letterSpacing=this._bareFontInfo.letterSpacing+`px`,n.appendChild(r);let i=document.createElement(`div`);i.style.fontFamily=t,i.style.fontWeight=`bold`,i.style.fontSize=this._bareFontInfo.fontSize+`px`,i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+`px`,i.style.letterSpacing=this._bareFontInfo.letterSpacing+`px`,n.appendChild(i);let a=document.createElement(`div`);a.style.fontFamily=t,a.style.fontWeight=this._bareFontInfo.fontWeight,a.style.fontSize=this._bareFontInfo.fontSize+`px`,a.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,a.style.lineHeight=this._bareFontInfo.lineHeight+`px`,a.style.letterSpacing=this._bareFontInfo.letterSpacing+`px`,a.style.fontStyle=`italic`,n.appendChild(a);let o=[];for(let t of this._requests){let n;t.type===0&&(n=r),t.type===2&&(n=i),t.type===1&&(n=a),n.appendChild(document.createElement(`br`));let s=document.createElement(`span`);e._render(s,t),n.appendChild(s),o.push(s)}this._container=n,this._testElements=o}static _render(e,t){if(t.chr===` `){let t=`\xA0`;for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let n=t.chr;for(let e=0;e<8;e++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let t=this._requests[e],n=this._testElements[e];t.fulfill(n.offsetWidth/256)}}};function zv(e,t){new Rv(e,t).read()}var Bv=class extends j{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<`u`?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&=(this.resizeObserver.disconnect(),null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,r=0;t?(n=t.width,r=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,r=this.referenceDomElement.clientHeight),n=Math.max(5,n),r=Math.max(5,r),(this.width!==n||this.height!==r)&&(this.width=n,this.height=r,e&&this.changeCallback())}},Vv=class{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}};function Hv(){Uv.INSTANCE.clearCache()}var Uv=class e extends j{constructor(){super(),this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,this._cache=new Vv,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new Vv,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){let e=this._cache.getValues(),t=!1;for(let n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(t){if(!this._cache.has(t)){let n=e._actualReadConfiguration(t);(n.typicalHalfwidthCharacterWidth<=2||n.typicalFullwidthCharacterWidth<=2||n.spaceWidth<=2||n.maxDigitWidth<=2)&&(n=new Lc({zoomLevel:qr(),pixelRatio:Zr(),fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:n.isMonospace,typicalHalfwidthCharacterWidth:Math.max(n.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(n.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:n.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(n.spaceWidth,5),middotWidth:Math.max(n.middotWidth,5),wsmiddotWidth:Math.max(n.wsmiddotWidth,5),maxDigitWidth:Math.max(n.maxDigitWidth,5)},!1)),this._writeToCache(t,n)}return this._cache.get(t)}static createRequest(e,t,n,r){let i=new Lv(e,t);return n.push(i),r&&r.push(i),i}static _actualReadConfiguration(e){let t=[],n=[],r=this.createRequest(`n`,0,t,n),i=this.createRequest(``,0,t,null),a=this.createRequest(` `,0,t,n),o=this.createRequest(`0`,0,t,n),s=this.createRequest(`1`,0,t,n),c=this.createRequest(`2`,0,t,n),l=this.createRequest(`3`,0,t,n),u=this.createRequest(`4`,0,t,n),d=this.createRequest(`5`,0,t,n),f=this.createRequest(`6`,0,t,n),p=this.createRequest(`7`,0,t,n),m=this.createRequest(`8`,0,t,n),h=this.createRequest(`9`,0,t,n),g=this.createRequest(``,0,t,n),_=this.createRequest(``,0,t,null),v=this.createRequest(``,0,t,n),y=this.createRequest(``,0,t,null),b=`|/-_ilm%`;for(let e=0;e<8;e++)this.createRequest(b.charAt(e),0,t,n),this.createRequest(b.charAt(e),1,t,n),this.createRequest(b.charAt(e),2,t,n);zv(e,t);let x=Math.max(o.width,s.width,c.width,l.width,u.width,d.width,f.width,p.width,m.width,h.width),S=e.fontFeatureSettings===De.OFF,C=n[0].width;for(let e=1,t=n.length;S&&e<t;e++){let t=C-n[e].width;if(t<-.001||t>.001){S=!1;break}}let w=!0;S&&_.width!==C&&(w=!1),_.width>g.width&&(w=!1);let T=Jr()>2e3;return new Lc({zoomLevel:qr(),pixelRatio:Zr(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:i.width,canUseHalfwidthRightwardsArrow:w,spaceWidth:a.width,middotWidth:v.width,wsmiddotWidth:y.width,maxDigitWidth:x},T)}};Uv.INSTANCE=new Uv;var Wv=class e extends qh{constructor(e,t,n=null,r){super(e,t),this.accessibilityService=r,this._elementSizeObserver=this._register(new Bv(n,t.dimension,()=>this._recomputeOptions())),this._register(Uv.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(Yr(e=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(ni?rt.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+`px`,e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+`px`,e.style.letterSpacing=t.letterSpacing+`px`}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(ni?rt.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e=``;return!ni&&!ri&&(e+=`no-user-select `),ni&&(e+=`no-minimap-shadow `),p&&(e+=`mac `),e}_getEnvConfiguration(){return{extraEditorClassName:e._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:ei||$r,pixelRatio:Zr(),zoomLevel:qr(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Uv.INSTANCE.readConfiguration(e)}},Gv=class{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily=``,this._fontWeight=``,this._fontSize=-1,this._fontFeatureSettings=``,this._lineHeight=-1,this._letterSpacing=-100,this._className=``,this._display=``,this._position=``,this._visibility=``,this._backgroundColor=``,this._layerHint=!1,this._contain=`none`,this._boxShadow=``}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+`px`)}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+`px`)}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+`px`)}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+`px`)}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top=``)}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+`px`)}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+`px`)}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+`px`)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+`px`)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+`px`)}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+`px`)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?`translate3d(0px, 0px, 0px)`:``)}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function W(e){return new Gv(e)}function Kv(e,t,n){let r=null,i=null;if(typeof n.value==`function`?(r=`value`,i=n.value,i.length!==0&&console.warn(`Memoize should only be used in functions with zero parameters`)):typeof n.get==`function`&&(r=`get`,i=n.get),!i)throw Error(`not supported`);let a=`$memoize$${t}`;n[r]=function(...e){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,e)}),this[a]}}var qv=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Jv;(function(e){e.Tap=`-monaco-gesturetap`,e.Change=`-monaco-gesturechange`,e.Start=`-monaco-gesturestart`,e.End=`-monaco-gesturesend`,e.Contextmenu=`-monaco-gesturecontextmenu`})(Jv||={});var Yv=class e extends j{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(R(document,`touchstart`,e=>this.onTouchStart(e),{passive:!1})),this._register(R(document,`touchend`,e=>this.onTouchEnd(e))),this._register(R(document,`touchmove`,e=>this.onTouchMove(e),{passive:!1}))}static addTarget(t){return e.isTouchDevice()?(e.INSTANCE||=new e,e.INSTANCE.targets.push(t),{dispose:()=>{e.INSTANCE.targets=e.INSTANCE.targets.filter(e=>e!==t)}}):j.None}static ignoreTarget(t){return e.isTouchDevice()?(e.INSTANCE||=new e,e.INSTANCE.ignoreTargets.push(t),{dispose:()=>{e.INSTANCE.ignoreTargets=e.INSTANCE.ignoreTargets.filter(e=>e!==t)}}):j.None}static isTouchDevice(){return`ontouchstart`in window||navigator.maxTouchPoints>0}dispose(){this.handle&&=(this.handle.dispose(),null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&=(this.handle.dispose(),null);for(let n=0,r=e.targetTouches.length;n<r;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let i=this.newGestureEvent(Jv.Start,r.target);i.pageX=r.pageX,i.pageY=r.pageY,this.dispatchEvent(i)}this.dispatched&&=(e.preventDefault(),e.stopPropagation(),!1)}onTouchEnd(t){let n=Date.now(),r=Object.keys(this.activeTouches).length;for(let i=0,a=t.changedTouches.length;i<a;i++){let a=t.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn(`move of an UNKNOWN touch`,a);continue}let o=this.activeTouches[a.identifier],s=Date.now()-o.initialTimeStamp;if(s<e.HOLD_DELAY&&Math.abs(o.initialPageX-Ep(o.rollingPageX))<30&&Math.abs(o.initialPageY-Ep(o.rollingPageY))<30){let e=this.newGestureEvent(Jv.Tap,o.initialTarget);e.pageX=Ep(o.rollingPageX),e.pageY=Ep(o.rollingPageY),this.dispatchEvent(e)}else if(s>=e.HOLD_DELAY&&Math.abs(o.initialPageX-Ep(o.rollingPageX))<30&&Math.abs(o.initialPageY-Ep(o.rollingPageY))<30){let e=this.newGestureEvent(Jv.Contextmenu,o.initialTarget);e.pageX=Ep(o.rollingPageX),e.pageY=Ep(o.rollingPageY),this.dispatchEvent(e)}else if(r===1){let e=Ep(o.rollingPageX),t=Ep(o.rollingPageY),r=Ep(o.rollingTimestamps)-o.rollingTimestamps[0],i=e-o.rollingPageX[0],a=t-o.rollingPageY[0],s=this.targets.filter(e=>o.initialTarget instanceof Node&&e.contains(o.initialTarget));this.inertia(s,n,Math.abs(i)/r,i>0?1:-1,e,Math.abs(a)/r,a>0?1:-1,t)}this.dispatchEvent(this.newGestureEvent(Jv.End,o.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&=(t.preventDefault(),t.stopPropagation(),!1)}newGestureEvent(e,t){let n=document.createEvent(`CustomEvent`);return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(t){if(t.type===Jv.Tap){let n=new Date().getTime(),r=0;r=n-this._lastSetTapCountTime>e.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=n,t.tapCount=r}else (t.type===Jv.Change||t.type===Jv.Contextmenu)&&(this._lastSetTapCountTime=0);for(let e=0;e<this.ignoreTargets.length;e++)if(t.initialTarget instanceof Node&&this.ignoreTargets[e].contains(t.initialTarget))return;this.targets.forEach(e=>{t.initialTarget instanceof Node&&e.contains(t.initialTarget)&&(e.dispatchEvent(t),this.dispatched=!0)})}inertia(t,n,r,i,a,o,s,c){this.handle=aa(()=>{let l=Date.now(),u=l-n,d=0,f=0,p=!0;r+=e.SCROLL_FRICTION*u,o+=e.SCROLL_FRICTION*u,r>0&&(p=!1,d=i*r*u),o>0&&(p=!1,f=s*o*u);let m=this.newGestureEvent(Jv.Change);m.translationX=d,m.translationY=f,t.forEach(e=>e.dispatchEvent(m)),p||this.inertia(t,l,r,i,a+d,o,s,c+f)})}onTouchMove(e){let t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn(`end of an UNKNOWN touch`,r);continue}let i=this.activeTouches[r.identifier],a=this.newGestureEvent(Jv.Change,i.initialTarget);a.translationX=r.pageX-Ep(i.rollingPageX),a.translationY=r.pageY-Ep(i.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),i.rollingPageX.length>3&&(i.rollingPageX.shift(),i.rollingPageY.shift(),i.rollingTimestamps.shift()),i.rollingPageX.push(r.pageX),i.rollingPageY.push(r.pageY),i.rollingTimestamps.push(t)}this.dispatched&&=(e.preventDefault(),e.stopPropagation(),!1)}};Yv.SCROLL_FRICTION=-.005,Yv.HOLD_DELAY=700,Yv.CLEAR_TAP_COUNT_TIME=400,qv([Kv],Yv,`isTouchDevice`,null);function Xv(e,t){let n=new Ci(t);return n.preventDefault(),{leftButton:n.leftButton,buttons:n.buttons,posx:n.posx,posy:n.posy}}var Zv=class{constructor(){this._hooks=new A,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,r,i){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=r,this._onStopCallback=i;let a=Si.getSameOriginWindowChain(),o=_?`pointermove`:`mousemove`,s=a.map(e=>e.window.document),c=Oa(e);c&&s.unshift(c);for(let e of s)this._hooks.add(ua(e,o,e=>{if(e.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(e)},(e,t)=>this._mouseMoveEventMerger(e,t))),this._hooks.add(R(e,`mouseup`,e=>this.stopMonitoring(!0)));if(Si.hasDifferentOriginAncestor()){let e=a[a.length-1];this._hooks.add(R(e.window.document,`mouseout`,e=>{new Ci(e).target.tagName.toLowerCase()===`html`&&this.stopMonitoring(!0)})),this._hooks.add(R(e.window.document,`mouseover`,e=>{new Ci(e).target.tagName.toLowerCase()===`html`&&this.stopMonitoring(!0)})),this._hooks.add(R(e.window.document.body,`mouseleave`,e=>{this.stopMonitoring(!0)}))}}},Qv=class{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new $v(this.x-va.scrollX,this.y-va.scrollY)}},$v=class{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new Qv(this.clientX+va.scrollX,this.clientY+va.scrollY)}},ey=class{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this._editorPagePositionBrand=void 0}};function ty(e){let t=_a(e);return new ey(t.left,t.top,t.width,t.height)}var ny=class extends Ci{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new Qv(this.posx,this.posy),this.editorPos=ty(t)}},ry=class{constructor(e){this._editorViewDomNode=e}_create(e){return new ny(e,this._editorViewDomNode)}onContextMenu(e,t){return R(e,`contextmenu`,e=>{t(this._create(e))})}onMouseUp(e,t){return R(e,`mouseup`,e=>{t(this._create(e))})}onMouseDown(e,t){return R(e,`mousedown`,e=>{t(this._create(e))})}onMouseLeave(e,t){return ea(e,e=>{t(this._create(e))})}onMouseMoveThrottled(e,t,n,r){return ua(e,`mousemove`,t,(e,t)=>n(e,this._create(t)),r)}},iy=class{constructor(e){this._editorViewDomNode=e}_create(e){return new ny(e,this._editorViewDomNode)}onPointerUp(e,t){return R(e,`pointerup`,e=>{t(this._create(e))})}onPointerDown(e,t){return R(e,`pointerdown`,e=>{t(this._create(e))})}onPointerLeave(e,t){return ta(e,e=>{t(this._create(e))})}onPointerMoveThrottled(e,t,n,r){return ua(e,`pointermove`,t,(e,t)=>n(e,this._create(t)),r)}},ay=class extends j{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new Zv),this._keydownListener=null}startMonitoring(e,t,n,r,i){this._keydownListener=Xi(document,`keydown`,e=>{e.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,e.browserEvent)},!0),this._globalMouseMoveMonitor.startMonitoring(e,t,(e,t)=>n(e,new ny(t,this._editorViewDomNode)),r,e=>{this._keydownListener.dispose(),i(e)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}},oy=class extends j{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,r=e.length;n<r;n++){let r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info(`View received unknown event: `),console.info(r)}}t&&(this._shouldRender=!0)}},sy=class extends oy{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}},cy=class{static write(e,t){e instanceof Gv,e.setAttribute(`data-mprt`,String(t))}static read(e){let t=e.getAttribute(`data-mprt`);return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],r=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[r++]=this.read(e)),e=e.parentElement;let i=new Uint8Array(r);for(let e=0;e<r;e++)i[e]=n[r-e-1];return i}},ly=class{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}},uy=class extends ly{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}},dy=class{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}},fy=class e{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(t){let n=Array(t.length);for(let r=0,i=t.length;r<i;r++){let i=t[r];n[r]=new e(i.left,i.width)}return n}toString(){return`[${this.left},${this.width}]`}},py=class{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}},my=class{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}},hy=class{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}},gy=class{static _createRange(){return this._handyReadyRange||=document.createRange(),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,r,i){let a=this._createRange();try{return a.setStart(e,t),a.setEnd(n,r),a.getClientRects()}catch{return null}finally{this._detachRange(a,i)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(py.compare);let t=[],n=0,r=e[0];for(let i=1,a=e.length;i<a;i++){let a=e[i];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[n++]=r,r=a)}return t[n++]=r,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];n[r]=new py(Math.max(0,i.left-t),i.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,r,i,a,o){let s=e.children.length-1;if(0>s)return null;if(t=Math.min(s,Math.max(0,t)),r=Math.min(s,Math.max(0,r)),t===r&&n===i&&n===0&&!e.children[t].firstChild){let n=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(n,a)}t!==r&&r>0&&i===0&&(r--,i=1073741824);let c=e.children[t].firstChild,l=e.children[r].firstChild;if((!c||!l)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!l&&i===0&&r>0&&(l=e.children[r-1].firstChild,i=1073741824)),!c||!l)return null;n=Math.min(c.textContent.length,Math.max(0,n)),i=Math.min(l.textContent.length,Math.max(0,i));let u=this._readClientRects(c,n,l,i,o);return this._createHorizontalRangesFromClientRects(u,a)}},_y=(function(){return h?!0:!(m||$r||ni)})(),vy=!0,yy=class{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}},by=class{constructor(e,t){this.themeType=t;let n=e.options,r=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}},xy=class e{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=W(e);else throw Error(`I have no rendered view line to set the dom node to...`)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===X_.HIGH_CONTRAST||this._options.renderWhitespace===`selection`?(this._isMaybeInvalid=!0,!0):!1}renderLine(t,n,r,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let a=r.getViewLineRenderingData(t),o=this._options,s=ym.filter(a.inlineDecorations,t,a.minColumn,a.maxColumn),c=null;if(o.themeType===X_.HIGH_CONTRAST||this._options.renderWhitespace===`selection`){let e=r.selections;for(let n of e){if(n.endLineNumber<t||n.startLineNumber>t)continue;let e=n.startLineNumber===t?n.startColumn:a.minColumn,r=n.endLineNumber===t?n.endColumn:a.maxColumn;e<r&&(o.themeType===X_.HIGH_CONTRAST||this._options.renderWhitespace!==`selection`?s.push(new ym(e,r,`inline-selected-text`,0)):(c||=[],c.push(new wm(e-1,r-1))))}}let l=new Tm(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,a.minColumn-1,a.tokens,s,a.tabSize,a.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==De.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(l))return!1;i.appendASCIIString(`<div style="top:`),i.appendASCIIString(String(n)),i.appendASCIIString(`px;height:`),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString(`px;" class="`),i.appendASCIIString(e.CLASS_NAME),i.appendASCIIString(`">`);let u=km(l,i);i.appendASCIIString(`</div>`);let d=null;return vy&&_y&&a.isBasicASCII&&o.useMonospaceOptimizations&&u.containsForeignElements===0&&a.content.length<300&&l.lineTokens.getCount()<100&&(d=new Sy(this._renderedViewLine?this._renderedViewLine.domNode:null,l,u.characterMapping)),d||=Ty(this._renderedViewLine?this._renderedViewLine.domNode:null,l,u.characterMapping,u.containsRTL,u.containsForeignElements),this._renderedViewLine=d,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Sy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Sy?this._renderedViewLine.monospaceAssumptionsAreValid():vy}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Sy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,r){if(!this._renderedViewLine)return null;t|=0,n|=0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));let i=this._renderedViewLine.input.stopRenderingLineAfter|0,a=!1;i!==-1&&t>i+1&&n>i+1&&(a=!0),i!==-1&&t>i+1&&(t=i+1),i!==-1&&n>i+1&&(n=i+1);let o=this._renderedViewLine.getVisibleRangesForRange(e,t,n,r);return o&&o.length>0?new hy(a,o):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}};xy.CLASS_NAME=`view-line`;var Sy=class{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return vy;let e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn(`monospace assumptions have been violated, therefore disabling monospace optimizations!`),vy=!1),vy}toSlowRenderedLine(){return Ty(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,r){let i=this._getCharPosition(t);return[new py(i,this._getCharPosition(n)-i)]}_getCharPosition(e){let t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){let r=t.textContent.length,i=-1;for(;t;)t=t.previousSibling,i++;return this._characterMapping.getColumn(new Em(i,n),r)}},Cy=class{constructor(e,t,n,r,i){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=i,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let i=this._readPixelOffset(this.domNode,e,t,r);if(i===-1)return null;let a=this._readPixelOffset(this.domNode,e,n,r);return a===-1?null:[new py(i,a-i)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,r)}_readVisibleRangesForRange(e,t,n,r,i){if(n===r){let r=this._readPixelOffset(e,t,n,i);return r===-1?null:[new py(r,0)]}else return this._readRawVisibleRangesForRange(e,n,r,i)}_readPixelOffset(e,t,n,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();let t=this._getReadingTarget(e);return t.firstChild?t.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){let i=this._pixelOffsetCache[n];if(i!==-1)return i;let a=this._actualReadPixelOffset(e,t,n,r);return this._pixelOffsetCache[n]=a,a}return this._actualReadPixelOffset(e,t,n,r)}_actualReadPixelOffset(e,t,n,r){if(this._characterMapping.length===0){let t=gy.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r.clientRectDeltaLeft,r.endNode);return!t||t.length===0?-1:t[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();let i=this._characterMapping.getDomPosition(n),a=gy.readHorizontalRanges(this._getReadingTarget(e),i.partIndex,i.charIndex,i.partIndex,i.charIndex,r.clientRectDeltaLeft,r.endNode);if(!a||a.length===0)return-1;let o=a[0].left;if(this.input.isBasicASCII){let e=this._characterMapping.getAbsoluteOffset(n),t=Math.round(this.input.spaceWidth*e);if(Math.abs(t-o)<=1)return t}return o}_readRawVisibleRangesForRange(e,t,n,r){if(t===1&&n===this._characterMapping.length)return[new py(0,this.getWidth())];let i=this._characterMapping.getDomPosition(t),a=this._characterMapping.getDomPosition(n);return gy.readHorizontalRanges(this._getReadingTarget(e),i.partIndex,i.charIndex,a.partIndex,a.charIndex,r.clientRectDeltaLeft,r.endNode)}getColumnOfNodeOffset(e,t,n){let r=t.textContent.length,i=-1;for(;t;)t=t.previousSibling,i++;return this._characterMapping.getColumn(new Em(i,n),r)}},wy=class extends Cy{_readVisibleRangesForRange(e,t,n,r,i){let a=super._readVisibleRangesForRange(e,t,n,r,i);if(!a||a.length===0||n===r||n===1&&r===this._characterMapping.length)return a;if(!this.input.containsRTL){let n=this._readPixelOffset(e,t,r,i);if(n!==-1){let e=a[a.length-1];e.left<n&&(e.width=n-e.left)}}return a}},Ty=(function(){return ei?Ey:Dy})();function Ey(e,t,n,r,i){return new wy(e,t,n,r,i)}function Dy(e,t,n,r,i){return new Cy(e,t,n,r,i)}function Oy(e){return e.replace(/\n/g,`\\n`).replace(/\r/g,`\\r`)}var ky=class e{constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Oy(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Oy(this.oldText)}")`:`(replace@${this.oldPosition} "${Oy(this.oldText)}" with "${Oy(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let r=t.length;ws(e,r,n),n+=4;for(let i=0;i<r;i++)Ss(e,t.charCodeAt(i),n),n+=2;return n}static _readString(e,t){let n=Cs(e,t);return t+=4,Td(e,t,n)}writeSize(){return 8+e._writeStringSize(this.oldText)+e._writeStringSize(this.newText)}write(t,n){return ws(t,this.oldPosition,n),n+=4,ws(t,this.newPosition,n),n+=4,n=e._writeString(t,this.oldText,n),n=e._writeString(t,this.newText,n),n}static read(t,n,r){let i=Cs(t,n);n+=4;let a=Cs(t,n);n+=4;let o=e._readString(t,n);n+=e._writeStringSize(o);let s=e._readString(t,n);return n+=e._writeStringSize(s),r.push(new e(i,o,a,s)),n}};function Ay(e,t){return e===null||e.length===0?t:new jy(e,t).compress()}var jy=class e{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let t=0,n=0,r=this._getPrev(t),i=this._getCurr(n);for(;t<this._prevLen||n<this._currLen;){if(r===null){this._acceptCurr(i),i=this._getCurr(++n);continue}if(i===null){this._acceptPrev(r),r=this._getPrev(++t);continue}if(i.oldEnd<=r.newPosition){this._acceptCurr(i),i=this._getCurr(++n);continue}if(r.newEnd<=i.oldPosition){this._acceptPrev(r),r=this._getPrev(++t);continue}if(i.oldPosition<r.newPosition){let[t,n]=e._splitCurr(i,r.newPosition-i.oldPosition);this._acceptCurr(t),i=n;continue}if(r.newPosition<i.oldPosition){let[t,n]=e._splitPrev(r,i.oldPosition-r.newPosition);this._acceptPrev(t),r=n;continue}let a,o;if(i.oldEnd===r.newEnd)a=r,o=i,r=this._getPrev(++t),i=this._getCurr(++n);else if(i.oldEnd<r.newEnd){let[t,s]=e._splitPrev(r,i.oldLength);a=t,o=i,r=s,i=this._getCurr(++n)}else{let[n,s]=e._splitCurr(i,r.newLength);a=r,o=n,r=this._getPrev(++t),i=s}this._result[this._resultLen++]=new ky(a.oldPosition,a.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}let a=e._merge(this._result);return e._removeNoOps(a)}_acceptCurr(t){this._result[this._resultLen++]=e._rebaseCurr(this._prevDeltaOffset,t),this._currDeltaOffset+=t.newLength-t.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(t){this._result[this._resultLen++]=e._rebasePrev(this._currDeltaOffset,t),this._prevDeltaOffset+=t.newLength-t.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new ky(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new ky(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),r=e.newText.substr(t);return[new ky(e.oldPosition,e.oldText,e.newPosition,n),new ky(e.oldEnd,``,e.newPosition+t,r)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new ky(e.oldPosition,n,e.newPosition,e.newText),new ky(e.oldPosition+t,r,e.newEnd,``)]}static _merge(e){if(e.length===0)return e;let t=[],n=0,r=e[0];for(let i=1;i<e.length;i++){let a=e[i];r.oldEnd===a.oldPosition?r=new ky(r.oldPosition,r.oldText+a.oldText,r.newPosition,r.newText+a.newText):(t[n++]=r,r=a)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let r=0;r<e.length;r++){let i=e[r];i.oldText!==i.newText&&(t[n++]=i)}return t}};function My(e){return e.toString()}var Ny=class e{constructor(e,t,n,r,i,a,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=i,this.afterCursorState=a,this.changes=o}static create(t,n){let r=t.getAlternativeVersionId(),i=Iy(t);return new e(r,r,i,i,n,n,[])}append(e,t,n,r,i){t.length>0&&(this.changes=Ay(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=i}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(ws(e,t?t.length:0,n),n+=4,t)for(let r of t)ws(e,r.selectionStartLineNumber,n),n+=4,ws(e,r.selectionStartColumn,n),n+=4,ws(e,r.positionLineNumber,n),n+=4,ws(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let r=Cs(e,t);t+=4;for(let i=0;i<r;i++){let r=Cs(e,t);t+=4;let i=Cs(e,t);t+=4;let a=Cs(e,t);t+=4;let o=Cs(e,t);t+=4,n.push(new $n(r,i,a,o))}return t}serialize(){let t=10+e._writeSelectionsSize(this.beforeCursorState)+e._writeSelectionsSize(this.afterCursorState)+4;for(let e of this.changes)t+=e.writeSize();let n=new Uint8Array(t),r=0;ws(n,this.beforeVersionId,r),r+=4,ws(n,this.afterVersionId,r),r+=4,Es(n,this.beforeEOL,r),r+=1,Es(n,this.afterEOL,r),r+=1,r=e._writeSelections(n,this.beforeCursorState,r),r=e._writeSelections(n,this.afterCursorState,r),ws(n,this.changes.length,r),r+=4;for(let e of this.changes)r=e.write(n,r);return n.buffer}static deserialize(t){let n=new Uint8Array(t),r=0,i=Cs(n,r);r+=4;let a=Cs(n,r);r+=4;let o=Ts(n,r);r+=1;let s=Ts(n,r);r+=1;let c=[];r=e._readSelections(n,r,c);let l=[];r=e._readSelections(n,r,l);let u=Cs(n,r);r+=4;let d=[];for(let e=0;e<u;e++)r=ky.read(n,r,d);return new e(i,a,o,s,c,l,d)}},Py=class{constructor(e,t){this.model=e,this._data=Ny.create(e,t)}get type(){return 0}get resource(){return F.isUri(this.model)?this.model:this.model.uri}get label(){return t(`edit`,`Typing`)}toString(){return(this._data instanceof Ny?this._data:Ny.deserialize(this._data)).changes.map(e=>e.toString()).join(`, `)}matchesResource(e){return(F.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Ny}append(e,t,n,r,i){this._data instanceof Ny&&this._data.append(e,t,n,r,i)}close(){this._data instanceof Ny&&(this._data=this._data.serialize())}open(){this._data instanceof Ny||(this._data=Ny.deserialize(this._data))}undo(){if(F.isUri(this.model))throw Error(`Invalid SingleModelEditStackElement`);this._data instanceof Ny&&(this._data=this._data.serialize());let e=Ny.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(F.isUri(this.model))throw Error(`Invalid SingleModelEditStackElement`);this._data instanceof Ny&&(this._data=this._data.serialize());let e=Ny.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Ny&&(this._data=this._data.serialize()),this._data.byteLength+168}},Fy=class{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(let e of this._editStackElementsArr){let t=My(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){let t=My(e);return this._editStackElementsMap.has(t)}setModel(e){let t=My(F.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=My(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,i){let a=My(e.uri);this._editStackElementsMap.get(a).append(e,t,n,r,i)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=My(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${zs(t.resource)}: ${t}`);return`{${e.join(`, `)}}`}};function Iy(e){return e.getEOL()===`
`?0:1}function Ly(e){return e?e instanceof Py||e instanceof Fy:!1}var Ry=class e{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Ly(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Ly(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){let t=this._undoRedoService.getLastElement(this._model.uri);if(Ly(t)&&t.canAppend(this._model))return t;let n=new Py(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){let t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],Iy(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(t,n,r){let i=this._getOrCreateEditStackElement(t),a=this._model.applyEdits(n,!0),o=e._computeCursorState(r,a),s=a.map((e,t)=>({index:t,textChange:e.textChange}));return s.sort((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition),i.append(this._model,s.map(e=>e.textChange),Iy(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return ct(e),null}}},zy=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function By(e,t,n,r,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let a;for(a=0;a<t&&a<r&&e.charCodeAt(a)===n.charCodeAt(a);a++);let o=0,s=0;for(let n=a;n<t;n++)e.charCodeAt(n)===32?o++:s++;let c=0,l=0;for(let e=a;e<r;e++)n.charCodeAt(e)===32?c++:l++;if(o>0&&s>0||c>0&&l>0)return;let u=Math.abs(s-l),d=Math.abs(o-c);if(u===0){i.spacesDiff=d,d>0&&0<=c-1&&c-1<e.length&&c<n.length&&n.charCodeAt(c)!==32&&e.charCodeAt(c-1)===32&&e.charCodeAt(e.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%u===0){i.spacesDiff=d/u;return}}function Vy(e,t,n){let r=Math.min(e.getLineCount(),1e4),i=0,a=0,o=``,s=0,c=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],u=new zy;for(let c=1;c<=r;c++){let r=e.getLineLength(c),d=e.getLineContent(c),f=r<=65536,p=!1,m=0,h=0,g=0;for(let t=0,n=r;t<n;t++){let n=f?d.charCodeAt(t):e.getLineCharCode(c,t);if(n===9)g++;else if(n===32)h++;else{p=!0,m=t;break}}if(!p||(g>0?i++:h>1&&a++,By(o,s,d,m,u),u.looksLikeAlignment&&!(n&&t===u.spacesDiff)))continue;let _=u.spacesDiff;_<=8&&l[_]++,o=d,s=m}let d=n;i!==a&&(d=i<a);let f=t;if(d){let e=d?0:.1*r;c.forEach(t=>{let n=l[t];n>e&&(e=n,f=t)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function Hy(e){return(e.metadata&1)>>>0}function Uy(e,t){e.metadata=e.metadata&254|t<<0}function Wy(e){return(e.metadata&2)>>>1==1}function Gy(e,t){e.metadata=e.metadata&253|(t?1:0)<<1}function Ky(e){return(e.metadata&4)>>>2==1}function qy(e,t){e.metadata=e.metadata&251|(t?1:0)<<2}function Jy(e){return(e.metadata&24)>>>3}function Yy(e,t){e.metadata=e.metadata&231|t<<3}function Xy(e){return(e.metadata&32)>>>5==1}function Zy(e,t){e.metadata=e.metadata&223|(t?1:0)<<5}var Qy=class{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Uy(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,qy(this,!1),Yy(this,1),Zy(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Gy(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;let t=this.options.className;qy(this,t===`squiggly-error`||t===`squiggly-warning`||t===`squiggly-info`),Yy(this,this.options.stickiness),Zy(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}};const G=new Qy(null,0,0);G.parent=G,G.left=G,G.right=G,Uy(G,0);var $y=class{constructor(){this.root=G,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,i){return this.root===G?[]:cb(this,e,t,n,r,i)}search(e,t,n){return this.root===G?[]:sb(this,e,t,n)}collectNodesFromOwner(e){return ab(this,e)}collectNodesPostOrder(){return ob(this)}insert(e){lb(this,e),this._normalizeDeltaIfNecessary()}delete(e){db(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;let i=n.start+r,a=n.end+r;n.setCachedOffsets(i,a,t)}acceptReplace(e,t,n,r){let i=rb(this,e,e+t);for(let e=0,t=i.length;e<t;e++){let t=i[e];db(this,t)}this._normalizeDeltaIfNecessary(),ib(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let a=0,o=i.length;a<o;a++){let o=i[a];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,nb(o,e,e+t,n,r),o.maxEnd=o.end,lb(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,eb(this))}};function eb(e){let t=e.root,n=0;for(;t!==G;){if(t.left!==G&&!Wy(t.left)){t=t.left;continue}if(t.right!==G&&!Wy(t.right)){n+=t.delta,t=t.right;continue}t.start=n+t.start,t.end=n+t.end,t.delta=0,_b(t),Gy(t,!0),Gy(t.left,!1),Gy(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent}Gy(e.root,!1)}function tb(e,t,n,r){return e<n?!0:e>n||r===1?!1:r===2?!0:t}function nb(e,t,n,r,i){let a=Jy(e),o=a===0||a===2,s=a===1||a===2,c=n-t,l=r,u=Math.min(c,l),d=e.start,f=!1,p=e.end,m=!1;t<=d&&p<=n&&Xy(e)&&(e.start=t,f=!0,e.end=t,m=!0);{let e=i?1:c>0?2:0;!f&&tb(d,o,t,e)&&(f=!0),!m&&tb(p,s,t,e)&&(m=!0)}if(u>0&&!i){let e=c>l?2:0;!f&&tb(d,o,t+u,e)&&(f=!0),!m&&tb(p,s,t+u,e)&&(m=!0)}{let r=i?1:0;!f&&tb(d,o,n,r)&&(e.start=t+l,f=!0),!m&&tb(p,s,n,r)&&(e.end=t+l,m=!0)}let h=l-c;f||(e.start=Math.max(0,d+h)),m||(e.end=Math.max(0,p+h)),e.start>e.end&&(e.end=e.start)}function rb(e,t,n){let r=e.root,i=0,a=0,o=0,s=0,c=[],l=0;for(;r!==G;){if(Wy(r)){Gy(r.left,!1),Gy(r.right,!1),r===r.parent.right&&(i-=r.parent.delta),r=r.parent;continue}if(!Wy(r.left)){if(a=i+r.maxEnd,a<t){Gy(r,!0);continue}if(r.left!==G){r=r.left;continue}}if(o=i+r.start,o>n){Gy(r,!0);continue}if(s=i+r.end,s>=t&&(r.setCachedOffsets(o,s,0),c[l++]=r),Gy(r,!0),r.right!==G&&!Wy(r.right)){i+=r.delta,r=r.right;continue}}return Gy(e.root,!1),c}function ib(e,t,n,r){let i=e.root,a=0,o=0,s=0,c=r-(n-t);for(;i!==G;){if(Wy(i)){Gy(i.left,!1),Gy(i.right,!1),i===i.parent.right&&(a-=i.parent.delta),_b(i),i=i.parent;continue}if(!Wy(i.left)){if(o=a+i.maxEnd,o<t){Gy(i,!0);continue}if(i.left!==G){i=i.left;continue}}if(s=a+i.start,s>n){i.start+=c,i.end+=c,i.delta+=c,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),Gy(i,!0);continue}if(Gy(i,!0),i.right!==G&&!Wy(i.right)){a+=i.delta,i=i.right;continue}}Gy(e.root,!1)}function ab(e,t){let n=e.root,r=[],i=0;for(;n!==G;){if(Wy(n)){Gy(n.left,!1),Gy(n.right,!1),n=n.parent;continue}if(n.left!==G&&!Wy(n.left)){n=n.left;continue}if(n.ownerId===t&&(r[i++]=n),Gy(n,!0),n.right!==G&&!Wy(n.right)){n=n.right;continue}}return Gy(e.root,!1),r}function ob(e){let t=e.root,n=[],r=0;for(;t!==G;){if(Wy(t)){Gy(t.left,!1),Gy(t.right,!1),t=t.parent;continue}if(t.left!==G&&!Wy(t.left)){t=t.left;continue}if(t.right!==G&&!Wy(t.right)){t=t.right;continue}n[r++]=t,Gy(t,!0)}return Gy(e.root,!1),n}function sb(e,t,n,r){let i=e.root,a=0,o=0,s=0,c=[],l=0;for(;i!==G;){if(Wy(i)){Gy(i.left,!1),Gy(i.right,!1),i===i.parent.right&&(a-=i.parent.delta),i=i.parent;continue}if(i.left!==G&&!Wy(i.left)){i=i.left;continue}o=a+i.start,s=a+i.end,i.setCachedOffsets(o,s,r);let e=!0;if(t&&i.ownerId&&i.ownerId!==t&&(e=!1),n&&Ky(i)&&(e=!1),e&&(c[l++]=i),Gy(i,!0),i.right!==G&&!Wy(i.right)){a+=i.delta,i=i.right;continue}}return Gy(e.root,!1),c}function cb(e,t,n,r,i,a){let o=e.root,s=0,c=0,l=0,u=0,d=[],f=0;for(;o!==G;){if(Wy(o)){Gy(o.left,!1),Gy(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(!Wy(o.left)){if(c=s+o.maxEnd,c<t){Gy(o,!0);continue}if(o.left!==G){o=o.left;continue}}if(l=s+o.start,l>n){Gy(o,!0);continue}if(u=s+o.end,u>=t){o.setCachedOffsets(l,u,a);let e=!0;r&&o.ownerId&&o.ownerId!==r&&(e=!1),i&&Ky(o)&&(e=!1),e&&(d[f++]=o)}if(Gy(o,!0),o.right!==G&&!Wy(o.right)){s+=o.delta,o=o.right;continue}}return Gy(e.root,!1),d}function lb(e,t){if(e.root===G)return t.parent=G,t.left=G,t.right=G,Uy(t,0),e.root=t,e.root;ub(e,t),vb(t.parent);let n=t;for(;n!==e.root&&Hy(n.parent)===1;)if(n.parent===n.parent.parent.left){let t=n.parent.parent.right;Hy(t)===1?(Uy(n.parent,0),Uy(t,0),Uy(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,mb(e,n)),Uy(n.parent,0),Uy(n.parent.parent,1),hb(e,n.parent.parent))}else{let t=n.parent.parent.left;Hy(t)===1?(Uy(n.parent,0),Uy(t,0),Uy(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,hb(e,n)),Uy(n.parent,0),Uy(n.parent.parent,1),mb(e,n.parent.parent))}return Uy(e.root,0),t}function ub(e,t){let n=0,r=e.root,i=t.start,a=t.end;for(;;)if(yb(i,a,r.start+n,r.end+n)<0)if(r.left===G){t.start-=n,t.end-=n,t.maxEnd-=n,r.left=t;break}else r=r.left;else if(r.right===G){t.start-=n+r.delta,t.end-=n+r.delta,t.maxEnd-=n+r.delta,r.right=t;break}else n+=r.delta,r=r.right;t.parent=r,t.left=G,t.right=G,Uy(t,1)}function db(e,t){let n,r;if(t.left===G?(n=t.right,r=t,n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===G?(n=t.left,r=t):(r=fb(t.right),n=r.right,n.start+=r.delta,n.end+=r.delta,n.delta+=r.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),r.start+=t.delta,r.end+=t.delta,r.delta=t.delta,(r.delta<-1073741824||r.delta>1073741824)&&(e.requestNormalizeDelta=!0)),r===e.root){e.root=n,Uy(n,0),t.detach(),pb(),_b(n),e.root.parent=G;return}let i=Hy(r)===1;if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?n.parent=r.parent:(r.parent===t?n.parent=r:n.parent=r.parent,r.left=t.left,r.right=t.right,r.parent=t.parent,Uy(r,Hy(t)),t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==G&&(r.left.parent=r),r.right!==G&&(r.right.parent=r)),t.detach(),i){vb(n.parent),r!==t&&(vb(r),vb(r.parent)),pb();return}vb(n),vb(n.parent),r!==t&&(vb(r),vb(r.parent));let a;for(;n!==e.root&&Hy(n)===0;)n===n.parent.left?(a=n.parent.right,Hy(a)===1&&(Uy(a,0),Uy(n.parent,1),mb(e,n.parent),a=n.parent.right),Hy(a.left)===0&&Hy(a.right)===0?(Uy(a,1),n=n.parent):(Hy(a.right)===0&&(Uy(a.left,0),Uy(a,1),hb(e,a),a=n.parent.right),Uy(a,Hy(n.parent)),Uy(n.parent,0),Uy(a.right,0),mb(e,n.parent),n=e.root)):(a=n.parent.left,Hy(a)===1&&(Uy(a,0),Uy(n.parent,1),hb(e,n.parent),a=n.parent.left),Hy(a.left)===0&&Hy(a.right)===0?(Uy(a,1),n=n.parent):(Hy(a.left)===0&&(Uy(a.right,0),Uy(a,1),mb(e,a),a=n.parent.left),Uy(a,Hy(n.parent)),Uy(n.parent,0),Uy(a.left,0),hb(e,n.parent),n=e.root));Uy(n,0),pb()}function fb(e){for(;e.left!==G;)e=e.left;return e}function pb(){G.parent=G,G.delta=0,G.start=0,G.end=0}function mb(e,t){let n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==G&&(n.left.parent=t),n.parent=t.parent,t.parent===G?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,_b(t),_b(n)}function hb(e,t){let n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==G&&(n.right.parent=t),n.parent=t.parent,t.parent===G?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,_b(t),_b(n)}function gb(e){let t=e.end;if(e.left!==G){let n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==G){let n=e.right.maxEnd+e.delta;n>t&&(t=n)}return t}function _b(e){e.maxEnd=gb(e)}function vb(e){for(;e!==G;){let t=gb(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function yb(e,t,n,r){return e===n?t-r:e-n}var bb=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==K)return xb(this.right);let e=this;for(;e.parent!==K&&e.parent.left!==e;)e=e.parent;return e.parent===K?K:e.parent}prev(){if(this.left!==K)return Sb(this.left);let e=this;for(;e.parent!==K&&e.parent.right!==e;)e=e.parent;return e.parent===K?K:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const K=new bb(null,0);K.parent=K,K.left=K,K.right=K,K.color=0;function xb(e){for(;e.left!==K;)e=e.left;return e}function Sb(e){for(;e.right!==K;)e=e.right;return e}function Cb(e){return e===K?0:e.size_left+e.piece.length+Cb(e.right)}function wb(e){return e===K?0:e.lf_left+e.piece.lineFeedCnt+wb(e.right)}function Tb(){K.parent=K}function Eb(e,t){let n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==K&&(n.left.parent=t),n.parent=t.parent,t.parent===K?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function Db(e,t){let n=t.left;t.left=n.right,n.right!==K&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===K?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function Ob(e,t){let n,r;if(t.left===K?(r=t,n=r.right):t.right===K?(r=t,n=r.left):(r=xb(t.right),n=r.right),r===e.root){e.root=n,n.color=0,t.detach(),Tb(),e.root.parent=K;return}let i=r.color===1;if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?(n.parent=r.parent,jb(e,n)):(r.parent===t?n.parent=r:n.parent=r.parent,jb(e,n),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==K&&(r.left.parent=r),r.right!==K&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,jb(e,r)),t.detach(),n.parent.left===n){let t=Cb(n),r=wb(n);if(t!==n.parent.size_left||r!==n.parent.lf_left){let i=t-n.parent.size_left,a=r-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=r,Ab(e,n.parent,i,a)}}if(jb(e,n.parent),i){Tb();return}let a;for(;n!==e.root&&n.color===0;)n===n.parent.left?(a=n.parent.right,a.color===1&&(a.color=0,n.parent.color=1,Eb(e,n.parent),a=n.parent.right),a.left.color===0&&a.right.color===0?(a.color=1,n=n.parent):(a.right.color===0&&(a.left.color=0,a.color=1,Db(e,a),a=n.parent.right),a.color=n.parent.color,n.parent.color=0,a.right.color=0,Eb(e,n.parent),n=e.root)):(a=n.parent.left,a.color===1&&(a.color=0,n.parent.color=1,Db(e,n.parent),a=n.parent.left),a.left.color===0&&a.right.color===0?(a.color=1,n=n.parent):(a.left.color===0&&(a.right.color=0,a.color=1,Eb(e,a),a=n.parent.left),a.color=n.parent.color,n.parent.color=0,a.left.color=0,Db(e,n.parent),n=e.root));n.color=0,Tb()}function kb(e,t){for(jb(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;n.color===1?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Eb(e,t)),t.parent.color=0,t.parent.parent.color=1,Db(e,t.parent.parent))}else{let n=t.parent.parent.left;n.color===1?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Db(e,t)),t.parent.color=0,t.parent.parent.color=1,Eb(e,t.parent.parent))}e.root.color=0}function Ab(e,t,n,r){for(;t!==e.root&&t!==K;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}function jb(e,t){let n=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,n=Cb(t.left)-t.size_left,r=wb(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=r;t!==e.root&&(n!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}}var Mb=class extends up{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}};function Nb(e){let t={};return n=>(t.hasOwnProperty(n)||(t[n]=e(n)),t[n])}const Pb=Nb(e=>new Mb(e));var Fb=999,Ib=class{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString===``)return null;let e;e=this.isRegex?Lb(this.searchString):this.searchString.indexOf(`
`)>=0;let t=null;try{t=mo(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Rb(t,this.wordSeparators?Pb(this.wordSeparators):null,n?this.searchString:null)}};function Lb(e){if(!e||e.length===0)return!1;for(let t=0,n=e.length;t<n;t++)if(e.charCodeAt(t)===92){if(t++,t>=n)break;let r=e.charCodeAt(t);if(r===110||r===114||r===87)return!0}return!1}var Rb=class{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}};function zb(e,t,n){if(!n)return new Uc(e,null);let r=[];for(let e=0,n=t.length;e<n;e++)r[e]=t[e];return new Uc(e,r)}var Bb=class{constructor(e){let t=[],n=0;for(let r=0,i=e.length;r<i;r++)e.charCodeAt(r)===10&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){let i=n+((r-n)/2>>0);t[i]>=e?r=i-1:t[i+1]>=e?(n=i,r=i):n=i+1}return n+1}},Vb=class{static findMatches(e,t,n,r,i){let a=t.parseSearchRequest();return a?a.regex.multiline?this._doFindMatchesMultiline(e,n,new Gb(a.wordSeparators,a.regex),r,i):this._doFindMatchesLineByLine(e,n,a,r,i):[]}static _getMultilineMatchRange(e,t,n,r,i,a){let o,s=0;r?(s=r.findLineFeedCountBeforeOffset(i),o=t+i+s):o=t+i;let c;if(r){let e=r.findLineFeedCountBeforeOffset(i+a.length)-s;c=o+a.length+e}else c=o+a.length;let l=e.getPositionAt(o),u=e.getPositionAt(c);return new L(l.lineNumber,l.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,r,i){let a=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),s=e.getEOL()===`\r
`?new Bb(o):null,c=[],l=0,u;for(n.reset(0);u=n.next(o);)if(c[l++]=zb(this._getMultilineMatchRange(e,a,o,s,u.index,u[0]),u,r),l>=i)return c;return c}static _doFindMatchesLineByLine(e,t,n,r,i){let a=[],o=0;if(t.startLineNumber===t.endLineNumber){let s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(n,s,t.startLineNumber,t.startColumn-1,o,a,r,i),a}let s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(n,s,t.startLineNumber,t.startColumn-1,o,a,r,i);for(let s=t.startLineNumber+1;s<t.endLineNumber&&o<i;s++)o=this._findMatchesInLine(n,e.getLineContent(s),s,0,o,a,r,i);if(o<i){let s=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(n,s,t.endLineNumber,0,o,a,r,i)}return a}static _findMatchesInLine(e,t,n,r,i,a,o,s){let c=e.wordSeparators;if(!o&&e.simpleSearch){let o=e.simpleSearch,l=o.length,u=t.length,d=-l;for(;(d=t.indexOf(o,d+l))!==-1;)if((!c||Wb(c,t,u,d,l))&&(a[i++]=new Uc(new L(n,d+1+r,n,d+1+l+r),null),i>=s))return i;return i}let l=new Gb(e.wordSeparators,e.regex),u;l.reset(0);do if(u=l.next(t),u&&(a[i++]=zb(new L(n,u.index+1+r,n,u.index+1+u[0].length+r),u,o),i>=s))return i;while(u);return i}static findNextMatch(e,t,n,r){let i=t.parseSearchRequest();if(!i)return null;let a=new Gb(i.wordSeparators,i.regex);return i.regex.multiline?this._doFindNextMatchMultiline(e,n,a,r):this._doFindNextMatchLineByLine(e,n,a,r)}static _doFindNextMatchMultiline(e,t,n,r){let i=new I(t.lineNumber,1),a=e.getOffsetAt(i),o=e.getLineCount(),s=e.getValueInRange(new L(i.lineNumber,i.column,o,e.getLineMaxColumn(o)),1),c=e.getEOL()===`\r
`?new Bb(s):null;n.reset(t.column-1);let l=n.next(s);return l?zb(this._getMultilineMatchRange(e,a,s,c,l.index,l[0]),l,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new I(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){let i=e.getLineCount(),a=t.lineNumber,o=e.getLineContent(a),s=this._findFirstMatchInLine(n,o,a,t.column,r);if(s)return s;for(let t=1;t<=i;t++){let o=(a+t-1)%i,s=e.getLineContent(o+1),c=this._findFirstMatchInLine(n,s,o+1,1,r);if(c)return c}return null}static _findFirstMatchInLine(e,t,n,r,i){e.reset(r-1);let a=e.next(t);return a?zb(new L(n,a.index+1,n,a.index+1+a[0].length),a,i):null}static findPreviousMatch(e,t,n,r){let i=t.parseSearchRequest();if(!i)return null;let a=new Gb(i.wordSeparators,i.regex);return i.regex.multiline?this._doFindPreviousMatchMultiline(e,n,a,r):this._doFindPreviousMatchLineByLine(e,n,a,r)}static _doFindPreviousMatchMultiline(e,t,n,r){let i=this._doFindMatchesMultiline(e,new L(1,1,t.lineNumber,t.column),n,r,10*Fb);if(i.length>0)return i[i.length-1];let a=e.getLineCount();return t.lineNumber!==a||t.column!==e.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(e,new I(a,e.getLineMaxColumn(a)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){let i=e.getLineCount(),a=t.lineNumber,o=e.getLineContent(a).substring(0,t.column-1),s=this._findLastMatchInLine(n,o,a,r);if(s)return s;for(let t=1;t<=i;t++){let o=(i+a-t-1)%i,s=e.getLineContent(o+1),c=this._findLastMatchInLine(n,s,o+1,r);if(c)return c}return null}static _findLastMatchInLine(e,t,n,r){let i=null,a;for(e.reset(0);a=e.next(t);)i=zb(new L(n,a.index+1,n,a.index+1+a[0].length),a,r);return i}};function Hb(e,t,n,r,i){if(r===0)return!0;let a=t.charCodeAt(r-1);if(e.get(a)!==0||a===13||a===10)return!0;if(i>0){let n=t.charCodeAt(r);if(e.get(n)!==0)return!0}return!1}function Ub(e,t,n,r,i){if(r+i===n)return!0;let a=t.charCodeAt(r+i);if(e.get(a)!==0||a===13||a===10)return!0;if(i>0){let n=t.charCodeAt(r+i-1);if(e.get(n)!==0)return!0}return!1}function Wb(e,t,n,r,i){return Hb(e,t,n,r,i)&&Ub(e,t,n,r,i)}var Gb=class{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let r=n.index,i=n[0].length;if(r===this._prevMatchStartIndex&&i===this._prevMatchLength){if(i===0){Po(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=i,!this._wordSeparators||Wb(this._wordSeparators,e,t,r,i))return n}while(n);return null}};const Kb=65535;function qb(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}var Jb=class{constructor(e,t,n,r,i){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=i}};function Yb(e,t=!0){let n=[0],r=1;for(let t=0,i=e.length;t<i;t++){let a=e.charCodeAt(t);a===13?t+1<i&&e.charCodeAt(t+1)===10?(n[r++]=t+2,t++):n[r++]=t+1:a===10&&(n[r++]=t+1)}return t?qb(n):n}function Xb(e,t){e.length=0,e[0]=0;let n=1,r=0,i=0,a=0,o=!0;for(let s=0,c=t.length;s<c;s++){let l=t.charCodeAt(s);l===13?s+1<c&&t.charCodeAt(s+1)===10?(a++,e[n++]=s+2,s++):(r++,e[n++]=s+1):l===10?(i++,e[n++]=s+1):o&&l!==9&&(l<32||l>126)&&(o=!1)}let s=new Jb(qb(e),r,i,a,o);return e.length=0,s}var Zb=class{constructor(e,t,n,r,i){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=i}},Qb=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},$b=class{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==K&&e.iterate(e.root,e=>(e!==K&&this._pieces.push(e.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},ex=class{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let i=n[r];if(i.node.parent===null||i.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){let e=[];for(let t of n)t!==null&&e.push(t);this._cache=e}}},tx=class{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Qb(``,[0])],this._lastChangeBufferPos={line:0,column:0},this.root=K,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let t=0,n=e.length;t<n;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=Yb(e[t].buffer));let n=new Zb(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),r=this.rbInsertRight(r,n)}this._searchCache=new ex(1),this._lastVisitedLine={lineNumber:0,value:``},this.computeBufferMetadata()}normalizeEOL(e){let t=Kb,n=t-Math.floor(t/3),r=n*2,i=``,a=0,o=[];if(this.iterate(this.root,t=>{let s=this.getNodeContent(t),c=s.length;if(a<=n||a+c<r)return i+=s,a+=c,!0;let l=i.replace(/\r\n|\r|\n/g,e);return o.push(new Qb(l,Yb(l))),i=s,a=c,!0}),a>0){let t=i.replace(/\r\n|\r|\n/g,e);o.push(new Qb(t,Yb(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new $b(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==K;)if(r.left!==K&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;let i=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=i+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,r=e;for(;t!==K;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let i=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+i.index,i.index===0){let e=r-this.getOffsetAt(n+1,1);return new I(n+1,e+1)}return new I(n+1,i.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===K){let t=this.getOffsetAt(n+1,1),i=r-e-t;return new I(n+1,i+1)}else t=t.right;return new I(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return``;let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),i=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?i.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?i:i.replace(/\r\n|\r|\n/g,t):i}getValueInRange2(e,t){if(e.node===t.node){let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r.substring(i+e.remainder,i+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),a=r.substring(i+e.remainder,i+n.piece.length);for(n=n.next();n!==K;){let e=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){a+=e.substring(r,r+t.remainder);break}else a+=e.substr(r,n.piece.length);n=n.next()}return a}getLinesContent(){let e=[],t=0,n=``,r=!1;return this.iterate(this.root,i=>{if(i===K)return!0;let a=i.piece,o=a.length;if(o===0)return!0;let s=this._buffers[a.bufferIndex].buffer,c=this._buffers[a.bufferIndex].lineStarts,l=a.start.line,u=a.end.line,d=c[l]+a.start.column;if(r&&(s.charCodeAt(d)===10&&(d++,o--),e[t++]=n,n=``,r=!1,o===0))return!0;if(l===u)return!this._EOLNormalized&&s.charCodeAt(d+o-1)===13?(r=!0,n+=s.substr(d,o-1)):n+=s.substr(d,o),!0;n+=this._EOLNormalized?s.substring(d,Math.max(d,c[l+1]-this._EOLLength)):s.substring(d,c[l+1]).replace(/(\r\n|\r|\n)$/,``),e[t++]=n;for(let r=l+1;r<u;r++)n=this._EOLNormalized?s.substring(c[r],c[r+1]-this._EOLLength):s.substring(c[r],c[r+1]).replace(/(\r\n|\r|\n)$/,``),e[t++]=n;return!this._EOLNormalized&&s.charCodeAt(c[u]+a.end.column-1)===13?(r=!0,a.end.column===0?t--:n=s.substr(c[u],a.end.column-1)):n=s.substr(c[u],a.end.column),!0}),r&&(e[t++]=n,n=``),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,``),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{let t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,i,a,o,s,c,l,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,i),m=this.offsetInBuffer(e.piece.bufferIndex,a),h,g={line:0,column:0},_,v;t._wordSeparators?(_=d.buffer.substring(p,m),v=e=>e+p,t.reset(0)):(_=d.buffer,v=e=>e,t.reset(p));do if(h=t.next(_),h){if(v(h.index)>=m)return l;this.positionInBuffer(e,v(h.index)-f,g);let t=this.getLineFeedCnt(e.piece.bufferIndex,i,g),a=g.line===i.line?g.column-i.column+r:g.column+1,o=a+h[0].length;if(u[l++]=zb(new L(n+t,a,n+t,o),h,s),v(h.index)+h[0].length>=m||l>=c)return l}while(h);return l}findMatchesLineByLine(e,t,n,r){let i=[],a=0,o=new Gb(t.wordSeparators,t.regex),s=this.nodeAt2(e.startLineNumber,e.startColumn);if(s===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.positionInBuffer(s.node,s.remainder),u=this.positionInBuffer(c.node,c.remainder);if(s.node===c.node)return this.findMatchesInNode(s.node,o,e.startLineNumber,e.startColumn,l,u,t,n,r,a,i),i;let d=e.startLineNumber,f=s.node;for(;f!==c.node;){let c=this.getLineFeedCnt(f.piece.bufferIndex,l,f.piece.end);if(c>=1){let s=this._buffers[f.piece.bufferIndex].lineStarts,u=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),p=s[l.line+c],m=d===e.startLineNumber?e.startColumn:1;if(a=this.findMatchesInNode(f,o,d,m,l,this.positionInBuffer(f,p-u),t,n,r,a,i),a>=r)return i;d+=c}let u=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){let s=this.getLineContent(d).substring(u,e.endColumn-1);return a=this._findMatchesInLine(t,o,s,e.endLineNumber,u,a,i,n,r),i}if(a=this._findMatchesInLine(t,o,this.getLineContent(d).substr(u),d,u,a,i,n,r),a>=r)return i;d++,s=this.nodeAt2(d,1),f=s.node,l=this.positionInBuffer(s.node,s.remainder)}if(d===e.endLineNumber){let s=d===e.startLineNumber?e.startColumn-1:0,c=this.getLineContent(d).substring(s,e.endColumn-1);return a=this._findMatchesInLine(t,o,c,e.endLineNumber,s,a,i,n,r),i}let p=d===e.startLineNumber?e.startColumn:1;return a=this.findMatchesInNode(c.node,o,d,p,l,u,t,n,r,a,i),i}_findMatchesInLine(e,t,n,r,i,a,o,s,c){let l=e.wordSeparators;if(!s&&e.simpleSearch){let t=e.simpleSearch,s=t.length,u=n.length,d=-s;for(;(d=n.indexOf(t,d+s))!==-1;)if((!l||Wb(l,n,u,d,s))&&(o[a++]=new Uc(new L(r,d+1+i,r,d+1+s+i),null),a>=c))return a;return a}let u;t.reset(0);do if(u=t.next(n),u&&(o[a++]=zb(new L(r,u.index+1+i,r,u.index+1+u[0].length+i),u,s),a>=c))return a;while(u);return a}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value=``,this.root!==K){let{node:n,remainder:r,nodeStartOffset:i}=this.nodeAt(e),a=n.piece,o=a.bufferIndex,s=this.positionInBuffer(n,r);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&i+a.length===e&&t.length<65535){this.appendToNode(n,t),this.computeBufferMetadata();return}if(i===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(i+n.piece.length>e){let e=[],i=new Zb(a.bufferIndex,s,a.end,this.getLineFeedCnt(a.bufferIndex,s,a.end),this.offsetInBuffer(o,a.end)-this.offsetInBuffer(o,s));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,r)===10){let e={line:i.start.line+1,column:0};i=new Zb(i.bufferIndex,e,i.end,this.getLineFeedCnt(i.bufferIndex,e,i.end),i.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,r-1)===13){let i=this.positionInBuffer(n,r-1);this.deleteNodeTail(n,i),t=`\r`+t,n.piece.length===0&&e.push(n)}else this.deleteNodeTail(n,s);else this.deleteNodeTail(n,s);let c=this.createNewPieces(t);i.length>0&&this.rbInsertRight(n,i);let l=n;for(let e=0;e<c.length;e++)l=this.rbInsertRight(l,c[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{let e=this.createNewPieces(t),n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value=``,t<=0||this.root===K)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),i=n.node,a=r.node;if(i===a){let a=this.positionInBuffer(i,n.remainder),o=this.positionInBuffer(i,r.remainder);if(n.nodeStartOffset===e){if(t===i.piece.length){let e=i.next();Ob(this,i),this.validateCRLFWithPrevNode(e),this.computeBufferMetadata();return}this.deleteNodeHead(i,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(i),this.computeBufferMetadata();return}if(n.nodeStartOffset+i.piece.length===e+t){this.deleteNodeTail(i,a),this.validateCRLFWithNextNode(i),this.computeBufferMetadata();return}this.shrinkNode(i,a,o),this.computeBufferMetadata();return}let o=[],s=this.positionInBuffer(i,n.remainder);this.deleteNodeTail(i,s),this._searchCache.validate(e),i.piece.length===0&&o.push(i);let c=this.positionInBuffer(a,r.remainder);this.deleteNodeHead(a,c),a.piece.length===0&&o.push(a);let l=i.next();for(let e=l;e!==K&&e!==a;e=e.next())o.push(e);let u=i.piece.length===0?i.prev():i;this.deleteNodes(o),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let r=t.piece,i={line:r.start.line+1,column:0};t.piece=new Zb(r.bufferIndex,i,r.end,this.getLineFeedCnt(r.bufferIndex,i,r.end),r.length-1),e+=`
`,Ab(this,t,-1,-1),t.piece.length===0&&n.push(t)}let r=this.createNewPieces(e),i=this.rbInsertLeft(t,r[r.length-1]);for(let e=r.length-2;e>=0;e--)i=this.rbInsertLeft(i,r[e]);this.validateCRLFWithPrevNode(i),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),i=r;for(let e=1;e<n.length;e++)i=this.rbInsertRight(i,n[e]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,i=e.piece.bufferIndex,a=this._buffers[i].lineStarts,o=a[r.start.line]+r.start.column+t,s=r.start.line,c=r.end.line,l=0,u=0,d=0;for(;s<=c&&(l=s+(c-s)/2|0,d=a[l],l!==c);)if(u=a[l+1],o<d)c=l-1;else if(o>=u)s=l+1;else break;return n?(n.line=l,n.column=o-d,null):{line:l,column:o-d}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let i=r[n.line+1],a=r[n.line]+n.column;if(i>a+1)return n.line-t.line;let o=a-1;return this._buffers[e].buffer.charCodeAt(o)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Ob(this,e[t])}createNewPieces(e){if(e.length>65535){let t=[];for(;e.length>Kb;){let n=e.charCodeAt(Kb-1),r;n===13||n>=55296&&n<=56319?(r=e.substring(0,Kb-1),e=e.substring(Kb-1)):(r=e.substring(0,Kb),e=e.substring(Kb));let i=Yb(r);t.push(new Zb(this._buffers.length,{line:0,column:0},{line:i.length-1,column:r.length-i[i.length-1]},i.length-1,r.length)),this._buffers.push(new Qb(r,i))}let n=Yb(e);return t.push(new Zb(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new Qb(e,n)),t}let t=this._buffers[0].buffer.length,n=Yb(e,!1),r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=`_`+e,t+=1}else{if(t!==0)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let i=this._buffers[0].buffer.length,a=this._buffers[0].lineStarts.length-1,o={line:a,column:i-this._buffers[0].lineStarts[a]},s=new Zb(0,r,o,this.getLineFeedCnt(0,r,o),i-t);return this._lastChangeBufferPos=o,[s]}getLineRawContent(e,t=0){let n=this.root,r=``,i=this._searchCache.get2(e);if(i){n=i.node;let a=this.getAccumulatedValue(n,e-i.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(i.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=o.substring(s+a,s+n.piece.length);else{let r=this.getAccumulatedValue(n,e-i.nodeStartLineNumber);return o.substring(s+a,s+r-t)}}else{let i=0,a=e;for(;n!==K;)if(n.left!==K&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1),s=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:i,nodeStartLineNumber:a-(e-1-n.lf_left)}),s.substring(c+r,c+o-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(n,e-n.lf_left-2),i=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=i.substring(a+t,a+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==K;){let e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let i=this.getAccumulatedValue(n,0),a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=e.substring(a,a+i-t),r}else{let t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=e.substr(t,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==K;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),i=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(t!==i)return{index:t,remainder:0}}return{index:i,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,i=n.start.line+t+1;return i>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[i]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.end),a=t,o=this.offsetInBuffer(n.bufferIndex,a),s=this.getLineFeedCnt(n.bufferIndex,n.start,a),c=s-r,l=o-i,u=n.length+l;e.piece=new Zb(n.bufferIndex,n.start,a,s,u),Ab(this,e,l,c)}deleteNodeHead(e,t){let n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.start),a=t,o=this.getLineFeedCnt(n.bufferIndex,a,n.end),s=this.offsetInBuffer(n.bufferIndex,a),c=o-r,l=i-s,u=n.length+l;e.piece=new Zb(n.bufferIndex,a,n.end,o,u),Ab(this,e,l,c)}shrinkNode(e,t,n){let r=e.piece,i=r.start,a=r.end,o=r.length,s=r.lineFeedCnt,c=t,l=this.getLineFeedCnt(r.bufferIndex,r.start,c),u=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,i);e.piece=new Zb(r.bufferIndex,r.start,c,l,u),Ab(this,e,u-o,l-s);let d=new Zb(r.bufferIndex,n,a,this.getLineFeedCnt(r.bufferIndex,n,a),this.offsetInBuffer(r.bufferIndex,a)-this.offsetInBuffer(r.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let i=Yb(t,!1);for(let e=0;e<i.length;e++)i[e]+=r;if(n){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1));let a=this._buffers[0].lineStarts.length-1,o={line:a,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[a]},s=e.piece.length+t.length,c=e.piece.lineFeedCnt,l=this.getLineFeedCnt(0,e.piece.start,o),u=l-c;e.piece=new Zb(e.piece.bufferIndex,e.piece.start,o,l,s),this._lastChangeBufferPos=o,Ab(this,e,t.length,u)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==K;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;let n={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(n),n}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==K;)if(n.left!==K&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let i=this.getAccumulatedValue(n,e-n.lf_left-2),a=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(i+t-1,a),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let i=this.getAccumulatedValue(n,e-n.lf_left-2);if(i+t-1<=n.piece.length)return{node:n,remainder:i+t-1,nodeStartOffset:r};t-=n.piece.length-i;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==K;){if(n.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:r}}else if(n.piece.length>=t-1){let e=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:e}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e==`string`)return e.charCodeAt(0)===10;if(e===K||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,i=n[r]+t.start.column;return r===n.length-1||n[r+1]>i+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(i)===10}endWithCR(e){return typeof e==`string`?e.charCodeAt(e.length-1)===13:e===K||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],r=this._buffers[e.piece.bufferIndex].lineStarts,i;i=e.piece.end.column===0?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};let a=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Zb(e.piece.bufferIndex,e.piece.start,i,o,a),Ab(this,e,-1,-1),e.piece.length===0&&n.push(e);let s={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.getLineFeedCnt(t.piece.bufferIndex,s,t.piece.end);t.piece=new Zb(t.piece.bufferIndex,s,t.piece.end,l,c),Ab(this,t,-1,-1),t.piece.length===0&&n.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let e=0;e<n.length;e++)Ob(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Ob(this,n);else{let e=n.piece,t={line:e.start.line+1,column:0},r=e.length-1,i=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new Zb(e.bufferIndex,t,e.end,i,r),Ab(this,n,-1,-1)}return!0}}return!1}iterate(e,t){return e===K?t(K):this.iterate(e.left,t)&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===K)return``;let t=this._buffers[e.piece.bufferIndex],n,r=e.piece,i=this.offsetInBuffer(r.bufferIndex,r.start),a=this.offsetInBuffer(r.bufferIndex,r.end);return n=t.buffer.substring(i,a),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new bb(t,1);if(n.left=K,n.right=K,n.parent=K,n.size_left=0,n.lf_left=0,this.root===K)this.root=n,n.color=0;else if(e.right===K)e.right=n,n.parent=e;else{let t=xb(e.right);t.left=n,n.parent=t}return kb(this,n),n}rbInsertLeft(e,t){let n=new bb(t,1);if(n.left=K,n.right=K,n.parent=K,n.size_left=0,n.lf_left=0,this.root===K)this.root=n,n.color=0;else if(e.left===K)e.left=n,n.parent=e;else{let t=Sb(e.left);t.right=n,n.parent=t}return kb(this,n),n}};function nx(e){let t=0,n=0,r=0,i=0;for(let a=0,o=e.length;a<o;a++){let s=e.charCodeAt(a);s===13?(t===0&&(n=a),t++,a+1<o&&e.charCodeAt(a+1)===10?(i|=2,a++):i|=3,r=a+1):s===10&&(i|=1,t===0&&(n=a),t++,r=a+1)}return t===0&&(n=e.length),[t,n,e.length-r,i]}function rx(e){return(e<<0|16793600)>>>0}var ix=new Uint32Array().buffer,ax=class{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){let n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new lx(e,[t]))}},ox=class e{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(`,`)}]`}getMaxDeltaLine(){let e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(e===0)return null;let t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new L(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){let r=t+Math.floor((n-t)/2),i=this._getDeltaLine(r);if(i<e)t=r+1;else if(i>e)n=r-1;else{let i=r;for(;i>t&&this._getDeltaLine(i-1)===e;)i--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new sx(this._tokens.subarray(4*i,4*a+4))}}return this._getDeltaLine(t)===e?new sx(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){let i=this._tokens,a=this._tokenCount,o=0,s=!1,c=0;for(let l=0;l<a;l++){let a=4*l,u=i[a],d=i[a+1],f=i[a+2],p=i[a+3];if((u>e||u===e&&f>=t)&&(u<n||u===n&&d<=r))s=!0;else{if(o===0&&(c=u),s){let e=4*o;i[e]=u-c,i[e+1]=d,i[e+2]=f,i[e+3]=p}o++}}return this._tokenCount=o,c}split(t,n,r,i){let a=this._tokens,o=this._tokenCount,s=[],c=[],l=s,u=0,d=0;for(let e=0;e<o;e++){let o=4*e,s=a[o],f=a[o+1],p=a[o+2],m=a[o+3];if(s>t||s===t&&p>=n){if(s<r||s===r&&f<=i)continue;l!==c&&(l=c,u=0,d=s)}l[u++]=s-d,l[u++]=f,l[u++]=p,l[u++]=m}return[new e(new Uint32Array(s)),new e(new Uint32Array(c)),d]}acceptDeleteRange(e,t,n,r,i){let a=this._tokens,o=this._tokenCount,s=r-t,c=0,l=!1;for(let u=0;u<o;u++){let d=4*u,f=a[d],p=a[d+1],m=a[d+2],h=a[d+3];if(f<t||f===t&&m<=n){c++;continue}else if(f===t&&p<n)f===r&&m>i?m-=i-n:m=n;else if(f===t&&p===n)if(f===r&&m>i)m-=i-n;else{l=!0;continue}else if(f<r||f===r&&p<i)if(f===r&&m>i)f===t?(p=n,m=p+(m-i)):(p=0,m=p+(m-i));else{l=!0;continue}else if(f>r){if(s===0&&!l){c=o;break}f-=s}else if(f===r&&p>=i)e&&f===0&&(p+=e,m+=e),f-=s,p-=i-n,m-=i-n;else throw Error(`Not possible!`);let g=4*c;a[g]=f,a[g+1]=p,a[g+2]=m,a[g+3]=h,c++}this._tokenCount=c}acceptInsertText(e,t,n,r,i,a){let o=n===0&&r===1&&(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122),s=this._tokens,c=this._tokenCount;for(let a=0;a<c;a++){let c=4*a,l=s[c],u=s[c+1],d=s[c+2];if(!(l<e||l===e&&d<t)){if(l===e&&d===t)if(o)d+=1;else continue;else if(l===e&&u<t&&t<d)n===0?d+=r:d=t;else{if(l===e&&u===t&&o)continue;if(l===e)if(l+=n,n===0)u+=r,d+=r;else{let e=d-u;u=i+(u-t),d=u+e}else l+=n}s[c]=l,s[c+1]=u,s[c+2]=d}}}},sx=class{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}},cx=class e{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){let e=this.tokens.getRange();return e&&new L(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){let t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(t){let n=t.startLineNumber-this.startLineNumber,r=t.endLineNumber-this.startLineNumber,[i,a,o]=this.tokens.split(n,t.startColumn-1,r,t.endColumn-1);return[new e(this.startLineNumber,i),new e(this.startLineNumber+o,a)]}applyEdit(e,t){let[n,r,i]=nx(t);this.acceptEdit(e,n,r,i,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,i){this._acceptDeleteRange(e),this._acceptInsertText(new I(e.startLineNumber,e.startColumn),t,n,r,i),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){let e=n-t;this.startLineNumber-=e;return}let r=this.tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){let r=-t;this.startLineNumber-=r,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,i){if(t===0&&n===0)return;let a=e.lineNumber-this.startLineNumber;if(a<0){this.startLineNumber+=t;return}a>=this.tokens.getMaxDeltaLine()+1||this.tokens.acceptInsertText(a,e.column-1,t,n,r,i)}},lx=class{constructor(e,t){this.startLineNumber=e,this.tokens=t}};function ux(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var dx=class e{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let r=t[0].getRange(),i=t[t.length-1].getRange();if(!r||!i)return e;n=e.plusRange(r).plusRange(i)}let r=null;for(let e=0,t=this._pieces.length;e<t;e++){let i=this._pieces[e];if(i.endLineNumber<n.startLineNumber)continue;if(i.startLineNumber>n.endLineNumber){r||={index:e};break}if(i.removeTokens(n),i.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(i.endLineNumber<n.startLineNumber)continue;if(i.startLineNumber>n.endLineNumber){r||={index:e};continue}let[a,o]=i.split(n);if(a.isEmpty()){r||={index:e};continue}o.isEmpty()||(this._pieces.splice(e,1,a,o),e++,t++,r||={index:e})}return r||={index:this._pieces.length},t.length>0&&(this._pieces=Hp(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(t,n){let r=this._pieces;if(r.length===0)return n;let i=r[e._findFirstPieceWithLine(r,t)].getLineTokens(t);if(!i)return n;let a=n.getCount(),o=i.getCount(),s=0,c=[],l=0,u=0,d=(e,t)=>{e!==u&&(u=e,c[l++]=e,c[l++]=t)};for(let e=0;e<o;e++){let t=i.getStartCharacter(e),r=i.getEndCharacter(e),o=i.getMetadata(e),c=((o&1?2048:0)|(o&2?4096:0)|(o&4?8192:0)|(o&8?8372224:0)|(o&16?4286578688:0))>>>0,l=~c>>>0;for(;s<a&&n.getEndOffset(s)<=t;)d(n.getEndOffset(s),n.getMetadata(s)),s++;for(s<a&&n.getStartOffset(s)<t&&d(t,n.getMetadata(s));s<a&&n.getEndOffset(s)<r;)d(n.getEndOffset(s),n.getMetadata(s)&l|o&c),s++;if(s<a)d(r,n.getMetadata(s)&l|o&c),n.getEndOffset(s)===r&&s++;else{let e=Math.min(Math.max(0,s-1),a-1);d(r,n.getMetadata(e)&l|o&c)}}for(;s<a;)d(n.getEndOffset(s),n.getMetadata(s)),s++;return new _m(new Uint32Array(c),n.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let i=n+Math.floor((r-n)/2);if(e[i].endLineNumber<t)n=i+1;else if(e[i].startLineNumber>t)r=i-1;else{for(;i>n&&e[i-1].startLineNumber<=t&&t<=e[i-1].endLineNumber;)i--;return i}}return n}acceptEdit(e,t,n,r,i){for(let a of this._pieces)a.acceptEdit(e,t,n,r,i)}},fx=class e{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==ix)return new _m(ux(r),n,this._languageIdCodec);let i=new Uint32Array(2);return i[0]=n.length,i[1]=rx(this._languageIdCodec.encodeLanguageId(e)),new _m(i,n,this._languageIdCodec)}static _massageTokens(e,t,n){let r=n?ux(n):null;if(t===0){let t=!1;if(r&&r.length>1&&(t=tu.getLanguageId(r[1])!==e),!t)return ix}if(!r||r.length===0){let n=new Uint32Array(2);return n[0]=t,n[1]=rx(e),n.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let e=0;e<t;e++)n[e]=null;this._lineTokens=Hp(this._lineTokens,e,n),this._len+=t}setTokens(t,n,r,i,a){let o=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),r,i);this._ensureLine(n);let s=this._lineTokens[n];return this._lineTokens[n]=o,a?!e._equals(s,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=ux(e),r=ux(t);if(n.length!==r.length)return!1;for(let e=0,t=n.length;e<t;e++)if(n[e]!==r[e])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new I(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(t){let n=t.startLineNumber-1;if(n>=this._len)return;if(t.startLineNumber===t.endLineNumber){if(t.startColumn===t.endColumn)return;this._lineTokens[n]=e._delete(this._lineTokens[n],t.startColumn-1,t.endColumn-1);return}this._lineTokens[n]=e._deleteEnding(this._lineTokens[n],t.startColumn-1);let r=t.endLineNumber-1,i=null;r<this._len&&(i=e._deleteBeginning(this._lineTokens[r],t.endColumn-1)),this._lineTokens[n]=e._append(this._lineTokens[n],i),this._deleteLines(t.startLineNumber,t.endLineNumber-t.startLineNumber)}_acceptInsertText(t,n,r){if(n===0&&r===0)return;let i=t.lineNumber-1;if(!(i>=this._len)){if(n===0){this._lineTokens[i]=e._insert(this._lineTokens[i],t.column-1,r);return}this._lineTokens[i]=e._deleteEnding(this._lineTokens[i],t.column-1),this._lineTokens[i]=e._insert(this._lineTokens[i],t.column-1,r),this._insertLines(t.lineNumber,n)}}static _deleteBeginning(t,n){return t===null||t===ix?t:e._delete(t,0,n)}static _deleteEnding(t,n){if(t===null||t===ix)return t;let r=ux(t),i=r[r.length-2];return e._delete(t,n,i)}static _delete(e,t,n){if(e===null||e===ix||t===n)return e;let r=ux(e),i=r.length>>>1;if(t===0&&r[r.length-2]===n)return ix;let a=_m.findIndexInTokensArray(r,t),o=a>0?r[a-1<<1]:0;if(n<r[a<<1]){let o=n-t;for(let e=a;e<i;e++)r[e<<1]-=o;return e}let s,c;o===t?(s=a<<1,c=o):(r[a<<1]=t,s=a+1<<1,c=t);let l=n-t;for(let e=a+1;e<i;e++){let t=r[e<<1]-l;t>c&&(r[s++]=t,r[s++]=r[(e<<1)+1],c=t)}if(s===r.length)return e;let u=new Uint32Array(s);return u.set(r.subarray(0,s),0),u.buffer}static _append(e,t){if(t===ix)return e;if(e===ix)return t;if(e===null)return e;if(t===null)return null;let n=ux(e),r=ux(t),i=r.length>>>1,a=new Uint32Array(n.length+r.length);a.set(n,0);let o=n.length,s=n[n.length-2];for(let e=0;e<i;e++)a[o++]=r[e<<1]+s,a[o++]=r[(e<<1)+1];return a.buffer}static _insert(e,t,n){if(e===null||e===ix)return e;let r=ux(e),i=r.length>>>1,a=_m.findIndexInTokensArray(r,t);a>0&&r[a-1<<1]===t&&a--;for(let e=a;e<i;e++)r[e<<1]+=n;return e}},px=class e extends j{constructor(e,t,n,r,i,a,o){super(),this._onDidChangeContent=this._register(new N),this._BOM=t,this._mightContainNonBasicASCII=!a,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=i,this._pieceTree=new tx(e,n,o)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:``)}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,r=this.getPositionAt(e),i=this.getPositionAt(n);return new L(r.lineNumber,r.column,i.lineNumber,i.column)}getValueInRange(e,t=0){if(e.isEmpty())return``;let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,r=e.startLineNumber,i=e.endLineNumber;for(let t=r;t<=i;t++){let a=this.getLineContent(t),o=t===r?e.startColumn-1:0,s=t===i?e.endColumn-1:a.length;for(let e=o;e<s;e++)jo(a.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(i-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){let t=vo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=bo(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw Error(`Unknown EOL preference`)}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(t,n,r){let i=this._mightContainRTL,a=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,s=!0,c=[];for(let e=0;e<t.length;e++){let n=t[e];s&&n._isTracked&&(s=!1);let r=n.range;if(n.text){let e=!0;o||=(e=!Uo(n.text),e),!i&&e&&(i=zo(n.text)),!a&&e&&(a=Go(n.text))}let l=``,u=0,d=0,f=0;if(n.text){let e;[u,d,f,e]=nx(n.text);let t=this.getEOL();l=e===0||e===(t===`\r
`?2:1)?n.text:n.text.replace(/\r\n|\r|\n/g,t)}c[e]={sortIndex:e,identifier:n.identifier||null,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r),text:l,eolCount:u,firstLineLength:d,lastLineLength:f,forceMoveMarkers:!!n.forceMoveMarkers,isAutoWhitespaceEdit:n.isAutoWhitespaceEdit||!1}}c.sort(e._sortOpsAscending);let l=!1;for(let e=0,t=c.length-1;e<t;e++){let t=c[e].range.getEndPosition(),n=c[e+1].range.getStartPosition();if(n.isBeforeOrEqual(t)){if(n.isBefore(t))throw Error(`Overlapping ranges are not allowed!`);l=!0}}s&&(c=this._reduceOperations(c));let u=r||n?e._getInverseEditRanges(c):[],d=[];if(n)for(let e=0;e<c.length;e++){let t=c[e],n=u[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=n.startLineNumber;e<=n.endLineNumber;e++){let r=``;e===n.startLineNumber&&(r=this.getLineContent(t.range.startLineNumber),vo(r)!==-1)||d.push({lineNumber:e,oldContent:r})}}let f=null;if(r){let e=0;f=[];for(let t=0;t<c.length;t++){let n=c[t],r=u[t],i=this.getValueInRange(n.range),a=n.rangeOffset+e;e+=n.text.length-i.length,f[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:r,text:i,textChange:new ky(n.rangeOffset,i,a,n.text)}}l||f.sort((e,t)=>e.sortIndex-t.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=a,this._mightContainNonBasicASCII=o;let p=this._doApplyEdits(c),m=null;if(n&&d.length>0){d.sort((e,t)=>t.lineNumber-e.lineNumber),m=[];for(let e=0,t=d.length;e<t;e++){let t=d[e].lineNumber;if(e>0&&d[e-1].lineNumber===t)continue;let n=d[e].oldContent,r=this.getLineContent(t);r.length===0||r===n||vo(r)!==-1||m.push(t)}}return this._onDidChangeContent.fire(),new Jc(f,p,m)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,r=e[e.length-1].range,i=new L(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn),a=n.startLineNumber,o=n.startColumn,s=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=r.range;t||=r.forceMoveMarkers,s.push(this.getValueInRange(new L(a,o,i.startLineNumber,i.startColumn))),r.text.length>0&&s.push(r.text),a=i.endLineNumber,o=i.endColumn}let c=s.join(``),[l,u,d]=nx(c);return{sortIndex:0,identifier:e[0].identifier,range:i,rangeOffset:this.getOffsetAt(i.startLineNumber,i.startColumn),rangeLength:this.getValueLengthInRange(i,0),text:c,eolCount:l,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(t){t.sort(e._sortOpsDescending);let n=[];for(let e=0;e<t.length;e++){let r=t[e],i=r.range.startLineNumber,a=r.range.startColumn,o=r.range.endLineNumber,s=r.range.endColumn;if(i===o&&a===s&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);let c=new L(i,a,o,s);n.push({range:c,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return n}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){let t=[],n=0,r=0,i=null;for(let a=0,o=e.length;a<o;a++){let o=e[a],s,c;i?i.range.endLineNumber===o.range.startLineNumber?(s=n,c=r+(o.range.startColumn-i.range.endColumn)):(s=n+(o.range.startLineNumber-i.range.endLineNumber),c=o.range.startColumn):(s=o.range.startLineNumber,c=o.range.startColumn);let l;if(o.text.length>0){let e=o.eolCount+1;l=e===1?new L(s,c,s,c+o.firstLineLength):new L(s,c,s+e-1,o.lastLineLength+1)}else l=new L(s,c,s,c);n=l.endLineNumber,r=l.endColumn,t.push(l),i=o}return t}static _sortOpsAscending(e,t){let n=L.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=L.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}},mx=class{constructor(e,t,n,r,i,a,o,s,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=i,this._containsRTL=a,this._containsUnusualLineTerminators=o,this._isBasicASCII=s,this._normalizeEOL=c}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let e=0,r=n.length;e<r;e++){let r=n[e].buffer.replace(/\r\n|\r|\n/g,t);n[e]=new Qb(r,Yb(r))}let r=new px(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}},hx=class{constructor(){this.chunks=[],this.BOM=``,this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Yo(e)&&(this.BOM=``,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=Xb(this._tmpLineStarts,e);this.chunks.push(new Qb(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&=t.isBasicASCII,!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=zo(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=Go(e))}finish(e=!0){return this._finish(),new mx(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1(``,!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar),e.lineStarts=Yb(e.buffer),this._previousChar===13&&this.cr++}}},gx=class{constructor(){this.changeType=1}},_x=class e{constructor(e,t,n,r,i){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=i}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n=``,r=0;for(let i of t)n+=e.substring(r,i.column-1),r=i.column-1,n+=i.options.content;return n+=e.substring(r),n}static fromDecorations(t){let n=[];for(let r of t)r.options.before&&r.options.before.content.length>0&&n.push(new e(r.ownerId,r.range.startLineNumber,r.range.startColumn,r.options.before,0)),r.options.after&&r.options.after.content.length>0&&n.push(new e(r.ownerId,r.range.endLineNumber,r.range.endColumn,r.options.after,1));return n.sort((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber),n}},vx=class{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}},yx=class{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}},bx=class{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},xx=class{constructor(){this.changeType=5}},Sx=class e{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(t,n){let r=[].concat(t.changes,n.changes),i=n.versionId;return new e(r,i,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)}},Cx=class{constructor(e){this.changes=e}},wx=class e{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(t){return new e(Sx.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent))}static _mergeChangeEvents(e,t){return{changes:[].concat(e.changes,t.changes),eol:t.eol,versionId:t.versionId,isUndoing:e.isUndoing||t.isUndoing,isRedoing:e.isRedoing||t.isRedoing,isFlush:e.isFlush||t.isFlush}}},Tx=class{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[],r=[];for(let e=0;e<t;e++)n[e]=null,r[e]=!1;this._beginState=Hp(this._beginState,e,n),this._valid=Hp(this._valid,e,r),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;let r=this.getBeginState(t+1);if(r===null||!n.equals(r)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let i=t+1;for(;i<e&&this._isValid(i);)i++;this._invalidLineStartIndex=i}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){let n=e.endLineNumber-e.startLineNumber,r=t,i=Math.min(n,r);for(let t=i;t>=0;t--)this._invalidateLine(e.startLineNumber+t-1);this._acceptDeleteRange(e),this._acceptInsertText(new I(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}},Ex=class extends j{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new Tx,this._tokenizationSupport=null,this._register(Iu.onDidChange(e=>{let t=this._textModel.getLanguageId();e.changedLanguages.indexOf(t)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(e=>{if(e.isFlush){this._resetTokenizationState();return}for(let t=0,n=e.changes.length;t<n;t++){let n=e.changes[t],[r]=nx(n.text);this._tokenizationStateStore.applyEdits(n.range,r)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){let[e,t]=Dx(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&y(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){let e=this._textModel.getLineCount(),t=new ax,n=Pt.create(!1),r=-1;for(;this._hasLinesToTokenize()&&!(n.elapsed()>1||(r=this._tokenizeOneInvalidLine(t),r>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){let n=new ax;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){let t=new ax;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;let n=this._textModel.getLanguageId(),r=this._textModel.getLineCount(),i=t-1;for(let t=this._tokenizationStateStore.invalidLineStartIndex;t<=i;t++){let i=this._textModel.getLineContent(t+1),a=this._tokenizationStateStore.getBeginState(t),o=Ox(this._languageIdCodec,n,this._tokenizationSupport,i,!0,a);e.add(t+1,o.tokens),this._tokenizationStateStore.setEndState(r,t,o.endState),t=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let r=this._textModel.getLineFirstNonWhitespaceColumn(t),i=[],a=null;for(let e=t-1;r>1&&e>=1;e--){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);if(t!==0&&t<r){if(a=this._tokenizationStateStore.getBeginState(e-1),a)break;i.push(this._textModel.getLineContent(e)),r=t}}a||=this._tokenizationSupport.getInitialState();let o=this._textModel.getLanguageId(),s=a;for(let e=i.length-1;e>=0;e--)s=Ox(this._languageIdCodec,o,this._tokenizationSupport,i[e],!1,s).endState;for(let r=t;r<=n;r++){let t=this._textModel.getLineContent(r),n=Ox(this._languageIdCodec,o,this._tokenizationSupport,t,!0,s);e.add(r,n.tokens),this._tokenizationStateStore.setFakeTokens(r-1),s=n.endState}}};function Dx(e){let t=e.getLanguageId(),n=e.isTooLargeForTokenization()?null:Iu.get(t),r=null;if(n)try{r=n.getInitialState()}catch(e){ct(e),n=null}return[n,r]}function Ox(e,t,n,r,i,a){let o=null;if(n)try{o=n.tokenize2(r,i,a.clone(),0)}catch(e){ct(e)}return o||=Bu(e.encodeLanguageId(t),r,a,0),_m.convertToEndOffset(o.tokens,r.length),o}function kx(e,t){let n=10**t;return Math.round(e*n)/n}var q=class{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=kx(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Ax=class e{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=kx(Math.max(Math.min(1,t),0),3),this.l=kx(Math.max(Math.min(1,n),0),3),this.a=kx(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(t){let n=t.r/255,r=t.g/255,i=t.b/255,a=t.a,o=Math.max(n,r,i),s=Math.min(n,r,i),c=0,l=0,u=(s+o)/2,d=o-s;if(d>0){switch(l=Math.min(u<=.5?d/(2*u):d/(2-2*u),1),o){case n:c=(r-i)/d+(r<i?6:0);break;case r:c=(i-n)/d+2;break;case i:c=(n-r)/d+4;break}c*=60,c=Math.round(c)}return new e(c,l,u,a)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(t){let n=t.h/360,{s:r,l:i,a}=t,o,s,c;if(r===0)o=s=c=i;else{let t=i<.5?i*(1+r):i+r-i*r,a=2*i-t;o=e._hue2rgb(a,t,n+1/3),s=e._hue2rgb(a,t,n),c=e._hue2rgb(a,t,n-1/3)}return new q(Math.round(o*255),Math.round(s*255),Math.round(c*255),a)}},jx=class e{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=kx(Math.max(Math.min(1,t),0),3),this.v=kx(Math.max(Math.min(1,n),0),3),this.a=kx(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(t){let n=t.r/255,r=t.g/255,i=t.b/255,a=Math.max(n,r,i),o=a-Math.min(n,r,i),s=a===0?0:o/a,c;return c=o===0?0:a===n?((r-i)/o%6+6)%6:a===r?(i-n)/o+2:(n-r)/o+4,new e(Math.round(c*60),s,a,t.a)}static toRGBA(e){let{h:t,s:n,v:r,a:i}=e,a=r*n,o=a*(1-Math.abs(t/60%2-1)),s=r-a,[c,l,u]=[0,0,0];return t<60?(c=a,l=o):t<120?(c=o,l=a):t<180?(l=a,u=o):t<240?(l=o,u=a):t<300?(c=o,u=a):t<=360&&(c=a,u=o),c=Math.round((c+s)*255),l=Math.round((l+s)*255),u=Math.round((u+s)*255),new q(c,l,u,i)}},J=class e{constructor(e){if(e)if(e instanceof q)this.rgba=e;else if(e instanceof Ax)this._hsla=e,this.rgba=Ax.toRGBA(e);else if(e instanceof jx)this._hsva=e,this.rgba=jx.toRGBA(e);else throw Error(`Invalid color ctor argument`);else throw Error(`Color needs a value`)}static fromHex(t){return e.Format.CSS.parseHex(t)||e.red}get hsla(){return this._hsla?this._hsla:Ax.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:jx.fromRGBA(this.rgba)}equals(e){return!!e&&q.equals(this.rgba,e.rgba)&&Ax.equals(this.hsla,e.hsla)&&jx.equals(this.hsva,e.hsva)}getRelativeLuminance(){let t=e._relativeLuminanceForComponent(this.rgba.r),n=e._relativeLuminanceForComponent(this.rgba.g),r=e._relativeLuminanceForComponent(this.rgba.b);return kx(.2126*t+.7152*n+.0722*r,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(t){return new e(new Ax(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new e(new Ax(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){let{r:n,g:r,b:i,a}=this.rgba;return new e(new q(n,r,i,a*t))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new e(new q(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||=e.Format.CSS.format(this),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n||=.5;let r=e.getRelativeLuminance(),i=t.getRelativeLuminance();return n=n*(i-r)/i,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n||=.5;let r=e.getRelativeLuminance(),i=t.getRelativeLuminance();return n=n*(r-i)/r,e.darken(n)}};J.white=new J(new q(255,255,255,1)),J.black=new J(new q(0,0,0,1)),J.red=new J(new q(255,0,0,1)),J.blue=new J(new q(0,0,255,1)),J.cyan=new J(new q(0,255,255,1)),J.lightgrey=new J(new q(211,211,211,1)),J.transparent=new J(new q(0,0,0,0)),(function(e){(function(t){(function(t){function n(t){return t.rgba.a===1?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)}t.formatRGB=n;function r(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`}t.formatRGBA=r;function i(t){return t.hsla.a===1?`hsl(${t.hsla.h}, ${(t.hsla.s*100).toFixed(2)}%, ${(t.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(t)}t.formatHSL=i;function a(e){return`hsla(${e.hsla.h}, ${(e.hsla.s*100).toFixed(2)}%, ${(e.hsla.l*100).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`}t.formatHSLA=a;function o(e){let t=e.toString(16);return t.length===2?t:`0`+t}function s(e){return`#${o(e.rgba.r)}${o(e.rgba.g)}${o(e.rgba.b)}`}t.formatHex=s;function c(t,n=!1){return n&&t.rgba.a===1?e.Format.CSS.formatHex(t):`#${o(t.rgba.r)}${o(t.rgba.g)}${o(t.rgba.b)}${o(Math.round(t.rgba.a*255))}`}t.formatHexA=c;function l(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)}t.format=l;function u(t){let n=t.length;if(n===0||t.charCodeAt(0)!==35)return null;if(n===7)return new e(new q(16*d(t.charCodeAt(1))+d(t.charCodeAt(2)),16*d(t.charCodeAt(3))+d(t.charCodeAt(4)),16*d(t.charCodeAt(5))+d(t.charCodeAt(6)),1));if(n===9)return new e(new q(16*d(t.charCodeAt(1))+d(t.charCodeAt(2)),16*d(t.charCodeAt(3))+d(t.charCodeAt(4)),16*d(t.charCodeAt(5))+d(t.charCodeAt(6)),(16*d(t.charCodeAt(7))+d(t.charCodeAt(8)))/255));if(n===4){let n=d(t.charCodeAt(1)),r=d(t.charCodeAt(2)),i=d(t.charCodeAt(3));return new e(new q(16*n+n,16*r+r,16*i+i))}if(n===5){let n=d(t.charCodeAt(1)),r=d(t.charCodeAt(2)),i=d(t.charCodeAt(3)),a=d(t.charCodeAt(4));return new e(new q(16*n+n,16*r+r,16*i+i,(16*a+a)/255))}return null}t.parseHex=u;function d(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t.CSS||={})})(e.Format||={})})(J||={});const Mx=Ur(`undoRedoService`);var Nx=class{constructor(e,t){this.resource=e,this.elements=t}},Px=class e{constructor(){this.id=e._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Px._ID=0,Px.None=new Px;var Fx=class e{constructor(){this.id=e._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Fx._ID=0,Fx.None=new Fx;var Ix=class{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}},Lx=class{constructor(e,t,n,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r}},Rx=class extends Lx{constructor(e,t,n,r,i){super(e,t,n,r),this.minVisibleColumnIndentation=i}},zx=class{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}};function Bx(e,t,n,r){return e===n?Ux(0,r-t):Ux(n-e,r)}function Vx(e){return e===0}var Hx=2**26;function Ux(e,t){return e*Hx+t}function Wx(e){let t=e,n=Math.floor(t/Hx);return new zx(n,t-n*Hx)}function Gx(e){return Math.floor(e/Hx)}function Kx(e){return e}function qx(e,t){return t<Hx?e+t:e-e%Hx+t}function Jx(e,t){let n=e,r=t;if(r-n<=0)return 0;let i=Math.floor(n/Hx),a=Math.floor(r/Hx),o=r-a*Hx;return i===a?Ux(0,o-(n-i*Hx)):Ux(a-i,o)}function Yx(e,t){return e<t}function Xx(e,t){return e<=t}function Zx(e,t){return e>=t}function Qx(e){return Ux(e.lineNumber-1,e.column-1)}function $x(e,t){let n=e,r=Math.floor(n/Hx),i=n-r*Hx,a=t,o=Math.floor(a/Hx),s=a-o*Hx;return new L(r+1,i+1,o+1,s+1)}function eS(e){let t=_o(e);return Ux(t.length-1,t[t.length-1].length)}function tS(e){return e}var nS=class{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}},rS=class{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(e=>iS.from(e))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx];return Jx(e,t?this.translateOldToCur(t.offsetObj):this.documentLength)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Ux(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Ux(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=Wx(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Ux(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Ux(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Xx(n,e)){this.nextEditIdx++;let e=Wx(n),r=Wx(this.translateOldToCur(t.endOffsetBeforeObj)),i=e.lineCount-r.lineCount;this.deltaOldToNewLineCount+=i,this.deltaOldToNewColumnCount=(this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0)+(e.columnCount-r.columnCount),this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},iS=class e{constructor(e,t,n){this.endOffsetBeforeObj=Wx(t),this.endOffsetAfterObj=Wx(qx(e,n)),this.offsetObj=Wx(e)}static from(t){return new e(t.startOffset,t.endOffset,t.newLength)}},aS=class e{static visibleColumnFromColumn(t,n,r){let i=t.length,a=n-1<i?n-1:i,o=0,s=0;for(;s<a;){let n=Po(t,a,s);if(s+=n>=65536?2:1,n===9)o=e.nextRenderTabStop(o,r);else{let e=Qo(n);for(;s<a;){let n=Po(t,a,s),r=Qo(n);if($o(e,r))break;s+=n>=65536?2:1,e=r}qo(n)||Jo(n)?o+=2:o+=1}}return o}static visibleColumnsByColumns(t,n){let r=t.length,i=[];i.push(-1);let a=0,o=0;for(;o<r;){let s=Po(t,r,o);if(o+=s>=65536?2:1,i.push(a),s>=65536&&i.push(a),s===9)a=e.nextRenderTabStop(a,n);else{let e=Qo(s);for(;o<r;){let n=Po(t,r,o),c=Qo(n);if($o(e,c))break;o+=n>=65536?2:1,i.push(a),s>=65536&&i.push(a),e=c}qo(s)||Jo(s)?a+=2:a+=1}}return i.push(a),i}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(t,n,r){if(n<=0)return 1;let i=t.length,a=0,o=1,s=0;for(;s<i;){let c=Po(t,i,s);s+=c>=65536?2:1;let l;if(c===9)l=e.nextRenderTabStop(a,r);else{let e=Qo(c);for(;s<i;){let n=Po(t,i,s),r=Qo(n);if($o(e,r))break;s+=n>=65536?2:1,e=r}l=qo(c)||Jo(c)?a+2:a+1}let u=s+1;if(l>=n){let e=n-a;return l-n<e?u:o}a=l,o=u}return i+1}static columnFromVisibleColumn2(e,t,n,r){let i=this.columnFromVisibleColumn(t.getLineContent(n),r,e.tabSize),a=t.getLineMinColumn(n);if(i<a)return a;let o=t.getLineMaxColumn(n);return i>o?o:i}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}},oS=[],sS=class e{constructor(e,t){this.items=e,this.additionalItems=t}static create(t,n){if(t<=128&&n.length===0){let r=e.cache[t];return r||(r=new e(t,n),e.cache[t]=r),r}return new e(t,n)}static getEmpty(){return this.empty}add(t,n){let r=n.getKey(t),i=r>>5;if(i===0){let t=1<<r|this.items;return t===this.items?this:e.create(t,this.additionalItems)}i--;let a=this.additionalItems.slice(0);for(;a.length<i;)a.push(0);return a[i]|=1<<(r&31),e.create(this.items,a)}merge(t){let n=this.items|t.items;if(this.additionalItems===oS&&t.additionalItems===oS)return n===this.items?this:n===t.items?t:e.create(n,oS);let r=[];for(let e=0;e<Math.max(this.additionalItems.length,t.additionalItems.length);e++){let n=this.additionalItems[e]||0,i=t.additionalItems[e]||0;r.push(n|i)}return e.create(n,r)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}};sS.cache=Array(129),sS.empty=sS.create(0,oS);const cS={getKey(e){return e}};var lS=class{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}},uS=class{constructor(e){this._length=e}get length(){return this._length}},dS=class e extends uS{constructor(e,t,n,r,i){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=i}static create(t,n,r){let i=t.length;return n&&(i=qx(i,n.length)),r&&(i=qx(i,r.length)),new e(i,t,n,r,n?n.missingOpeningBracketIds:sS.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw Error(`Invalid child index`)}get children(){let e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new e(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(qx(e,this.openingBracket.length),t):2**53-1}},fS=class extends uS{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,r=!1){let i=e.length,a=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw Error(`Invalid list heights`);if(i=qx(i,t.length),a=a.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw Error(`Invalid list heights`);i=qx(i,n.length),a=a.merge(n.missingOpeningBracketIds)}return r?new mS(i,e.listHeight+1,e,t,n,a):new pS(i,e.listHeight+1,e,t,n,a)}static getEmpty(){return new gS(0,0,[],sS.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(e===0)return;let t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let e=this.getChild(0),t=e.kind===4?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){let e=this.getChild(r);t=qx(t,e.length),n=n.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=2**53-1,r=e;for(let e=0;e<this.childrenLength;e++){let i=this.getChild(e);i&&(n=Math.min(n,i.computeMinIndentation(r,t)),r=qx(r,i.length))}return this.cachedMinIndentation=n,n}},pS=class e extends fS{constructor(e,t,n,r,i,a){super(e,t,a),this._item1=n,this._item2=r,this._item3=i}get childrenLength(){return this._item3===null?2:3}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw Error(`Invalid child index`)}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw Error(`Invalid child index`)}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new e(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw Error(`Cannot append to a full (2,3) tree node`);this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw Error(`Cannot remove from a non-full (2,3) tree node`);this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw Error(`Cannot prepend to a full (2,3) tree node`);this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw Error(`Cannot remove from a non-full (2,3) tree node`);this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}},mS=class extends pS{toMutable(){return new pS(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw Error(`this instance is immutable`)}},hS=class e extends fS{constructor(e,t,n,r){super(e,t,r),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){let t=Array(this._children.length);for(let e=0;e<this._children.length;e++)t[e]=this._children[e].deepClone();return new e(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}},gS=class extends hS{toMutable(){return new hS(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw Error(`this instance is immutable`)}},_S=[],vS=class extends uS{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return _S}deepClone(){return this}},yS=class extends vS{get kind(){return 0}get missingOpeningBracketIds(){return sS.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=Wx(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,i=Gx(qx(e,this.length))+1,a=2**53-1;for(let e=r;e<=i;e++){let n=t.getLineFirstNonWhitespaceColumn(e),r=t.getLineContent(e);if(n===0)continue;let i=aS.visibleColumnFromColumn(r,n,t.getOptions().tabSize);a=Math.min(a,i)}return a}},bS=class e extends vS{constructor(e){super(e)}static create(t){let n=tS(t),r=e.cacheByLength.get(n);if(r)return r;let i=new e(t);return e.cacheByLength.set(n,i),i}get kind(){return 1}get missingOpeningBracketIds(){return sS.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return 2**53-1}};bS.cacheByLength=new Map;var xS=class extends vS{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return 2**53-1}},SS=class{constructor(e,t,n,r,i){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=i}},CS=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new wS(this.textModel,this.bracketTokens),this._offset=0,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Ux(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=qx(this._offset,e);let t=Wx(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=qx(this._offset,e.length)),e}peek(){return this.didPeek||=(this.peeked=this.reader.read(),!0),this.peeked}},wS=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=Kx(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let r=this.lineTokens,i=r.getCount(),a=null;if(this.lineTokenOffset<i){let o=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<i&&o===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let s=tu.getTokenType(o)===0,c=r.getEndOffset(this.lineTokenOffset);if(s&&c!==this.lineCharOffset){let e=r.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,c),n=this.bracketTokens.getSingleLanguageBracketTokens(e),i=n.regExpGlobal;if(i){i.lastIndex=0;let e=i.exec(t);e&&(a=n.getToken(e[0]),a&&(this.lineCharOffset+=e.index))}}if(n+=c-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=Kx(a.length),a;else this.lineTokenOffset++,this.lineCharOffset=c}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let r=Bx(e,t,this.lineIdx,this.lineCharOffset);return new SS(r,0,-1,sS.getEmpty(),new yS(r))}},TS=class{constructor(e,t){this.text=e,this._offset=0,this.idx=0;let n=t.getRegExpStr()?RegExp(t.getRegExpStr()+`|
`,`g`):null,r=[],i,a=0,o=0,s=0,c=0,l=[];for(let e=0;e<60;e++)l.push(new SS(Ux(0,e),0,-1,sS.getEmpty(),new yS(Ux(0,e))));let u=[];for(let e=0;e<60;e++)u.push(new SS(Ux(1,e),0,-1,sS.getEmpty(),new yS(Ux(1,e))));if(n)for(n.lastIndex=0;(i=n.exec(e))!==null;){let e=i.index,n=i[0];if(n===`
`)a++,o=e+1;else{if(s!==e){let t;if(c===a){let n=e-s;if(n<l.length)t=l[n];else{let e=Ux(0,n);t=new SS(e,0,-1,sS.getEmpty(),new yS(e))}}else{let n=a-c,r=e-o;if(n===1&&r<u.length)t=u[r];else{let e=Ux(n,r);t=new SS(e,0,-1,sS.getEmpty(),new yS(e))}}r.push(t)}r.push(t.getToken(n)),s=e+n.length,c=a}}let d=e.length;if(s!==d){let e=c===a?Ux(0,d-s):Ux(a-c,d-o);r.push(new SS(e,0,-1,sS.getEmpty(),new yS(e)))}this.length=Ux(a,d-o),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new gt}},ES=class e{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(t,n){function r(e,t){return n.getKey(`${e}:::${t}`)}let i=t.characterPair.getColorizedBrackets(),a=new Map,o=new Set;for(let[e,n]of i){o.add(e);let i=a.get(n),s=r(t.languageId,e);i||(i={openingBrackets:sS.getEmpty(),first:s},a.set(n,i)),i.openingBrackets=i.openingBrackets.add(s,cS)}let s=new Map;for(let[e,t]of a){let n=Ux(0,e.length);s.set(e,new SS(n,2,t.first,t.openingBrackets,bS.create(n)))}for(let e of o){let n=Ux(0,e.length),i=r(t.languageId,e);s.set(e,new SS(n,1,i,sS.getEmpty().add(i,cS),bS.create(n)))}return new e(s)}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(e=>DS(e)).join(`|`)}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,`g`):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}};function DS(e){let t=so(e);return/^[\w ]+$/.test(e)?`\\b${t}\\b`:t}var OS=class{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){let t=this.languageIdToBracketTokens.get(e);if(!t)return!1;let n=ES.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=ES.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}};function kS(e){if(e.length===0)return null;if(e.length===1)return e[0];let t=0;function n(){if(t>=e.length)return null;let n=t,r=e[n].listHeight;for(t++;t<e.length&&e[t].listHeight===r;)t++;return t-n>=2?AS(n===0&&t===e.length?e:e.slice(n,t),!1):e[n]}let r=n(),i=n();if(!i)return r;for(let e=n();e;e=n())jS(r,i)<=jS(i,e)?(r=MS(r,i),i=e):i=MS(i,e);return MS(r,i)}function AS(e,t=!1){if(e.length===0)return null;if(e.length===1)return e[0];let n=e.length;for(;n>3;){let r=n>>1;for(let i=0;i<r;i++){let r=i<<1;e[i]=fS.create23(e[r],e[r+1],r+3===n?e[r+2]:null,t)}n=r}return fS.create23(e[0],e[1],n>=3?e[2]:null,t)}function jS(e,t){return Math.abs(e.listHeight-t.listHeight)}function MS(e,t){return e.listHeight===t.listHeight?fS.create23(e,t,null,!1):e.listHeight>t.listHeight?NS(e,t):PS(t,e)}function NS(e,t){e=e.toMutable();let n=e,r=[],i;for(;;){if(t.listHeight===n.listHeight){i=t;break}if(n.kind!==4)throw Error(`unexpected`);r.push(n),n=n.makeLastElementMutable()}for(let e=r.length-1;e>=0;e--){let t=r[e];i?t.childrenLength>=3?i=fS.create23(t.unappendChild(),i,null,!1):(t.appendChildOfSameHeight(i),i=void 0):t.handleChildrenChanged()}return i?fS.create23(e,i,null,!1):e}function PS(e,t){e=e.toMutable();let n=e,r=[];for(;t.listHeight!==n.listHeight;){if(n.kind!==4)throw Error(`unexpected`);r.push(n),n=n.makeFirstElementMutable()}let i=t;for(let e=r.length-1;e>=0;e--){let t=r[e];i?t.childrenLength>=3?i=fS.create23(i,t.unprependChild(),null,!1):(t.prependChildOfSameHeight(i),i=void 0):t.handleChildrenChanged()}return i?fS.create23(i,e,null,!1):e}var FS=class{constructor(e){this.lastOffset=0,this.nextNodes=[e],this.offsets=[0],this.idxs=[]}readLongestNodeAt(e,t){if(Yx(e,this.lastOffset))throw Error(`Invalid offset`);for(this.lastOffset=e;;){let n=LS(this.nextNodes);if(!n)return;let r=LS(this.offsets);if(Yx(e,r))return;if(Yx(r,e))if(qx(r,n.length)<=e)this.nextNodeAfterCurrent();else{let e=IS(n);e===-1?this.nextNodeAfterCurrent():(this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e))}else if(t(n))return this.nextNodeAfterCurrent(),n;else{let e=IS(n);if(e===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e)}}}nextNodeAfterCurrent(){for(;;){let e=LS(this.offsets),t=LS(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=LS(this.nextNodes),r=IS(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(qx(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}};function IS(e,t=-1){for(;;){if(t++,t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function LS(e){return e.length>0?e[e.length-1]:void 0}function RS(e,t,n,r){return new zS(e,t,n,r).parseDocument()}var zS=class{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw Error(`Not supported`);this.oldNodeReader=n?new FS(n):void 0,this.positionMapper=new rS(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(sS.getEmpty());return e||=fS.getEmpty(),e}parseList(e){let t=[];for(;;){let n=this.tokenizer.peek();if(!n||n.kind===2&&n.bracketIds.intersects(e))break;let r=this.parseChild(e);r.kind===4&&r.childrenLength===0||t.push(r)}return this.oldNodeReader?kS(t):AS(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!Vx(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>Yx(n.length,t)?n.canBeReused(e):!1);if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}this._itemsConstructed++;let t=this.tokenizer.read();switch(t.kind){case 2:return new xS(t.bracketIds,t.length);case 0:return t.astNode;case 1:let n=e.merge(t.bracketIds),r=this.parseList(n),i=this.tokenizer.peek();return i&&i.kind===2&&(i.bracketId===t.bracketId||i.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),dS.create(t.astNode,r,i.astNode)):dS.create(t.astNode,r,null);default:throw Error(`unexpected`)}}},BS=class extends j{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new kt),this.onDidChangeEmitter=new N,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(e=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(e=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(e=>{(!e.languageId||this.cache.value?.object.didLanguageChange(e.languageId))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e4*100}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){let e=new A;this.cache.value=VS(e.add(new HS(this.textModel,e=>this.languageConfigurationService.getLanguageConfiguration(e))),e),e.add(this.cache.value.object.onDidChange(e=>this.onDidChangeEmitter.fire(e))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)==null||t.object.handleContentChanged(e)}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateCache(),this.cache.value?.object.getBracketPairsInRange(e,!1)||[]}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateCache(),this.cache.value?.object.getBracketPairsInRange(e,!0)||[]}getBracketsInRange(e){return this.bracketsRequested=!0,this.updateCache(),this.cache.value?.object.getBracketsInRange(e)||[]}};function VS(e,t){return{object:e,dispose:()=>t?.dispose()}}var HS=class extends j{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new N,this.denseKeyProvider=new lS,this.brackets=new OS(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){let e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:e})=>{let t=e.map(e=>new nS(Ux(e.fromLineNumber-1,0),Ux(e.toLineNumber,0),Ux(e.toLineNumber-e.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){let e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId());this.initialAstWithoutTokens=RS(new TS(this.textModel.getValue(),e),[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){let t=e.changes.map(e=>{let t=L.lift(e.range);return new nS(Qx(t.getStartPosition()),Qx(t.getEndPosition()),eS(e.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1)}parseDocumentFromTextBuffer(e,t,n){let r=t;return RS(new CS(this.textModel,this.brackets),e,r,n)}getBracketsInRange(e){let t=Ux(e.startLineNumber-1,e.startColumn-1),n=Ux(e.endLineNumber-1,e.endColumn-1),r=[],i=this.initialAstWithoutTokens||this.astWithTokens;return US(i,0,i.length,t,n,r),r}getBracketPairsInRange(e,t){let n=[],r=Qx(e.getStartPosition()),i=Qx(e.getEndPosition()),a=this.initialAstWithoutTokens||this.astWithTokens,o=new WS(n,t,this.textModel);return GS(a,0,a.length,r,i,o),n}};function US(e,t,n,r,i,a,o=0){if(e.kind===1){let e=$x(t,n);a.push(new Ix(e,o-1,!1))}else if(e.kind===3){let e=$x(t,n);a.push(new Ix(e,o-1,!0))}else if(e.kind===4)for(let s of e.children)n=qx(t,s.length),Xx(t,i)&&Zx(n,r)&&US(s,t,n,r,i,a,o),t=n;else if(e.kind===2){o++;{let s=e.openingBracket;n=qx(t,s.length),Xx(t,i)&&Zx(n,r)&&US(s,t,n,r,i,a,o),t=n}if(e.child){let s=e.child;n=qx(t,s.length),Xx(t,i)&&Zx(n,r)&&US(s,t,n,r,i,a,o),t=n}if(e.closingBracket){let s=e.closingBracket;n=qx(t,s.length),Xx(t,i)&&Zx(n,r)&&US(s,t,n,r,i,a,o),t=n}}}var WS=class{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}};function GS(e,t,n,r,i,a,o=0){if(e.kind===2){let r=qx(t,e.openingBracket.length),i=-1;a.includeMinIndentation&&(i=e.computeMinIndentation(t,a.textModel)),a.result.push(new Rx($x(t,n),$x(t,r),e.closingBracket?$x(qx(r,e.child?.length||0),n):void 0,o,i)),o++}let s=t;for(let t of e.children){let e=s;s=qx(s,t.length),Xx(e,i)&&Xx(r,s)&&GS(t,e,s,r,i,a,o)}}const KS={ColorContribution:`base.contributions.colors`};var qS=new class{constructor(){this._onDidChangeSchema=new N,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:`object`,properties:{}},this.colorReferenceSchema={type:`string`,enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,i){let a={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:i};this.colorsById[e]=a;let o={type:`string`,description:n,format:`color-hex`,defaultSnippets:[{body:"${1:#ff0000}"}]};return i&&(o.deprecationMessage=i),this.colorSchema.properties[e]=o,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n&&n.defaults){let e=n.defaults[t.type];return VT(e,t)}}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort((e,t)=>{let n=e.indexOf(`.`)===-1?0:1,r=t.indexOf(`.`)===-1?0:1;return n===r?e.localeCompare(t):n-r}).map(e=>`- \`${e}\`: ${this.colorsById[e].description}`).join(`
`)}};Jd.add(KS.ColorContribution,qS);function Y(e,t,n,r,i){return qS.registerColor(e,t,n,r,i)}const JS=Y(`foreground`,{dark:`#CCCCCC`,light:`#616161`,hc:`#FFFFFF`},t(`foreground`,`Overall foreground color. This color is only used if not overridden by a component.`)),YS=Y(`errorForeground`,{dark:`#F48771`,light:`#A1260D`,hc:`#F48771`},t(`errorForeground`,`Overall foreground color for error messages. This color is only used if not overridden by a component.`)),XS=Y(`icon.foreground`,{dark:`#C5C5C5`,light:`#424242`,hc:`#FFFFFF`},t(`iconForeground`,`The default color for icons in the workbench.`)),ZS=Y(`focusBorder`,{dark:`#007FD4`,light:`#0090F1`,hc:`#F38518`},t(`focusBorder`,`Overall border color for focused elements. This color is only used if not overridden by a component.`)),QS=Y(`contrastBorder`,{light:null,dark:null,hc:`#6FC3DF`},t(`contrastBorder`,`An extra border around elements to separate them from others for greater contrast.`)),$S=Y(`contrastActiveBorder`,{light:null,dark:null,hc:ZS},t(`activeContrastBorder`,`An extra border around active elements to separate them from others for greater contrast.`)),eC=Y(`textLink.foreground`,{light:`#006AB1`,dark:`#3794FF`,hc:`#3794FF`},t(`textLinkForeground`,`Foreground color for links in text.`)),tC=Y(`textLink.activeForeground`,{light:`#006AB1`,dark:`#3794FF`,hc:`#3794FF`},t(`textLinkActiveForeground`,`Foreground color for links in text when clicked on and on mouse hover.`)),nC=Y(`textCodeBlock.background`,{light:`#dcdcdc66`,dark:`#0a0a0a66`,hc:J.black},t(`textCodeBlockBackground`,`Background color for code blocks in text.`)),rC=Y(`widget.shadow`,{dark:LT(J.black,.36),light:LT(J.black,.16),hc:null},t(`widgetShadow`,`Shadow color of widgets such as find/replace inside the editor.`)),iC=Y(`input.background`,{dark:`#3C3C3C`,light:J.white,hc:J.black},t(`inputBoxBackground`,`Input box background.`)),aC=Y(`input.foreground`,{dark:JS,light:JS,hc:JS},t(`inputBoxForeground`,`Input box foreground.`)),oC=Y(`input.border`,{dark:null,light:null,hc:QS},t(`inputBoxBorder`,`Input box border.`)),sC=Y(`inputOption.activeBorder`,{dark:`#007ACC00`,light:`#007ACC00`,hc:QS},t(`inputBoxActiveOptionBorder`,`Border color of activated options in input fields.`)),cC=Y(`inputOption.activeBackground`,{dark:LT(ZS,.4),light:LT(ZS,.2),hc:J.transparent},t(`inputOption.activeBackground`,`Background color of activated options in input fields.`)),lC=Y(`inputOption.activeForeground`,{dark:J.white,light:J.black,hc:null},t(`inputOption.activeForeground`,`Foreground color of activated options in input fields.`)),uC=Y(`inputValidation.infoBackground`,{dark:`#063B49`,light:`#D6ECF2`,hc:J.black},t(`inputValidationInfoBackground`,`Input validation background color for information severity.`)),dC=Y(`inputValidation.infoForeground`,{dark:null,light:null,hc:null},t(`inputValidationInfoForeground`,`Input validation foreground color for information severity.`)),fC=Y(`inputValidation.infoBorder`,{dark:`#007acc`,light:`#007acc`,hc:QS},t(`inputValidationInfoBorder`,`Input validation border color for information severity.`)),pC=Y(`inputValidation.warningBackground`,{dark:`#352A05`,light:`#F6F5D2`,hc:J.black},t(`inputValidationWarningBackground`,`Input validation background color for warning severity.`)),mC=Y(`inputValidation.warningForeground`,{dark:null,light:null,hc:null},t(`inputValidationWarningForeground`,`Input validation foreground color for warning severity.`)),hC=Y(`inputValidation.warningBorder`,{dark:`#B89500`,light:`#B89500`,hc:QS},t(`inputValidationWarningBorder`,`Input validation border color for warning severity.`)),gC=Y(`inputValidation.errorBackground`,{dark:`#5A1D1D`,light:`#F2DEDE`,hc:J.black},t(`inputValidationErrorBackground`,`Input validation background color for error severity.`)),_C=Y(`inputValidation.errorForeground`,{dark:null,light:null,hc:null},t(`inputValidationErrorForeground`,`Input validation foreground color for error severity.`)),vC=Y(`inputValidation.errorBorder`,{dark:`#BE1100`,light:`#BE1100`,hc:QS},t(`inputValidationErrorBorder`,`Input validation border color for error severity.`)),yC=Y(`dropdown.background`,{dark:`#3C3C3C`,light:J.white,hc:J.black},t(`dropdownBackground`,`Dropdown background.`)),bC=Y(`dropdown.foreground`,{dark:`#F0F0F0`,light:null,hc:J.white},t(`dropdownForeground`,`Dropdown foreground.`)),xC=Y(`button.foreground`,{dark:J.white,light:J.white,hc:J.white},t(`buttonForeground`,`Button foreground color.`)),SC=Y(`button.background`,{dark:`#0E639C`,light:`#007ACC`,hc:null},t(`buttonBackground`,`Button background color.`)),CC=Y(`button.hoverBackground`,{dark:IT(SC,.2),light:FT(SC,.2),hc:null},t(`buttonHoverBackground`,`Button background color when hovering.`)),wC=Y(`badge.background`,{dark:`#4D4D4D`,light:`#C4C4C4`,hc:J.black},t(`badgeBackground`,`Badge background color. Badges are small information labels, e.g. for search results count.`)),TC=Y(`badge.foreground`,{dark:J.white,light:`#333`,hc:J.white},t(`badgeForeground`,`Badge foreground color. Badges are small information labels, e.g. for search results count.`)),EC=Y(`scrollbar.shadow`,{dark:`#000000`,light:`#DDDDDD`,hc:null},t(`scrollbarShadow`,`Scrollbar shadow to indicate that the view is scrolled.`)),DC=Y(`scrollbarSlider.background`,{dark:J.fromHex(`#797979`).transparent(.4),light:J.fromHex(`#646464`).transparent(.4),hc:LT(QS,.6)},t(`scrollbarSliderBackground`,`Scrollbar slider background color.`)),OC=Y(`scrollbarSlider.hoverBackground`,{dark:J.fromHex(`#646464`).transparent(.7),light:J.fromHex(`#646464`).transparent(.7),hc:LT(QS,.8)},t(`scrollbarSliderHoverBackground`,`Scrollbar slider background color when hovering.`)),kC=Y(`scrollbarSlider.activeBackground`,{dark:J.fromHex(`#BFBFBF`).transparent(.4),light:J.fromHex(`#000000`).transparent(.6),hc:QS},t(`scrollbarSliderActiveBackground`,`Scrollbar slider background color when clicked on.`)),AC=Y(`progressBar.background`,{dark:J.fromHex(`#0E70C0`),light:J.fromHex(`#0E70C0`),hc:QS},t(`progressBarBackground`,`Background color of the progress bar that can show for long running operations.`)),jC=Y(`editorError.background`,{dark:null,light:null,hc:null},t(`editorError.background`,`Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0),MC=Y(`editorError.foreground`,{dark:`#F14C4C`,light:`#E51400`,hc:null},t(`editorError.foreground`,`Foreground color of error squigglies in the editor.`)),NC=Y(`editorError.border`,{dark:null,light:null,hc:J.fromHex(`#E47777`).transparent(.8)},t(`errorBorder`,`Border color of error boxes in the editor.`)),PC=Y(`editorWarning.background`,{dark:null,light:null,hc:null},t(`editorWarning.background`,`Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0),FC=Y(`editorWarning.foreground`,{dark:`#CCA700`,light:`#BF8803`,hc:null},t(`editorWarning.foreground`,`Foreground color of warning squigglies in the editor.`)),IC=Y(`editorWarning.border`,{dark:null,light:null,hc:J.fromHex(`#FFCC00`).transparent(.8)},t(`warningBorder`,`Border color of warning boxes in the editor.`)),LC=Y(`editorInfo.background`,{dark:null,light:null,hc:null},t(`editorInfo.background`,`Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0),RC=Y(`editorInfo.foreground`,{dark:`#3794FF`,light:`#1a85ff`,hc:`#3794FF`},t(`editorInfo.foreground`,`Foreground color of info squigglies in the editor.`)),zC=Y(`editorInfo.border`,{dark:null,light:null,hc:J.fromHex(`#3794FF`).transparent(.8)},t(`infoBorder`,`Border color of info boxes in the editor.`)),BC=Y(`editorHint.foreground`,{dark:J.fromHex(`#eeeeee`).transparent(.7),light:`#6c6c6c`,hc:null},t(`editorHint.foreground`,`Foreground color of hint squigglies in the editor.`)),VC=Y(`editorHint.border`,{dark:null,light:null,hc:J.fromHex(`#eeeeee`).transparent(.8)},t(`hintBorder`,`Border color of hint boxes in the editor.`)),HC=Y(`editor.background`,{light:`#fffffe`,dark:`#1E1E1E`,hc:J.black},t(`editorBackground`,`Editor background color.`)),UC=Y(`editor.foreground`,{light:`#333333`,dark:`#BBBBBB`,hc:J.white},t(`editorForeground`,`Editor default foreground color.`)),WC=Y(`editorWidget.background`,{dark:`#252526`,light:`#F3F3F3`,hc:`#0C141F`},t(`editorWidgetBackground`,`Background color of editor widgets, such as find/replace.`)),GC=Y(`editorWidget.foreground`,{dark:JS,light:JS,hc:JS},t(`editorWidgetForeground`,`Foreground color of editor widgets, such as find/replace.`)),KC=Y(`editorWidget.border`,{dark:`#454545`,light:`#C8C8C8`,hc:QS},t(`editorWidgetBorder`,`Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.`)),qC=Y(`editorWidget.resizeBorder`,{light:null,dark:null,hc:null},t(`editorWidgetResizeBorder`,`Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.`)),JC=Y(`quickInput.background`,{dark:WC,light:WC,hc:WC},t(`pickerBackground`,`Quick picker background color. The quick picker widget is the container for pickers like the command palette.`)),YC=Y(`quickInput.foreground`,{dark:GC,light:GC,hc:GC},t(`pickerForeground`,`Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.`)),XC=Y(`quickInputTitle.background`,{dark:new J(new q(255,255,255,.105)),light:new J(new q(0,0,0,.06)),hc:`#000000`},t(`pickerTitleBackground`,`Quick picker title background color. The quick picker widget is the container for pickers like the command palette.`)),ZC=Y(`pickerGroup.foreground`,{dark:`#3794FF`,light:`#0066BF`,hc:J.white},t(`pickerGroupForeground`,`Quick picker color for grouping labels.`)),QC=Y(`pickerGroup.border`,{dark:`#3F3F46`,light:`#CCCEDB`,hc:J.white},t(`pickerGroupBorder`,`Quick picker color for grouping borders.`)),$C=Y(`keybindingLabel.background`,{dark:new J(new q(128,128,128,.17)),light:new J(new q(221,221,221,.4)),hc:J.transparent},t(`keybindingLabelBackground`,`Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.`)),ew=Y(`keybindingLabel.foreground`,{dark:J.fromHex(`#CCCCCC`),light:J.fromHex(`#555555`),hc:J.white},t(`keybindingLabelForeground`,`Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.`)),tw=Y(`keybindingLabel.border`,{dark:new J(new q(51,51,51,.6)),light:new J(new q(204,204,204,.4)),hc:new J(new q(111,195,223))},t(`keybindingLabelBorder`,`Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.`)),nw=Y(`keybindingLabel.bottomBorder`,{dark:new J(new q(68,68,68,.6)),light:new J(new q(187,187,187,.4)),hc:new J(new q(111,195,223))},t(`keybindingLabelBottomBorder`,`Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.`)),rw=Y(`editor.selectionBackground`,{light:`#ADD6FF`,dark:`#264F78`,hc:`#f3f518`},t(`editorSelectionBackground`,`Color of the editor selection.`)),iw=Y(`editor.selectionForeground`,{light:null,dark:null,hc:`#000000`},t(`editorSelectionForeground`,`Color of the selected text for high contrast.`)),aw=Y(`editor.inactiveSelectionBackground`,{light:LT(rw,.5),dark:LT(rw,.5),hc:LT(rw,.5)},t(`editorInactiveSelection`,`Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations.`),!0),ow=Y(`editor.selectionHighlightBackground`,{light:BT(rw,HC,.3,.6),dark:BT(rw,HC,.3,.6),hc:null},t(`editorSelectionHighlight`,`Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations.`),!0),sw=Y(`editor.selectionHighlightBorder`,{light:null,dark:null,hc:$S},t(`editorSelectionHighlightBorder`,`Border color for regions with the same content as the selection.`)),cw=Y(`editor.findMatchBackground`,{light:`#A8AC94`,dark:`#515C6A`,hc:null},t(`editorFindMatch`,`Color of the current search match.`)),lw=Y(`editor.findMatchHighlightBackground`,{light:`#EA5C0055`,dark:`#EA5C0055`,hc:null},t(`findMatchHighlight`,`Color of the other search matches. The color must not be opaque so as not to hide underlying decorations.`),!0),uw=Y(`editor.findRangeHighlightBackground`,{dark:`#3a3d4166`,light:`#b4b4b44d`,hc:null},t(`findRangeHighlight`,`Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations.`),!0),dw=Y(`editor.findMatchBorder`,{light:null,dark:null,hc:$S},t(`editorFindMatchBorder`,`Border color of the current search match.`)),fw=Y(`editor.findMatchHighlightBorder`,{light:null,dark:null,hc:$S},t(`findMatchHighlightBorder`,`Border color of the other search matches.`)),pw=Y(`editor.findRangeHighlightBorder`,{dark:null,light:null,hc:LT($S,.4)},t(`findRangeHighlightBorder`,`Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations.`),!0),mw=Y(`editor.hoverHighlightBackground`,{light:`#ADD6FF26`,dark:`#264f7840`,hc:`#ADD6FF26`},t(`hoverHighlight`,`Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations.`),!0),hw=Y(`editorHoverWidget.background`,{light:WC,dark:WC,hc:WC},t(`hoverBackground`,`Background color of the editor hover.`)),gw=Y(`editorHoverWidget.foreground`,{light:GC,dark:GC,hc:GC},t(`hoverForeground`,`Foreground color of the editor hover.`)),_w=Y(`editorHoverWidget.border`,{light:KC,dark:KC,hc:KC},t(`hoverBorder`,`Border color of the editor hover.`)),vw=Y(`editorHoverWidget.statusBarBackground`,{dark:IT(hw,.2),light:FT(hw,.05),hc:WC},t(`statusBarBackground`,`Background color of the editor hover status bar.`)),yw=Y(`editorLink.activeForeground`,{dark:`#4E94CE`,light:J.blue,hc:J.cyan},t(`activeLinkForeground`,`Color of active links.`)),bw=Y(`editorInlayHint.foreground`,{dark:LT(TC,.8),light:LT(TC,.8),hc:TC},t(`editorInlayHintForeground`,`Foreground color of inline hints`)),xw=Y(`editorInlayHint.background`,{dark:LT(wC,.6),light:LT(wC,.3),hc:wC},t(`editorInlayHintBackground`,`Background color of inline hints`)),Sw=Y(`editorInlayHint.typeForeground`,{dark:bw,light:bw,hc:bw},t(`editorInlayHintForegroundTypes`,`Foreground color of inline hints for types`)),Cw=Y(`editorInlayHint.typeBackground`,{dark:xw,light:xw,hc:xw},t(`editorInlayHintBackgroundTypes`,`Background color of inline hints for types`)),ww=Y(`editorInlayHint.parameterForeground`,{dark:bw,light:bw,hc:bw},t(`editorInlayHintForegroundParameter`,`Foreground color of inline hints for parameters`)),Tw=Y(`editorInlayHint.parameterBackground`,{dark:xw,light:xw,hc:xw},t(`editorInlayHintBackgroundParameter`,`Background color of inline hints for parameters`)),Ew=Y(`editorLightBulb.foreground`,{dark:`#FFCC00`,light:`#DDB100`,hc:`#FFCC00`},t(`editorLightBulbForeground`,`The color used for the lightbulb actions icon.`)),Dw=Y(`editorLightBulbAutoFix.foreground`,{dark:`#75BEFF`,light:`#007ACC`,hc:`#75BEFF`},t(`editorLightBulbAutoFixForeground`,`The color used for the lightbulb auto fix actions icon.`)),Ow=new J(new q(155,185,85,.2)),kw=new J(new q(255,0,0,.2)),Aw=Y(`diffEditor.insertedTextBackground`,{dark:Ow,light:Ow,hc:null},t(`diffEditorInserted`,`Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations.`),!0),jw=Y(`diffEditor.removedTextBackground`,{dark:kw,light:kw,hc:null},t(`diffEditorRemoved`,`Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations.`),!0),Mw=Y(`diffEditor.insertedTextBorder`,{dark:null,light:null,hc:`#33ff2eff`},t(`diffEditorInsertedOutline`,`Outline color for the text that got inserted.`)),Nw=Y(`diffEditor.removedTextBorder`,{dark:null,light:null,hc:`#FF008F`},t(`diffEditorRemovedOutline`,`Outline color for text that got removed.`)),Pw=Y(`diffEditor.border`,{dark:null,light:null,hc:QS},t(`diffEditorBorder`,`Border color between the two text editors.`)),Fw=Y(`diffEditor.diagonalFill`,{dark:`#cccccc33`,light:`#22222233`,hc:null},t(`diffDiagonalFill`,`Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.`)),Iw=Y(`list.focusBackground`,{dark:null,light:null,hc:null},t(`listFocusBackground`,`List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Lw=Y(`list.focusForeground`,{dark:null,light:null,hc:null},t(`listFocusForeground`,`List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Rw=Y(`list.focusOutline`,{dark:ZS,light:ZS,hc:$S},t(`listFocusOutline`,`List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),zw=Y(`list.activeSelectionBackground`,{dark:`#094771`,light:`#0060C0`,hc:null},t(`listActiveSelectionBackground`,`List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Bw=Y(`list.activeSelectionForeground`,{dark:J.white,light:J.white,hc:null},t(`listActiveSelectionForeground`,`List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Vw=Y(`list.activeSelectionIconForeground`,{dark:null,light:null,hc:null},t(`listActiveSelectionIconForeground`,`List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Hw=Y(`list.inactiveSelectionBackground`,{dark:`#37373D`,light:`#E4E6F1`,hc:null},t(`listInactiveSelectionBackground`,`List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Uw=Y(`list.inactiveSelectionForeground`,{dark:null,light:null,hc:null},t(`listInactiveSelectionForeground`,`List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Ww=Y(`list.inactiveSelectionIconForeground`,{dark:null,light:null,hc:null},t(`listInactiveSelectionIconForeground`,`List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Gw=Y(`list.inactiveFocusBackground`,{dark:null,light:null,hc:null},t(`listInactiveFocusBackground`,`List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Kw=Y(`list.inactiveFocusOutline`,{dark:null,light:null,hc:null},t(`listInactiveFocusOutline`,`List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),qw=Y(`list.hoverBackground`,{dark:`#2A2D2E`,light:`#F0F0F0`,hc:null},t(`listHoverBackground`,`List/Tree background when hovering over items using the mouse.`)),Jw=Y(`list.hoverForeground`,{dark:null,light:null,hc:null},t(`listHoverForeground`,`List/Tree foreground when hovering over items using the mouse.`)),Yw=Y(`list.dropBackground`,{dark:`#062F4A`,light:`#D6EBFF`,hc:null},t(`listDropBackground`,`List/Tree drag and drop background when moving items around using the mouse.`)),Xw=Y(`list.highlightForeground`,{dark:`#18A3FF`,light:`#0066BF`,hc:ZS},t(`highlight`,`List/Tree foreground color of the match highlights when searching inside the list/tree.`)),Zw=Y(`list.focusHighlightForeground`,{dark:Xw,light:zT(zw,Xw,`#9DDDFF`),hc:Xw},t(`listFocusHighlightForeground`,`List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.`)),Qw=Y(`listFilterWidget.background`,{light:`#efc1ad`,dark:`#653723`,hc:J.black},t(`listFilterWidgetBackground`,`Background color of the type filter widget in lists and trees.`)),$w=Y(`listFilterWidget.outline`,{dark:J.transparent,light:J.transparent,hc:`#f38518`},t(`listFilterWidgetOutline`,`Outline color of the type filter widget in lists and trees.`)),eT=Y(`listFilterWidget.noMatchesOutline`,{dark:`#BE1100`,light:`#BE1100`,hc:QS},t(`listFilterWidgetNoMatchesOutline`,`Outline color of the type filter widget in lists and trees, when there are no matches.`)),tT=Y(`tree.indentGuidesStroke`,{dark:`#585858`,light:`#a9a9a9`,hc:`#a9a9a9`},t(`treeIndentGuidesStroke`,`Tree stroke color for the indentation guides.`)),nT=Y(`tree.tableColumnsBorder`,{dark:`#CCCCCC20`,light:`#61616120`,hc:null},t(`treeIndentGuidesStroke`,`Tree stroke color for the indentation guides.`)),rT=Y(`quickInput.list.focusBackground`,{dark:null,light:null,hc:null},``,void 0,t(`quickInput.list.focusBackground deprecation`,`Please use quickInputList.focusBackground instead`)),iT=Y(`quickInputList.focusForeground`,{dark:Bw,light:Bw,hc:Bw},t(`quickInput.listFocusForeground`,`Quick picker foreground color for the focused item.`)),aT=Y(`quickInputList.focusIconForeground`,{dark:Vw,light:Vw,hc:Vw},t(`quickInput.listFocusIconForeground`,`Quick picker icon foreground color for the focused item.`)),oT=Y(`quickInputList.focusBackground`,{dark:RT(rT,zw),light:RT(rT,zw),hc:null},t(`quickInput.listFocusBackground`,`Quick picker background color for the focused item.`)),sT=Y(`menu.border`,{dark:null,light:null,hc:QS},t(`menuBorder`,`Border color of menus.`)),cT=Y(`menu.foreground`,{dark:bC,light:JS,hc:bC},t(`menuForeground`,`Foreground color of menu items.`)),lT=Y(`menu.background`,{dark:yC,light:yC,hc:yC},t(`menuBackground`,`Background color of menu items.`)),uT=Y(`menu.selectionForeground`,{dark:Bw,light:Bw,hc:Bw},t(`menuSelectionForeground`,`Foreground color of the selected menu item in menus.`)),dT=Y(`menu.selectionBackground`,{dark:zw,light:zw,hc:zw},t(`menuSelectionBackground`,`Background color of the selected menu item in menus.`)),fT=Y(`menu.selectionBorder`,{dark:null,light:null,hc:$S},t(`menuSelectionBorder`,`Border color of the selected menu item in menus.`)),pT=Y(`menu.separatorBackground`,{dark:`#BBBBBB`,light:`#888888`,hc:QS},t(`menuSeparatorBackground`,`Color of a separator menu item in menus.`)),mT=Y(`toolbar.hoverBackground`,{dark:`#5a5d5e50`,light:`#b8b8b850`,hc:null},t(`toolbarHoverBackground`,`Toolbar background when hovering over actions using the mouse`)),hT=Y(`editor.snippetTabstopHighlightBackground`,{dark:new J(new q(124,124,124,.3)),light:new J(new q(10,50,100,.2)),hc:new J(new q(124,124,124,.3))},t(`snippetTabstopHighlightBackground`,`Highlight background color of a snippet tabstop.`)),gT=Y(`editor.snippetTabstopHighlightBorder`,{dark:null,light:null,hc:null},t(`snippetTabstopHighlightBorder`,`Highlight border color of a snippet tabstop.`)),_T=Y(`editor.snippetFinalTabstopHighlightBackground`,{dark:null,light:null,hc:null},t(`snippetFinalTabstopHighlightBackground`,`Highlight background color of the final tabstop of a snippet.`)),vT=Y(`editor.snippetFinalTabstopHighlightBorder`,{dark:`#525252`,light:new J(new q(10,50,100,.5)),hc:`#525252`},t(`snippetFinalTabstopHighlightBorder`,`Highlight border color of the final tabstop of a snippet.`)),yT=Y(`editorOverviewRuler.findMatchForeground`,{dark:`#d186167e`,light:`#d186167e`,hc:`#AB5A00`},t(`overviewRulerFindMatchForeground`,`Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations.`),!0),bT=Y(`editorOverviewRuler.selectionHighlightForeground`,{dark:`#A0A0A0CC`,light:`#A0A0A0CC`,hc:`#A0A0A0CC`},t(`overviewRulerSelectionHighlightForeground`,`Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),xT=Y(`minimap.findMatchHighlight`,{light:`#d18616`,dark:`#d18616`,hc:`#AB5A00`},t(`minimapFindMatchHighlight`,`Minimap marker color for find matches.`),!0),ST=Y(`minimap.selectionOccurrenceHighlight`,{light:`#c9c9c9`,dark:`#676767`,hc:`#ffffff`},t(`minimapSelectionOccurrenceHighlight`,`Minimap marker color for repeating editor selections.`),!0),CT=Y(`minimap.selectionHighlight`,{light:`#ADD6FF`,dark:`#264F78`,hc:`#ffffff`},t(`minimapSelectionHighlight`,`Minimap marker color for the editor selection.`),!0),wT=Y(`minimap.errorHighlight`,{dark:new J(new q(255,18,18,.7)),light:new J(new q(255,18,18,.7)),hc:new J(new q(255,50,50,1))},t(`minimapError`,`Minimap marker color for errors.`)),TT=Y(`minimap.warningHighlight`,{dark:FC,light:FC,hc:IC},t(`overviewRuleWarning`,`Minimap marker color for warnings.`)),ET=Y(`minimap.background`,{dark:null,light:null,hc:null},t(`minimapBackground`,`Minimap background color.`)),DT=Y(`minimap.foregroundOpacity`,{dark:J.fromHex(`#000f`),light:J.fromHex(`#000f`),hc:J.fromHex(`#000f`)},t(`minimapForegroundOpacity`,`Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.`)),OT=Y(`minimapSlider.background`,{light:LT(DC,.5),dark:LT(DC,.5),hc:LT(DC,.5)},t(`minimapSliderBackground`,`Minimap slider background color.`)),kT=Y(`minimapSlider.hoverBackground`,{light:LT(OC,.5),dark:LT(OC,.5),hc:LT(OC,.5)},t(`minimapSliderHoverBackground`,`Minimap slider background color when hovering.`)),AT=Y(`minimapSlider.activeBackground`,{light:LT(kC,.5),dark:LT(kC,.5),hc:LT(kC,.5)},t(`minimapSliderActiveBackground`,`Minimap slider background color when clicked on.`)),jT=Y(`problemsErrorIcon.foreground`,{dark:MC,light:MC,hc:MC},t(`problemsErrorIconForeground`,`The color used for the problems error icon.`)),MT=Y(`problemsWarningIcon.foreground`,{dark:FC,light:FC,hc:FC},t(`problemsWarningIconForeground`,`The color used for the problems warning icon.`)),NT=Y(`problemsInfoIcon.foreground`,{dark:RC,light:RC,hc:RC},t(`problemsInfoIconForeground`,`The color used for the problems info icon.`));function PT(e,t){switch(e.op){case 0:return VT(e.value,t)?.darken(e.factor);case 1:return VT(e.value,t)?.lighten(e.factor);case 2:return VT(e.value,t)?.transparent(e.factor);case 3:for(let n of e.values){let e=VT(n,t);if(e)return e}return;case 5:return VT(t.defines(e.if)?e.then:e.else,t);case 4:let n=VT(e.value,t);if(!n)return;let r=VT(e.background,t);return r?n.isDarkerThan(r)?J.getLighterColor(n,r,e.factor).transparent(e.transparency):J.getDarkerColor(n,r,e.factor).transparent(e.transparency):n.transparent(e.factor*e.transparency);default:throw cc(e)}}function FT(e,t){return{op:0,value:e,factor:t}}function IT(e,t){return{op:1,value:e,factor:t}}function LT(e,t){return{op:2,value:e,factor:t}}function RT(...e){return{op:3,values:e}}function zT(e,t,n){return{op:5,if:e,then:t,else:n}}function BT(e,t,n,r){return{op:4,value:e,background:t,factor:n,transparency:r}}function VT(e,t){if(e!==null){if(typeof e==`string`)return e[0]===`#`?J.fromHex(e):t.getColor(e);if(e instanceof J)return e;if(typeof e==`object`)return PT(e,t)}}const HT=`vscode://schemas/workbench-colors`;var UT=Jd.as(Yd.JSONContribution);UT.registerSchema(HT,qS.getColorSchema());var WT=new Li(()=>UT.notifySchemaChanged(HT),200);qS.onDidChangeSchema(()=>{WT.isScheduled()||WT.schedule()});const GT=Y(`editor.lineHighlightBackground`,{dark:null,light:null,hc:null},t(`lineHighlight`,`Background color for the highlight of line at the cursor position.`)),KT=Y(`editor.lineHighlightBorder`,{dark:`#282828`,light:`#eeeeee`,hc:`#f38518`},t(`lineHighlightBorderBox`,`Background color for the border around the line at the cursor position.`)),qT=Y(`editor.rangeHighlightBackground`,{dark:`#ffffff0b`,light:`#fdff0033`,hc:null},t(`rangeHighlight`,`Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations.`),!0),JT=Y(`editor.rangeHighlightBorder`,{dark:null,light:null,hc:$S},t(`rangeHighlightBorder`,`Background color of the border around highlighted ranges.`),!0),YT=Y(`editor.symbolHighlightBackground`,{dark:lw,light:lw,hc:null},t(`symbolHighlight`,`Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations.`),!0),XT=Y(`editor.symbolHighlightBorder`,{dark:null,light:null,hc:$S},t(`symbolHighlightBorder`,`Background color of the border around highlighted symbols.`),!0),ZT=Y(`editorCursor.foreground`,{dark:`#AEAFAD`,light:J.black,hc:J.white},t(`caret`,`Color of the editor cursor.`)),QT=Y(`editorCursor.background`,null,t(`editorCursorBackground`,`The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.`)),$T=Y(`editorWhitespace.foreground`,{dark:`#e3e4e229`,light:`#33333333`,hc:`#e3e4e229`},t(`editorWhitespaces`,`Color of whitespace characters in the editor.`)),eE=Y(`editorIndentGuide.background`,{dark:$T,light:$T,hc:$T},t(`editorIndentGuides`,`Color of the editor indentation guides.`)),tE=Y(`editorIndentGuide.activeBackground`,{dark:$T,light:$T,hc:$T},t(`editorActiveIndentGuide`,`Color of the active editor indentation guides.`)),nE=Y(`editorLineNumber.foreground`,{dark:`#858585`,light:`#237893`,hc:J.white},t(`editorLineNumbers`,`Color of editor line numbers.`));var rE=Y(`editorActiveLineNumber.foreground`,{dark:`#c6c6c6`,light:`#0B216F`,hc:$S},t(`editorActiveLineNumber`,`Color of editor active line number`),!1,t(`deprecatedEditorActiveLineNumber`,`Id is deprecated. Use 'editorLineNumber.activeForeground' instead.`));const iE=Y(`editorLineNumber.activeForeground`,{dark:rE,light:rE,hc:rE},t(`editorActiveLineNumber`,`Color of editor active line number`)),aE=Y(`editorRuler.foreground`,{dark:`#5A5A5A`,light:J.lightgrey,hc:J.white},t(`editorRuler`,`Color of the editor rulers.`)),oE=Y(`editorCodeLens.foreground`,{dark:`#999999`,light:`#919191`,hc:`#999999`},t(`editorCodeLensForeground`,`Foreground color of editor CodeLens`)),sE=Y(`editorBracketMatch.background`,{dark:`#0064001a`,light:`#0064001a`,hc:`#0064001a`},t(`editorBracketMatchBackground`,`Background color behind matching brackets`)),cE=Y(`editorBracketMatch.border`,{dark:`#888`,light:`#B9B9B9`,hc:QS},t(`editorBracketMatchBorder`,`Color for matching brackets boxes`)),lE=Y(`editorOverviewRuler.border`,{dark:`#7f7f7f4d`,light:`#7f7f7f4d`,hc:`#7f7f7f4d`},t(`editorOverviewRulerBorder`,`Color of the overview ruler border.`)),uE=Y(`editorOverviewRuler.background`,null,t(`editorOverviewRulerBackground`,`Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.`)),dE=Y(`editorGutter.background`,{dark:HC,light:HC,hc:HC},t(`editorGutter`,`Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.`)),fE=Y(`editorUnnecessaryCode.border`,{dark:null,light:null,hc:J.fromHex(`#fff`).transparent(.8)},t(`unnecessaryCodeBorder`,`Border color of unnecessary (unused) source code in the editor.`)),pE=Y(`editorUnnecessaryCode.opacity`,{dark:J.fromHex(`#000a`),light:J.fromHex(`#0007`),hc:null},t(`unnecessaryCodeOpacity`,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),mE=Y(`editorGhostText.border`,{dark:null,light:null,hc:J.fromHex(`#fff`).transparent(.8)},t(`editorGhostTextBorder`,`Border color of ghost text in the editor.`)),hE=Y(`editorGhostText.foreground`,{dark:J.fromHex(`#ffffff56`),light:J.fromHex(`#0007`),hc:null},t(`editorGhostTextForeground`,`Foreground color of the ghost text in the editor.`));var gE=new J(new q(0,122,204,.6));const _E=Y(`editorOverviewRuler.rangeHighlightForeground`,{dark:gE,light:gE,hc:gE},t(`overviewRulerRangeHighlight`,`Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),vE=Y(`editorOverviewRuler.errorForeground`,{dark:new J(new q(255,18,18,.7)),light:new J(new q(255,18,18,.7)),hc:new J(new q(255,50,50,1))},t(`overviewRuleError`,`Overview ruler marker color for errors.`)),yE=Y(`editorOverviewRuler.warningForeground`,{dark:FC,light:FC,hc:IC},t(`overviewRuleWarning`,`Overview ruler marker color for warnings.`)),bE=Y(`editorOverviewRuler.infoForeground`,{dark:RC,light:RC,hc:zC},t(`overviewRuleInfo`,`Overview ruler marker color for infos.`)),xE=Y(`editorBracketHighlight.foreground1`,{dark:`#FFD700`,light:`#0431FAFF`,hc:`#FFD700`},t(`editorBracketHighlightForeground1`,`Foreground color of brackets (1). Requires enabling bracket pair colorization.`)),SE=Y(`editorBracketHighlight.foreground2`,{dark:`#DA70D6`,light:`#319331FF`,hc:`#DA70D6`},t(`editorBracketHighlightForeground2`,`Foreground color of brackets (2). Requires enabling bracket pair colorization.`)),CE=Y(`editorBracketHighlight.foreground3`,{dark:`#179FFF`,light:`#7B3814FF`,hc:`#87CEFA`},t(`editorBracketHighlightForeground3`,`Foreground color of brackets (3). Requires enabling bracket pair colorization.`)),wE=Y(`editorBracketHighlight.foreground4`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketHighlightForeground4`,`Foreground color of brackets (4). Requires enabling bracket pair colorization.`)),TE=Y(`editorBracketHighlight.foreground5`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketHighlightForeground5`,`Foreground color of brackets (5). Requires enabling bracket pair colorization.`)),EE=Y(`editorBracketHighlight.foreground6`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketHighlightForeground6`,`Foreground color of brackets (6). Requires enabling bracket pair colorization.`)),DE=Y(`editorBracketHighlight.unexpectedBracket.foreground`,{dark:new J(new q(255,18,18,.8)),light:new J(new q(255,18,18,.8)),hc:new J(new q(255,50,50,1))},t(`editorBracketHighlightUnexpectedBracketForeground`,`Foreground color of unexpected brackets.`)),OE=Y(`editorBracketPairGuide.background1`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background1`,`Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.`)),kE=Y(`editorBracketPairGuide.background2`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background2`,`Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.`)),AE=Y(`editorBracketPairGuide.background3`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background3`,`Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.`)),jE=Y(`editorBracketPairGuide.background4`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background4`,`Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.`)),ME=Y(`editorBracketPairGuide.background5`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background5`,`Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.`)),NE=Y(`editorBracketPairGuide.background6`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.background6`,`Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.`)),PE=Y(`editorBracketPairGuide.activeBackground1`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground1`,`Background color of active bracket pair guides (1). Requires enabling bracket pair guides.`)),FE=Y(`editorBracketPairGuide.activeBackground2`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground2`,`Background color of active bracket pair guides (2). Requires enabling bracket pair guides.`)),IE=Y(`editorBracketPairGuide.activeBackground3`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground3`,`Background color of active bracket pair guides (3). Requires enabling bracket pair guides.`)),LE=Y(`editorBracketPairGuide.activeBackground4`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground4`,`Background color of active bracket pair guides (4). Requires enabling bracket pair guides.`)),RE=Y(`editorBracketPairGuide.activeBackground5`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground5`,`Background color of active bracket pair guides (5). Requires enabling bracket pair guides.`)),zE=Y(`editorBracketPairGuide.activeBackground6`,{dark:`#00000000`,light:`#00000000`,hc:`#00000000`},t(`editorBracketPairGuide.activeBackground6`,`Background color of active bracket pair guides (6). Requires enabling bracket pair guides.`));iv((e,t)=>{let n=e.getColor(HC);n&&t.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${n}; }`);let r=e.getColor(UC);r&&t.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${r}; }`);let i=e.getColor(dE);i&&t.addRule(`.monaco-editor .margin { background-color: ${i}; }`);let a=e.getColor(qT);a&&t.addRule(`.monaco-editor .rangeHighlight { background-color: ${a}; }`);let o=e.getColor(JT);o&&t.addRule(`.monaco-editor .rangeHighlight { border: 1px ${e.type===`hc`?`dotted`:`solid`} ${o}; }`);let s=e.getColor(YT);s&&t.addRule(`.monaco-editor .symbolHighlight { background-color: ${s}; }`);let c=e.getColor(XT);c&&t.addRule(`.monaco-editor .symbolHighlight { border: 1px ${e.type===`hc`?`dotted`:`solid`} ${c}; }`);let l=e.getColor($T);l&&(t.addRule(`.monaco-editor .mtkw { color: ${l} !important; }`),t.addRule(`.monaco-editor .mtkz { color: ${l} !important; }`))});var BE=class extends j{constructor(e){super(),this.textModel=e,this.colorProvider=new VE,this.onDidChangeEmitter=new N,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(e=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0||!this.colorizationOptions.enabled)return[];let r=[],i=this.textModel.bracketPairs.getBracketsInRange(e);for(let e of i)r.push({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:`BracketPairColorization`,inlineClassName:this.colorProvider.getInlineClassName(e)},ownerId:0,range:e.range});return r}getAllDecorations(e,t){return e===void 0||!this.colorizationOptions.enabled?[]:this.getDecorationsInRange(new L(1,1,this.textModel.getLineCount(),1),e,t)}},VE=class{constructor(){this.unexpectedClosingBracketClassName=`unexpected-closing-bracket`}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};iv((e,t)=>{let n=[xE,SE,CE,wE,TE,EE],r=new VE;t.addRule(`.monaco-editor .${r.unexpectedClosingBracketClassName} { color: ${e.getColor(DE)}; }`);let i=n.map(t=>e.getColor(t)).filter(e=>!!e).filter(e=>!e.isTransparent());for(let e=0;e<30;e++){let n=i[e%i.length];t.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(e)} { color: ${n}; }`)}});var HE=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},UE=function(e,t){return function(n,r){t(n,r,e)}};function WE(){return new hx}function GE(e){let t=WE();return t.acceptChunk(e),t.finish()}function KE(e,t){return(typeof e==`string`?GE(e):e).create(t)}var qE=0,JE=999,YE=class{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join(``);if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join(``)}while(!0)}},XE=()=>{throw Error(`Invalid change accessor`)},ZE=class{constructor(){this._searchCanceledBrand=void 0}};ZE.INSTANCE=new ZE;function QE(e){return e instanceof ZE?null:e}var $E=class e extends j{constructor(t,n,r,i=null,a,o,s){super(),this._undoRedoService=a,this._modeService=o,this._languageConfigurationService=s,this._onWillDispose=this._register(new N),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new pD(e=>this.handleBeforeFireDecorationsChangedEvent(e))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new N),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new N),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new N),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new N),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new N),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new N),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new mD),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new N),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(e=>{this._onDidChangeContentOrInjectedText.fire(e.rawContentChangedEvent)})),qE++,this.id=`$model`+qE,this.isForSimpleWidget=n.isForSimpleWidget,i==null?this._associatedResource=F.parse(`inmemory://model/`+qE):this._associatedResource=i,this._attachedEditorCount=0;let{textBuffer:c,disposable:l}=KE(t,n.defaultEOL);this._buffer=c,this._bufferDisposable=l,this._options=e.resolveOptions(this._buffer,n);let u=this._buffer.getLineCount(),d=this._buffer.getValueLengthInRange(new L(1,1,u,this._buffer.getLineLength(u)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=d>e.LARGE_FILE_SIZE_THRESHOLD||u>e.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=d>e.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=r||`vs.editor.nullMode`,this._languageRegistryListener=this._languageConfigurationService.onDidChange(e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=Zo(qE),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new iD,this._commandManager=new Ry(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new fx(this._modeService.languageIdCodec),this._tokens2=new dx(this._modeService.languageIdCodec),this._tokenization=new Ex(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new BS(this,this._languageConfigurationService)),this._decorationProvider=this._register(new BE(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){let n=Vy(e,t.tabSize,t.insertSpaces);return new Hc({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Hc({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;let t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;let e=new px([],``,`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw Error(`Model is disposed!`)}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new wx(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;let{textBuffer:t,disposable:n}=KE(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,i,a,o){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:i,isRedoing:a,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();let n=this.getFullModelRange(),r=this.getValueLengthInRange(n),i=this.getLineCount(),a=this.getLineMaxColumn(i);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new iD,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Sx([new gx],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,i,a),0,r,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();let t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;let n=this.getFullModelRange(),r=this.getValueLengthInRange(n),i=this.getLineCount(),a=this.getLineMaxColumn(i);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Sx([new xx],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,i,a),0,r,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){let r=t[n],i=r.range,a=r.cachedAbsoluteStart-r.start,o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),s=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);r.cachedAbsoluteStart=o,r.cachedAbsoluteEnd=s,r.cachedVersionId=e,r.start=o-a,r.end=s-a,_b(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,n=this._buffer.getLineCount();for(let r=1;r<=n;r++){let n=this._buffer.getLineLength(r);n>=1e4?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=e.tabSize===void 0?this._options.tabSize:e.tabSize,n=e.indentSize===void 0?this._options.indentSize:e.indentSize,r=e.insertSpaces===void 0?this._options.insertSpaces:e.insertSpaces,i=e.trimAutoWhitespace===void 0?this._options.trimAutoWhitespace:e.trimAutoWhitespace,a=e.bracketColorizationOptions===void 0?this._options.bracketPairColorizationOptions:e.bracketColorizationOptions,o=new Hc({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:i,bracketPairColorizationOptions:a});if(this._options.equals(o))return;let s=this._options.createChangeEvent(o);this._options=o,this._onDidChangeOptions.fire(s)}detectIndentation(e,t){this._assertNotDisposed();let n=Vy(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`	`?r+=t:r++;let i=``;if(!n){let e=Math.floor(r/t);r%=t;for(let t=0;t<e;t++)i+=`	`}for(let e=0;e<r;e++)i+=` `;return i}static normalizeIndentation(t,n,r){let i=vo(t);return i===-1&&(i=t.length),e._normalizeIndentationFromWhitespace(t.substring(0,i),n,r)+t.substring(i)}normalizeIndentation(t){return this._assertNotDisposed(),e.normalizeIndentation(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){let t=this.findMatches(Wo.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId+=1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();let n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new YE(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();let n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn,i=Math.floor(typeof n==`number`&&!isNaN(n)?n:1),a=Math.floor(typeof r==`number`&&!isNaN(r)?r:1);if(i<1)i=1,a=1;else if(i>t)i=t,a=this.getLineMaxColumn(i);else if(a<=1)a=1;else{let e=this.getLineMaxColumn(i);a>=e&&(a=e)}let o=e.endLineNumber,s=e.endColumn,c=Math.floor(typeof o==`number`&&!isNaN(o)?o:1),l=Math.floor(typeof s==`number`&&!isNaN(s)?s:1);if(c<1)c=1,l=1;else if(c>t)c=t,l=this.getLineMaxColumn(c);else if(l<=1)l=1;else{let e=this.getLineMaxColumn(c);l>=e&&(l=e)}return n===i&&r===a&&o===c&&s===l&&e instanceof L&&!(e instanceof $n)?e:new L(i,a,c,l)}_isValidPosition(e,t,n){return typeof e!=`number`||typeof t!=`number`||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t||e>this._buffer.getLineCount()?!1:t===1?!0:!(t>this.getLineMaxColumn(e)||n===1&&jo(this._buffer.getLineCharCode(e,t-2)))}_validatePosition(e,t,n){let r=Math.floor(typeof e==`number`&&!isNaN(e)?e:1),i=Math.floor(typeof t==`number`&&!isNaN(t)?t:1),a=this._buffer.getLineCount();if(r<1)return new I(1,1);if(r>a)return new I(a,this.getLineMaxColumn(a));if(i<=1)return new I(r,1);let o=this.getLineMaxColumn(r);return i>=o?new I(r,o):n===1&&jo(this._buffer.getLineCharCode(r,i-2))?new I(r,i-1):new I(r,i)}validatePosition(e){return this._assertNotDisposed(),e instanceof I&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){let n=e.startLineNumber,r=e.startColumn,i=e.endLineNumber,a=e.endColumn;if(!this._isValidPosition(n,r,0)||!this._isValidPosition(i,a,0))return!1;if(t===1){let e=r>1?this._buffer.getLineCharCode(n,r-2):0,t=a>1&&a<=this._buffer.getLineLength(i)?this._buffer.getLineCharCode(i,a-2):0,o=jo(e),s=jo(t);return!o&&!s}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof L&&!(e instanceof $n)&&this._isValidRange(e,1))return e;let t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),r=t.lineNumber,i=t.column,a=n.lineNumber,o=n.column;{let e=i>1?this._buffer.getLineCharCode(r,i-2):0,t=o>1&&o<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,o-2):0,n=jo(e),s=jo(t);return!n&&!s?new L(r,i,a,o):r===a&&i===o?new L(r,i-1,a,o-1):n&&s?new L(r,i-1,a,o+1):n?new L(r,i-1,a,o):new L(r,i,a,o+1)}return new L(r,i,a,o)}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new L(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,i,a,o=JE){this._assertNotDisposed();let s=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(e=>L.isIRange(e))&&(s=t.map(e=>this.validateRange(e)))),s===null&&(s=[this.getFullModelRange()]),s=s.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);let c=[];c.push(s.reduce((e,t)=>L.areIntersecting(e,t)?e.plusRange(t):(c.push(e),t)));let l;if(!n&&e.indexOf(`
`)<0){let t=new Ib(e,n,r,i).parseSearchRequest();if(!t)return[];l=e=>this.findMatchesLineByLine(e,t,a,o)}else l=t=>Vb.findMatches(this,new Ib(e,n,r,i),t,a,o);return c.map(l).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,n,r,i,a){this._assertNotDisposed();let o=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){let t=new Ib(e,n,r,i).parseSearchRequest();if(!t)return null;let s=this.getLineCount(),c=new L(o.lineNumber,o.column,s,this.getLineMaxColumn(s)),l=this.findMatchesLineByLine(c,t,a,1);return Vb.findNextMatch(this,new Ib(e,n,r,i),o,a),l.length>0||(c=new L(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),l=this.findMatchesLineByLine(c,t,a,1),l.length>0)?l[0]:null}return Vb.findNextMatch(this,new Ib(e,n,r,i),o,a)}findPreviousMatch(e,t,n,r,i,a){this._assertNotDisposed();let o=this.validatePosition(t);return Vb.findPreviousMatch(this,new Ib(e,n,r,i),o,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof qc?e:new qc(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let n=t.map(e=>({range:this.validateRange(e.range),text:e.text})),r=!0;if(e)for(let t=0,i=e.length;t<i;t++){let i=e[t],a=!1;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,r=t.startLineNumber>i.endLineNumber,o=i.startLineNumber>t.endLineNumber;if(!r&&!o){a=!0;break}}if(!a){r=!1;break}}if(r)for(let e=0,r=this._trimAutoWhitespaceLines.length;e<r;e++){let r=this._trimAutoWhitespaceLines[e],i=this.getLineMaxColumn(r),a=!0;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,o=n[e].text;if(!(r<t.startLineNumber||r>t.endLineNumber)&&!(r===t.startLineNumber&&t.startColumn===i&&t.isEmpty()&&o&&o.length>0&&o.charAt(0)===`
`)&&!(r===t.startLineNumber&&t.startColumn===1&&t.isEmpty()&&o&&o.length>0&&o.charAt(o.length-1)===`
`)){a=!1;break}}if(a){let e=new L(r,1,r,i);t.push(new qc(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,r){let i=e.map(e=>{let t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new L(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}});this._applyUndoRedoEdits(i,t,!0,!1,n,r)}_applyRedo(e,t,n,r){let i=e.map(e=>{let t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new L(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}});this._applyUndoRedoEdits(i,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,i,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(i)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){let n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),i=this._buffer.getLineCount(),a=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,a.length!==0){for(let e=0,t=a.length;e<t;e++){let t=a[e],[n,r,i]=nx(t.text);this._tokens.acceptEdit(t.range,n,r),this._tokens2.acceptEdit(t.range,n,r,i,t.text.length>0?t.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(t.rangeOffset,t.rangeLength,t.text.length,t.forceMoveMarkers)}let e=[];this._increaseVersionId();let t=n;for(let n=0,r=a.length;n<r;n++){let r=a[n],[o]=nx(r.text);this._onDidChangeDecorations.fire();let s=r.range.startLineNumber,c=r.range.endLineNumber,l=c-s,u=o,d=Math.min(l,u),f=u-l,p=i-t-f+s,m=p,h=p+u,g=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new I(m,1)),this.getOffsetAt(new I(h,this.getLineMaxColumn(h))),0),_=_x.fromDecorations(g),v=new Yp(_);for(let t=d;t>=0;t--){let n=s+t,r=p+t;v.takeFromEndWhile(e=>e.lineNumber>r);let i=v.takeFromEndWhile(e=>e.lineNumber===r);e.push(new vx(n,this.getLineContent(r),i))}if(d<l){let t=s+d;e.push(new yx(t+1,c))}if(d<u){let n=new Yp(_),r=s+d,a=u-d,o=i-t-a+r+1,c=[],l=[];for(let e=0;e<a;e++){let t=o+e;l[e]=this.getLineContent(t),n.takeWhile(e=>e.lineNumber<t),c[e]=n.takeWhile(e=>e.lineNumber===t)}e.push(new bx(r+1,s+u,l,c))}t+=f}this._emitContentChangedEvent(new Sx(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;let t=[...e].map(e=>new vx(e,this.getLineContent(e),this._getInjectedTextInLine(e)));this._onDidChangeContentOrInjectedText.fire(new Cx(t))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,fD(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>t.length===0&&n.length===0?[]:this._deltaDecorationsImpl(e,t,n)},r=null;try{r=t(n)}catch(e){ct(e)}return n.addDecoration=XE,n.changeDecoration=XE,n.changeDecorationOptions=XE,n.removeDecoration=XE,n.deltaDecorations=XE,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||=[],e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){let r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:dD[n]}])[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;let i=this._validateRangeRelaxedNoAllocations(t),a=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),a,o,i),r.setOptions(dD[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];this._decorationsTree.delete(n),delete this._decorations[n.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,r=!1){let i=this.getLineCount(),a=Math.min(i,Math.max(1,e)),o=Math.min(i,Math.max(1,t)),s=new L(a,1,o,this.getLineMaxColumn(o)),c=this._getDecorationsInRange(s,n,r);return c.push(...this._decorationProvider.getDecorationsInRange(s,n,r)),c}getDecorationsInRange(e,t=0,n=!1){let r=this.validateRange(e),i=this._getDecorationsInRange(r,t,n);return i.push(...this._decorationProvider.getDecorationsInRange(r,t,n)),i}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return _x.fromDecorations(r).filter(t=>t.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){let r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),i=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,i,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){let n=this._decorations[e];if(!n)return;if(n.options.after){let t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(n.options.before){let t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}let r=this._validateRangeRelaxedNoAllocations(t),i=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),i,a,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){let n=this._decorations[e];if(!n)return;let r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),i=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){let e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(n.options.before||t.before){let e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}r===i?n.setOptions(t):(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n))}_deltaDecorationsImpl(e,t,n){let r=this.getVersionId(),i=t.length,a=0,o=n.length,s=0,c=Array(o);for(;a<i||s<o;){let l=null;if(a<i){do l=this._decorations[t[a++]];while(!l&&a<i);if(l){if(l.options.after){let e=this._decorationsTree.getNodeRange(this,l);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(l.options.before){let e=this._decorationsTree.getNodeRange(this,l);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(l),this._onDidChangeDecorations.checkAffectedAndFire(l.options)}}if(s<o){if(!l){let e=++this._lastDecorationId,t=`${this._instanceId};${e}`;l=new Qy(t,0,0),this._decorations[t]=l}let t=n[s],i=this._validateRangeRelaxedNoAllocations(t.range),a=fD(t.options),o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),u=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);l.ownerId=e,l.reset(r,o,u,i),l.setOptions(a),l.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),l.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(a),this._decorationsTree.insert(l),c[s]=l.id,s++}else l&&delete this._decorations[l.id]}return c}setTokens(e,t=!1){if(e.length!==0){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=0,a=0,o=!1;for(let e=0,t=r.tokens.length;e<t;e++){let t=r.startLineNumber+e;o?(this._tokens.setTokens(this._languageId,t-1,this._buffer.getLineLength(t),r.tokens[e],!1),a=t):this._tokens.setTokens(this._languageId,t-1,this._buffer.getLineLength(t),r.tokens[e],!0)&&(o=!0,i=t,a=t)}o&&t.push({fromLineNumber:i,toLineNumber:a})}t.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:t})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw Error(`Illegal value for lineNumber`);return this._getLineTokens(e)}_getLineTokens(e){let t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){let n=this.validatePosition(new I(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(t){this._assertNotDisposed();let n=this.validatePosition(t),r=this.getLineContent(n.lineNumber),i=this._getLineTokens(n.lineNumber),a=i.findTokenIndexAtOffset(n.column-1),[o,s]=e._findLanguageBoundaries(i,a),c=re(n.column,this.getLanguageConfiguration(i.getLanguageId(a)).getWordDefinition(),r.substring(o,s),o);if(c&&c.startColumn<=t.column&&t.column<=c.endColumn)return c;if(a>0&&o===n.column-1){let[o,s]=e._findLanguageBoundaries(i,a-1),c=re(n.column,this.getLanguageConfiguration(i.getLanguageId(a-1)).getWordDefinition(),r.substring(o,s),o);if(c&&c.startColumn<=t.column&&t.column<=c.endColumn)return c}return null}static _findLanguageBoundaries(e,t){let n=e.getLanguageId(t),r=0;for(let i=t;i>=0&&e.getLanguageId(i)===n;i--)r=e.getStartOffset(i);let i=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)i=e.getEndOffset(r);return[r,i]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:``,startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),r=this.validatePosition(t),i=this._getLineTokens(r.lineNumber),a=i.getLanguageId(i.findTokenIndexAtOffset(r.column-1)),o=this.getLanguageConfiguration(a).brackets;if(!o)return null;let s=o.textIsBracket[n];return s?QE(this._findMatchingBracketUp(s,r,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,r){let i=t.getCount(),a=t.getLanguageId(r),o=Math.max(0,e.column-1-n.maxBracketLength);for(let e=r-1;e>=0;e--){let n=t.getEndOffset(e);if(n<=o)break;if(md(t.getStandardTokenType(e))||t.getLanguageId(e)!==a){o=n;break}}let s=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let e=r+1;e<i;e++){let n=t.getStartOffset(e);if(n>=s)break;if(md(t.getStandardTokenType(e))||t.getLanguageId(e)!==a){s=n;break}}return{searchStartOffset:o,searchEndOffset:s}}_matchBracket(e){let t=e.lineNumber,n=this._getLineTokens(t),r=this._buffer.getLineContent(t),i=n.findTokenIndexAtOffset(e.column-1);if(i<0)return null;let a=this.getLanguageConfiguration(n.getLanguageId(i)).brackets;if(a&&!md(n.getStandardTokenType(i))){let{searchStartOffset:o,searchEndOffset:s}=this._establishBracketSearchOffsets(e,n,a,i),c=null;for(;;){let n=Ud.findNextBracketInRange(a.forwardRegex,t,r,o,s);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){let e=r.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),t=this._matchFoundBracket(n,a.textIsBracket[e],a.textIsOpenBracket[e],null);if(t){if(t instanceof ZE)return null;c=t}}o=n.endColumn-1}if(c)return c}if(i>0&&n.getStartOffset(i)===e.column-1){let a=i-1,o=this.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(o&&!md(n.getStandardTokenType(a))){let{searchStartOffset:i,searchEndOffset:s}=this._establishBracketSearchOffsets(e,n,o,a),c=Ud.findPrevBracketInRange(o.reversedRegex,t,r,i,s);if(c&&c.startColumn<=e.column&&e.column<=c.endColumn){let e=r.substring(c.startColumn-1,c.endColumn-1).toLowerCase(),t=this._matchFoundBracket(c,o.textIsBracket[e],o.textIsOpenBracket[e],null);if(t)return t instanceof ZE?null:t}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;let i=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return i?i instanceof ZE?i:[e,i]:null}_findMatchingBracketUp(e,t,n){let r=e.languageId,i=e.reversedRegex,a=-1,o=0,s=(t,r,s,c)=>{for(;;){if(n&&++o%100==0&&!n())return ZE.INSTANCE;let l=Ud.findPrevBracketInRange(i,t,r,s,c);if(!l)break;let u=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(u)?a++:e.isClose(u)&&a--,a===0)return l;c=l.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){let n=this._getLineTokens(e),i=n.getCount(),a=this._buffer.getLineContent(e),o=i-1,c=a.length,l=a.length;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1);let u=!0;for(;o>=0;o--){let t=n.getLanguageId(o)===r&&!md(n.getStandardTokenType(o));if(t)u?c=n.getStartOffset(o):(c=n.getStartOffset(o),l=n.getEndOffset(o));else if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}u=t}if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}}return null}_findMatchingBracketDown(e,t,n){let r=e.languageId,i=e.forwardRegex,a=1,o=0,s=(t,r,s,c)=>{for(;;){if(n&&++o%100==0&&!n())return ZE.INSTANCE;let l=Ud.findNextBracketInRange(i,t,r,s,c);if(!l)break;let u=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(u)?a++:e.isClose(u)&&a--,a===0)return l;s=l.endColumn-1}return null},c=this.getLineCount();for(let e=t.lineNumber;e<=c;e++){let n=this._getLineTokens(e),i=n.getCount(),a=this._buffer.getLineContent(e),o=0,c=0,l=0;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1);let u=!0;for(;o<i;o++){let t=n.getLanguageId(o)===r&&!md(n.getStandardTokenType(o));if(t)u||(c=n.getStartOffset(o)),l=n.getEndOffset(o);else if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}u=t}if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}}return null}findPrevBracket(e){let t=this.validatePosition(e),n=null,r=null;for(let e=t.lineNumber;e>=1;e--){let i=this._getLineTokens(e),a=i.getCount(),o=this._buffer.getLineContent(e),s=a-1,c=o.length,l=o.length;if(e===t.lineNumber){s=i.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1;let e=i.getLanguageId(s);n!==e&&(n=e,r=this.getLanguageConfiguration(n).brackets)}let u=!0;for(;s>=0;s--){let t=i.getLanguageId(s);if(n!==t){if(r&&u&&c!==l){let t=Ud.findPrevBracketInRange(r.reversedRegex,e,o,c,l);if(t)return this._toFoundBracket(r,t);u=!1}n=t,r=this.getLanguageConfiguration(n).brackets}let a=!!r&&!md(i.getStandardTokenType(s));if(a)u?c=i.getStartOffset(s):(c=i.getStartOffset(s),l=i.getEndOffset(s));else if(r&&u&&c!==l){let t=Ud.findPrevBracketInRange(r.reversedRegex,e,o,c,l);if(t)return this._toFoundBracket(r,t)}u=a}if(r&&u&&c!==l){let t=Ud.findPrevBracketInRange(r.reversedRegex,e,o,c,l);if(t)return this._toFoundBracket(r,t)}}return null}findNextBracket(e){let t=this.validatePosition(e),n=this.getLineCount(),r=null,i=null;for(let e=t.lineNumber;e<=n;e++){let n=this._getLineTokens(e),a=n.getCount(),o=this._buffer.getLineContent(e),s=0,c=0,l=0;if(e===t.lineNumber){s=n.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1;let e=n.getLanguageId(s);r!==e&&(r=e,i=this.getLanguageConfiguration(r).brackets)}let u=!0;for(;s<a;s++){let t=n.getLanguageId(s);if(r!==t){if(i&&u&&c!==l){let t=Ud.findNextBracketInRange(i.forwardRegex,e,o,c,l);if(t)return this._toFoundBracket(i,t);u=!1}r=t,i=this.getLanguageConfiguration(r).brackets}let a=!!i&&!md(n.getStandardTokenType(s));if(a)u||(c=n.getStartOffset(s)),l=n.getEndOffset(s);else if(i&&u&&c!==l){let t=Ud.findNextBracketInRange(i.forwardRegex,e,o,c,l);if(t)return this._toFoundBracket(i,t)}u=a}if(i&&u&&c!==l){let t=Ud.findNextBracketInRange(i.forwardRegex,e,o,c,l);if(t)return this._toFoundBracket(i,t)}}return null}findEnclosingBrackets(e,t){let n;if(t===void 0)n=null;else{let e=Date.now();n=()=>Date.now()-e<=t}let r=this.validatePosition(e),i=this.getLineCount(),a=new Map,o=[],s=(e,t)=>{if(!a.has(e)){let n=[];for(let e=0,r=t?t.brackets.length:0;e<r;e++)n[e]=0;a.set(e,n)}o=a.get(e)},c=0,l=(e,t,r,i,a)=>{for(;;){if(n&&++c%100==0&&!n())return ZE.INSTANCE;let s=Ud.findNextBracketInRange(e.forwardRegex,t,r,i,a);if(!s)break;let l=r.substring(s.startColumn-1,s.endColumn-1).toLowerCase(),u=e.textIsBracket[l];if(u&&(u.isOpen(l)?o[u.index]++:u.isClose(l)&&o[u.index]--,o[u.index]===-1))return this._matchFoundBracket(s,u,!1,n);i=s.endColumn-1}return null},u=null,d=null;for(let e=r.lineNumber;e<=i;e++){let t=this._getLineTokens(e),n=t.getCount(),i=this._buffer.getLineContent(e),a=0,o=0,c=0;if(e===r.lineNumber){a=t.findTokenIndexAtOffset(r.column-1),o=r.column-1,c=r.column-1;let e=t.getLanguageId(a);u!==e&&(u=e,d=this.getLanguageConfiguration(u).brackets,s(u,d))}let f=!0;for(;a<n;a++){let n=t.getLanguageId(a);if(u!==n){if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return QE(t);f=!1}u=n,d=this.getLanguageConfiguration(u).brackets,s(u,d)}let r=!!d&&!md(t.getStandardTokenType(a));if(r)f||(o=t.getStartOffset(a)),c=t.getEndOffset(a);else if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return QE(t)}f=r}if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return QE(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let r=e.textIsBracket[n];return r?{range:t,open:r.open,close:r.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,r=0,i=e.length;for(;r<i;){let i=e.charCodeAt(r);if(i===32)n++;else if(i===9)n=n-n%t+t;else break;r++}return r===i?-1:n}_computeIndentLevel(t){return e.computeIndentLevel(this._buffer.getLineContent(t+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();let r=this.getLineCount();if(e<1||e>r)throw Error(`Illegal value for lineNumber`);let i=this.getLanguageConfiguration(this._languageId).foldingRules,a=!!(i&&i.offSide),o=-2,s=-1,c=-2,l=-1,u=e=>{if(o!==-1&&(o===-2||o>e-1)){o=-1,s=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,s=e;break}}}if(c===-2){c=-1,l=-1;for(let t=e;t<r;t++){let e=this._computeIndentLevel(t);if(e>=0){c=t,l=e;break}}}},d=-2,f=-1,p=-2,m=-1,h=e=>{if(d===-2){d=-1,f=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){d=t,f=e;break}}}if(p!==-1&&(p===-2||p<e-1)){p=-1,m=-1;for(let t=e;t<r;t++){let e=this._computeIndentLevel(t);if(e>=0){p=t,m=e;break}}}},g=0,_=!0,v=0,y=!0,b=0,x=0;for(let i=0;_||y;i++){let o=e-i,p=e+i;i>1&&(o<1||o<t)&&(_=!1),i>1&&(p>r||p>n)&&(y=!1),i>5e4&&(_=!1,y=!1);let S=-1;if(_){let e=this._computeIndentLevel(o-1);e>=0?(c=o-1,l=e,S=Math.ceil(e/this._options.indentSize)):(u(o),S=this._getIndentLevelForWhitespaceLine(a,s,l))}let C=-1;if(y){let e=this._computeIndentLevel(p-1);e>=0?(d=p-1,f=e,C=Math.ceil(e/this._options.indentSize)):(h(p),C=this._getIndentLevelForWhitespaceLine(a,f,m))}if(i===0){x=S;continue}if(i===1){if(p<=r&&C>=0&&x+1===C){_=!1,g=p,v=p,b=C;continue}if(o>=1&&S>=0&&S-1===x){y=!1,g=o,v=o,b=S;continue}if(g=e,v=e,b=x,b===0)return{startLineNumber:g,endLineNumber:v,indent:b}}_&&(S>=b?g=o:_=!1),y&&(C>=b?v=p:y=!1)}return{startLineNumber:g,endLineNumber:v,indent:b}}getLinesBracketGuides(e,t,n,r){let i=[],a=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new L(e,1,t,this.getLineMaxColumn(t))),o;n&&a.length>0&&(o=Lp(e<=n.lineNumber&&n.lineNumber<=t?a.filter(e=>e.range.containsPosition(n)):this._bracketPairColorizer.getBracketPairsInRange(L.fromPositions(n)),e=>e.range.startLineNumber!==e.range.endLineNumber)?.range);let s=new Yp(a),c=[],l=[],u=new tD;for(let n=e;n<=t;n++){let e=[];l.length>0&&(e=e.concat(l),l.length=0),i.push(e);for(let e of s.takeWhile(e=>e.openingBracketRange.startLineNumber<=n)||[]){if(e.range.startLineNumber===e.range.endLineNumber)continue;let t=Math.min(this.getVisibleColumnFromPosition(e.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition(e.closingBracketRange?.getStartPosition()??e.range.getEndPosition()),e.minVisibleColumnIndentation+1),n=!1;e.closingBracketRange&&vo(this.getLineContent(e.closingBracketRange.startLineNumber))<e.closingBracketRange.startColumn-1&&(n=!0);let r=e.openingBracketRange.getStartPosition(),i=e.closingBracketRange?.getStartPosition()??e.range.getEndPosition();e.closingBracketRange===void 0?c[e.nestingLevel]=null:c[e.nestingLevel]={nestingLevel:e.nestingLevel,guideVisibleColumn:t,start:r,visibleStartColumn:this.getVisibleColumnFromPosition(r),end:i,visibleEndColumn:this.getVisibleColumnFromPosition(i),bracketPair:e,renderHorizontalEndLineAtTheBottom:n}}for(let t of c){if(!t)continue;let i=o&&t.bracketPair.range.equalsRange(o),a=u.getInlineClassNameOfLevel(t.nestingLevel)+(r.highlightActive&&i?` `+u.activeClassName:``);(i&&r.horizontalGuides!==Wc.Disabled||r.includeInactive&&r.horizontalGuides===Wc.Enabled)&&(t.start.lineNumber===n&&t.guideVisibleColumn<t.visibleStartColumn&&e.push(new Gc(t.guideVisibleColumn,a,new Kc(!1,t.start.column))),t.end.lineNumber===n+1&&t.guideVisibleColumn<t.visibleEndColumn&&l.push(new Gc(t.guideVisibleColumn,a,new Kc(!t.renderHorizontalEndLineAtTheBottom,t.end.column))))}let t=2**53-1;for(let i=c.length-1;i>=0;i--){let a=c[i];if(!a)continue;let s=r.highlightActive&&o&&a.bracketPair.range.equalsRange(o),d=u.getInlineClassNameOfLevel(a.nestingLevel)+(s?` `+u.activeClassName:``);(s||r.includeInactive)&&a.renderHorizontalEndLineAtTheBottom&&a.end.lineNumber===n+1&&l.push(new Gc(a.guideVisibleColumn,d,null)),!(a.end.lineNumber<=n||a.start.lineNumber>=n)&&(a.guideVisibleColumn>=t&&!s||(t=a.guideVisibleColumn,(s||r.includeInactive)&&e.push(new Gc(a.guideVisibleColumn,d,null))))}e.sort((e,t)=>e.visibleColumn-t.visibleColumn)}return i}getVisibleColumnFromPosition(e){return aS.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();let n=this.getLineCount();if(e<1||e>n)throw Error(`Illegal value for startLineNumber`);if(t<1||t>n)throw Error(`Illegal value for endLineNumber`);let r=this.getLanguageConfiguration(this._languageId).foldingRules,i=!!(r&&r.offSide),a=Array(t-e+1),o=-2,s=-1,c=-2,l=-1;for(let r=e;r<=t;r++){let t=r-e,u=this._computeIndentLevel(r-1);if(u>=0){o=r-1,s=u,a[t]=Math.ceil(u/this._options.indentSize);continue}if(o===-2){o=-1,s=-1;for(let e=r-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){o=e,s=t;break}}}if(c!==-1&&(c===-2||c<r-1)){c=-1,l=-1;for(let e=r;e<n;e++){let t=this._computeIndentLevel(e);if(t>=0){c=e,l=t;break}}}a[t]=this._getIndentLevelForWhitespaceLine(i,s,l)}return a}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n||e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return eD(this.getLineContent(e))+1}};$E.MODEL_SYNC_LIMIT=50*1024*1024,$E.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,$E.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,$E.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:it.tabSize,indentSize:it.indentSize,insertSpaces:it.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:it.trimAutoWhitespace,largeFileOptimizations:it.largeFileOptimizations,bracketPairColorizationOptions:it.bracketPairColorizationOptions},$E=HE([UE(4,Mx),UE(5,Hu),UE(6,kf)],$E);function eD(e){let t=0;for(let n of e)if(n===` `||n===`	`)t++;else break;return t}var tD=class{constructor(){this.activeClassName=`indent-active`}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};function nD(e){return!!(e.options.overviewRuler&&e.options.overviewRuler.color)}function rD(e){return!!e.options.after||!!e.options.before}var iD=class{constructor(){this._decorationsTree0=new $y,this._decorationsTree1=new $y,this._injectedTextDecorationsTree=new $y}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,i){let a=e.getVersionId(),o=this._intervalSearch(t,n,r,i,a);return this._ensureNodesHaveRanges(e,o)}_intervalSearch(e,t,n,r,i){let a=this._decorationsTree0.intervalSearch(e,t,n,r,i),o=this._decorationsTree1.intervalSearch(e,t,n,r,i),s=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,i);return a.concat(o).concat(s)}getInjectedTextInInterval(e,t,n,r){let i=e.getVersionId(),a=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,i);return this._ensureNodesHaveRanges(e,a).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,r).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAll(e,t,n,r){let i=e.getVersionId(),a=this._search(t,n,r,i);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,r){if(n)return this._decorationsTree1.search(e,t,r);{let n=this._decorationsTree0.search(e,t,r),i=this._decorationsTree1.search(e,t,r),a=this._injectedTextDecorationsTree.search(e,t,r);return n.concat(i).concat(a)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){rD(e)?this._injectedTextDecorationsTree.insert(e):nD(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){rD(e)?this._injectedTextDecorationsTree.delete(e):nD(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){rD(e)?this._injectedTextDecorationsTree.resolveNode(e,t):nD(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}};function aD(e){return e.replace(/[^a-z0-9\-_]/gi,` `)}var oD=class{constructor(e){this.color=e.color||``,this.darkColor=e.darkColor||``}},sD=class extends oD{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position==`number`?e.position:Bc.Center}getColor(e){return this._resolvedColor||(e.type!==`light`&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e==`string`)return e;let n=e?t.getColor(e.id):null;return n?n.toString():``}},cD=class extends oD{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!==`light`&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e==`string`?J.fromHex(e):t.getColor(e.id)}},lD=class e{constructor(e){this.content=e.content||``,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(t){return t instanceof e?t:new e(t)}},uD=class e{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?aD(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new sD(e.overviewRuler):null,this.minimap=e.minimap?new cD(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?aD(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?aD(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?aD(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?aD(e.marginClassName):null,this.inlineClassName=e.inlineClassName?aD(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?aD(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?aD(e.afterContentClassName):null,this.after=e.after?lD.from(e.after):null,this.before=e.before?lD.from(e.before):null}static register(t){return new e(t)}static createDynamic(t){return new e(t)}};uD.EMPTY=uD.register({description:`empty`});var dD=[uD.register({description:`tracked-range-always-grows-when-typing-at-edges`,stickiness:0}),uD.register({description:`tracked-range-never-grows-when-typing-at-edges`,stickiness:1}),uD.register({description:`tracked-range-grows-only-when-typing-before`,stickiness:2}),uD.register({description:`tracked-range-grows-only-when-typing-after`,stickiness:3})];function fD(e){return e instanceof uD?e:uD.createDynamic(e)}var pD=class extends j{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new N),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);let e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||=new Set,this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!(e.minimap&&e.minimap.position),this._affectsOverviewRuler||=!!(e.overviewRuler&&e.overviewRuler.color),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}},mD=class extends j{constructor(){super(),this._fastEmitter=this._register(new N),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new N),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}},hD=()=>!0,gD=()=>!1,_D=e=>e===` `||e===`	`,vD=class e{constructor(t,n,r){this._cursorMoveConfigurationBrand=void 0,this._languageId=t;let i=r.options,a=i.get(129);this.readOnly=i.get(80),this.tabSize=n.tabSize,this.indentSize=n.indentSize,this.insertSpaces=n.insertSpaces,this.stickyTabStops=i.get(103),this.lineHeight=i.get(58),this.pageSize=Math.max(1,Math.floor(a.height/this.lineHeight)-2),this.useTabStops=i.get(114),this.wordSeparators=i.get(115),this.emptySelectionClipboard=i.get(32),this.copyWithSyntaxHighlighting=i.get(21),this.multiCursorMergeOverlapping=i.get(68),this.multiCursorPaste=i.get(70),this.autoClosingBrackets=i.get(5),this.autoClosingQuotes=i.get(8),this.autoClosingDelete=i.get(6),this.autoClosingOvertype=i.get(7),this.autoSurround=i.get(11),this.autoIndent=i.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:e._getShouldAutoClose(t,this.autoClosingQuotes),bracket:e._getShouldAutoClose(t,this.autoClosingBrackets)},this.autoClosingPairs=If.getAutoClosingPairs(t);let o=e._getSurroundingPairs(t);if(o)for(let e of o)this.surroundingPairs[e.open]=e.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let t=e._getElectricCharacters(this._languageId);if(t)for(let e of t)this._electricChars[e]=!0}return this._electricChars}normalizeIndentation(e){return $E.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return If.getElectricCharacters(e)}catch(e){return ct(e),null}}static _getShouldAutoClose(t,n){switch(n){case`beforeWhitespace`:return _D;case`languageDefined`:return e._getLanguageDefinedShouldAutoClose(t);case`always`:return hD;case`never`:return gD}}static _getLanguageDefinedShouldAutoClose(e){try{let t=If.getAutoCloseBeforeSet(e);return e=>t.indexOf(e)!==-1}catch(e){return ct(e),gD}}static _getSurroundingPairs(e){try{return If.getSurroundingPairs(e)}catch(e){return ct(e),null}}},yD=class e{constructor(t,n,r,i){this._singleCursorStateBrand=void 0,this.selectionStart=t,this.selectionStartLeftoverVisibleColumns=n,this.position=r,this.leftoverVisibleColumns=i,this.selection=e._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(t,n,r,i){return t?new e(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new I(n,r),i):new e(new L(n,r,n,r),i,new I(n,r),i)}static _computeSelection(e,t){let n,r,i,a;return e.isEmpty()?(n=e.startLineNumber,r=e.startColumn,i=t.lineNumber,a=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,r=e.endColumn,i=t.lineNumber,a=t.column):(n=e.startLineNumber,r=e.startColumn,i=t.lineNumber,a=t.column),new $n(n,r,i,a)}},bD=class{constructor(e,t,n,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=r}},xD=class{constructor(e){this.modelState=e,this.viewState=null}},SD=class{constructor(e){this.modelState=null,this.viewState=e}},X=class e{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new xD(e)}static fromViewState(e){return new SD(e)}static fromModelSelection(t){let n=t.selectionStartLineNumber,r=t.selectionStartColumn,i=t.positionLineNumber,a=t.positionColumn,o=new yD(new L(n,r,n,r),0,new I(i,a),0);return e.fromModelState(o)}static fromModelSelections(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},CD=class{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}};function wD(e){return e===`'`||e===`"`||e==="`"}var TD=class e{static whitespaceVisibleColumn(e,t,n){let r=e.length,i=0,a=-1,o=-1;for(let s=0;s<r;s++){if(s===t)return[a,o,i];switch(i%n===0&&(a=s,o=i),e.charCodeAt(s)){case 32:i+=1;break;case 9:i=aS.nextRenderTabStop(i,n);break;default:return[-1,-1,-1]}}return t===r?[a,o,i]:[-1,-1,-1]}static atomicPosition(t,n,r,i){let a=t.length,[o,s,c]=e.whitespaceVisibleColumn(t,n,r);if(c===-1)return-1;let l;switch(i){case 0:l=!0;break;case 1:l=!1;break;case 2:if(c%r===0)return n;l=c%r<=r/2;break}if(l){if(o===-1)return-1;let e=s;for(let n=o;n<a;++n){if(e===s+r)return o;switch(t.charCodeAt(n)){case 32:e+=1;break;case 9:e=aS.nextRenderTabStop(e,r);break;default:return-1}}return e===s+r?o:-1}let u=aS.nextRenderTabStop(c,r),d=c;for(let e=n;e<a;e++){if(d===u)return e;switch(t.charCodeAt(e)){case 32:d+=1;break;case 9:d=aS.nextRenderTabStop(d,r);break;default:return-1}}return d===u?a:-1}},ED=class{constructor(e=null){this.hitTarget=e,this.type=0}},DD=class{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}},OD;(function(e){function t(e,t,n){let r=e.getPositionFromDOMInfo(t,n);return r?new DD(r,t,null):new ED(t)}e.createFromDOMInfo=t})(OD||={});var kD=class{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}},AD=class e{constructor(e,t,n=0,r=null,i=null,a=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,!i&&r&&(i=new L(r.lineNumber,r.column,r.lineNumber,r.column)),this.range=i,this.detail=a}static _typeToString(e){return e===1?`TEXTAREA`:e===2?`GUTTER_GLYPH_MARGIN`:e===3?`GUTTER_LINE_NUMBERS`:e===4?`GUTTER_LINE_DECORATIONS`:e===5?`GUTTER_VIEW_ZONE`:e===6?`CONTENT_TEXT`:e===7?`CONTENT_EMPTY`:e===8?`CONTENT_VIEW_ZONE`:e===9?`CONTENT_WIDGET`:e===10?`OVERVIEW_RULER`:e===11?`SCROLLBAR`:e===12?`OVERLAY_WIDGET`:`UNKNOWN`}static toString(e){return this._typeToString(e.type)+`: `+e.position+` - `+e.range+` - `+e.detail}toString(){return e.toString(this)}},jD=class{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}},MD=class e{constructor(e,t,n){this.model=e.model;let r=e.configuration.options;this.layoutInfo=r.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(58),this.stickyTabStops=r.get(103),this.typicalHalfwidthCharacterWidth=r.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(t){return e.getZoneAtCoord(this._context,t)}static getZoneAtCoord(e,t){let n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){let r=n.verticalOffset+n.height/2,i=e.model.getLineCount(),a=null,o,s=null;return n.afterLineNumber!==i&&(s=new I(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(a=new I(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),o=s===null?a:a===null?s:t<r?a:s,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:a,positionAfter:s,position:o}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let e=this._context.model.getLineCount(),t=this._context.model.getLineMaxColumn(e);return{range:new L(e,t,e,t),isAfterLines:!0}}let t=this._context.viewLayout.getLineNumberAtVerticalOffset(e);return{range:new L(t,1,t,this._context.model.getLineMaxColumn(t)),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(t,n){return e._findAttribute(t,n,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}},ND=class{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,LD._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}},PD=class e extends ND{constructor(e,t,n,r){super(e,t,n),this._ctx=e,r?(this.target=r,this.targetPath=cy.collect(r,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array)}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,r=null){let i=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(i=aS.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new AD(this.target,e,i,t,n,r)}withTarget(t){return new e(this._ctx,this.editorPos,this.pos,t)}},FD={isAfterLines:!0};function ID(e){return{isAfterLines:!1,horizontalDistanceToText:e}}var LD=class e{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){let t=e.target,n=cy.collect(t,this._viewHelper.viewDomNode);return!!(jD.isChildOfContentWidgets(n)||jD.isChildOfOverflowingContentWidgets(n)||jD.isChildOfOverlayWidgets(n))}createMouseTarget(t,n,r,i){let a=new MD(this._context,this._viewHelper,t),o=new PD(a,n,r,i);try{return e._createMouseTarget(a,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(t,n,r){if(n.target===null){if(r)return n.fulfill(0);let i=e._doHitTest(t,n);return i.type===1?e.createMouseTargetFromHitTestPosition(t,n,i.spanNode,i.position,i.injectedText):this._createMouseTarget(t,n.withTarget(i.hitTarget),!0)}let i=n,a=null;return a||=e._hitTestContentWidget(t,i),a||=e._hitTestOverlayWidget(t,i),a||=e._hitTestMinimap(t,i),a||=e._hitTestScrollbarSlider(t,i),a||=e._hitTestViewZone(t,i),a||=e._hitTestMargin(t,i),a||=e._hitTestViewCursor(t,i),a||=e._hitTestTextArea(t,i),a||=e._hitTestViewLines(t,i,r),a||=e._hitTestScrollbar(t,i),a||n.fulfill(0)}static _hitTestContentWidget(e,t){if(jD.isChildOfContentWidgets(t.targetPath)||jD.isChildOfOverflowingContentWidgets(t.targetPath)){let n=e.findAttribute(t.target,`widgetId`);return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(jD.isChildOfOverlayWidgets(t.targetPath)){let n=e.findAttribute(t.target,`widgetId`);return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){let n=e.lastRenderData.lastViewCursorsRenderData;for(let e of n)if(t.target===e.domNode)return t.fulfill(6,e.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){let n=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,i=t.mouseVerticalOffset;for(let a of n){if(r<a.contentLeft||r>a.contentLeft+a.width)continue;let n=e.getVerticalOffsetForLineNumber(a.position.lineNumber);if(n<=i&&i<=n+a.height)return t.fulfill(6,a.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){let n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){let e=t.isInContentArea?8:5;return t.fulfill(e,n.position,null,n)}return null}static _hitTestTextArea(e,t){return jD.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){let n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=n.range.getStartPosition(),i=Math.abs(t.pos.x-t.editorPos.x),a={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:i};return i-=e.layoutInfo.glyphMarginLeft,i<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,r,n.range,a):(i-=e.layoutInfo.glyphMarginWidth,i<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,r,n.range,a):(i-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,r,n.range,a)))}return null}static _hitTestViewLines(t,n,r){if(!jD.isChildOfViewLines(n.targetPath))return null;if(t.isInTopPadding(n.mouseVerticalOffset))return n.fulfill(7,new I(1,1),null,FD);if(t.isAfterLines(n.mouseVerticalOffset)||t.isInBottomPadding(n.mouseVerticalOffset)){let e=t.model.getLineCount(),r=t.model.getLineMaxColumn(e);return n.fulfill(7,new I(e,r),null,FD)}if(r){if(jD.isStrictChildOfViewLines(n.targetPath)){let e=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset);if(t.model.getLineLength(e)===0){let r=t.getLineWidth(e),i=ID(n.mouseContentHorizontalOffset-r);return n.fulfill(7,new I(e,1),null,i)}let r=t.getLineWidth(e);if(n.mouseContentHorizontalOffset>=r){let i=ID(n.mouseContentHorizontalOffset-r),a=new I(e,t.model.getLineMaxColumn(e));return n.fulfill(7,a,null,i)}}return n.fulfill(0)}let i=e._doHitTest(t,n);return i.type===1?e.createMouseTargetFromHitTestPosition(t,n,i.spanNode,i.position,i.injectedText):this._createMouseTarget(t,n.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(jD.isChildOfMinimap(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new I(n,r))}return null}static _hitTestScrollbarSlider(e,t){if(jD.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){let n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new I(n,r))}}return null}static _hitTestScrollbar(e,t){if(jD.isChildOfScrollableElement(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new I(n,r))}return null}getMouseColumn(t,n){let r=this._context.configuration.options,i=r.get(129),a=this._context.viewLayout.getCurrentScrollLeft()+n.x-t.x-i.contentLeft;return e._getMouseColumn(a,r.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,r,i){let a=r.lineNumber,o=r.column,s=e.getLineWidth(a);if(t.mouseContentHorizontalOffset>s){let e=ID(t.mouseContentHorizontalOffset-s);return t.fulfill(7,r,null,e)}let c=e.visibleRangeForPosition(a,o);if(!c)return t.fulfill(0,r);let l=c.left;if(t.mouseContentHorizontalOffset===l)return t.fulfill(6,r,null,{mightBeForeignElement:!!i});let u=[];if(u.push({offset:c.left,column:o}),o>1){let t=e.visibleRangeForPosition(a,o-1);t&&u.push({offset:t.left,column:o-1})}if(o<e.model.getLineMaxColumn(a)){let t=e.visibleRangeForPosition(a,o+1);t&&u.push({offset:t.left,column:o+1})}u.sort((e,t)=>e.offset-t.offset);let d=t.pos.toClientCoordinates(),f=n.getBoundingClientRect(),p=f.left<=d.clientX&&d.clientX<=f.right;for(let e=1;e<u.length;e++){let n=u[e-1],o=u[e];if(n.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=o.offset){let e=new L(a,n.column,a,o.column);return t.fulfill(6,r,e,{mightBeForeignElement:!p||!!i})}}return t.fulfill(6,r,null,{mightBeForeignElement:!p||!!i})}static _doHitTestWithCaretRangeFromPoint(e,t){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2),i=t.pos.y+(r-t.mouseVerticalOffset);i<=t.editorPos.y&&(i=t.editorPos.y+1),i>=t.editorPos.y+e.layoutInfo.height&&(i=t.editorPos.y+e.layoutInfo.height-1);let a=new Qv(t.pos.x,i),o=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return o.type===1?o:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){let n=Oa(e.viewDomNode),r;if(r=n?n.caretRangeFromPoint===void 0?RD(n,t.clientX,t.clientY):n.caretRangeFromPoint(t.clientX,t.clientY):document.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new ED;let i=r.startContainer;if(i.nodeType===i.TEXT_NODE){let t=i.parentNode,n=t?t.parentNode:null,a=n?n.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===xy.CLASS_NAME?OD.createFromDOMInfo(e,t,r.startOffset):new ED(i.parentNode)}else if(i.nodeType===i.ELEMENT_NODE){let t=i.parentNode,n=t?t.parentNode:null;return(n&&n.nodeType===n.ELEMENT_NODE?n.className:null)===xy.CLASS_NAME?OD.createFromDOMInfo(e,i,i.textContent.length):new ED(i)}return new ED}static _doHitTestWithCaretPositionFromPoint(e,t){let n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){let t=n.offsetNode.parentNode,r=t?t.parentNode:null,i=r?r.parentNode:null;return(i&&i.nodeType===i.ELEMENT_NODE?i.className:null)===xy.CLASS_NAME?OD.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new ED(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){let t=n.offsetNode.parentNode,r=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,i=t?t.parentNode:null,a=i&&i.nodeType===i.ELEMENT_NODE?i.className:null;if(r===xy.CLASS_NAME){let t=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(t)return OD.createFromDOMInfo(e,t,0)}else if(a===xy.CLASS_NAME)return OD.createFromDOMInfo(e,n.offsetNode,0)}return new ED(n.offsetNode)}static _snapToSoftTabBoundary(e,t){let n=t.getLineContent(e.lineNumber),{tabSize:r}=t.getTextModelOptions(),i=TD.atomicPosition(n,e.column-1,r,2);return i===-1?e:new I(e.lineNumber,i+1)}static _doHitTest(e,t){let n=new ED;if(typeof document.caretRangeFromPoint==`function`?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){let t=e.model.getInjectedTextAt(n.position),r=e.model.normalizePosition(n.position,2);(t||!r.equals(n.position))&&(n=new DD(r,n.spanNode,t))}return n.type===1&&e.stickyTabStops&&(n=new DD(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}};function RD(e,t,n){let r=document.createRange(),i=e.elementFromPoint(t,n);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;let e=i.getBoundingClientRect(),n=window.getComputedStyle(i,null).getPropertyValue(`font`),a=i.innerText,o=e.left,s=0,c;if(t>e.left+e.width)s=a.length;else{let e=zD.getInstance();for(let r=0;r<a.length+1;r++){if(c=e.getCharWidth(a.charAt(r),n)/2,o+=c,t<o){s=r;break}o+=c}}r.setStart(i.firstChild,s),r.setEnd(i.firstChild,s)}return r}var zD=class e{constructor(){this._cache={},this._canvas=document.createElement(`canvas`)}static getInstance(){return e._INSTANCE||=new e,e._INSTANCE}getCharWidth(e,t){let n=e+t;if(this._cache[n])return this._cache[n];let r=this._canvas.getContext(`2d`);r.font=t;let i=r.measureText(e).width;return this._cache[n]=i,i}};zD._INSTANCE=null;function BD(e){return function(t,n){let r=!1;return e&&(r=e.mouseTargetIsWidget(n)),r||n.preventDefault(),n}}var VD=class e extends oy{constructor(t,n,r){super(),this._context=t,this.viewController=n,this.viewHelper=r,this.mouseTargetFactory=new LD(this._context,r),this._mouseDownOperation=this._register(new HD(this._context,this.viewController,this.viewHelper,(e,t)=>this._createMouseTarget(e,t),e=>this._getMouseColumn(e))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;let i=new ry(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,e=>this._onContextMenu(e,!0))),this._register(i.onMouseMoveThrottled(this.viewHelper.viewDomNode,e=>this._onMouseMove(e),BD(this.mouseTargetFactory),e.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onMouseUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,e=>this._onMouseDown(e))),this._register(R(this.viewHelper.viewDomNode,z.MOUSE_WHEEL,e=>{if(this.viewController.emitMouseWheel(e),!this._context.configuration.options.get(67))return;let t=new wi(e);if(p?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey){let e=Nc.getZoomLevel(),n=t.deltaY>0?1:-1;Nc.setZoomLevel(e+n),t.preventDefault(),t.stopPropagation()}},{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){let e=this._context.configuration.options.get(129).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){let n=new $v(e,t).toPageCoordinates(),r=ty(this.viewHelper.viewDomNode);return n.y<r.y||n.y>r.y+r.height||n.x<r.x||n.x>r.x+r.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,n,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){let t=Oa(this.viewHelper.viewDomNode);t&&(n=t.elementsFromPoint(e.posx,e.posy).find(e=>this.viewHelper.viewDomNode.contains(e)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){let t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,r=t.type===2||t.type===3||t.type===4,i=t.type===3,a=this._context.configuration.options.get(97),o=t.type===8||t.type===5,s=t.type===9,c=e.leftButton||e.middleButton;p&&e.leftButton&&e.ctrlKey&&(c=!1);let l=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(n||i&&a))l(),this._mouseDownOperation.start(t.type,e);else if(r)e.preventDefault();else if(o){let n=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(n.viewZoneId)&&(l(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else s&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(l(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}};VD.MOUSE_MOVE_MINIMUM_TIME=100;var HD=class extends j{constructor(e,t,n,r,i){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=r,this._getMouseColumn=i,this._mouseMoveMonitor=this._register(new ay(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Fi),this._mouseState=new UD,this._currentSelection=new $n(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);let t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);let n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;let r=this._context.configuration.options;if(!r.get(80)&&r.get(31)&&!r.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,BD(null),e=>this._onMouseDownThenMove(e),e=>{let t=this._findMousePosition(this._lastMouseEvent,!0);e&&e instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,BD(null),e=>this._onMouseDownThenMove(e),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;let e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){let t=e.editorPos,n=this._context.model,r=this._context.viewLayout,i=this._getMouseColumn(e);if(e.posy<t.y){let n=Math.max(r.getCurrentScrollTop()-(t.y-e.posy),0),a=MD.getZoneAtCoord(this._context,n);if(a){let e=this._helpPositionJumpOverViewZone(a);if(e)return new AD(null,13,i,e)}return new AD(null,13,i,new I(r.getLineNumberAtVerticalOffset(n),1))}if(e.posy>t.y+t.height){let a=r.getCurrentScrollTop()+(e.posy-t.y),o=MD.getZoneAtCoord(this._context,a);if(o){let e=this._helpPositionJumpOverViewZone(o);if(e)return new AD(null,13,i,e)}let s=r.getLineNumberAtVerticalOffset(a);return new AD(null,13,i,new I(s,n.getLineMaxColumn(s)))}let a=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new AD(null,13,i,new I(a,1)):e.posx>t.x+t.width?new AD(null,13,i,new I(a,n.getLineMaxColumn(a))):null}_findMousePosition(e,t){let n=this._getPositionOutsideEditor(e);if(n)return n;let r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){let e=this._helpPositionJumpOverViewZone(r.detail);if(e)return new AD(r.element,r.type,r.mouseColumn,e,null,r.detail)}return r}_helpPositionJumpOverViewZone(e){let t=new I(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,r=e.positionAfter;return n&&r?n.isBefore(t)?n:r:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}},UD=class e{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(t,n){let r=new Date().getTime();r-this._lastSetMouseDownCountTime>e.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=r,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(n)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=n,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)}};UD.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var WD;(function(e){e.text=`text/plain`,e.binary=`application/octet-stream`,e.unknown=`application/unknown`,e.markdown=`text/markdown`,e.latex=`text/latex`})(WD||={});var GD=[],KD=[],qD=[];function JD(e,t=!1){let n=YD(e);GD.push(n),n.userConfigured?qD.push(n):KD.push(n),t&&!n.userConfigured&&GD.forEach(e=>{e.mime===n.mime||e.userConfigured||(n.extension&&e.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&e.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&e.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&e.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function YD(e){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:e.userConfigured,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?Pl(e.filepattern.toLowerCase()):void 0,filepatternOnPath:e.filepattern?e.filepattern.indexOf(En.sep)>=0:!1}}function XD(e){e?(GD=GD.filter(e=>!e.userConfigured),qD=[]):(GD=[],KD=[],qD=[])}function ZD(e,t){let n;if(e)switch(e.scheme){case Vi.file:n=e.fsPath;break;case Vi.data:n=Ws.parseMetaData(e).get(Ws.META_DATA_LABEL);break;default:n=e.path}if(!n)return[WD.unknown];n=n.toLowerCase();let r=jn(n),i=QD(n,r,qD);if(i)return[i,WD.text];let a=QD(n,r,KD);if(a)return[a,WD.text];if(t){let e=$D(t);if(e)return[e,WD.text]}return[WD.unknown]}function QD(e,t,n){let r=null,i=null,a=null;for(let o=n.length-1;o>=0;o--){let s=n[o];if(t===s.filenameLowercase){r=s;break}if(s.filepattern&&(!i||s.filepattern.length>i.filepattern.length)){let n=s.filepatternOnPath?e:t;s.filepatternLowercase?.call(s,n)&&(i=s)}s.extension&&(!a||s.extension.length>a.extension.length)&&t.endsWith(s.extensionLowercase)&&(a=s)}return r?r.mime:i?i.mime:a?a.mime:null}function $D(e){if(Yo(e)&&(e=e.substr(1)),e.length>0)for(let t=GD.length-1;t>=0;t--){let n=GD[t];if(!n.firstline)continue;let r=e.match(n.firstline);if(r&&r.length>0)return n.mime}return null}var eO=class e{constructor(e,t,n,r,i){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=r,this.selectionEndPosition=i}toString(){return`[ <`+this.value+`>, selectionStart: `+this.selectionStart+`, selectionEnd: `+this.selectionEnd+`]`}static readFromTextArea(t){return new e(t.getValue(),t.getSelectionStart(),t.getSelectionEnd(),null,null)}collapseSelection(){return new e(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){let t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,t,-1)}if(e>=this.selectionEnd){let t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,t,1)}let t=this.value.substring(this.selectionStart,e);if(t.indexOf(``)===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);let n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let r=0,i=-1;for(;(i=t.indexOf(`
`,i+1))!==-1;)r++;return[e,n*t.length,r]}static selectedText(t){return new e(t,0,t.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:``,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let r=e.value,i=e.selectionStart,a=e.selectionEnd,o=t.value,s=t.selectionStart,c=t.selectionEnd,l=Ao(r.substring(a),o.substring(c));o=o.substring(0,o.length-l),r=r.substring(0,r.length-l);let u=r.substring(0,i),d=ko(u,o.substring(0,s));if(o=o.substring(d),r=r.substring(d),s-=d,i-=d,c-=d,a-=d,n&&s===c&&r.length>0){let e=null;if(s===o.length?o.startsWith(r)&&(e=o.substring(r.length)):o.endsWith(r)&&(e=o.substring(0,o.length-r.length)),e!==null&&e.length>0&&(/\uFE0F/.test(e)||Vo(e)))return{text:e,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(s===c){if(r===o&&i===0&&a===r.length&&s===o.length&&o.indexOf(`
`)===-1&&Ko(o))return{text:``,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let e=u.length-d;return{text:o,replacePrevCharCnt:e,replaceNextCharCnt:0,positionDelta:0}}let f=a-i;return{text:o,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:``,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:``,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};let n=Math.min(ko(e.value,t.value),e.selectionEnd),r=Math.min(Ao(e.value,t.value),e.value.length-e.selectionEnd),i=e.value.substring(n,e.value.length-r),a=t.value.substring(n,t.value.length-r);e.selectionStart-n;let o=e.selectionEnd-n;t.selectionStart-n;let s=t.selectionEnd-n;return{text:a,replacePrevCharCnt:o,replaceNextCharCnt:i.length-o,positionDelta:s-a.length}}};eO.EMPTY=new eO(``,0,0,null,null);var tO=class e{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){let n=e*t;return new L(n+1,1,n+t+1,1)}static fromEditorSelection(t,n,r,i,a){let o=e._getPageOfLine(r.startLineNumber,i),s=e._getRangeForPage(o,i),c=e._getPageOfLine(r.endLineNumber,i),l=e._getRangeForPage(c,i),u=s.intersectRanges(new L(1,1,r.startLineNumber,r.startColumn)),d=n.getValueInRange(u,1),f=n.getLineCount(),p=n.getLineMaxColumn(f),m=l.intersectRanges(new L(r.endLineNumber,r.endColumn,f,p)),h=n.getValueInRange(m,1),g;if(o===c||o+1===c)g=n.getValueInRange(r,1);else{let e=s.intersectRanges(r),t=l.intersectRanges(r);g=n.getValueInRange(e,1)+``+n.getValueInRange(t,1)}return a&&(d.length>500&&(d=d.substring(d.length-500,d.length)),h.length>500&&(h=h.substring(0,500)),g.length>2*500&&(g=g.substring(0,500)+``+g.substring(g.length-500,g.length))),new eO(d+g+h,d.length,d.length+g.length,new I(r.startLineNumber,r.startColumn),new I(r.endLineNumber,r.endColumn))}},nO;(function(e){e.Tap=`-monaco-textarea-synthetic-tap`})(nO||={});const rO={forceCopyWithSyntaxHighlighting:!1};var iO=class{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};iO.INSTANCE=new iO;var aO=class extends j{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new N),this.onFocus=this._onFocus.event,this._onBlur=this._register(new N),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new N),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new N),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new N),this.onCut=this._onCut.event,this._onPaste=this._register(new N),this.onPaste=this._onPaste.event,this._onType=this._register(new N),this.onType=this._onType.event,this._onCompositionStart=this._register(new N),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new N),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new N),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new N),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new sO(t)),this._asyncTriggerCut=this._register(new Li(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Li(()=>this.writeScreenReaderContent(`asyncFocusGain`),0)),this._textAreaState=eO.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent(`ctor`),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let n=null;this._register(Xi(t.domNode,`keydown`,e=>{(e.keyCode===109||this._isDoingComposition&&e.keyCode===1)&&e.stopPropagation(),e.equals(9)&&e.preventDefault(),n=e,this._onKeyDown.fire(e)})),this._register(Xi(t.domNode,`keyup`,e=>{this._onKeyUp.fire(e)})),this._register(R(t.domNode,`compositionstart`,e=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,p&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&(n&&n.equals(109)&&(n.code===`ArrowRight`||n.code===`ArrowLeft`)||$r)){this._textAreaState=new eO(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new I(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(ii){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState(`compositionstart`,eO.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));let r=e=>{let t=this._textAreaState,n=eO.readFromTextArea(this._textArea);return[n,eO.deduceInput(t,n,e)]},i=()=>{let e=this._textAreaState,t=eO.readFromTextArea(this._textArea);return[t,eO.deduceAndroidCompositionInput(e,t)]},a=e=>{let t=this._textAreaState,n=eO.selectedText(e);return[n,{text:n.value,replacePrevCharCnt:t.selectionEnd-t.selectionStart,replaceNextCharCnt:0,positionDelta:0}]};this._register(R(t.domNode,`compositionupdate`,e=>{if(ii){let[t,n]=i();this._textAreaState=t,this._onType.fire(n),this._onCompositionUpdate.fire(e);return}let[t,n]=a(e.data||``);this._textAreaState=t,this._onType.fire(n),this._onCompositionUpdate.fire(e)})),this._register(R(t.domNode,`compositionend`,e=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,ii){let[e,t]=i();this._textAreaState=e,this._onType.fire(t),this._onCompositionEnd.fire();return}let[t,n]=a(e.data||``);this._textAreaState=t,this._onType.fire(n),(ti||$r)&&(this._textAreaState=eO.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(R(t.domNode,`input`,()=>{if(this._textArea.setIgnoreSelectionChangeTime(`received input event`),this._isDoingComposition)return;let[e,t]=r(p);t.replacePrevCharCnt===0&&t.text.length===1&&jo(t.text.charCodeAt(0))||(this._textAreaState=e,this._nextCommand===0?(t.text!==``||t.replacePrevCharCnt!==0)&&this._onType.fire(t):((t.text!==``||t.replacePrevCharCnt!==0)&&this._firePaste(t.text,null),this._nextCommand=0))})),this._register(R(t.domNode,`cut`,e=>{this._textArea.setIgnoreSelectionChangeTime(`received cut event`),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()})),this._register(R(t.domNode,`copy`,e=>{this._ensureClipboardGetsEditorSelection(e)})),this._register(R(t.domNode,`paste`,e=>{if(this._textArea.setIgnoreSelectionChangeTime(`received paste event`),oO.canUseTextData(e)){let[t,n]=oO.getTextData(e);t!==``&&this._firePaste(t,n)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState(`paste`,eO.EMPTY),this._nextCommand=1})),this._register(R(t.domNode,`focus`,()=>{let e=this._hasFocus;this._setHasFocus(!0),ni&&!e&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(R(t.domNode,`blur`,()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent(`blurWithoutCompositionEnd`),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(R(t.domNode,nO.Tap,()=>{ii&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent(`tapWithoutCompositionEnd`),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return R(document,`selectionchange`,t=>{if(!this._hasFocus||this._isDoingComposition||!ti)return;let n=Date.now(),r=n-e;if(e=n,r<5)return;let i=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),i<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;let a=this._textArea.getValue();if(this._textAreaState.value!==a)return;let o=this._textArea.getSelectionStart(),s=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===o&&this._textAreaState.selectionEnd===s)return;let c=this._textAreaState.deduceEditorPosition(o),l=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(s),d=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new $n(l.lineNumber,l.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&=(this._selectionChangeListener.dispose(),null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){let e=Oa(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):Ki(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&=(this._selectionChangeListener.dispose(),null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent(`focusgain`),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){let t=this._host.getDataToCopy(oO.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(iO.INSTANCE.set($r?t.text.replace(/\r\n/g,`
`):t.text,n),!oO.canUseTextData(e)){this._setAndWriteTextAreaState(`copy or cut`,eO.selectedText(t.text));return}oO.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||=iO.INSTANCE.get(e),this._onPaste.fire({text:e,metadata:t})}},oO=class{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();let t=e.clipboardData.getData(WD.text),n=null,r=e.clipboardData.getData(`vscode-editor-data`);if(typeof r==`string`)try{n=JSON.parse(r),n.version!==1&&(n=null)}catch{}return[t,n]}throw Error(`ClipboardEventUtils.getTextData: Cannot use text data!`)}static setTextData(e,t,n,r){if(e.clipboardData){e.clipboardData.setData(WD.text,t),typeof n==`string`&&e.clipboardData.setData(`text/html`,n),e.clipboardData.setData(`vscode-editor-data`,JSON.stringify(r)),e.preventDefault();return}throw Error(`ClipboardEventUtils.setTextData: Cannot use text data!`)}},sO=class extends j{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){let n=this._actual.domNode;n.value!==t&&(this.setIgnoreSelectionChangeTime(`setValue`),n.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection===`backward`?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection===`backward`?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,n){let r=this._actual.domNode,i=null,a=Oa(r);i=a?a.activeElement:document.activeElement;let o=i===r,s=r.selectionStart,c=r.selectionEnd;if(o&&s===t&&c===n){$r&&window.parent!==window&&r.focus();return}if(o){this.setIgnoreSelectionChangeTime(`setSelectionRange`),r.setSelectionRange(t,n),$r&&window.parent!==window&&r.focus();return}try{let e=Ra(r);this.setIgnoreSelectionChangeTime(`setSelectionRange`),r.focus(),r.setSelectionRange(t,n),za(r,e)}catch{}}},cO=class extends VD{constructor(e,t,n){super(e,t,n),this._register(Yv.addTarget(this.viewHelper.linesContentDomNode)),this._register(R(this.viewHelper.linesContentDomNode,Jv.Tap,e=>this.onTap(e))),this._register(R(this.viewHelper.linesContentDomNode,Jv.Change,e=>this.onChange(e))),this._register(R(this.viewHelper.linesContentDomNode,Jv.Contextmenu,e=>this._onContextMenu(new ny(e,this.viewHelper.viewDomNode),!1))),this._lastPointerType=`mouse`,this._register(R(this.viewHelper.linesContentDomNode,`pointerdown`,e=>{let t=e.pointerType;if(t===`mouse`){this._lastPointerType=`mouse`;return}else t===`touch`?this._lastPointerType=`touch`:this._lastPointerType=`pen`}));let r=new iy(this.viewHelper.viewDomNode);this._register(r.onPointerMoveThrottled(this.viewHelper.viewDomNode,e=>this._onMouseMove(e),BD(this.mouseTargetFactory),VD.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onPointerUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,e=>this._onMouseDown(e)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new ny(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType===`touch`&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!==`touch`&&super._onMouseDown(e)}},lO=class extends VD{constructor(e,t,n){super(e,t,n),this._register(Yv.addTarget(this.viewHelper.linesContentDomNode)),this._register(R(this.viewHelper.linesContentDomNode,Jv.Tap,e=>this.onTap(e))),this._register(R(this.viewHelper.linesContentDomNode,Jv.Change,e=>this.onChange(e))),this._register(R(this.viewHelper.linesContentDomNode,Jv.Contextmenu,e=>this._onContextMenu(new ny(e,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new ny(e,this.viewHelper.viewDomNode),!1);if(t.position){let e=document.createEvent(`CustomEvent`);e.initEvent(nO.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}},uO=class extends j{constructor(e,t,n){super(),_&&oi.pointerEvents?this.handler=this._register(new cO(e,t,n)):window.TouchEvent?this.handler=this._register(new lO(e,t,n)):this.handler=this._register(new VD(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}},dO=class extends oy{},fO=class e extends dO{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new I(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(58);let t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);let n=e.get(129);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){let t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new I(e,1));if(t.column!==1)return``;let n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){let e=Math.abs(this._lastCursorModelPosition.lineNumber-n);return e===0?`<span class="relative-current-line-number">`+n+`</span>`:String(e)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10==0?String(n):``:String(n)}prepareRender(t){if(this._renderLineNumbers===0){this._renderResult=null;return}let n=m?this._lineHeight%2==0?` lh-even`:` lh-odd`:``,r=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,a=`<div class="`+e.CLASS_NAME+n+`" style="left:`+this._lineNumbersLeft+`px;width:`+this._lineNumbersWidth+`px;">`,o=this._context.model.getLineCount(),s=[];for(let t=r;t<=i;t++){let i=t-r;if(!this._renderFinalNewline&&t===o&&this._context.model.getLineLength(t)===0){s[i]=``;continue}let c=this._getLineRenderLineNumber(t);c?t===this._activeLineNumber?s[i]=`<div class="active-line-number `+e.CLASS_NAME+n+`" style="left:`+this._lineNumbersLeft+`px;width:`+this._lineNumbersWidth+`px;">`+c+`</div>`:s[i]=a+c+`</div>`:s[i]=``}this._renderResult=s}render(e,t){if(!this._renderResult)return``;let n=t-e;return n<0||n>=this._renderResult.length?``:this._renderResult[n]}};fO.CLASS_NAME=`line-numbers`,iv((e,t)=>{let n=e.getColor(nE);n&&t.addRule(`.monaco-editor .line-numbers { color: ${n}; }`);let r=e.getColor(iE);r&&t.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${r}; }`)});var pO=class e extends sy{constructor(t){super(t);let n=this._context.configuration.options,r=n.get(129);this._canUseLayerHinting=!n.get(28),this._contentLeft=r.contentLeft,this._glyphMarginLeft=r.glyphMarginLeft,this._glyphMarginWidth=r.glyphMarginWidth,this._domNode=W(document.createElement(`div`)),this._domNode.setClassName(e.OUTER_CLASS_NAME),this._domNode.setPosition(`absolute`),this._domNode.setAttribute(`role`,`presentation`),this._domNode.setAttribute(`aria-hidden`,`true`),this._glyphMarginBackgroundDomNode=W(document.createElement(`div`)),this._glyphMarginBackgroundDomNode.setClassName(e.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain(`strict`);let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};pO.CLASS_NAME=`glyph-margin`,pO.OUTER_CLASS_NAME=`margin`;const mO=`monaco-mouse-cursor-text`;var hO=class e{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(t){return new e(this.top,this.left,t)}},gO=$r,_O=class extends sy{constructor(e,n,r){super(e),this._primaryCursorPosition=new I(1,1),this._primaryCursorVisibleRange=null,this._viewController=n,this._viewHelper=r,this._scrollLeft=0,this._scrollTop=0;let i=this._context.configuration.options,a=i.get(129);this._setAccessibilityOptions(i),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=i.get(43),this._lineHeight=i.get(58),this._emptySelectionClipboard=i.get(32),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new $n(1,1,1,1)],this._modelSelections=[new $n(1,1,1,1)],this._lastRenderPosition=null,this.textArea=W(document.createElement(`textarea`)),cy.write(this.textArea,6),this.textArea.setClassName(`inputarea ${mO}`),this.textArea.setAttribute(`wrap`,`off`),this.textArea.setAttribute(`autocorrect`,`off`),this.textArea.setAttribute(`autocapitalize`,`off`),this.textArea.setAttribute(`autocomplete`,`off`),this.textArea.setAttribute(`spellcheck`,`false`),this.textArea.setAttribute(`aria-label`,this._getAriaLabel(i)),this.textArea.setAttribute(`tabindex`,String(i.get(111))),this.textArea.setAttribute(`role`,`textbox`),this.textArea.setAttribute(`aria-roledescription`,t(`editor`,`editor`)),this.textArea.setAttribute(`aria-multiline`,`true`),this.textArea.setAttribute(`aria-haspopup`,`false`),this.textArea.setAttribute(`aria-autocomplete`,`both`),i.get(30)&&i.get(80)&&this.textArea.setAttribute(`readonly`,`true`),this.textAreaCover=W(document.createElement(`div`)),this.textAreaCover.setPosition(`absolute`);let o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:e=>this._context.model.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.model.getValueInRange(e,t)};this._textAreaInput=this._register(new aO({getDataToCopy:e=>{let t=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,f),n=this._context.model.getEOL(),r=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),i=Array.isArray(t)?t:null,a=Array.isArray(t)?t.join(n):t,o,s=null;if(e&&(rO.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&a.length<65536)){let e=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(o=e.html,s=e.mode)}return{isFromEmptySelection:r,multicursorText:i,text:a,html:o,mode:s}},getScreenReaderContent:e=>{if(this._accessibilitySupport===1){if(p){let e=this._selections[0];if(e.isEmpty()){let t=e.getStartPosition(),n=this._getWordBeforePosition(t);if(n.length===0&&(n=this._getCharacterBeforePosition(t)),n.length>0)return new eO(n,n.length,n.length,t,t)}}return eO.EMPTY}if(ii){let e=this._selections[0];if(e.isEmpty()){let t=e.getStartPosition(),[n,r]=this._getAndroidWordAtPosition(t);if(n.length>0)return new eO(n,r,r,t,t)}return eO.EMPTY}return tO.fromEditorSelection(e,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(e,t,n)=>this._context.model.deduceModelPositionRelativeToViewPosition(e,t,n)},this.textArea)),this._register(this._textAreaInput.onKeyDown(e=>{this._viewController.emitKeyDown(e)})),this._register(this._textAreaInput.onKeyUp(e=>{this._viewController.emitKeyUp(e)})),this._register(this._textAreaInput.onPaste(e=>{let t=!1,n=null,r=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,n=e.metadata.multicursorText===void 0?null:e.metadata.multicursorText,r=e.metadata.mode),this._viewController.paste(e.text,t,n,r)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):this._viewController.type(e.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(e=>{this._viewController.setSelection(e)})),this._register(this._textAreaInput.onCompositionStart(e=>{let t=this._selections[0].startLineNumber,n=this._selections[0].startColumn+e.revealDeltaColumns;this._context.model.revealRange(`keyboard`,!0,new L(t,n,t,n),0,1);let r=this._viewHelper.visibleRangeForPositionRelativeToEditor(t,n);r&&(this._visibleTextArea=new hO(this._context.viewLayout.getVerticalOffsetForLineNumber(t),r.left,gO?0:1),this._render()),this.textArea.setClassName(`inputarea ${mO} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(e=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(vO(e.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${mO}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){let t=this._context.model.getLineContent(e.lineNumber),n=Pb('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?'),r=!0,i=e.column,a=!0,o=e.column,s=0;for(;s<50&&(r||a);){if(r&&i<=1&&(r=!1),r){let e=t.charCodeAt(i-2);n.get(e)===0?i--:r=!1}if(a&&o>t.length&&(a=!1),a){let e=t.charCodeAt(o-1);n.get(e)===0?o++:a=!1}s++}return[t.substring(i-1,o-1),e.column-i]}_getWordBeforePosition(e){let t=this._context.model.getLineContent(e.lineNumber),n=Pb(this._context.configuration.options.get(115)),r=e.column,i=0;for(;r>1;){let a=t.charCodeAt(r-2);if(n.get(a)!==0||i>50)return t.substring(r-1,e.column-1);i++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){let t=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!jo(t.charCodeAt(0)))return t}return``}_getAriaLabel(e){return e.get(2)===1?t(`accessibilityOffAriaLabel`,`The editor is not accessible at this time. Press {0} for options.`,m?`Shift+Alt+F1`:`Alt+F1`):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);let t=e.get(3);this._accessibilitySupport===2&&t===ot.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute(`aria-label`,this._getAriaLabel(t)),this.textArea.setAttribute(`tabindex`,String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute(`readonly`,`true`):this.textArea.removeAttribute(`readonly`)),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent(`strategy changed`),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent(`selection changed`),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute(`aria-haspopup`,`true`),this.textArea.setAttribute(`aria-autocomplete`,`list`),this.textArea.setAttribute(`aria-activedescendant`,e.activeDescendant)):(this.textArea.setAttribute(`aria-haspopup`,`false`),this.textArea.setAttribute(`aria-autocomplete`,`both`),this.textArea.removeAttribute(`aria-activedescendant`)),e.role&&this.textArea.setAttribute(`role`,e.role)}prepareRender(e){this._primaryCursorPosition=new I(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent(`render`),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(p){this._renderInsideEditor(this._primaryCursorPosition,t,e,gO?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,gO?0:1,gO?0:1)}_renderInsideEditor(e,t,n,r,i){this._lastRenderPosition=e;let a=this.textArea,o=this.textAreaCover;Wv.applyFontInfo(a,this._fontInfo),a.setTop(t),a.setLeft(n),a.setWidth(r),a.setHeight(i),o.setTop(0),o.setLeft(0),o.setWidth(0),o.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;let e=this.textArea,t=this.textAreaCover;if(Wv.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),gO){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);let n=this._context.configuration.options;n.get(49)?t.setClassName(`monaco-editor-background textAreaCover `+pO.OUTER_CLASS_NAME):n.get(59).renderType===0?t.setClassName(`monaco-editor-background textAreaCover`):t.setClassName(`monaco-editor-background textAreaCover `+fO.CLASS_NAME)}};function vO(e,t){let n=document.createElement(`canvas`).getContext(`2d`);n.font=yO(t);let r=n.measureText(e);return $r?r.width+2:r.width}function yO(e){return bO(`normal`,e.fontWeight,e.fontSize,e.lineHeight,e.fontFamily)}function bO(e,t,n,r,i){return`${e} normal ${t} ${n}px / ${r}px ${i}`}var xO=class e{static columnSelect(e,t,n,r,i,a){let o=Math.abs(i-n)+1,s=n>i,c=r>a,l=r<a,u=[];for(let i=0;i<o;i++){let o=n+(s?-i:i),d=aS.columnFromVisibleColumn2(e,t,o,r),f=aS.columnFromVisibleColumn2(e,t,o,a),p=aS.visibleColumnFromColumn2(e,t,new I(o,d)),m=aS.visibleColumnFromColumn2(e,t,new I(o,f));l&&(p>a||m<r)||c&&(m>r||p<a)||u.push(new yD(new L(o,d,o,d),0,new I(o,f),0))}if(u.length===0)for(let e=0;e<o;e++){let r=n+(s?-e:e),i=t.getLineMaxColumn(r);u.push(new yD(new L(r,i,r,i),0,new I(r,i),0))}return{viewStates:u,reversed:s,fromLineNumber:n,fromVisualColumn:r,toLineNumber:i,toVisualColumn:a}}static columnSelectLeft(t,n,r){let i=r.toViewVisualColumn;return i>0&&i--,e.columnSelect(t,n,r.fromViewLineNumber,r.fromViewVisualColumn,r.toViewLineNumber,i)}static columnSelectRight(e,t,n){let r=0,i=Math.min(n.fromViewLineNumber,n.toViewLineNumber),a=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let n=i;n<=a;n++){let i=t.getLineMaxColumn(n),a=aS.visibleColumnFromColumn2(e,t,new I(n,i));r=Math.max(r,a)}let o=n.toViewVisualColumn;return o<r&&o++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,o)}static columnSelectUp(e,t,n,r){let i=r?e.pageSize:1,a=Math.max(1,n.toViewLineNumber-i);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,a,n.toViewVisualColumn)}static columnSelectDown(e,t,n,r){let i=r?e.pageSize:1,a=Math.min(t.getLineCount(),n.toViewLineNumber+i);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,a,n.toViewVisualColumn)}},SO=class{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new $n(n.endLineNumber,n.endColumn,n.endLineNumber,n.endColumn)}},CO=class{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new $n(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn)}},wO=class{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new $n(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn)}},TO=class{constructor(e,t,n,r,i=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new $n(n.endLineNumber+this._lineNumberDeltaOffset,n.endColumn+this._columnDeltaOffset,n.endLineNumber+this._lineNumberDeltaOffset,n.endColumn+this._columnDeltaOffset)}},EO=class{constructor(e,t,n,r=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},DO=class{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}},OO=class e{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Lo(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){let n=t.lineNumber-1;return new I(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let r=e.getLineMinColumn(t.lineNumber),i=e.getLineContent(t.lineNumber),a=TD.atomicPosition(i,t.column-1,n,0);if(a!==-1&&a+1>=r)return new I(t.lineNumber,a+1)}return this.leftPosition(e,t)}static left(t,n,r){let i=t.stickyTabStops?e.leftPositionAtomicSoftTabs(n,r,t.tabSize):e.leftPosition(n,r);return new DO(i.lineNumber,i.column,0)}static moveLeft(t,n,r,i,a){let o,s;if(r.hasSelection()&&!i)o=r.selection.startLineNumber,s=r.selection.startColumn;else{let i=r.position.delta(void 0,-(a-1)),c=n.normalizePosition(e.clipPositionColumn(i,n),0),l=e.left(t,n,c);o=l.lineNumber,s=l.column}return r.move(i,o,s,0)}static clipPositionColumn(t,n){return new I(t.lineNumber,e.clipRange(t.column,n.getLineMinColumn(t.lineNumber),n.getLineMaxColumn(t.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n+=Io(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new I(t,n)}static rightPositionAtomicSoftTabs(e,t,n,r,i){if(n<e.getLineIndentColumn(t)){let i=e.getLineContent(t),a=TD.atomicPosition(i,n-1,r,1);if(a!==-1)return new I(t,a+1)}return this.rightPosition(e,t,n)}static right(t,n,r){let i=t.stickyTabStops?e.rightPositionAtomicSoftTabs(n,r.lineNumber,r.column,t.tabSize,t.indentSize):e.rightPosition(n,r.lineNumber,r.column);return new DO(i.lineNumber,i.column,0)}static moveRight(t,n,r,i,a){let o,s;if(r.hasSelection()&&!i)o=r.selection.endLineNumber,s=r.selection.endColumn;else{let i=r.position.delta(void 0,a-1),c=n.normalizePosition(e.clipPositionColumn(i,n),1),l=e.right(t,n,c);o=l.lineNumber,s=l.column}return r.move(i,o,s,0)}static vertical(e,t,n,r,i,a,o){let s=aS.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize)+i,c=t.getLineCount(),l=n===1&&r===1,u=n===c&&r===t.getLineMaxColumn(n),d=a<n?l:u;return n=a,n<1?(n=1,r=o?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),r)):n>c?(n=c,r=o?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),r)):r=aS.columnFromVisibleColumn2(e,t,n,s),i=d?0:s-aS.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize),new DO(n,r,i)}static down(e,t,n,r,i,a,o){return this.vertical(e,t,n,r,i,n+a,o)}static moveDown(t,n,r,i,a){let o,s;r.hasSelection()&&!i?(o=r.selection.endLineNumber,s=r.selection.endColumn):(o=r.position.lineNumber,s=r.position.column);let c=e.down(t,n,o,s,r.leftoverVisibleColumns,a,!0);return r.move(i,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(t,n,r){let i=r.selection,a=e.down(t,n,i.selectionStartLineNumber,i.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),o=e.down(t,n,i.positionLineNumber,i.positionColumn,r.leftoverVisibleColumns,1,!1);return new yD(new L(a.lineNumber,a.column,a.lineNumber,a.column),a.leftoverVisibleColumns,new I(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,r,i,a,o){return this.vertical(e,t,n,r,i,n-a,o)}static moveUp(t,n,r,i,a){let o,s;r.hasSelection()&&!i?(o=r.selection.startLineNumber,s=r.selection.startColumn):(o=r.position.lineNumber,s=r.position.column);let c=e.up(t,n,o,s,r.leftoverVisibleColumns,a,!0);return r.move(i,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateUp(t,n,r){let i=r.selection,a=e.up(t,n,i.selectionStartLineNumber,i.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),o=e.up(t,n,i.positionLineNumber,i.positionColumn,r.leftoverVisibleColumns,1,!1);return new yD(new L(a.lineNumber,a.column,a.lineNumber,a.column),a.leftoverVisibleColumns,new I(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,r){let i=n.position.lineNumber;for(;i>1&&this._isBlankLine(t,i);)i--;for(;i>1&&!this._isBlankLine(t,i);)i--;return n.move(r,i,t.getLineMinColumn(i),0)}static moveToNextBlankLine(e,t,n,r){let i=t.getLineCount(),a=n.position.lineNumber;for(;a<i&&this._isBlankLine(t,a);)a++;for(;a<i&&!this._isBlankLine(t,a);)a++;return n.move(r,a,t.getLineMinColumn(a),0)}static moveToBeginningOfLine(e,t,n,r){let i=n.position.lineNumber,a=t.getLineMinColumn(i),o=t.getLineFirstNonWhitespaceColumn(i)||a,s;return s=n.position.column===o?a:o,n.move(r,i,s,0)}static moveToEndOfLine(e,t,n,r,i){let a=n.position.lineNumber,o=t.getLineMaxColumn(a);return n.move(r,a,o,i?1073741824-o:0)}static moveToBeginningOfBuffer(e,t,n,r){return n.move(r,1,1,0)}static moveToEndOfBuffer(e,t,n,r){let i=t.getLineCount(),a=t.getLineMaxColumn(i);return n.move(r,i,a,0)}},kO=class e{static deleteRight(e,t,n,r){let i=[],a=e!==3;for(let e=0,o=r.length;e<o;e++){let o=r[e],s=o;if(s.isEmpty()){let e=o.getPosition(),r=OO.right(t,n,e);s=new L(r.lineNumber,r.column,e.lineNumber,e.column)}if(s.isEmpty()){i[e]=null;continue}s.startLineNumber!==s.endLineNumber&&(a=!0),i[e]=new SO(s,``)}return[a,i]}static isAutoClosingPairDelete(e,t,n,r,i,a,o){if(t===`never`&&n===`never`||e===`never`)return!1;for(let s=0,c=a.length;s<c;s++){let c=a[s],l=c.getPosition();if(!c.isEmpty())return!1;let u=i.getLineContent(l.lineNumber);if(l.column<2||l.column>=u.length+1)return!1;let d=u.charAt(l.column-2),f=r.get(d);if(!f)return!1;if(wD(d)){if(n===`never`)return!1}else if(t===`never`)return!1;let p=u.charAt(l.column-1),m=!1;for(let e of f)e.open===d&&e.close===p&&(m=!0);if(!m)return!1;if(e===`auto`){let e=!1;for(let t=0,n=o.length;t<n;t++){let n=o[t];if(l.lineNumber===n.startLineNumber&&l.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let r=[];for(let e=0,t=n.length;e<t;e++){let t=n[e].getPosition();r[e]=new SO(new L(t.lineNumber,t.column-1,t.lineNumber,t.column+1),``)}return[!0,r]}static deleteLeft(t,n,r,i,a){if(this.isAutoClosingPairDelete(n.autoClosingDelete,n.autoClosingBrackets,n.autoClosingQuotes,n.autoClosingPairs.autoClosingPairsOpenByEnd,r,i,a))return this._runAutoClosingPairDelete(n,r,i);let o=[],s=t!==2;for(let t=0,a=i.length;t<a;t++){let a=e.getDeleteRange(i[t],r,n);if(a.isEmpty()){o[t]=null;continue}a.startLineNumber!==a.endLineNumber&&(s=!0),o[t]=new SO(a,``)}return[s,o]}static getDeleteRange(t,n,r){if(!t.isEmpty())return t;let i=t.getPosition();if(r.useTabStops&&i.column>1){let e=n.getLineContent(i.lineNumber),t=vo(e),a=t===-1?e.length+1:t+1;if(i.column<=a){let e=aS.visibleColumnFromColumn2(r,n,i),t=aS.prevIndentTabStop(e,r.indentSize),a=aS.columnFromVisibleColumn2(r,n,i.lineNumber,t);return new L(i.lineNumber,a,i.lineNumber,i.column)}}return L.fromPositions(e.getPositionAfterDeleteLeft(i,n),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let n=ns(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){let n=e.lineNumber-1;return new I(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let r=[],i=null;n.sort((e,t)=>I.compare(e.getStartPosition(),t.getEndPosition()));for(let a=0,o=n.length;a<o;a++){let o=n[a];if(o.isEmpty())if(e.emptySelectionClipboard){let e=o.getPosition(),n,s,c,l;e.lineNumber<t.getLineCount()?(n=e.lineNumber,s=1,c=e.lineNumber+1,l=1):e.lineNumber>1&&i?.endLineNumber!==e.lineNumber?(n=e.lineNumber-1,s=t.getLineMaxColumn(e.lineNumber-1),c=e.lineNumber,l=t.getLineMaxColumn(e.lineNumber)):(n=e.lineNumber,s=1,c=e.lineNumber,l=t.getLineMaxColumn(e.lineNumber));let u=new L(n,s,c,l);i=u,u.isEmpty()?r[a]=null:r[a]=new SO(u,``)}else r[a]=null;else r[a]=new SO(o,``)}return new CD(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}},AO=class e{static _createWord(e,t,n,r,i){return{start:r,end:i,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(r,e,n)}static _doFindPreviousWordOnLine(e,t,n){let r=0;for(let i=n.column-2;i>=0;i--){let n=e.charCodeAt(i),a=t.get(n);if(a===0){if(r===2)return this._createWord(e,r,a,i+1,this._findEndOfWord(e,t,r,i+1));r=1}else if(a===2){if(r===1)return this._createWord(e,r,a,i+1,this._findEndOfWord(e,t,r,i+1));r=2}else if(a===1&&r!==0)return this._createWord(e,r,a,i+1,this._findEndOfWord(e,t,r,i+1))}return r===0?null:this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0))}static _findEndOfWord(e,t,n,r){let i=e.length;for(let a=r;a<i;a++){let r=e.charCodeAt(a),i=t.get(r);if(i===1||n===1&&i===2||n===2&&i===0)return a}return i}static _findNextWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(r,e,n)}static _doFindNextWordOnLine(e,t,n){let r=0,i=e.length;for(let a=n.column-1;a<i;a++){let n=e.charCodeAt(a),i=t.get(n);if(i===0){if(r===2)return this._createWord(e,r,i,this._findStartOfWord(e,t,r,a-1),a);r=1}else if(i===2){if(r===1)return this._createWord(e,r,i,this._findStartOfWord(e,t,r,a-1),a);r=2}else if(i===1&&r!==0)return this._createWord(e,r,i,this._findStartOfWord(e,t,r,a-1),a)}return r===0?null:this._createWord(e,r,1,this._findStartOfWord(e,t,r,i-1),i)}static _findStartOfWord(e,t,n,r){for(let i=r;i>=0;i--){let r=e.charCodeAt(i),a=t.get(r);if(a===1||n===1&&a===2||n===2&&a===0)return i+1}return 0}static moveWordLeft(t,n,r,i){let a=r.lineNumber,o=r.column;o===1&&a>1&&(--a,o=n.getLineMaxColumn(a));let s=e._findPreviousWordOnLine(t,n,new I(a,o));if(i===0)return new I(a,s?s.start+1:1);if(i===1)return s&&s.wordType===2&&s.end-s.start===1&&s.nextCharClass===0&&(s=e._findPreviousWordOnLine(t,n,new I(a,s.start+1))),new I(a,s?s.start+1:1);if(i===3){for(;s&&s.wordType===2;)s=e._findPreviousWordOnLine(t,n,new I(a,s.start+1));return new I(a,s?s.start+1:1)}return s&&o<=s.end+1&&(s=e._findPreviousWordOnLine(t,n,new I(a,s.start+1))),new I(a,s?s.end+1:1)}static _moveWordPartLeft(e,t){let n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===1)return n>1?new I(n-1,e.getLineMaxColumn(n-1)):t;let i=e.getLineContent(n);for(let e=t.column-1;e>1;e--){let t=i.charCodeAt(e-2),a=i.charCodeAt(e-1);if(t===95&&a!==95||To(t)&&Eo(a)||Eo(t)&&Eo(a)&&e+1<r&&To(i.charCodeAt(e)))return new I(n,e)}return new I(n,1)}static moveWordRight(t,n,r,i){let a=r.lineNumber,o=r.column,s=!1;o===n.getLineMaxColumn(a)&&a<n.getLineCount()&&(s=!0,a+=1,o=1);let c=e._findNextWordOnLine(t,n,new I(a,o));if(i===2)c&&c.wordType===2&&c.end-c.start===1&&c.nextCharClass===0&&(c=e._findNextWordOnLine(t,n,new I(a,c.end+1))),o=c?c.end+1:n.getLineMaxColumn(a);else if(i===3){for(s&&(o=0);c&&(c.wordType===2||c.start+1<=o);)c=e._findNextWordOnLine(t,n,new I(a,c.end+1));o=c?c.start+1:n.getLineMaxColumn(a)}else c&&!s&&o>=c.start+1&&(c=e._findNextWordOnLine(t,n,new I(a,c.end+1))),o=c?c.start+1:n.getLineMaxColumn(a);return new I(a,o)}static _moveWordPartRight(e,t){let n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===r)return n<e.getLineCount()?new I(n+1,1):t;let i=e.getLineContent(n);for(let e=t.column+1;e<r;e++){let t=i.charCodeAt(e-2),a=i.charCodeAt(e-1);if(t!==95&&a===95||To(t)&&Eo(a)||Eo(t)&&Eo(a)&&e+1<r&&To(i.charCodeAt(e)))return new I(n,e)}return new I(n,r)}static _deleteWordLeftWhitespace(e,t){let n=e.getLineContent(t.lineNumber),r=t.column-2,i=bo(n,r);return i+1<r?new L(t.lineNumber,i+2,t.lineNumber,t.column):null}static deleteWordLeft(t,n){let r=t.wordSeparators,i=t.model,a=t.selection,o=t.whitespaceHeuristics;if(!a.isEmpty())return a;if(kO.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,t.model,[t.selection],t.autoClosedCharacters)){let e=t.selection.getPosition();return new L(e.lineNumber,e.column-1,e.lineNumber,e.column+1)}let s=new I(a.positionLineNumber,a.positionColumn),c=s.lineNumber,l=s.column;if(c===1&&l===1)return null;if(o){let e=this._deleteWordLeftWhitespace(i,s);if(e)return e}let u=e._findPreviousWordOnLine(r,i,s);return n===0?u?l=u.start+1:l>1?l=1:(c--,l=i.getLineMaxColumn(c)):(u&&l<=u.end+1&&(u=e._findPreviousWordOnLine(r,i,new I(c,u.start+1))),u?l=u.end+1:l>1?l=1:(c--,l=i.getLineMaxColumn(c))),new L(c,l,s.lineNumber,s.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;let r=new I(n.positionLineNumber,n.positionColumn);return this._deleteInsideWordWhitespace(t,r)||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){let n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){let n=e.getLineContent(t.lineNumber),r=n.length;if(r===0)return null;let i=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,i))return null;let a=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(n,a))return null;for(;i>0&&this._charAtIsWhitespace(n,i-1);)i--;for(;a+1<r&&this._charAtIsWhitespace(n,a+1);)a++;return new L(t.lineNumber,i+1,t.lineNumber,a+2)}static _deleteInsideWordDetermineDeleteRange(t,n,r){let i=n.getLineContent(r.lineNumber),a=i.length;if(a===0)return r.lineNumber>1?new L(r.lineNumber-1,n.getLineMaxColumn(r.lineNumber-1),r.lineNumber,1):r.lineNumber<n.getLineCount()?new L(r.lineNumber,1,r.lineNumber+1,1):new L(r.lineNumber,1,r.lineNumber,1);let o=e=>e.start+1<=r.column&&r.column<=e.end+1,s=(e,t)=>(e=Math.min(e,r.column),t=Math.max(t,r.column),new L(r.lineNumber,e,r.lineNumber,t)),c=e=>{let t=e.start+1,n=e.end+1,r=!1;for(;n-1<a&&this._charAtIsWhitespace(i,n-1);)r=!0,n++;if(!r)for(;t>1&&this._charAtIsWhitespace(i,t-2);)t--;return s(t,n)},l=e._findPreviousWordOnLine(t,n,r);if(l&&o(l))return c(l);let u=e._findNextWordOnLine(t,n,r);return u&&o(u)?c(u):l&&u?s(l.end+1,u.start+1):l?s(l.start+1,l.end+1):u?s(u.start+1,u.end+1):s(1,a+1)}static _deleteWordPartLeft(t,n){if(!n.isEmpty())return n;let r=n.getPosition(),i=e._moveWordPartLeft(t,r);return new L(r.lineNumber,r.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let r=t;r<n;r++){let t=e.charAt(r);if(t!==` `&&t!==`	`)return r}return n}static _deleteWordRightWhitespace(e,t){let n=e.getLineContent(t.lineNumber),r=t.column-1,i=this._findFirstNonWhitespaceChar(n,r);return r+1<i?new L(t.lineNumber,t.column,t.lineNumber,i+1):null}static deleteWordRight(t,n){let r=t.wordSeparators,i=t.model,a=t.selection,o=t.whitespaceHeuristics;if(!a.isEmpty())return a;let s=new I(a.positionLineNumber,a.positionColumn),c=s.lineNumber,l=s.column,u=i.getLineCount(),d=i.getLineMaxColumn(c);if(c===u&&l===d)return null;if(o){let e=this._deleteWordRightWhitespace(i,s);if(e)return e}let f=e._findNextWordOnLine(r,i,s);return n===2?f?l=f.end+1:l<d||c===u?l=d:(c++,f=e._findNextWordOnLine(r,i,new I(c,1)),l=f?f.start+1:i.getLineMaxColumn(c)):(f&&l>=f.start+1&&(f=e._findNextWordOnLine(r,i,new I(c,f.end+1))),f?l=f.start+1:l<d||c===u?l=d:(c++,f=e._findNextWordOnLine(r,i,new I(c,1)),l=f?f.start+1:i.getLineMaxColumn(c))),new L(c,l,s.lineNumber,s.column)}static _deleteWordPartRight(t,n){if(!n.isEmpty())return n;let r=n.getPosition(),i=e._moveWordPartRight(t,r);return new L(r.lineNumber,r.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){let r=new L(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(t,n,r){let i=Pb(n),a=e._findPreviousWordOnLine(i,t,r);if(a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end)return e._createWordAtPosition(t,r.lineNumber,a);let o=e._findNextWordOnLine(i,t,r);return o&&o.wordType===1&&o.start<=r.column-1&&r.column-1<=o.end?e._createWordAtPosition(t,r.lineNumber,o):null}static word(t,n,r,i,a){let o=Pb(t.wordSeparators),s=e._findPreviousWordOnLine(o,n,a),c=e._findNextWordOnLine(o,n,a);if(!i){let e,t;return s&&s.wordType===1&&s.start<=a.column-1&&a.column-1<=s.end?(e=s.start+1,t=s.end+1):c&&c.wordType===1&&c.start<=a.column-1&&a.column-1<=c.end?(e=c.start+1,t=c.end+1):(e=s?s.end+1:1,t=c?c.start+1:n.getLineMaxColumn(a.lineNumber)),new yD(new L(a.lineNumber,e,a.lineNumber,t),0,new I(a.lineNumber,t),0)}let l,u;s&&s.wordType===1&&s.start<a.column-1&&a.column-1<s.end?(l=s.start+1,u=s.end+1):c&&c.wordType===1&&c.start<a.column-1&&a.column-1<c.end?(l=c.start+1,u=c.end+1):(l=a.column,u=a.column);let d=a.lineNumber,f;if(r.selectionStart.containsPosition(a))f=r.selectionStart.endColumn;else if(a.isBeforeOrEqual(r.selectionStart.getStartPosition())){f=l;let e=new I(d,f);r.selectionStart.containsPosition(e)&&(f=r.selectionStart.endColumn)}else{f=u;let e=new I(d,f);r.selectionStart.containsPosition(e)&&(f=r.selectionStart.startColumn)}return r.move(!0,d,f,0)}},jO=class extends AO{static deleteWordPartLeft(e){let t=MO([AO.deleteWordLeft(e,0),AO.deleteWordLeft(e,2),AO._deleteWordPartLeft(e.model,e.selection)]);return t.sort(L.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){let t=MO([AO.deleteWordRight(e,0),AO.deleteWordRight(e,2),AO._deleteWordPartRight(e.model,e.selection)]);return t.sort(L.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){let r=MO([AO.moveWordLeft(e,t,n,0),AO.moveWordLeft(e,t,n,2),AO._moveWordPartLeft(t,n)]);return r.sort(I.compare),r[2]}static moveWordPartRight(e,t,n){let r=MO([AO.moveWordRight(e,t,n,0),AO.moveWordRight(e,t,n,2),AO._moveWordPartRight(t,n)]);return r.sort(I.compare),r[0]}};function MO(e){return e.filter(e=>!!e)}var NO=class{static addCursorDown(e,t,n){let r=[],i=0;for(let a=0,o=t.length;a<o;a++){let o=t[a];r[i++]=new X(o.modelState,o.viewState),n?r[i++]=X.fromModelState(OO.translateDown(e.cursorConfig,e.model,o.modelState)):r[i++]=X.fromViewState(OO.translateDown(e.cursorConfig,e,o.viewState))}return r}static addCursorUp(e,t,n){let r=[],i=0;for(let a=0,o=t.length;a<o;a++){let o=t[a];r[i++]=new X(o.modelState,o.viewState),n?r[i++]=X.fromModelState(OO.translateUp(e.cursorConfig,e.model,o.modelState)):r[i++]=X.fromViewState(OO.translateUp(e.cursorConfig,e,o.viewState))}return r}static moveToBeginningOfLine(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i];r[i]=this._moveToLineStart(e,a,n)}return r}static _moveToLineStart(e,t,n){let r=t.viewState.position.column,i=r===t.modelState.position.column,a=t.viewState.position.lineNumber,o=r===e.getLineFirstNonWhitespaceColumn(a);return!i&&!o?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return X.fromViewState(OO.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return X.fromModelState(OO.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,r){let i=[];for(let a=0,o=t.length;a<o;a++){let o=t[a];i[a]=this._moveToLineEnd(e,o,n,r)}return i}static _moveToLineEnd(e,t,n,r){let i=t.viewState.position,a=e.getLineMaxColumn(i.lineNumber),o=i.column===a,s=t.modelState.position,c=e.model.getLineMaxColumn(s.lineNumber),l=a-i.column===c-s.column;return o||l?this._moveToLineEndByModel(e,t,n,r):this._moveToLineEndByView(e,t,n,r)}static _moveToLineEndByView(e,t,n,r){return X.fromViewState(OO.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,r))}static _moveToLineEndByModel(e,t,n,r){return X.fromModelState(OO.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,r))}static expandLineSelection(e,t){let n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r],a=i.modelState.selection.startLineNumber,o=e.model.getLineCount(),s=i.modelState.selection.endLineNumber,c;s===o?c=e.model.getLineMaxColumn(o):(s++,c=1),n[r]=X.fromModelState(new yD(new L(a,1,a,1),0,new I(s,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i];r[i]=X.fromModelState(OO.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static moveToEndOfBuffer(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i];r[i]=X.fromModelState(OO.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static selectAll(e,t){let n=e.model.getLineCount(),r=e.model.getLineMaxColumn(n);return X.fromModelState(new yD(new L(1,1,1,1),0,new I(n,r),0))}static line(e,t,n,r,i){let a=e.model.validatePosition(r),o=i?e.coordinatesConverter.validateViewPosition(new I(i.lineNumber,i.column),a):e.coordinatesConverter.convertModelPositionToViewPosition(a);if(!n||!t.modelState.hasSelection()){let t=e.model.getLineCount(),n=a.lineNumber+1,r=1;return n>t&&(n=t,r=e.model.getLineMaxColumn(n)),X.fromModelState(new yD(new L(a.lineNumber,1,n,r),0,new I(n,r),0))}let s=t.modelState.selectionStart.getStartPosition().lineNumber;if(a.lineNumber<s)return X.fromViewState(t.viewState.move(t.modelState.hasSelection(),o.lineNumber,1,0));if(a.lineNumber>s){let n=e.getLineCount(),r=o.lineNumber+1,i=1;return r>n&&(r=n,i=e.getLineMaxColumn(r)),X.fromViewState(t.viewState.move(t.modelState.hasSelection(),r,i,0))}else{let e=t.modelState.selectionStart.getEndPosition();return X.fromModelState(t.modelState.move(t.modelState.hasSelection(),e.lineNumber,e.column,0))}}static word(e,t,n,r){let i=e.model.validatePosition(r);return X.fromModelState(AO.word(e.cursorConfig,e.model,t.modelState,n,i))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new X(t.modelState,t.viewState);let n=t.viewState.position.lineNumber,r=t.viewState.position.column;return X.fromViewState(new yD(new L(n,r,n,r),0,new I(n,r),0))}static moveTo(e,t,n,r,i){let a=e.model.validatePosition(r),o=i?e.coordinatesConverter.validateViewPosition(new I(i.lineNumber,i.column),a):e.coordinatesConverter.convertModelPositionToViewPosition(a);return X.fromViewState(t.viewState.move(n,o.lineNumber,o.column,0))}static simpleMove(e,t,n,r,i,a){switch(n){case 0:return a===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,i);case 1:return a===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,i);case 2:return a===2?this._moveUpByViewLines(e,t,r,i):this._moveUpByModelLines(e,t,r,i);case 3:return a===2?this._moveDownByViewLines(e,t,r,i):this._moveDownByModelLines(e,t,r,i);case 4:return a===2?t.map(t=>X.fromViewState(OO.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,r))):t.map(t=>X.fromModelState(OO.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,r)));case 5:return a===2?t.map(t=>X.fromViewState(OO.moveToNextBlankLine(e.cursorConfig,e,t.viewState,r))):t.map(t=>X.fromModelState(OO.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,n,r,i){let a=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(a);switch(n){case 11:{let n=this._firstLineNumberInRange(e.model,o,i),a=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],r,n,a)]}case 13:{let n=this._lastLineNumberInRange(e.model,o,i),a=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],r,n,a)]}case 12:{let n=Math.round((o.startLineNumber+o.endLineNumber)/2),i=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],r,n,i)]}case 14:{let n=[];for(let i=0,o=t.length;i<o;i++){let o=t[i];n[i]=this.findPositionInViewportIfOutside(e,o,a,r)}return n}default:return null}}static findPositionInViewportIfOutside(e,t,n,r){let i=t.viewState.position.lineNumber;if(n.startLineNumber<=i&&i<=n.endLineNumber-1)return new X(t.modelState,t.viewState);{let a;a=i>n.endLineNumber-1?n.endLineNumber-1:i<n.startLineNumber?n.startLineNumber:i;let o=OO.vertical(e.cursorConfig,e,i,t.viewState.position.column,t.viewState.leftoverVisibleColumns,a,!1);return X.fromViewState(t.viewState.move(r,o.lineNumber,o.column,o.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+n-1)}static _lastLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-n+1)}static _moveLeft(e,t,n,r){return t.map(t=>X.fromViewState(OO.moveLeft(e.cursorConfig,e,t.viewState,n,r)))}static _moveHalfLineLeft(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=Math.round(e.getLineContent(o).length/2);r[i]=X.fromViewState(OO.moveLeft(e.cursorConfig,e,a.viewState,n,s))}return r}static _moveRight(e,t,n,r){return t.map(t=>X.fromViewState(OO.moveRight(e.cursorConfig,e,t.viewState,n,r)))}static _moveHalfLineRight(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=Math.round(e.getLineContent(o).length/2);r[i]=X.fromViewState(OO.moveRight(e.cursorConfig,e,a.viewState,n,s))}return r}static _moveDownByViewLines(e,t,n,r){let i=[];for(let a=0,o=t.length;a<o;a++){let o=t[a];i[a]=X.fromViewState(OO.moveDown(e.cursorConfig,e,o.viewState,n,r))}return i}static _moveDownByModelLines(e,t,n,r){let i=[];for(let a=0,o=t.length;a<o;a++){let o=t[a];i[a]=X.fromModelState(OO.moveDown(e.cursorConfig,e.model,o.modelState,n,r))}return i}static _moveUpByViewLines(e,t,n,r){let i=[];for(let a=0,o=t.length;a<o;a++){let o=t[a];i[a]=X.fromViewState(OO.moveUp(e.cursorConfig,e,o.viewState,n,r))}return i}static _moveUpByModelLines(e,t,n,r){let i=[];for(let a=0,o=t.length;a<o;a++){let o=t[a];i[a]=X.fromModelState(OO.moveUp(e.cursorConfig,e.model,o.modelState,n,r))}return i}static _moveToViewPosition(e,t,n,r,i){return X.fromViewState(t.viewState.move(n,r,i,0))}static _moveToModelPosition(e,t,n,r,i){return X.fromModelState(t.modelState.move(n,r,i,0))}static _moveToViewMinColumn(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=e.getLineMinColumn(o);r[i]=this._moveToViewPosition(e,a,n,o,s)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=e.getLineFirstNonWhitespaceColumn(o);r[i]=this._moveToViewPosition(e,a,n,o,s)}return r}static _moveToViewCenterColumn(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=Math.round((e.getLineMaxColumn(o)+e.getLineMinColumn(o))/2);r[i]=this._moveToViewPosition(e,a,n,o,s)}return r}static _moveToViewMaxColumn(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=e.getLineMaxColumn(o);r[i]=this._moveToViewPosition(e,a,n,o,s)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,n){let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=a.viewState.position.lineNumber,s=e.getLineLastNonWhitespaceColumn(o);r[i]=this._moveToViewPosition(e,a,n,o,s)}return r}},PO;(function(e){e.description={description:`Move cursor to a logical position in the view`,args:[{name:`Cursor move argument object`,description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:function(e){if(!qs(e))return!1;let t=e;return!(!Ks(t.to)||!Xs(t.select)&&!Ys(t.select)||!Xs(t.by)&&!Ks(t.by)||!Xs(t.value)&&!Js(t.value))},schema:{type:`object`,required:[`to`],properties:{to:{type:`string`,enum:[`left`,`right`,`up`,`down`,`prevBlankLine`,`nextBlankLine`,`wrappedLineStart`,`wrappedLineEnd`,`wrappedLineColumnCenter`,`wrappedLineFirstNonWhitespaceCharacter`,`wrappedLineLastNonWhitespaceCharacter`,`viewPortTop`,`viewPortCenter`,`viewPortBottom`,`viewPortIfOutside`]},by:{type:`string`,enum:[`line`,`wrappedLine`,`character`,`halfLine`]},value:{type:`number`,default:1},select:{type:`boolean`,default:!1}}}}]},e.RawDirection={Left:`left`,Right:`right`,Up:`up`,Down:`down`,PrevBlankLine:`prevBlankLine`,NextBlankLine:`nextBlankLine`,WrappedLineStart:`wrappedLineStart`,WrappedLineFirstNonWhitespaceCharacter:`wrappedLineFirstNonWhitespaceCharacter`,WrappedLineColumnCenter:`wrappedLineColumnCenter`,WrappedLineEnd:`wrappedLineEnd`,WrappedLineLastNonWhitespaceCharacter:`wrappedLineLastNonWhitespaceCharacter`,ViewPortTop:`viewPortTop`,ViewPortCenter:`viewPortCenter`,ViewPortBottom:`viewPortBottom`,ViewPortIfOutside:`viewPortIfOutside`},e.RawUnit={Line:`line`,WrappedLine:`wrappedLine`,Character:`character`,HalfLine:`halfLine`};function t(t){if(!t.to)return null;let n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let r=0;switch(t.by){case e.RawUnit.Line:r=1;break;case e.RawUnit.WrappedLine:r=2;break;case e.RawUnit.Character:r=3;break;case e.RawUnit.HalfLine:r=4;break}return{direction:n,unit:r,select:!!t.select,value:t.value||1}}e.parse=t})(PO||={});var FO=Object.create(null);function IO(e,t){if(t<=0)return``;FO[e]||(FO[e]=[``,e]);let n=FO[e];for(let r=n.length;r<=t;r++)n[r]=n[r-1]+e;return n[t]}var LO=class e{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,r,i){let a=aS.visibleColumnFromColumn(e,t,n);return i?IO(IO(` `,r),aS.prevIndentTabStop(a,r)/r):IO(`	`,aS.prevRenderTabStop(a,n)/n)}static shiftIndent(e,t,n,r,i){let a=aS.visibleColumnFromColumn(e,t,n);return i?IO(IO(` `,r),aS.nextIndentTabStop(a,r)/r):IO(`	`,aS.nextRenderTabStop(a,n)/n)}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(t,n){let r=this._selection.startLineNumber,i=this._selection.endLineNumber;this._selection.endColumn===1&&r!==i&&--i;let{tabSize:a,indentSize:o,insertSpaces:s}=this._opts,c=r===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(r))&&(this._useLastEditRangeForCursorEndPosition=!0);let l=0,u=0;for(let d=r;d<=i;d++,l=u){u=0;let i=t.getLineContent(d),f=vo(i);if(this._opts.isUnshift&&(i.length===0||f===0)||!c&&!this._opts.isUnshift&&i.length===0)continue;if(f===-1&&(f=i.length),d>1&&aS.visibleColumnFromColumn(i,f+1,a)%o!==0&&t.isCheapToTokenize(d-1)){let e=If.getEnterAction(this._opts.autoIndent,t,new L(d-1,t.getLineMaxColumn(d-1),d-1,t.getLineMaxColumn(d-1)));if(e){if(u=l,e.appendText)for(let t=0,n=e.appendText.length;t<n&&u<o&&e.appendText.charCodeAt(t)===32;t++)u++;e.removeText&&(u=Math.max(0,u-e.removeText));for(let e=0;e<u&&!(f===0||i.charCodeAt(f-1)!==32);e++)f--}}if(this._opts.isUnshift&&f===0)continue;let p;p=this._opts.isUnshift?e.unshiftIndent(i,f+1,a,o,s):e.shiftIndent(i,f+1,a,o,s),this._addEditOperation(n,new L(d,1,d,f+1),p),d===r&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&t.getLineLength(r)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let e=s?IO(` `,o):`	`;for(let a=r;a<=i;a++){let i=t.getLineContent(a),s=vo(i);if(!(this._opts.isUnshift&&(i.length===0||s===0))&&!(!c&&!this._opts.isUnshift&&i.length===0)&&(s===-1&&(s=i.length),!(this._opts.isUnshift&&s===0)))if(this._opts.isUnshift){s=Math.min(s,o);for(let e=0;e<s;e++)if(i.charCodeAt(e)===9){s=e+1;break}this._addEditOperation(n,new L(a,1,a,s+1),``)}else this._addEditOperation(n,new L(a,1,a,1),e),a===r&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=n.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let e=t.getInverseEditOperations()[0];return new $n(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}let n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let e=this._selection.startColumn;return n.startColumn<=e?n:n.getDirection()===0?new $n(n.startLineNumber,e,n.endLineNumber,n.endColumn):new $n(n.endLineNumber,n.endColumn,n.startLineNumber,e)}return n}},RO=class{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new L(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),r=n[0].range,i=n[1].range;return new $n(r.endLineNumber,r.endColumn,i.endLineNumber,i.endColumn-this._charAfterSelection.length)}},zO=class e{static indent(e,t,n){if(t===null||n===null)return[];let r=[];for(let t=0,i=n.length;t<i;t++)r[t]=new LO(n[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static outdent(e,t,n){let r=[];for(let t=0,i=n.length;t<i;t++)r[t]=new LO(n[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static shiftIndent(e,t,n){return n||=1,LO.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n||=1,LO.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,r){let i=[];for(let e=0,t=n.length;e<t;e++)i[e]=new SO(n[e],r[e]);return new CD(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,r,i){let a=[];for(let e=0,t=n.length;e<t;e++){let t=n[e],o=t.getPosition();i&&!t.isEmpty()&&(i=!1),i&&r.indexOf(`
`)!==r.length-1&&(i=!1),i?a[e]=new EO(new L(o.lineNumber,1,o.lineNumber,1),r,t,!0):a[e]=new SO(t,r)}return new CD(0,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,r,i){if(r||t.length===1)return null;if(i&&i.length===t.length)return i;if(e.multiCursorPaste===`spread`){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let e=_o(n);if(e.length===t.length)return e}return null}static paste(e,t,n,r,i,a){let o=this._distributePasteToCursors(e,n,r,i,a);return o?(n=n.sort(L.compareRangesUsingStarts),this._distributedPaste(e,t,n,o)):this._simplePaste(e,t,n,r,i)}static _goodIndentForLine(t,n,r){let i=null,a=``,o=If.getInheritIndentForLine(t.autoIndent,n,r,!1);if(o)i=o.action,a=o.indentation;else if(r>1){let e;for(e=r-1;e>=1&&!(bo(n.getLineContent(e))>=0);e--);if(e<1)return null;let i=n.getLineMaxColumn(e),o=If.getEnterAction(t.autoIndent,n,new L(e,i,e,i));o&&(a=o.indentation+o.appendText)}return i&&(i===cd.Indent&&(a=e.shiftIndent(t,a)),i===cd.Outdent&&(a=e.unshiftIndent(t,a)),a=t.normalizeIndentation(a)),a||null}static _replaceJumpToNextIndent(e,t,n,r){let i=``,a=n.getStartPosition();if(e.insertSpaces){let n=aS.visibleColumnFromColumn2(e,t,a),r=e.indentSize,o=r-n%r;for(let e=0;e<o;e++)i+=` `}else i=`	`;return new SO(n,i,r)}static tab(e,t,n){let r=[];for(let i=0,a=n.length;i<a;i++){let a=n[i];if(a.isEmpty()){let n=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(n)&&t.isCheapToTokenize(a.startLineNumber)){let o=this._goodIndentForLine(e,t,a.startLineNumber);o||=`	`;let s=e.normalizeIndentation(o);if(!n.startsWith(s)){r[i]=new SO(new L(a.startLineNumber,1,a.startLineNumber,n.length+1),s,!0);continue}}r[i]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let n=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==n){r[i]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[i]=new LO(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return r}static compositionType(e,t,n,r,i,a,o,s){return new CD(4,r.map(e=>this._compositionType(n,e,i,a,o,s)),{shouldPushStackElementBefore:HO(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,r,i,a){if(!t.isEmpty())return null;let o=t.getPosition(),s=Math.max(1,o.column-r),c=Math.min(e.getLineMaxColumn(o.lineNumber),o.column+i),l=new L(o.lineNumber,s,o.lineNumber,c);return e.getValueInRange(l)===n&&a===0?null:new TO(l,n,0,a)}static _typeCommand(e,t,n){return n?new wO(e,t,!0):new SO(e,t,!0)}static _enter(t,n,r,i){if(t.autoIndent===0)return e._typeCommand(i,`
`,r);if(!n.isCheapToTokenize(i.getStartPosition().lineNumber)||t.autoIndent===1){let a=yo(n.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);return e._typeCommand(i,`
`+t.normalizeIndentation(a),r)}let a=If.getEnterAction(t.autoIndent,n,i);if(a){if(a.indentAction===cd.None||a.indentAction===cd.Indent)return e._typeCommand(i,`
`+t.normalizeIndentation(a.indentation+a.appendText),r);if(a.indentAction===cd.IndentOutdent){let e=t.normalizeIndentation(a.indentation),n=t.normalizeIndentation(a.indentation+a.appendText),o=`
`+n+`
`+e;return r?new wO(i,o,!0):new TO(i,o,-1,n.length-e.length,!0)}else if(a.indentAction===cd.Outdent){let n=e.unshiftIndent(t,a.indentation);return e._typeCommand(i,`
`+t.normalizeIndentation(n+a.appendText),r)}}let o=yo(n.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);if(t.autoIndent>=4){let a=If.getIndentForEnter(t.autoIndent,n,i,{unshiftIndent:n=>e.unshiftIndent(t,n),shiftIndent:n=>e.shiftIndent(t,n),normalizeIndentation:e=>t.normalizeIndentation(e)});if(a){let e=aS.visibleColumnFromColumn2(t,n,i.getEndPosition()),o=i.endColumn,s=vo(n.getLineContent(i.endLineNumber));if(i=s>=0?i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,s+1)):i.setEndPosition(i.endLineNumber,n.getLineMaxColumn(i.endLineNumber)),r)return new wO(i,`
`+t.normalizeIndentation(a.afterEnter),!0);{let n=0;return o<=s+1&&(t.insertSpaces||(e=Math.ceil(e/t.indentSize)),n=Math.min(e+1-t.normalizeIndentation(a.afterEnter).length-1,0)),new TO(i,`
`+t.normalizeIndentation(a.afterEnter),0,n,!0)}}}return e._typeCommand(i,`
`+t.normalizeIndentation(o),r)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let e=0,r=n.length;e<r;e++)if(!t.isCheapToTokenize(n[e].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(t,n,r,i){let a=If.getIndentationAtPosition(n,r.startLineNumber,r.startColumn),o=If.getIndentActionForType(t.autoIndent,n,r,i,{shiftIndent:n=>e.shiftIndent(t,n),unshiftIndent:n=>e.unshiftIndent(t,n)});if(o===null)return null;if(o!==t.normalizeIndentation(a)){let a=n.getLineFirstNonWhitespaceColumn(r.startLineNumber);return a===0?e._typeCommand(new L(r.startLineNumber,1,r.endLineNumber,r.endColumn),t.normalizeIndentation(o)+i,!1):e._typeCommand(new L(r.startLineNumber,1,r.endLineNumber,r.endColumn),t.normalizeIndentation(o)+n.getLineContent(r.startLineNumber).substring(a-1,r.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,r,i){if(e.autoClosingOvertype===`never`||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(i))return!1;for(let a=0,o=n.length;a<o;a++){let o=n[a];if(!o.isEmpty())return!1;let s=o.getPosition(),c=t.getLineContent(s.lineNumber);if(c.charAt(s.column-1)!==i)return!1;let l=wD(i);if((s.column>2?c.charCodeAt(s.column-2):0)===92&&l)return!1;if(e.autoClosingOvertype===`auto`){let e=!1;for(let t=0,n=r.length;t<n;t++){let n=r[t];if(s.lineNumber===n.startLineNumber&&s.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,r,i){let a=[];for(let e=0,t=r.length;e<t;e++){let t=r[e].getPosition();a[e]=new SO(new L(t.lineNumber,t.column,t.lineNumber,t.column+1),i)}return new CD(4,a,{shouldPushStackElementBefore:HO(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){let n=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],i=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],a=r.some(e=>t.startsWith(e.open)),o=i.some(e=>t.startsWith(e.close));return!a&&o}static _findAutoClosingPairOpen(e,t,n,r){let i=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!i)return null;let a=null;for(let e of i)if(a===null||e.open.length>a.open.length){let i=!0;for(let a of n)if(t.getValueInRange(new L(a.lineNumber,a.column-e.open.length+1,a.lineNumber,a.column))+r!==e.open){i=!1;break}i&&(a=e)}return a}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return``;let n=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[],i=null;for(let e of r)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!i||e.open.length>i.open.length)&&(i=e);return i?i.close:``}static _getAutoClosingPairClose(t,n,r,i,a){let o=wD(i),s=o?t.autoClosingQuotes:t.autoClosingBrackets;if(s===`never`)return null;let c=this._findAutoClosingPairOpen(t,n,r.map(e=>e.getPosition()),i);if(!c)return null;let l=this._findSubAutoClosingPairClose(t,c),u=!0,d=o?t.shouldAutoCloseBefore.quote:t.shouldAutoCloseBefore.bracket;for(let o=0,f=r.length;o<f;o++){let f=r[o];if(!f.isEmpty())return null;let p=f.getPosition(),m=n.getLineContent(p.lineNumber),h=m.substring(p.column-1);if(h.startsWith(l)||(u=!1),m.length>p.column-1){let n=m.charAt(p.column-1);if(!e._isBeforeClosingBrace(t,h)&&!d(n))return null}if(!n.isCheapToTokenize(p.lineNumber))return null;if(c.open.length===1&&(i===`'`||i===`"`)&&s!==`always`){let e=Pb(t.wordSeparators);if(a&&p.column>1&&e.get(m.charCodeAt(p.column-2))===0||!a&&p.column>2&&e.get(m.charCodeAt(p.column-3))===0)return null}n.forceTokenization(p.lineNumber);let g=n.getLineTokens(p.lineNumber),_=!1;try{_=If.shouldAutoClosePair(c,g,a?p.column:p.column-1)}catch(e){ct(e)}if(!_)return null}return u?c.close.substring(0,c.close.length-l.length):c.close}static _runAutoClosingOpenCharType(e,t,n,r,i,a,o){let s=[];for(let e=0,t=r.length;e<t;e++){let t=r[e];s[e]=new BO(t,i,a,o)}return new CD(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return wD(t)?e.autoSurround===`quotes`||e.autoSurround===`languageDefined`:e.autoSurround===`brackets`||e.autoSurround===`languageDefined`}static _isSurroundSelectionType(t,n,r,i){if(!e._shouldSurroundChar(t,i)||!t.surroundingPairs.hasOwnProperty(i))return!1;let a=wD(i);for(let e=0,t=r.length;e<t;e++){let t=r[e];if(t.isEmpty())return!1;let i=!0;for(let e=t.startLineNumber;e<=t.endLineNumber;e++){let r=n.getLineContent(e),a=e===t.startLineNumber?t.startColumn-1:0,o=e===t.endLineNumber?t.endColumn-1:r.length,s=r.substring(a,o);if(/[^ \t]/.test(s)){i=!1;break}}if(i||a&&t.startLineNumber===t.endLineNumber&&t.startColumn+1===t.endColumn&&wD(n.getValueInRange(t)))return!1}return!0}static _runSurroundSelectionType(e,t,n,r,i){let a=[];for(let e=0,n=r.length;e<n;e++){let n=r[e],o=t.surroundingPairs[i];a[e]=new RO(n,i,o)}return new CD(0,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,r,i){if(!t.electricChars.hasOwnProperty(i)||!r.isEmpty())return null;let a=r.getPosition();n.forceTokenization(a.lineNumber);let o=n.getLineTokens(a.lineNumber),s;try{s=If.onElectricCharacter(i,o,a.column)}catch(e){return ct(e),null}if(!s)return null;if(s.matchOpenBracket){let r=(o.getLineContent()+i).lastIndexOf(s.matchOpenBracket)+1,c=n.findMatchingBracketUp(s.matchOpenBracket,{lineNumber:a.lineNumber,column:r});if(c){if(c.startLineNumber===a.lineNumber)return null;let r=yo(n.getLineContent(c.startLineNumber)),o=t.normalizeIndentation(r),s=n.getLineContent(a.lineNumber),l=n.getLineFirstNonWhitespaceColumn(a.lineNumber)||a.column,u=o+s.substring(l-1,a.column-1)+i,d=new SO(new L(a.lineNumber,1,a.lineNumber,a.column),u);return new CD(VO(u,e),[d],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,r,i,a){if(!r||$n.selectionsArrEqual(r,i))return null;let o=null;for(let e of i){if(!e.isEmpty())return null;let t=e.getPosition(),r=n.getValueInRange(new L(t.lineNumber,t.column-1,t.lineNumber,t.column));if(o===null)o=r;else if(o!==r)return null}if(!o)return null;if(this._isAutoClosingOvertype(t,n,i,a,o))return new CD(4,i.map(e=>new SO(new L(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),``,!1)),{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1});let s=this._getAutoClosingPairClose(t,n,i,o,!1);return s===null?null:this._runAutoClosingOpenCharType(e,t,n,i,o,!1,s)}static typeWithInterceptors(t,n,r,i,a,o,s){if(!t&&s===`
`){let t=[];for(let n=0,o=a.length;n<o;n++)t[n]=e._enter(r,i,!1,a[n]);return new CD(4,t,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!t&&this._isAutoIndentType(r,i,a)){let e=[],t=!1;for(let n=0,o=a.length;n<o;n++)if(e[n]=this._runAutoIndentType(r,i,a[n],s),!e[n]){t=!0;break}if(!t)return new CD(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!t&&this._isAutoClosingOvertype(r,i,a,o,s))return this._runAutoClosingOvertype(n,r,i,a,s);if(!t){let e=this._getAutoClosingPairClose(r,i,a,s,!0);if(e)return this._runAutoClosingOpenCharType(n,r,i,a,s,!0,e)}if(this._isSurroundSelectionType(r,i,a,s))return this._runSurroundSelectionType(n,r,i,a,s);if(!t&&this._isTypeInterceptorElectricChar(r,i,a)){let e=this._typeInterceptorElectricChar(n,r,i,a[0],s);if(e)return e}let c=[];for(let e=0,t=a.length;e<t;e++)c[e]=new SO(a[e],s);let l=VO(s,n);return new CD(l,c,{shouldPushStackElementBefore:HO(n,l),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,r,i){let a=[];for(let e=0,t=r.length;e<t;e++)a[e]=new SO(r[e],i);let o=VO(i,e);return new CD(o,a,{shouldPushStackElementBefore:HO(e,o),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let r=[];for(let i=0,a=n.length;i<a;i++){let a=n[i].positionLineNumber;if(a===1)r[i]=new wO(new L(1,1,1,1),`
`);else{a--;let n=t.getLineMaxColumn(a);r[i]=this._enter(e,t,!1,new L(a,n,a,n))}}return r}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let r=[];for(let i=0,a=n.length;i<a;i++){let a=n[i].positionLineNumber,o=t.getLineMaxColumn(a);r[i]=this._enter(e,t,!1,new L(a,o,a,o))}return r}static lineBreakInsert(e,t,n){let r=[];for(let i=0,a=n.length;i<a;i++)r[i]=this._enter(e,t,!0,n[i]);return r}},BO=class extends TO{constructor(e,t,n,r){super(e,(n?t:``)+r,0,-r.length),this._openCharacter=t,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new L(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new L(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}};function VO(e,t){return e===` `?t===5||t===6?6:5:4}function HO(e,t){return WO(e)&&!WO(t)?!0:e===5?!1:UO(e)!==UO(t)}function UO(e){return e===6||e===5?`space`:e}function WO(e){return e===4||e===5||e===6}var Z;(function(e){e.editorSimpleInput=new H(`editorSimpleInput`,!1,!0),e.editorTextFocus=new H(`editorTextFocus`,!1,t(`editorTextFocus`,`Whether the editor text has focus (cursor is blinking)`)),e.focus=new H(`editorFocus`,!1,t(`editorFocus`,`Whether the editor or an editor widget has focus (e.g. focus is in the find widget)`)),e.textInputFocus=new H(`textInputFocus`,!1,t(`textInputFocus`,`Whether an editor or a rich text input has focus (cursor is blinking)`)),e.readOnly=new H(`editorReadonly`,!1,t(`editorReadonly`,`Whether the editor is read only`)),e.inDiffEditor=new H(`inDiffEditor`,!1,t(`inDiffEditor`,`Whether the context is a diff editor`)),e.columnSelection=new H(`editorColumnSelection`,!1,t(`editorColumnSelection`,"Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new H(`editorHasSelection`,!1,t(`editorHasSelection`,`Whether the editor has text selected`)),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new H(`editorHasMultipleSelections`,!1,t(`editorHasMultipleSelections`,`Whether the editor has multiple selections`)),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new H(`editorTabMovesFocus`,!1,t(`editorTabMovesFocus`,"Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInWalkThroughSnippet=new H(`isInEmbeddedEditor`,!1,!0),e.canUndo=new H(`canUndo`,!1,!0),e.canRedo=new H(`canRedo`,!1,!0),e.hoverVisible=new H(`editorHoverVisible`,!1,t(`editorHoverVisible`,`Whether the editor hover is visible`)),e.inCompositeEditor=new H(`inCompositeEditor`,void 0,t(`inCompositeEditor`,`Whether the editor is part of a larger editor (e.g. notebooks)`)),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new H(`editorLangId`,``,t(`editorLangId`,`The language identifier of the editor`)),e.hasCompletionItemProvider=new H(`editorHasCompletionItemProvider`,!1,t(`editorHasCompletionItemProvider`,`Whether the editor has a completion item provider`)),e.hasCodeActionsProvider=new H(`editorHasCodeActionsProvider`,!1,t(`editorHasCodeActionsProvider`,`Whether the editor has a code actions provider`)),e.hasCodeLensProvider=new H(`editorHasCodeLensProvider`,!1,t(`editorHasCodeLensProvider`,`Whether the editor has a code lens provider`)),e.hasDefinitionProvider=new H(`editorHasDefinitionProvider`,!1,t(`editorHasDefinitionProvider`,`Whether the editor has a definition provider`)),e.hasDeclarationProvider=new H(`editorHasDeclarationProvider`,!1,t(`editorHasDeclarationProvider`,`Whether the editor has a declaration provider`)),e.hasImplementationProvider=new H(`editorHasImplementationProvider`,!1,t(`editorHasImplementationProvider`,`Whether the editor has an implementation provider`)),e.hasTypeDefinitionProvider=new H(`editorHasTypeDefinitionProvider`,!1,t(`editorHasTypeDefinitionProvider`,`Whether the editor has a type definition provider`)),e.hasHoverProvider=new H(`editorHasHoverProvider`,!1,t(`editorHasHoverProvider`,`Whether the editor has a hover provider`)),e.hasDocumentHighlightProvider=new H(`editorHasDocumentHighlightProvider`,!1,t(`editorHasDocumentHighlightProvider`,`Whether the editor has a document highlight provider`)),e.hasDocumentSymbolProvider=new H(`editorHasDocumentSymbolProvider`,!1,t(`editorHasDocumentSymbolProvider`,`Whether the editor has a document symbol provider`)),e.hasReferenceProvider=new H(`editorHasReferenceProvider`,!1,t(`editorHasReferenceProvider`,`Whether the editor has a reference provider`)),e.hasRenameProvider=new H(`editorHasRenameProvider`,!1,t(`editorHasRenameProvider`,`Whether the editor has a rename provider`)),e.hasSignatureHelpProvider=new H(`editorHasSignatureHelpProvider`,!1,t(`editorHasSignatureHelpProvider`,`Whether the editor has a signature help provider`)),e.hasInlayHintsProvider=new H(`editorHasInlayHintsProvider`,!1,t(`editorHasInlayHintsProvider`,`Whether the editor has an inline hints provider`)),e.hasDocumentFormattingProvider=new H(`editorHasDocumentFormattingProvider`,!1,t(`editorHasDocumentFormattingProvider`,`Whether the editor has a document formatting provider`)),e.hasDocumentSelectionFormattingProvider=new H(`editorHasDocumentSelectionFormattingProvider`,!1,t(`editorHasDocumentSelectionFormattingProvider`,`Whether the editor has a document selection formatting provider`)),e.hasMultipleDocumentFormattingProvider=new H(`editorHasMultipleDocumentFormattingProvider`,!1,t(`editorHasMultipleDocumentFormattingProvider`,`Whether the editor has multiple document formatting providers`)),e.hasMultipleDocumentSelectionFormattingProvider=new H(`editorHasMultipleDocumentSelectionFormattingProvider`,!1,t(`editorHasMultipleDocumentSelectionFormattingProvider`,`Whether the editor has multiple document selection formatting providers`))})(Z||={});var Q=0,GO=class extends vv{runEditorCommand(e,t,n){let r=t._getViewModel();r&&this.runCoreEditorCommand(r,n||{})}},KO;(function(e){e.description={description:`Scroll editor in the given direction`,args:[{name:`Editor scroll argument object`,description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:function(e){if(!qs(e))return!1;let t=e;return!(!Ks(t.to)||!Xs(t.by)&&!Ks(t.by)||!Xs(t.value)&&!Js(t.value)||!Xs(t.revealCursor)&&!Ys(t.revealCursor))},schema:{type:`object`,required:[`to`],properties:{to:{type:`string`,enum:[`up`,`down`]},by:{type:`string`,enum:[`line`,`wrappedLine`,`page`,`halfPage`]},value:{type:`number`,default:1},revealCursor:{type:`boolean`}}}}]},e.RawDirection={Up:`up`,Down:`down`},e.RawUnit={Line:`line`,WrappedLine:`wrappedLine`,Page:`page`,HalfPage:`halfPage`};function t(t){let n;switch(t.to){case e.RawDirection.Up:n=1;break;case e.RawDirection.Down:n=2;break;default:return null}let r;switch(t.by){case e.RawUnit.Line:r=1;break;case e.RawUnit.WrappedLine:r=2;break;case e.RawUnit.Page:r=3;break;case e.RawUnit.HalfPage:r=4;break;default:r=2}let i=Math.floor(t.value||1),a=!!t.revealCursor;return{direction:n,unit:r,value:i,revealCursor:a,select:!!t.select}}e.parse=t})(KO||={});var qO;(function(e){e.description={description:`Reveal the given line at the given logical position`,args:[{name:`Reveal line argument object`,description:`Property-value pairs that can be passed through this argument:
					* 'lineNumber': A mandatory line number value.
					* 'at': Logical position at which line has to be revealed.
						\`\`\`
						'top', 'center', 'bottom'
						\`\`\`
				`,constraint:function(e){if(!qs(e))return!1;let t=e;return!(!Js(t.lineNumber)&&!Ks(t.lineNumber)||!Xs(t.at)&&!Ks(t.at))},schema:{type:`object`,required:[`lineNumber`],properties:{lineNumber:{type:[`number`,`string`]},at:{type:`string`,enum:[`top`,`center`,`bottom`]}}}}]},e.RawAtArgument={Top:`top`,Center:`center`,Bottom:`bottom`}})(qO||={});var JO=class{constructor(e){e.addImplementation(1e4,`code-editor`,(e,t)=>{let n=e.get(Gr).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(e,n,t):!1}),e.addImplementation(1e3,`generic-dom-input-textarea`,(e,t)=>{let n=document.activeElement;return n&&[`input`,`textarea`].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,`generic-dom`,(e,t)=>{let n=e.get(Gr).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(e,n,t)):!1})}_runEditorCommand(e,t,n){return this.runEditorCommand(e,t,n)||!0}},YO;(function(e){class n extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[NO.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!0)}}e.MoveTo=U(new n({id:`_moveTo`,inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=U(new n({id:`_moveToSelect`,inSelectionMode:!0,precondition:void 0}));class r extends GO{runCoreEditorCommand(e,t){e.model.pushStackElement();let n=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);e.setCursorStates(t.source,3,n.viewStates.map(e=>X.fromViewState(e))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:n.fromLineNumber,fromViewVisualColumn:n.fromVisualColumn,toViewLineNumber:n.toLineNumber,toViewVisualColumn:n.toVisualColumn}),n.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source)}}e.ColumnSelect=U(new class extends r{constructor(){super({id:`columnSelect`,precondition:void 0})}_getColumnSelectResult(e,t,n,r){let i=e.model.validatePosition(r.position),a=e.coordinatesConverter.validateViewPosition(new I(r.viewPosition.lineNumber,r.viewPosition.column),i),o=r.doColumnSelect?n.fromViewLineNumber:a.lineNumber,s=r.doColumnSelect?n.fromViewVisualColumn:r.mouseColumn-1;return xO.columnSelect(e.cursorConfig,e,o,s,a.lineNumber,r.mouseColumn-1)}}),e.CursorColumnSelectLeft=U(new class extends r{constructor(){super({id:`cursorColumnSelectLeft`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,r){return xO.columnSelectLeft(e.cursorConfig,e,n)}}),e.CursorColumnSelectRight=U(new class extends r{constructor(){super({id:`cursorColumnSelectRight`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,r){return xO.columnSelectRight(e.cursorConfig,e,n)}});class i extends r{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,r){return xO.columnSelectUp(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectUp=U(new i({isPaged:!1,id:`cursorColumnSelectUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=U(new i({isPaged:!0,id:`cursorColumnSelectPageUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3595,linux:{primary:0}}}));class a extends r{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,r){return xO.columnSelectDown(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectDown=U(new a({isPaged:!1,id:`cursorColumnSelectDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=U(new a({isPaged:!0,id:`cursorColumnSelectPageDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends GO{constructor(){super({id:`cursorMove`,precondition:void 0,description:PO.description})}runCoreEditorCommand(e,t){let n=PO.parse(t);n&&this._runCursorMove(e,t.source,n)}_runCursorMove(e,t,n){e.model.pushStackElement(),e.setCursorStates(t,3,o._move(e,e.getCursorStates(),n)),e.revealPrimaryCursor(t,!0)}static _move(e,t,n){let r=n.select,i=n.value;switch(n.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return NO.simpleMove(e,t,n.direction,r,i,n.unit);case 11:case 13:case 12:case 14:return NO.viewportMove(e,t,n.direction,r,i);default:return null}}}e.CursorMoveImpl=o,e.CursorMove=U(new o);class s extends GO{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let n=this._staticArgs;this._staticArgs.value===-1&&(n={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.simpleMove(e,e.getCursorStates(),n.direction,n.select,n.value,n.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=U(new s({args:{direction:0,unit:0,select:!1,value:1},id:`cursorLeft`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=U(new s({args:{direction:0,unit:0,select:!0,value:1},id:`cursorLeftSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1039}})),e.CursorRight=U(new s({args:{direction:1,unit:0,select:!1,value:1},id:`cursorRight`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=U(new s({args:{direction:1,unit:0,select:!0,value:1},id:`cursorRightSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1041}})),e.CursorUp=U(new s({args:{direction:2,unit:2,select:!1,value:1},id:`cursorUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=U(new s({args:{direction:2,unit:2,select:!0,value:1},id:`cursorUpSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=U(new s({args:{direction:2,unit:2,select:!1,value:-1},id:`cursorPageUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:11}})),e.CursorPageUpSelect=U(new s({args:{direction:2,unit:2,select:!0,value:-1},id:`cursorPageUpSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1035}})),e.CursorDown=U(new s({args:{direction:3,unit:2,select:!1,value:1},id:`cursorDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=U(new s({args:{direction:3,unit:2,select:!0,value:1},id:`cursorDownSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=U(new s({args:{direction:3,unit:2,select:!1,value:-1},id:`cursorPageDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:12}})),e.CursorPageDownSelect=U(new s({args:{direction:3,unit:2,select:!0,value:-1},id:`cursorPageDownSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1036}})),e.CreateCursor=U(new class extends GO{constructor(){super({id:`createCursor`,precondition:void 0})}runCoreEditorCommand(e,t){let n;n=t.wholeLine?NO.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):NO.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);let r=e.getCursorStates();if(r.length>1){let i=n.modelState?n.modelState.position:null,a=n.viewState?n.viewState.position:null;for(let n=0,o=r.length;n<o;n++){let o=r[n];if(!(i&&!o.modelState.selection.containsPosition(i))&&!(a&&!o.viewState.selection.containsPosition(a))){r.splice(n,1),e.model.pushStackElement(),e.setCursorStates(t.source,3,r);return}}}r.push(n),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}),e.LastCursorMoveToSelect=U(new class extends GO{constructor(){super({id:`_lastCursorMoveToSelect`,precondition:void 0})}runCoreEditorCommand(e,t){let n=e.getLastAddedCursorIndex(),r=e.getCursorStates(),i=r.slice(0);i[n]=NO.moveTo(e,r[n],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}});class c extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=U(new c({inSelectionMode:!1,id:`cursorHome`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=U(new c({inSelectionMode:!0,id:`cursorHomeSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=r.modelState.position.lineNumber;t[n]=X.fromModelState(r.modelState.move(this._inSelectionMode,i,1,0))}return t}}e.CursorLineStart=U(new l({inSelectionMode:!1,id:`cursorLineStart`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=U(new l({inSelectionMode:!0,id:`cursorLineStartSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:0,mac:{primary:1311}}}));class u extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=U(new u({inSelectionMode:!1,id:`cursorEnd`,precondition:void 0,kbOpts:{args:{sticky:!1},weight:Q,kbExpr:Z.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:`Go to End`,args:[{name:`args`,schema:{type:`object`,properties:{sticky:{description:t(`stickydesc`,`Stick to the end even when going to longer lines`),type:`boolean`,default:!1}}}}]}})),e.CursorEndSelect=U(new u({inSelectionMode:!0,id:`cursorEndSelect`,precondition:void 0,kbOpts:{args:{sticky:!1},weight:Q,kbExpr:Z.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:`Select to End`,args:[{name:`args`,schema:{type:`object`,properties:{sticky:{description:t(`stickydesc`,`Stick to the end even when going to longer lines`),type:`boolean`,default:!1}}}}]}}));class d extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){let n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r],a=i.modelState.position.lineNumber,o=e.model.getLineMaxColumn(a);n[r]=X.fromModelState(i.modelState.move(this._inSelectionMode,a,o,0))}return n}}e.CursorLineEnd=U(new d({inSelectionMode:!1,id:`cursorLineEnd`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=U(new d({inSelectionMode:!0,id:`cursorLineEndSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=U(new f({inSelectionMode:!1,id:`cursorTop`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=U(new f({inSelectionMode:!0,id:`cursorTopSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=U(new p({inSelectionMode:!1,id:`cursorBottom`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=U(new p({inSelectionMode:!0,id:`cursorBottomSelect`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends GO{constructor(){super({id:`editorScroll`,precondition:void 0,description:KO.description})}runCoreEditorCommand(e,t){let n=KO.parse(t);n&&this._runEditorScroll(e,t.source,n)}_runEditorScroll(e,t,n){let r=this._computeDesiredScrollTop(e,n);if(n.revealCursor){let i=e.getCompletelyVisibleViewRangeAtScrollTop(r);e.setCursorStates(t,3,[NO.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),i,n.select)])}e.setScrollTop(r,0)}_computeDesiredScrollTop(e,t){if(t.unit===1){let n=e.getCompletelyVisibleViewRange(),r=e.coordinatesConverter.convertViewRangeToModelRange(n),i;i=t.direction===1?Math.max(1,r.startLineNumber-t.value):Math.min(e.model.getLineCount(),r.startLineNumber+t.value);let a=e.coordinatesConverter.convertModelPositionToViewPosition(new I(i,1));return e.getVerticalOffsetForLineNumber(a.lineNumber)}let n;n=t.unit===3?e.cursorConfig.pageSize*t.value:t.unit===4?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;let r=(t.direction===1?-1:1)*n;return e.getScrollTop()+r*e.cursorConfig.lineHeight}}e.EditorScrollImpl=m,e.EditorScroll=U(new m),e.ScrollLineUp=U(new class extends GO{constructor(){super({id:`scrollLineUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageUp=U(new class extends GO{constructor(){super({id:`scrollPageUp`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollLineDown=U(new class extends GO{constructor(){super({id:`scrollLineDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageDown=U(new class extends GO{constructor(){super({id:`scrollPageDown`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,n){e.EditorScroll._runEditorScroll(t,n.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class h extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[NO.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),e.revealPrimaryCursor(t.source,!0)}}e.WordSelect=U(new h({inSelectionMode:!1,id:`_wordSelect`,precondition:void 0})),e.WordSelectDrag=U(new h({inSelectionMode:!0,id:`_wordSelectDrag`,precondition:void 0})),e.LastCursorWordSelect=U(new class extends GO{constructor(){super({id:`lastCursorWordSelect`,precondition:void 0})}runCoreEditorCommand(e,t){let n=e.getLastAddedCursorIndex(),r=e.getCursorStates(),i=r.slice(0),a=r[n];i[n]=NO.word(e,a,a.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}});class g extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[NO.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!1)}}e.LineSelect=U(new g({inSelectionMode:!1,id:`_lineSelect`,precondition:void 0})),e.LineSelectDrag=U(new g({inSelectionMode:!0,id:`_lineSelectDrag`,precondition:void 0}));class _ extends GO{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){let n=e.getLastAddedCursorIndex(),r=e.getCursorStates(),i=r.slice(0);i[n]=NO.line(e,r[n],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}}e.LastCursorLineSelect=U(new _({inSelectionMode:!1,id:`lastCursorLineSelect`,precondition:void 0})),e.LastCursorLineSelectDrag=U(new _({inSelectionMode:!0,id:`lastCursorLineSelectDrag`,precondition:void 0})),e.ExpandLineSelection=U(new class extends GO{constructor(){super({id:`expandLineSelection`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:2090}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,NO.expandLineSelection(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}}),e.CancelSelection=U(new class extends GO{constructor(){super({id:`cancelSelection`,precondition:Z.hasNonEmptySelection,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[NO.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=U(new class extends GO{constructor(){super({id:`removeSecondaryCursors`,precondition:Z.hasMultipleSelections,kbOpts:{weight:Q+1,kbExpr:Z.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,n){e.model.pushStackElement(),e.setCursorStates(n.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(n.source,!0),V_(t(`removedCursor`,`Removed secondary cursors`))}}),e.RevealLine=U(new class extends GO{constructor(){super({id:`revealLine`,precondition:void 0,description:qO.description})}runCoreEditorCommand(e,t){let n=t,r=n.lineNumber||0,i=typeof r==`number`?r+1:parseInt(r)+1;i<1&&(i=1);let a=e.model.getLineCount();i>a&&(i=a);let o=new L(i,1,i,e.model.getLineMaxColumn(i)),s=0;if(n.at)switch(n.at){case qO.RawAtArgument.Top:s=3;break;case qO.RawAtArgument.Center:s=1;break;case qO.RawAtArgument.Bottom:s=4;break;default:break}let c=e.coordinatesConverter.convertModelRangeToViewRange(o);e.revealRange(t.source,!1,c,s,0)}}),e.SelectAll=new class extends JO{constructor(){super(Nv)}runDOMCommand(){$r&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand(`selectAll`)}runEditorCommand(e,t,n){let r=t._getViewModel();r&&this.runCoreEditorCommand(r,n)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(`keyboard`,3,[NO.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=U(new class extends GO{constructor(){super({id:`setSelection`,precondition:void 0})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[X.fromModelSelection(t.selection)])}})})(YO||={});var XO=pg.and(Z.textInputFocus,Z.columnSelection);function ZO(e,t){Hg.registerKeybindingRule({id:e,primary:t,when:XO,weight:Q+1})}ZO(YO.CursorColumnSelectLeft.id,1039),ZO(YO.CursorColumnSelectRight.id,1041),ZO(YO.CursorColumnSelectUp.id,1040),ZO(YO.CursorColumnSelectPageUp.id,1035),ZO(YO.CursorColumnSelectDown.id,1042),ZO(YO.CursorColumnSelectPageDown.id,1036);function QO(e){return e.register(),e}var $O;(function(e){class t extends vv{runEditorCommand(e,t,n){let r=t._getViewModel();r&&this.runCoreEditingCommand(t,r,n||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=U(new class extends t{constructor(){super({id:`lineBreakInsert`,precondition:Z.writable,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,zO.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection)))}}),e.Outdent=U(new class extends t{constructor(){super({id:`outdent`,precondition:Z.writable,kbOpts:{weight:Q,kbExpr:pg.and(Z.editorTextFocus,Z.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,zO.outdent(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.Tab=U(new class extends t{constructor(){super({id:`tab`,precondition:Z.writable,kbOpts:{weight:Q,kbExpr:pg.and(Z.editorTextFocus,Z.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,zO.tab(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.DeleteLeft=U(new class extends t{constructor(){super({id:`deleteLeft`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,n){let[r,i]=kO.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection),t.getCursorAutoClosedCharacters());r&&e.pushUndoStop(),e.executeCommands(this.id,i),t.setPrevEditOperationType(2)}}),e.DeleteRight=U(new class extends t{constructor(){super({id:`deleteRight`,precondition:void 0,kbOpts:{weight:Q,kbExpr:Z.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,n){let[r,i]=kO.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection));r&&e.pushUndoStop(),e.executeCommands(this.id,i),t.setPrevEditOperationType(3)}}),e.Undo=new class extends JO{constructor(){super(jv)}runDOMCommand(){document.execCommand(`undo`)}runEditorCommand(e,t,n){if(!(!t.hasModel()||t.getOption(80)===!0))return t.getModel().undo()}},e.Redo=new class extends JO{constructor(){super(Mv)}runDOMCommand(){document.execCommand(`redo`)}runEditorCommand(e,t,n){if(!(!t.hasModel()||t.getOption(80)===!0))return t.getModel().redo()}}})($O||={});var ek=class extends hv{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){let n=e.get(Gr).getFocusedCodeEditor();n&&n.trigger(`keyboard`,this._handlerId,t)}};function tk(e,t){QO(new ek(`default:`+e,e)),QO(new ek(e,e,t))}tk(`type`,{description:`Type`,args:[{name:`args`,schema:{type:`object`,required:[`text`],properties:{text:{type:`string`}}}}]}),tk(`replacePreviousChar`),tk(`compositionType`),tk(`compositionStart`),tk(`compositionEnd`),tk(`paste`),tk(`cut`);var nk=class{constructor(e,t,n,r){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=r}paste(e,t,n,r){this.commandDelegate.paste(e,t,n,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,r){this.commandDelegate.compositionType(e,t,n,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){YO.SetSelection.runCoreEditorCommand(this.viewModel,{source:`keyboard`,selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new I(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case`altKey`:return e.altKey;case`ctrlKey`:return e.ctrlKey;case`metaKey`:return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case`altKey`:return e.ctrlKey||e.metaKey;case`ctrlKey`:return e.altKey||e.metaKey;case`metaKey`:return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,n=m&&t.get(95),r=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:`mouse`,position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){YO.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){YO.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),YO.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:`mouse`,position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),YO.CreateCursor.runCoreEditorCommand(this.viewModel,{source:`mouse`,position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){YO.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){YO.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){YO.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){YO.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){YO.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){YO.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){YO.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){YO.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){YO.SelectAll.runCoreEditorCommand(this.viewModel,{source:`mouse`})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}},rk=class e{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(t){return e.convertViewToModelMouseTarget(t,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new ik(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}},ik=class{constructor(e,t,n,r,i,a){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,this.range=i,this.detail=a}toString(){return AD.toString(this)}},ak=class{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw Error(`Illegal value for lineNumber`);return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;let n=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<n){let n=t-e+1;return this._rendLineNumberStart-=n,null}if(e>r)return null;let i=0,a=0;for(let o=n;o<=r;o++){let n=o-this._rendLineNumberStart;e<=o&&o<=t&&(a===0?(i=n,a=1):a++)}if(e<n){let r=0;r=t<n?t-e+1:n-e,this._rendLineNumberStart-=r}return this._lines.splice(i,a)}onLinesChanged(e,t){if(this.getCount()===0)return!1;let n=this.getStartLineNumber(),r=this.getEndLineNumber(),i=!1;for(let a=e;a<=t;a++)a>=n&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),i=!0);return i}onLinesInserted(e,t){if(this.getCount()===0)return null;let n=t-e+1,r=this.getStartLineNumber(),i=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=n,null;if(e>i)return null;if(n+e>i)return this._lines.splice(e-this._rendLineNumberStart,i-e+1);let a=[];for(let e=0;e<n;e++)a[e]=this._createLine();let o=e-this._rendLineNumberStart,s=this._lines.slice(0,o),c=this._lines.slice(o,this._lines.length-n),l=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=s.concat(a).concat(c),l}onTokensChanged(e){if(this.getCount()===0)return!1;let t=this.getStartLineNumber(),n=this.getEndLineNumber(),r=!1;for(let i=0,a=e.length;i<a;i++){let a=e[i];if(a.toLineNumber<t||a.fromLineNumber>n)continue;let o=Math.max(t,a.fromLineNumber),s=Math.min(n,a.toLineNumber);for(let e=o;e<=s;e++){let t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),r=!0}}return r}},ok=class{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new ak(()=>this._host.createVisibleLine())}_createDomNode(){let e=W(document.createElement(`div`));return e.setClassName(`view-layer`),e.setPosition(`absolute`),e.domNode.setAttribute(`role`,`presentation`),e.domNode.setAttribute(`aria-hidden`,`true`),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,n=t.length;e<n;e++){let n=t[e].getDomNode();n&&this.domNode.domNode.removeChild(n)}return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,n=t.length;e<n;e++){let n=t[e].getDomNode();n&&this.domNode.domNode.removeChild(n)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),n=new sk(this.domNode.domNode,this._host,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},i=n.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(i.rendLineNumberStart,i.lines)}},sk=class e{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,r){let i={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(i.rendLineNumberStart+i.linesLength-1<t||n<i.rendLineNumberStart){i.rendLineNumberStart=t,i.linesLength=n-t+1,i.lines=[];for(let e=t;e<=n;e++)i.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(i,!0,r),i}if(this._renderUntouchedLines(i,Math.max(t-i.rendLineNumberStart,0),Math.min(n-i.rendLineNumberStart,i.linesLength-1),r,t),i.rendLineNumberStart>t){let e=t,a=Math.min(n,i.rendLineNumberStart-1);e<=a&&(this._insertLinesBefore(i,e,a,r,t),i.linesLength+=a-e+1)}else if(i.rendLineNumberStart<t){let e=Math.min(i.linesLength,t-i.rendLineNumberStart);e>0&&(this._removeLinesBefore(i,e),i.linesLength-=e)}if(i.rendLineNumberStart=t,i.rendLineNumberStart+i.linesLength-1<n){let e=i.rendLineNumberStart+i.linesLength,a=n;e<=a&&(this._insertLinesAfter(i,e,a,r,t),i.linesLength+=a-e+1)}else if(i.rendLineNumberStart+i.linesLength-1>n){let e=Math.max(0,n-i.rendLineNumberStart+1),t=i.linesLength-1-e+1;t>0&&(this._removeLinesAfter(i,t),i.linesLength-=t)}return this._finishRendering(i,!1,r),i}_renderUntouchedLines(e,t,n,r,i){let a=e.rendLineNumberStart,o=e.lines;for(let e=t;e<=n;e++){let t=a+e;o[e].layoutLine(t,r[t-i])}}_insertLinesBefore(e,t,n,r,i){let a=[],o=0;for(let e=t;e<=n;e++)a[o++]=this.host.createVisibleLine();e.lines=a.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){let t=e.lines[n].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,r,i){let a=[],o=0;for(let e=t;e<=n;e++)a[o++]=this.host.createVisibleLine();e.lines=e.lines.concat(a)}_removeLinesAfter(e,t){let n=e.linesLength-t;for(let r=0;r<t;r++){let t=e.lines[n+r].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(n,t)}_finishRenderingNewLines(t,n,r,i){e._ttPolicy&&(r=e._ttPolicy.createHTML(r));let a=this.domNode.lastChild;n||!a?this.domNode.innerHTML=r:a.insertAdjacentHTML(`afterend`,r);let o=this.domNode.lastChild;for(let e=t.linesLength-1;e>=0;e--){let n=t.lines[e];i[e]&&(n.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(t,n,r){let i=document.createElement(`div`);e._ttPolicy&&(n=e._ttPolicy.createHTML(n)),i.innerHTML=n;for(let e=0;e<t.linesLength;e++){let n=t.lines[e];if(r[e]){let e=i.firstChild,t=n.getDomNode();t.parentNode.replaceChild(e,t),n.setDomNode(e)}}}_finishRendering(t,n,r){let i=e._sb,a=t.linesLength,o=t.lines,s=t.rendLineNumberStart,c=[];{i.reset();let e=!1;for(let t=0;t<a;t++){let n=o[t];c[t]=!1,!n.getDomNode()&&n.renderLine(t+s,r[t],this.viewportData,i)&&(c[t]=!0,e=!0)}e&&this._finishRenderingNewLines(t,n,i.build(),c)}{i.reset();let e=!1,n=[];for(let t=0;t<a;t++){let a=o[t];n[t]=!1,!c[t]&&a.renderLine(t+s,r[t],this.viewportData,i)&&(n[t]=!0,e=!0)}e&&this._finishRenderingInvalidLines(t,i.build(),n)}}};sk._ttPolicy=window.trustedTypes?.createPolicy(`editorViewLayer`,{createHTML:e=>e}),sk._sb=wd(1e5);var ck=class extends sy{constructor(e){super(e),this._visibleLines=new ok(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName(`view-overlays`)}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new lk(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(e=>e.shouldRender());for(let n=0,r=t.length;n<r;n++){let r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName(`focused`,this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}},lk=class{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=W(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,r){let i=``;for(let t=0,r=this._dynamicOverlays.length;t<r;t++){let r=this._dynamicOverlays[t];i+=r.render(n.startLineNumber,e)}return this._renderedContent===i?!1:(this._renderedContent=i,r.appendASCIIString(`<div style="position:absolute;top:`),r.appendASCIIString(String(t)),r.appendASCIIString(`px;width:100%;height:`),r.appendASCIIString(String(this._lineHeight)),r.appendASCIIString(`px;">`),r.appendASCIIString(i),r.appendASCIIString(`</div>`),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}},uk=class extends ck{constructor(e){super(e),this._contentWidth=this._context.configuration.options.get(129).contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){return this._contentWidth=this._context.configuration.options.get(129).contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}},dk=class extends ck{constructor(e){super(e);let t=this._context.configuration.options;this._contentLeft=t.get(129).contentLeft,this.domNode.setClassName(`margin-view-overlays`),this.domNode.setWidth(1),Wv.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){let t=this._context.configuration.options;return Wv.applyFontInfo(this.domNode,t.get(43)),this._contentLeft=t.get(129).contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}},fk=class{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}},pk=class extends sy{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=W(document.createElement(`div`)),cy.write(this.domNode,1),this.domNode.setClassName(`contentWidgets`),this.domNode.setPosition(`absolute`),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=W(document.createElement(`div`)),cy.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName(`overflowingContentWidgets`)}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){let t=new mk(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t];delete this._widgets[t];let n=e.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute(`monaco-visible-content-widget`),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].prepareRender(e)}render(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].render(e)}},mk=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=W(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let r=this._context.configuration.options,i=r.get(129);this._fixedOverflowWidgets=r.get(36),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this._lineHeight=r.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?`fixed`:`absolute`),this.domNode.setVisibility(`hidden`),this.domNode.setAttribute(`widgetId`,this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){let t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){let e=t.get(129);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){let e=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(e.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(e.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(e))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,r,i){let a=e.top,o=a,s=t.top+this._lineHeight,c=i.viewportHeight-s,l=a-r,u=o>=r,d=s,f=c>=r,p=e.left,m=t.left;return p+n>i.scrollLeft+i.viewportWidth&&(p=i.scrollLeft+i.viewportWidth-n),m+n>i.scrollLeft+i.viewportWidth&&(m=i.scrollLeft+i.viewportWidth-n),p<i.scrollLeft&&(p=i.scrollLeft),m<i.scrollLeft&&(m=i.scrollLeft),{fitsAbove:u,aboveTop:l,aboveLeft:p,fitsBelow:f,belowTop:d,belowLeft:m}}_layoutHorizontalSegmentInPage(e,t,n,r){let i=Math.max(0,t.left-r),a=Math.min(t.left+t.width+r,e.width),o=t.left+n-va.scrollX;if(o+r>a){let e=o-(a-r);o-=e,n-=e}if(o<i){let e=o-i;o-=e,n-=e}return[n,o]}_layoutBoxInPage(e,t,n,r,i){let a=e.top-r,o=t.top+this._lineHeight,s=_a(this._viewDomNode.domNode),c=s.top+a-va.scrollY,l=s.top+o-va.scrollY,u=fa(document.body),[d,f]=this._layoutHorizontalSegmentInPage(u,s,e.left-i.scrollLeft+this._contentLeft,n),[p,m]=this._layoutHorizontalSegmentInPage(u,s,t.left-i.scrollLeft+this._contentLeft,n),h=c>=22,g=l+r<=u.height-22;return this._fixedOverflowWidgets?{fitsAbove:h,aboveTop:Math.max(c,22),aboveLeft:f,fitsBelow:g,belowTop:l,belowLeft:m}:{fitsAbove:h,aboveTop:a,aboveLeft:d,fitsBelow:g,belowTop:o,belowLeft:p}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new fk(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];let t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],r=t[0];for(let e of t)e.lineNumber<n.lineNumber&&(n=e),e.lineNumber>r.lineNumber&&(r=e);let i=1073741824;for(let e of n.ranges)e.left<i&&(i=e.left);let a=1073741824;for(let e of r.ranges)e.left<a&&(a=e.left);return[new fk(e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,i),new fk(e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop,a)]}_prepareRenderWidget(e){let[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let e=null;if(typeof this._actual.beforeRender==`function`&&(e=hk(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeClientWidth=e.width,this._cachedDomNodeClientHeight=e.height;else{let e=this.domNode.domNode;this._cachedDomNodeClientWidth=e.clientWidth,this._cachedDomNodeClientHeight=e.clientHeight}}let r;if(r=this.allowEditorOverflow?this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let e=1;e<=2;e++)for(let n of this._preference)if(n===1){if(!r)return null;if(e===2||r.fitsAbove)return{coordinate:new fk(r.aboveTop,r.aboveLeft),position:1}}else if(n===2){if(!r)return null;if(e===2||r.fitsBelow)return{coordinate:new fk(r.belowTop,r.belowLeft),position:2}}else if(this.allowEditorOverflow)return{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0};else return{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute(`monaco-visible-content-widget`),this._isVisible=!1,this.domNode.setVisibility(`hidden`)),typeof this._actual.afterRender==`function`&&hk(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||=(this.domNode.setVisibility(`inherit`),this.domNode.setAttribute(`monaco-visible-content-widget`,`true`),!0),typeof this._actual.afterRender==`function`&&hk(this._actual.afterRender,this._actual,this._renderData.position)}};function hk(e,t,...n){try{return e.call(t,...n)}catch{return null}}var gk=!0,_k=class extends dO{constructor(e){super(),this._context=e;let t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new $n(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=gk?this._selections.slice(0,1):this._selections,n=t.map(e=>e.positionLineNumber);n.sort((e,t)=>e-t),Op(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);let r=t.every(e=>e.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=this._renderOne(e),n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,i=this._cursorLineNumbers.length,a=0,o=[];for(let e=n;e<=r;e++){let r=e-n;for(;a<i&&this._cursorLineNumbers[a]<e;)a++;a<i&&this._cursorLineNumbers[a]===e?o[r]=t:o[r]=``}this._renderData=o}render(e,t){if(!this._renderData)return``;let n=t-e;return n>=this._renderData.length?``:this._renderData[n]}},vk=class extends _k{_renderOne(e){return`<div class="${`current-line`+(this._shouldRenderOther()?` current-line-both`:``)}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight===`line`||this._renderLineHighlight===`all`)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight===`gutter`||this._renderLineHighlight===`all`)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},yk=class extends _k{_renderOne(e){return`<div class="${`current-line`+(this._shouldRenderMargin()?` current-line-margin`:``)+(this._shouldRenderOther()?` current-line-margin-both`:``)}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight===`gutter`||this._renderLineHighlight===`all`)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight===`line`||this._renderLineHighlight===`all`)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}};iv((e,t)=>{gk=!1;let n=e.getColor(GT);if(n&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${n}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${n}; border: none; }`)),!n||n.isTransparent()||e.defines(KT)){let n=e.getColor(KT);n&&(gk=!0,t.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),e.type===`hc`&&(t.addRule(`.monaco-editor .view-overlays .current-line { border-width: 1px; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }`)))}});var bk=class extends dO{constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),n=[],r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.options.className&&(n[r++]=i)}n=n.sort((e,t)=>{if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;let n=e.options.className,r=t.options.className;return n<r?-1:n>r?1:L.compareRangesUsingStarts(e.range,t.range)});let i=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,o=[];for(let e=i;e<=a;e++){let t=e-i;o[t]=``}this._renderWholeLineDecorations(e,n,o),this._renderNormalDecorations(e,n,o),this._renderResult=o}_renderWholeLineDecorations(e,t,n){let r=String(this._lineHeight),i=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber;for(let e=0,o=t.length;e<o;e++){let o=t[e];if(!o.options.isWholeLine)continue;let s=`<div class="cdr `+o.options.className+`" style="left:0;width:100%;height:`+r+`px;"></div>`,c=Math.max(o.range.startLineNumber,i),l=Math.min(o.range.endLineNumber,a);for(let e=c;e<=l;e++){let t=e-i;n[t]+=s}}}_renderNormalDecorations(e,t,n){let r=String(this._lineHeight),i=e.visibleRange.startLineNumber,a=null,o=!1,s=null;for(let c=0,l=t.length;c<l;c++){let l=t[c];if(l.options.isWholeLine)continue;let u=l.options.className,d=!!l.options.showIfCollapsed,f=l.range;if(d&&f.endColumn===1&&f.endLineNumber!==f.startLineNumber&&(f=new L(f.startLineNumber,f.startColumn,f.endLineNumber-1,this._context.model.getLineMaxColumn(f.endLineNumber-1))),a===u&&o===d&&L.areIntersectingOrTouching(s,f)){s=L.plusRange(s,f);continue}a!==null&&this._renderNormalDecoration(e,s,a,o,r,i,n),a=u,o=d,s=f}a!==null&&this._renderNormalDecoration(e,s,a,o,r,i,n)}_renderNormalDecoration(e,t,n,r,i,a,o){let s=e.linesVisibleRangesForRange(t,n===`findMatch`);if(s)for(let e=0,t=s.length;e<t;e++){let t=s[e];if(t.outsideRenderedLine)continue;let c=t.lineNumber-a;if(r&&t.ranges.length===1){let e=t.ranges[0];e.width===0&&(t.ranges[0]=new fy(e.left,this._typicalHalfwidthCharacterWidth))}for(let e=0,r=t.ranges.length;e<r;e++){let r=t.ranges[e],a=`<div class="cdr `+n+`" style="left:`+String(r.left)+`px;width:`+String(r.width)+`px;height:`+i+`px;"></div>`;o[c]+=a}}}render(e,t){if(!this._renderResult)return``;let n=t-e;return n<0||n>=this._renderResult.length?``:this._renderResult[n]}},xk=class extends j{onclick(e,t){this._register(R(e,z.CLICK,e=>t(new Ci(e))))}onmousedown(e,t){this._register(R(e,z.MOUSE_DOWN,e=>t(new Ci(e))))}onmouseover(e,t){this._register(R(e,z.MOUSE_OVER,e=>t(new Ci(e))))}onnonbubblingmouseout(e,t){this._register(ea(e,e=>t(new Ci(e))))}onkeydown(e,t){this._register(R(e,z.KEY_DOWN,e=>t(new vi(e))))}onkeyup(e,t){this._register(R(e,z.KEY_UP,e=>t(new vi(e))))}oninput(e,t){this._register(R(e,z.INPUT,t))}onblur(e,t){this._register(R(e,z.BLUR,t))}onfocus(e,t){this._register(R(e,z.FOCUS,t))}ignoreGesture(e){Yv.ignoreTarget(e)}},Sk=class extends xk{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement(`div`),this.bgDomNode.className=`arrow-background`,this.bgDomNode.style.position=`absolute`,this.bgDomNode.style.width=e.bgWidth+`px`,this.bgDomNode.style.height=e.bgHeight+`px`,e.top!==void 0&&(this.bgDomNode.style.top=`0px`),e.left!==void 0&&(this.bgDomNode.style.left=`0px`),e.bottom!==void 0&&(this.bgDomNode.style.bottom=`0px`),e.right!==void 0&&(this.bgDomNode.style.right=`0px`),this.domNode=document.createElement(`div`),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position=`absolute`,this.domNode.style.width=`11px`,this.domNode.style.height=`11px`,e.top!==void 0&&(this.domNode.style.top=e.top+`px`),e.left!==void 0&&(this.domNode.style.left=e.left+`px`),e.bottom!==void 0&&(this.domNode.style.bottom=e.bottom+`px`),e.right!==void 0&&(this.domNode.style.right=e.right+`px`),this._mouseMoveMonitor=this._register(new Zv),this.onmousedown(this.bgDomNode,e=>this._arrowMouseDown(e)),this.onmousedown(this.domNode,e=>this._arrowMouseDown(e)),this._mousedownRepeatTimer=this._register(new Ii),this._mousedownScheduleRepeatTimer=this._register(new Fi)}_arrowMouseDown(e){this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)},200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,Xv,e=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}},Ck=class extends j{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Fi)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?` fade`:``)))}},wk=140,Tk=class extends xk{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Ck(e.visibility,`visible scrollbar `+e.extraScrollbarClassName,`invisible scrollbar `+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new Zv),this._shouldRender=!0,this.domNode=W(document.createElement(`div`)),this.domNode.setAttribute(`role`,`presentation`),this.domNode.setAttribute(`aria-hidden`,`true`),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition(`absolute`),this.onmousedown(this.domNode.domNode,e=>this._domNodeMouseDown(e))}_createArrow(e){let t=this._register(new Sk(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=W(document.createElement(`div`)),this.slider.setClassName(`slider`),this.slider.setPosition(`absolute`),this.slider.setTop(e),this.slider.setLeft(t),typeof n==`number`&&this.slider.setWidth(n),typeof r==`number`&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain(`strict`),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,e=>{e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}),this.onclick(this.slider.domNode,e=>{e.leftButton&&e.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),i=this._sliderMousePosition(e);n<=i&&i<=r?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX==`number`&&typeof e.browserEvent.offsetY==`number`)t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{let r=_a(this.domNode.domNode);t=e.posx-r.left,n=e.posy-r.top}let r=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){let n=this._sliderMousePosition(e),r=this._sliderOrthogonalMousePosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName(`active`,!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,Xv,e=>{let t=this._sliderOrthogonalMousePosition(e),a=Math.abs(t-r);if(f&&a>wk){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let o=this._sliderMousePosition(e)-n;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(o))},()=>{this.slider.toggleClassName(`active`,!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Ek=20,Dk=class e{constructor(e,t,n,r,i,a){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=i,this._scrollPosition=a,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new e(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize===t?!1:(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){let t=Math.round(e);return this._scrollSize===t?!1:(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition===t?!1:(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,i){let a=Math.max(0,n-e),o=Math.max(0,a-2*t),s=r>0&&r>n;if(!s)return{computedAvailableSize:Math.round(a),computedIsNeeded:s,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(Ek,Math.floor(n*o/r))),l=(o-c)/(r-n),u=i*l;return{computedAvailableSize:Math.round(a),computedIsNeeded:s,computedSliderSize:Math.round(c),computedSliderRatio:l,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){let t=e._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}},Ok=Zl(`scrollbar-button-left`,$l.triangleLeft),kk=Zl(`scrollbar-button-right`,$l.triangleRight),Ak=class extends Tk{constructor(e,t,n){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Dk(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,i.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:`horizontal`,scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let e=(t.arrowSize-11)/2,n=(t.horizontalScrollbarSize-11)/2;this._createArrow({className:`scra`,icon:Ok,top:n,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new wi(null,1,0))}),this._createArrow({className:`scra`,icon:kk,top:n,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new wi(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},jk=Zl(`scrollbar-button-up`,$l.triangleUp),Mk=Zl(`scrollbar-button-down`,$l.triangleDown),Nk=class extends Tk{constructor(e,t,n){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Dk(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,i.scrollTop),visibility:t.vertical,extraScrollbarClassName:`vertical`,scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let e=(t.arrowSize-11)/2,n=(t.verticalScrollbarSize-11)/2;this._createArrow({className:`scra`,icon:jk,top:e,left:n,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new wi(null,0,1))}),this._createArrow({className:`scra`,icon:Mk,top:void 0,left:n,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new wi(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},Pk=class e{constructor(e,t,n,r,i,a){this._scrollStateBrand=void 0,e|=0,t|=0,n|=0,r|=0,i|=0,a|=0,this.rawScrollLeft=n,this.rawScrollTop=a,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),r<0&&(r=0),a+r>i&&(a=i-r),a<0&&(a=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=r,this.scrollHeight=i,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(t,n){return new e(t.width===void 0?this.width:t.width,t.scrollWidth===void 0?this.scrollWidth:t.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,t.height===void 0?this.height:t.height,t.scrollHeight===void 0?this.scrollHeight:t.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new e(this.width,this.scrollWidth,t.scrollLeft===void 0?this.rawScrollLeft:t.scrollLeft,this.height,this.scrollHeight,t.scrollTop===void 0?this.rawScrollTop:t.scrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,a=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,s=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:a,scrollHeightChanged:o,scrollTopChanged:s}}},Fk=class extends j{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new N),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new Pk(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&=(this._smoothScrolling.dispose(),null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&=(this._smoothScrolling.dispose(),null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:e.scrollLeft===void 0?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:e.scrollTop===void 0?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;r=t?new zk(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{let t=this._state.withScrollPosition(e);this._smoothScrolling=zk.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},Ik=class{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function Lk(e,t){let n=t-e;return function(t){return e+n*Vk(t)}}function Rk(e,t,n){return function(r){return r<n?e(r/n):t((r-n)/(1-n))}}var zk=class e{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,i;return e<t?(r=e+.75*n,i=t-.75*n):(r=e-.75*n,i=t+.75*n),Rk(Lk(e,r),Lk(i,t),.33)}return Lk(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;return t<1?new Ik(this.scrollLeft(t),this.scrollTop(t),!1):new Ik(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,n,r){return e.start(t,n,r)}static start(t,n,r){return r+=10,new e(t,n,Date.now()-10,r)}};function Bk(e){return e**3}function Vk(e){return 1-Bk(1-e)}var Hk=500,Uk=50,Wk=class{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},Gk=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{let i=r===this._front?e:2**-n;if(e-=i,t+=this._memory[r].score*i,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){let r=new Wk(e,t,n);r.score=this._computeScore(r),this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return!(this._front===-1&&this._rear===-1)&&this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Gk.INSTANCE=new Gk;var Kk=class extends xk{constructor(e,t,n){super(),this._onScroll=this._register(new N),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new N),e.style.overflow=`hidden`,this._options=Xk(t),this._scrollable=n,this._register(this._scrollable.onScroll(e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)}));let r={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Nk(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new Ak(this._scrollable,this._options,r)),this._domNode=document.createElement(`div`),this._domNode.className=`monaco-scrollable-element `+this._options.className,this._domNode.setAttribute(`role`,`presentation`),this._domNode.style.position=`relative`,this._domNode.style.overflow=`hidden`,this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=W(document.createElement(`div`)),this._leftShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=W(document.createElement(`div`)),this._topShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=W(document.createElement(`div`)),this._topLeftShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,e=>this._onMouseOver(e)),this.onnonbubblingmouseout(this._listenOnDomNode,e=>this._onMouseOut(e)),this._hideTimeout=this._register(new Fi),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Et(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,p&&(this._options.className+=` mac`),this._domNode.className=`monaco-scrollable-element `+this._options.className}updateOptions(e){e.handleMouseWheel!==void 0&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),e.mouseWheelScrollSensitivity!==void 0&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),e.fastScrollSensitivity!==void 0&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),e.scrollPredominantAxis!==void 0&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),e.horizontal!==void 0&&(this._options.horizontal=e.horizontal),e.vertical!==void 0&&(this._options.vertical=e.vertical),e.horizontalScrollbarSize!==void 0&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),e.verticalScrollbarSize!==void 0&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),e.scrollByPage!==void 0&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Et(this._mouseWheelToDispose),e&&this._mouseWheelToDispose.push(R(this._listenOnDomNode,z.MOUSE_WHEEL,e=>{this._onMouseWheel(new wi(e))},{passive:!1})))}_onMouseWheel(e){let t=Gk.INSTANCE;{let n=window.devicePixelRatio/Xr();f||m?t.accept(Date.now(),e.deltaX/n,e.deltaY/n):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,i=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(i)?i=0:r=0),this._options.flipAxes&&([r,i]=[i,r]);let a=!p&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!i&&(i=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(i*=this._options.fastScrollSensitivity,r*=this._options.fastScrollSensitivity);let o=this._scrollable.getFutureScrollPosition(),s={};if(r){let e=Uk*r,t=o.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(s,t)}if(i){let e=Uk*i,t=o.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(s,t)}s=this._scrollable.validateScrollPosition(s),(o.scrollLeft!==s.scrollLeft||o.scrollTop!==s.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(s):this._scrollable.setScrollPositionNow(s),n=!0)}let r=n;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?` left`:``,i=t?` top`:``,a=n||t?` top-left-corner`:``;this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${i}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${i}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Hk)}},qk=class extends Kk{constructor(e,t){t||={},t.mouseWheelSmoothScroll=!1;let n=new Fk(0,e=>aa(e));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Jk=class extends Kk{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Yk=class extends qk{constructor(e,t){super(e,t),this._element=e,this.onScroll(e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function Xk(e){let t={lazyRender:e.lazyRender===void 0?!1:e.lazyRender,className:e.className===void 0?``:e.className,useShadows:e.useShadows===void 0?!0:e.useShadows,handleMouseWheel:e.handleMouseWheel===void 0?!0:e.handleMouseWheel,flipAxes:e.flipAxes===void 0?!1:e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:e.consumeMouseWheelIfScrollbarIsNeeded===void 0?!1:e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:e.alwaysConsumeMouseWheel===void 0?!1:e.alwaysConsumeMouseWheel,scrollYToX:e.scrollYToX===void 0?!1:e.scrollYToX,mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity===void 0?1:e.mouseWheelScrollSensitivity,fastScrollSensitivity:e.fastScrollSensitivity===void 0?5:e.fastScrollSensitivity,scrollPredominantAxis:e.scrollPredominantAxis===void 0?!0:e.scrollPredominantAxis,mouseWheelSmoothScroll:e.mouseWheelSmoothScroll===void 0?!0:e.mouseWheelSmoothScroll,arrowSize:e.arrowSize===void 0?11:e.arrowSize,listenOnDomNode:e.listenOnDomNode===void 0?null:e.listenOnDomNode,horizontal:e.horizontal===void 0?1:e.horizontal,horizontalScrollbarSize:e.horizontalScrollbarSize===void 0?10:e.horizontalScrollbarSize,horizontalSliderSize:e.horizontalSliderSize===void 0?0:e.horizontalSliderSize,horizontalHasArrows:e.horizontalHasArrows===void 0?!1:e.horizontalHasArrows,vertical:e.vertical===void 0?1:e.vertical,verticalScrollbarSize:e.verticalScrollbarSize===void 0?10:e.verticalScrollbarSize,verticalHasArrows:e.verticalHasArrows===void 0?!1:e.verticalHasArrows,verticalSliderSize:e.verticalSliderSize===void 0?0:e.verticalSliderSize,scrollByPage:e.scrollByPage===void 0?!1:e.scrollByPage};return t.horizontalSliderSize=e.horizontalSliderSize===void 0?t.horizontalScrollbarSize:e.horizontalSliderSize,t.verticalSliderSize=e.verticalSliderSize===void 0?t.verticalScrollbarSize:e.verticalSliderSize,p&&(t.className+=` mac`),t}var Zk=class extends sy{constructor(e,t,n,r){super(e);let i=this._context.configuration.options,a=i.get(91),o=i.get(66),s=i.get(34),c=i.get(94),l={listenOnDomNode:n.domNode,className:`editor-scrollable `+tv(e.theme.type),useShadows:!1,lazyRender:!0,vertical:a.vertical,horizontal:a.horizontal,verticalHasArrows:a.verticalHasArrows,horizontalHasArrows:a.horizontalHasArrows,verticalScrollbarSize:a.verticalScrollbarSize,verticalSliderSize:a.verticalSliderSize,horizontalScrollbarSize:a.horizontalScrollbarSize,horizontalSliderSize:a.horizontalSliderSize,handleMouseWheel:a.handleMouseWheel,alwaysConsumeMouseWheel:a.alwaysConsumeMouseWheel,arrowSize:a.arrowSize,mouseWheelScrollSensitivity:o,fastScrollSensitivity:s,scrollPredominantAxis:c,scrollByPage:a.scrollByPage};this.scrollbar=this._register(new Jk(t.domNode,l,this._context.viewLayout.getScrollable())),cy.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=W(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition(`absolute`),this._setLayout();let u=(e,t,n)=>{let r={};if(t){let t=e.scrollTop;t&&(r.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(n){let t=e.scrollLeft;t&&(r.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.model.setScrollPosition(r,1)};this._register(R(n.domNode,`scroll`,e=>u(n.domNode,!0,!0))),this._register(R(t.domNode,`scroll`,e=>u(t.domNode,!0,!1))),this._register(R(r.domNode,`scroll`,e=>u(r.domNode,!0,!1))),this._register(R(this.scrollbarDomNode.domNode,`scroll`,e=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side===`right`?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){let e=this._context.configuration.options,t=e.get(91),n=e.get(66),r=e.get(34),i=e.get(94),a={vertical:t.vertical,horizontal:t.horizontal,verticalScrollbarSize:t.verticalScrollbarSize,horizontalScrollbarSize:t.horizontalScrollbarSize,scrollByPage:t.scrollByPage,handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:r,scrollPredominantAxis:i};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName(`editor-scrollable `+tv(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};iv((e,t)=>{let n=e.getColor(EC);n&&t.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${n} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${n} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${n} 6px 6px 6px -6px inset;
			}
		`);let r=e.getColor(DC);r&&t.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${r};
			}
		`);let i=e.getColor(OC);i&&t.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);let a=e.getColor(kC);a&&t.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${a};
			}
		`)});var Qk=class{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}},$k=class extends dO{_render(e,t,n){let r=[];for(let n=e;n<=t;n++){let t=n-e;r[t]=[]}if(n.length===0)return r;n.sort((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1);let i=null,a=0;for(let o=0,s=n.length;o<s;o++){let s=n[o],c=s.className,l=Math.max(s.startLineNumber,e)-e,u=Math.min(s.endLineNumber,t)-e;i===c?(l=Math.max(a+1,l),a=Math.max(a,u)):(i=c,a=u);for(let e=l;e<=a;e++)r[e].push(i)}return r}},eA=class extends $k{constructor(e){super(),this._context=e;let t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e],a=i.options.glyphMarginClassName;a&&(n[r++]=new Qk(i.range.startLineNumber,i.range.endLineNumber,a))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),i=this._lineHeight.toString(),a=this._glyphMarginLeft.toString(),o=this._glyphMarginWidth.toString(),s=`" style="left:`+a+`px;width:`+o+`px;height:`+i+`px;"></div>`,c=[];for(let e=t;e<=n;e++){let n=e-t,i=r[n];i.length===0?c[n]=``:c[n]=`<div class="cgmr codicon `+i.join(` `)+s}this._renderResult=c}render(e,t){if(!this._renderResult)return``;let n=t-e;return n<0||n>=this._renderResult.length?``:this._renderResult[n]}},tA=class extends dO{constructor(e){super(),this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,n=t.get(130),r=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(130),r=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();return this._primaryPosition?.equals(t)?!1:(this._primaryPosition=t,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=e.scrollWidth,i=this._lineHeight,a=this._primaryPosition,o=this.getGuidesByLine(t,n,a),s=[];for(let a=t;a<=n;a++){let n=a-t,c=o[n],l=``,u=e.visibleRangeForPosition(new I(a,1))?.left??0;for(let t of c){let n=u+(t.visibleColumn-1)*this._spaceWidth;if(n>r||this._maxIndentLeft>0&&n>this._maxIndentLeft)break;let o=t.horizontalLine?t.horizontalLine.top?`horizontal-top`:`horizontal-bottom`:`vertical`,s=t.horizontalLine?(e.visibleRangeForPosition(new I(a,t.horizontalLine.endColumn))?.left??n+this._spaceWidth)-n:this._spaceWidth;l+=`<div class="core-guide ${t.className} ${o}" style="left:${n}px;height:${i}px;width:${s}px"></div>`}s[n]=l}this._renderResult=s}getGuidesByLine(e,t,n){let r=this._bracketPairGuideOptions.bracketPairs===!1?null:this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Wc.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal===`active`?Wc.EnabledForActive:Wc.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}),i=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null,a=0,o=0,s=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){let r=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);a=r.startLineNumber,o=r.endLineNumber,s=r.indent}let{indentSize:c}=this._context.model.getTextModelOptions(),l=[];for(let n=e;n<=t;n++){let t=[];l.push(t);let u=r?r[n-e]:[],d=new Yp(u),f=i?i[n-e]:[];for(let e=1;e<=f;e++){let r=(e-1)*c+1,i=u.length===0&&a<=n&&n<=o&&e===s;t.push(...d.takeWhile(e=>e.visibleColumn<r)||[]);let l=d.peek();(!l||l.visibleColumn!==r||l.horizontalLine)&&t.push(new Gc(r,i?`core-guide-indent-active`:`core-guide-indent`,null))}t.push(...d.takeWhile(e=>!0)||[])}return l}render(e,t){if(!this._renderResult)return``;let n=t-e;return n<0||n>=this._renderResult.length?``:this._renderResult[n]}};function nA(e){if(!(e&&e.isTransparent()))return e}iv((e,t)=>{let n=e.getColor(eE);n&&t.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${n} inset; }`);let r=e.getColor(tE)||n;r&&t.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${r} inset; }`);let i=[{bracketColor:xE,guideColor:OE,guideColorActive:PE},{bracketColor:SE,guideColor:kE,guideColorActive:FE},{bracketColor:CE,guideColor:AE,guideColorActive:IE},{bracketColor:wE,guideColor:jE,guideColorActive:LE},{bracketColor:TE,guideColor:ME,guideColorActive:RE},{bracketColor:EE,guideColor:NE,guideColorActive:zE}],a=new tD,o=i.map(t=>{let n=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),i=e.getColor(t.guideColorActive),a=nA(nA(r)??n?.transparent(.3)),o=nA(nA(i)??n);if(!(!a||!o))return{guideColor:a,guideColorActive:o}}).filter(Zs);if(o.length>0){for(let e=0;e<30;e++){let n=o[e%o.length];t.addRule(`.monaco-editor .${a.getInlineClassNameOfLevel(e).replace(/ /g,`.`)} { --guide-color: ${n.guideColor}; --guide-color-active: ${n.guideColorActive}; }`)}t.addRule(`.monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }`),t.addRule(`.monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }`),t.addRule(`.monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }`),t.addRule(`.monaco-editor .vertical.${a.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),t.addRule(`.monaco-editor .horizontal-top.${a.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),t.addRule(`.monaco-editor .horizontal-bottom.${a.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});var rA=class{constructor(){this._currentVisibleRange=new L(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}},iA=class{constructor(e,t,n,r,i,a){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=i,this.scrollType=a,this.type=`range`,this.minLineNumber=e,this.maxLineNumber=e}},aA=class{constructor(e,t,n,r){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=r,this.type=`selections`;let i=e[0].startLineNumber,a=e[0].endLineNumber;for(let t=1,n=e.length;t<n;t++){let n=e[t];i=Math.min(i,n.startLineNumber),a=Math.max(a,n.endLineNumber)}this.minLineNumber=i,this.maxLineNumber=a}},oA=class e extends sy{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement(`div`),this._visibleLines=new ok(this),this.domNode=this._visibleLines.domNode;let n=this._context.configuration,r=this._context.configuration.options,i=r.get(43),a=r.get(130);this._lineHeight=r.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=a.isViewportWrapping,this._revealHorizontalRightPadding=r.get(88),this._cursorSurroundingLines=r.get(25),this._cursorSurroundingLinesStyle=r.get(26),this._canUseLayerHinting=!r.get(28),this._viewLineOptions=new by(n,this._context.theme.type),cy.write(this.domNode,7),this.domNode.setClassName(`view-lines ${mO}`),Wv.applyFontInfo(this.domNode,i),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Li(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Li(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new rA,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new xy(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);let t=this._context.configuration.options,n=t.get(43),r=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Wv.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new by(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let e=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let t=e;t<=n;t++)this._visibleLines.getVisibleLine(t).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),r=!1;for(let e=t;e<=n;e++)r=this._visibleLines.getVisibleLine(e).onSelectionChanged()||r;return r}onDecorationsChanged(e){{let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let n=e;n<=t;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new iA(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new aA(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let n=this._getViewLineDomNode(e);if(n===null)return null;let r=this._getLineNumberFor(n);if(r===-1||r<1||r>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(r)===1)return new I(r,1);let i=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();if(r<i||r>a)return null;let o=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(r,e,t),s=this._context.model.getLineMinColumn(r);return o<s&&(o=s),new I(r,o)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===xy.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)if(e===this._visibleLines.getVisibleLine(r).getDomNode())return r;return-1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let n=e.endLineNumber,r=L.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;let i=[],a=0,o=new yy(this.domNode.domNode,this._textRangeRestingSpot),s=0;t&&(s=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new I(r.startLineNumber,1)).lineNumber);let c=this._visibleLines.getStartLineNumber(),l=this._visibleLines.getEndLineNumber();for(let e=r.startLineNumber;e<=r.endLineNumber;e++){if(e<c||e>l)continue;let u=e===r.startLineNumber?r.startColumn:1,d=e===r.endLineNumber?r.endColumn:this._context.model.getLineMaxColumn(e),f=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,u,d,o);if(f){if(t&&e<n){let t=s;s=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new I(e+1,1)).lineNumber,t!==s&&(f.ranges[f.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}i[a++]=new dy(f.outsideRenderedLine,e,fy.from(f.ranges))}}return a===0?null:i}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new yy(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new my(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),r=1,i=!0;for(let a=t;a<=n;a++){let t=this._visibleLines.getVisibleLine(a);if(e&&!t.getWidthIsFast()){i=!1;continue}r=Math.max(r,t.getWidth())}return i&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),i}_checkMonospaceFontAssumptions(){let e=-1,t=-1,n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let i=n;i<=r;i++){let n=this._visibleLines.getVisibleLine(i);if(n.needsMonospaceFontCheck()){let r=n.getWidth();r>t&&(t=r,e=i)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let e=n;e<=r;e++)this._visibleLines.getVisibleLine(e).onMonospaceAssumptionsInvalidated()}prepareRender(){throw Error(`Not supported`)}render(){throw Error(`Not supported`)}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),m&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let n=e;n<=t;n++)if(this._visibleLines.getVisibleLine(n).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain(`strict`);let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,r,i){let a=e.top,o=e.height,s=a+o,c,l,u;if(r&&r.length>0){let e=r[0].startLineNumber,t=r[0].endLineNumber;for(let n=1,i=r.length;n<i;n++){let i=r[n];e=Math.min(e,i.startLineNumber),t=Math.max(t,i.endLineNumber)}c=!1,l=this._context.viewLayout.getVerticalOffsetForLineNumber(e),u=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else if(n)c=!0,l=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t===`mouse`&&this._cursorSurroundingLinesStyle===`default`)){let e=Math.min(o/this._lineHeight/2,this._cursorSurroundingLines);l-=e*this._lineHeight,u+=Math.max(0,e-1)*this._lineHeight}(i===0||i===4)&&(u+=this._lineHeight);let d;if(u-l>o){if(!c)return-1;d=l}else if(i===5||i===6)if(i===6&&a<=l&&u<=s)d=a;else{let e=Math.max(5*this._lineHeight,o*.2),t=l-e,n=u-o;d=Math.max(n,t)}else if(i===1||i===2)if(i===2&&a<=l&&u<=s)d=a;else{let e=(l+u)/2;d=Math.max(0,e-o/2)}else d=this._computeMinimumScrolling(a,s,l,u,i===3,i===4);return d}_computeScrollLeftToReveal(t){let n=this._context.viewLayout.getCurrentViewport(),r=n.left,i=r+n.width,a=1073741824,o=0;if(t.type===`range`){let e=this._visibleRangesForLineRange(t.lineNumber,t.startColumn,t.endColumn);if(!e)return null;for(let t of e.ranges)a=Math.min(a,Math.round(t.left)),o=Math.max(o,Math.round(t.left+t.width))}else for(let e of t.selections){if(e.startLineNumber!==e.endLineNumber)return null;let t=this._visibleRangesForLineRange(e.startLineNumber,e.startColumn,e.endColumn);if(!t)return null;for(let e of t.ranges)a=Math.min(a,Math.round(e.left)),o=Math.max(o,Math.round(e.left+e.width))}return a=Math.max(0,a-e.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,t.type===`selections`&&o-a>n.width?null:{scrollLeft:this._computeMinimumScrolling(r,i,a,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,r,i,a){e|=0,t|=0,n|=0,r|=0,i=!!i,a=!!a;let o=t-e;if(r-n<o){if(i)return n;if(a)return Math.max(0,r-o);if(n<e)return n;if(r>t)return Math.max(0,r-o)}else return n;return e}};oA.HORIZONTAL_EXTRA_PX=30;var sA=class extends $k{constructor(e){super(),this._context=e;let t=this._context.configuration.options.get(129);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options.get(129);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e],a=i.options.linesDecorationsClassName;a&&(n[r++]=new Qk(i.range.startLineNumber,i.range.endLineNumber,a));let o=i.options.firstLineDecorationClassName;o&&(n[r++]=new Qk(i.range.startLineNumber,i.range.startLineNumber,o))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),i=this._decorationsLeft.toString(),a=this._decorationsWidth.toString(),o=`" style="left:`+i+`px;width:`+a+`px;"></div>`,s=[];for(let e=t;e<=n;e++){let n=e-t,i=r[n],a=``;for(let e=0,t=i.length;e<t;e++)a+=`<div class="cldr `+i[e]+o;s[n]=a}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:``}},cA=class extends $k{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e],a=i.options.marginClassName;a&&(n[r++]=new Qk(i.range.startLineNumber,i.range.endLineNumber,a))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),i=[];for(let e=t;e<=n;e++){let n=e-t,a=r[n],o=``;for(let e=0,t=a.length;e<t;e++)o+=`<div class="cmdr `+a[e]+`" style=""></div>`;i[n]=o}this._renderResult=i}render(e,t){return this._renderResult?this._renderResult[t-e]:``}},lA=class e{constructor(t,n,r,i){this._rgba8Brand=void 0,this.r=e._clamp(t),this.g=e._clamp(n),this.b=e._clamp(r),this.a=e._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};lA.Empty=new lA(0,0,0,0);var uA=class e extends j{constructor(){super(),this._onDidChange=new N,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Iu.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||=Ct(new e),this._INSTANCE}_updateColorMap(){let e=Iu.getColorMap();if(!e){this._colors=[lA.Empty],this._backgroundIsLight=!0;return}this._colors=[lA.Empty];for(let t=1;t<e.length;t++){let n=e[t].rgba;this._colors[t]=new lA(n.r,n.g,n.b,Math.round(n.a*255))}this._backgroundIsLight=e[2].getRelativeLuminance()>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};uA._INSTANCE=null;const dA=(()=>{let e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})(),fA=(e,t)=>(e-=32,e<0||e>96?t<=2?(e+96)%96:95:e);var pA=class e{constructor(t,n){this.scale=n,this._minimapCharRendererBrand=void 0,this.charDataNormal=e.soften(t,12/15),this.charDataLight=e.soften(t,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=ap(e[r]*t);return n}renderChar(e,t,n,r,i,a,o,s,c,l,u){let d=1*this.scale,f=2*this.scale,p=u?1:f;if(t+d>e.width||n+p>e.height){console.warn(`bad render request outside image data`);return}let m=l?this.charDataLight:this.charDataNormal,h=fA(r,c),g=e.width*4,_=o.r,v=o.g,y=o.b,b=i.r-_,x=i.g-v,S=i.b-y,C=Math.max(a,s),w=e.data,T=h*d*f,ee=n*g+t*4;for(let e=0;e<p;e++){let e=ee;for(let t=0;t<d;t++){let t=m[T++]/255*(a/255);w[e++]=_+b*t,w[e++]=v+x*t,w[e++]=y+S*t,w[e++]=C}ee+=g}}blockRenderChar(e,t,n,r,i,a,o,s){let c=1*this.scale,l=2*this.scale,u=s?1:l;if(t+c>e.width||n+u>e.height){console.warn(`bad render request outside image data`);return}let d=e.width*4,f=i/255*.5,p=a.r,m=a.g,h=a.b,g=r.r-p,_=r.g-m,v=r.b-h,y=p+g*f,b=m+_*f,x=h+v*f,S=Math.max(i,o),C=e.data,w=n*d+t*4;for(let e=0;e<u;e++){let e=w;for(let t=0;t<c;t++)C[e++]=y,C[e++]=b,C[e++]=x,C[e++]=S;w+=d}}},mA={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},hA=e=>{let t=new Uint8ClampedArray(e.length/2);for(let n=0;n<e.length;n+=2)t[n>>1]=mA[e[n]]<<4|mA[e[n+1]]&15;return t};const gA={1:_t(()=>hA(`0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792`)),2:_t(()=>hA(`000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126`))};var _A=class e{static create(t,n){if(this.lastCreated&&t===this.lastCreated.scale&&n===this.lastFontFamily)return this.lastCreated;let r;return r=gA[t]?new pA(gA[t](),t):e.createFromSampleData(e.createSampleData(n).data,t),this.lastFontFamily=n,this.lastCreated=r,r}static createSampleData(e){let t=document.createElement(`canvas`),n=t.getContext(`2d`);t.style.height=`16px`,t.height=16,t.width=960,t.style.width=`960px`,n.fillStyle=`#ffffff`,n.font=`bold 16px ${e}`,n.textBaseline=`middle`;let r=0;for(let e of dA)n.fillText(String.fromCharCode(e),r,16/2),r+=10;return n.getImageData(0,0,960,16)}static createFromSampleData(t,n){if(t.length!==640*96)throw Error(`Unexpected source in MinimapCharRenderer`);return new pA(e._downsample(t,n),n)}static _downsampleChar(e,t,n,r,i){let a=1*i,o=2*i,s=r,c=0;for(let r=0;r<o;r++){let i=r/o*16,l=(r+1)/o*16;for(let r=0;r<a;r++){let o=r/a*10,u=(r+1)/a*10,d=0,f=0;for(let n=i;n<l;n++){let r=t+Math.floor(n)*3840,i=1-(n-Math.floor(n));for(let t=o;t<u;t++){let n=1-(t-Math.floor(t)),a=r+Math.floor(t)*4,o=n*i;f+=o,d+=e[a]*e[a+3]/255*o}}let p=d/f;c=Math.max(c,p),n[s++]=ap(p)}}return c}static _downsample(e,t){let n=2*t*1*t,r=n*96,i=new Uint8ClampedArray(r),a=0,o=0,s=0;for(let r=0;r<96;r++)s=Math.max(s,this._downsampleChar(e,o,i,a,t)),a+=n,o+=40;if(s>0){let e=255/s;for(let t=0;t<r;t++)i[t]*=e}return i}},vA=140,yA=2,bA=class e{constructor(t,n,r){let i=t.options,a=i.get(127),o=i.get(129),s=o.minimap,c=i.get(43),l=i.get(64);this.renderMinimap=s.renderMinimap,this.size=l.size,this.minimapHeightIsEditorHeight=s.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(93),this.showSlider=l.showSlider,this.pixelRatio=a,this.typicalHalfwidthCharacterWidth=c.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(58),this.minimapLeft=s.minimapLeft,this.minimapWidth=s.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=s.minimapCanvasInnerWidth,this.canvasInnerHeight=s.minimapCanvasInnerHeight,this.canvasOuterWidth=s.minimapCanvasOuterWidth,this.canvasOuterHeight=s.minimapCanvasOuterHeight,this.isSampling=s.minimapIsSampling,this.editorHeight=o.height,this.fontScale=s.minimapScale,this.minimapLineHeight=s.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=_t(()=>_A.create(this.fontScale,c.fontFamily)),this.defaultBackgroundColor=r.getColor(2),this.backgroundColor=e._getMinimapBackground(n,this.defaultBackgroundColor),this.foregroundAlpha=e._getMinimapForegroundOpacity(n)}static _getMinimapBackground(e,t){let n=e.getColor(ET);return n?new lA(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(DT);return t?lA._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}},xA=class e{constructor(e,t,n,r,i,a,o,s){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=i,this.sliderHeight=a,this.startLineNumber=o,this.endLineNumber=s}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(t,n,r,i,a,o,s,c,l,u,d){let f=t.pixelRatio,p=t.minimapLineHeight,m=Math.floor(t.canvasInnerHeight/p),h=t.lineHeight;if(t.minimapHeightIsEditorHeight){let n=c*t.lineHeight+(t.scrollBeyondLastLine?a-t.lineHeight:0),r=Math.max(1,Math.floor(a*a/n)),i=Math.max(0,t.minimapHeight-r),o=i/(u-a),d=l*o,f=i>0,p=Math.floor(t.canvasInnerHeight/t.minimapLineHeight);return new e(l,u,f,o,d,r,1,Math.min(s,p))}let g;if(o&&r!==s){let e=r-n+1;g=Math.floor(e*p/f)}else{let e=a/h;g=Math.floor(e*p/f)}let _;_=t.scrollBeyondLastLine?(s-1)*p/f:Math.max(0,s*p/f-g),_=Math.min(t.minimapHeight-g,_);let v=_/(u-a),y=l*v,b=0;if(t.scrollBeyondLastLine&&(b=a/h-1),m>=s+b)return new e(l,u,_>0,v,y,g,1,s);{let t=Math.max(1,Math.floor(n-y*f/p));d&&d.scrollHeight===u&&(d.scrollTop>l&&(t=Math.min(t,d.startLineNumber)),d.scrollTop<l&&(t=Math.max(t,d.startLineNumber)));let r=Math.min(s,t+m-1),a=(l-i)/h;return new e(l,u,!0,v,(n-t+a)*p/f,g,t,r)}}},SA=class{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};SA.INVALID=new SA(-1);var CA=class{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new ak(()=>SA.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;let t=this._renderedLines._get().lines;for(let e=0,n=t.length;e<n;e++)if(t[e].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}},wA=class e{constructor(t,n,r,i){this._backgroundFillData=e._createBackgroundFillData(n,r,i),this._buffers=[t.createImageData(n,r),t.createImageData(n,r)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){let r=n.r,i=n.g,a=n.b,o=n.a,s=new Uint8ClampedArray(e*t*4),c=0;for(let n=0;n<t;n++)for(let t=0;t<e;t++)s[c]=r,s[c+1]=i,s[c+2]=a,s[c+3]=o,c+=4;return s}},TA=class e{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(t,n,r){if(t.renderMinimap===0||!t.isSampling)return[null,[]];let i=t.pixelRatio,a=t.lineHeight,o=t.scrollBeyondLastLine,{minimapLineCount:s}=Ne.computeContainedMinimapLineCount({viewLineCount:n,scrollBeyondLastLine:o,height:t.editorHeight,lineHeight:a,pixelRatio:i}),c=n/s,l=c/2;if(!r||r.minimapLines.length===0){let t=[];if(t[0]=1,s>1){for(let e=0,n=s-1;e<n;e++)t[e]=Math.round(e*c+l);t[s-1]=n}return[new e(c,t),[]]}let u=r.minimapLines,d=u.length,f=[],p=0,m=0,h=1,g=[],_=null;for(let e=0;e<s;e++){let t=Math.max(h,Math.round(e*c)),r=Math.max(t,Math.round((e+1)*c));for(;p<d&&u[p]<t;){if(g.length<10){let e=p+1+m;_&&_.type===`deleted`&&_._oldIndex===p-1?_.deleteToLineNumber++:(_={type:`deleted`,_oldIndex:p,deleteFromLineNumber:e,deleteToLineNumber:e},g.push(_)),m--}p++}let i;if(p<d&&u[p]<=r)i=u[p],p++;else if(i=e===0?1:e+1===s?n:Math.round(e*c+l),g.length<10){let t=p+1+m;_&&_.type===`inserted`&&_._i===e-1?_.insertToLineNumber++:(_={type:`inserted`,_i:e,insertFromLineNumber:t,insertToLineNumber:t},g.push(_)),m++}f[e]=i,h=i}if(g.length<10)for(;p<d;){let e=p+1+m;_&&_.type===`deleted`&&_._oldIndex===p-1?_.deleteToLineNumber++:(_={type:`deleted`,_oldIndex:p,deleteFromLineNumber:e,deleteToLineNumber:e},g.push(_)),m--,p++}else g=[{type:`flush`}];return[new e(c,f),g]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(n===r){let r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===n&&(r===this.minimapLines.length?n>1&&n--:r++),[n,r]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length,r=0;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]<=e.toLineNumber?(this.minimapLines[i]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,i),r=Math.max(r,i)):this.minimapLines[i]-=t;return[n,r]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}},EA=class extends sy{constructor(e){super(e),this.tokensColorTracker=uA.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new bA(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=TA.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new DA(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new bA(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){let[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(let n of e.ranges){let e=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));let r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[t,n]=TA.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let e of n)switch(e.type){case`deleted`:this._actual.onLinesDeleted(e.deleteFromLineNumber,e.deleteToLineNumber);break;case`inserted`:this._actual.onLinesInserted(e.insertFromLineNumber,e.insertToLineNumber);break;case`flush`:this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let r=[];for(let i=0,a=t-e+1;i<a;i++)n[i]?r[i]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+i-1]):r[i]=null;return r}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let e of this._selections){let[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new $n(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){let r=this._samplingState.minimapLines[e-1],i=this._samplingState.minimapLines[t-1];n=new L(r,1,i,this._context.model.getLineMaxColumn(i))}else n=new L(e,1,t,this._context.model.getLineMaxColumn(t));let r=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let e=[];for(let t of r){if(!t.options.minimap)continue;let n=t.range,r=this._samplingState.modelLineToMinimapLine(n.startLineNumber),i=this._samplingState.modelLineToMinimapLine(n.endLineNumber);e.push(new Xm(new L(r,n.startColumn,i,n.endColumn),t.options))}return e}return r}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange(`mouse`,!1,new L(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}},DA=class e extends j{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(CT),this._domNode=W(document.createElement(`div`)),cy.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition(`absolute`),this._domNode.setAttribute(`role`,`presentation`),this._domNode.setAttribute(`aria-hidden`,`true`),this._shadow=W(document.createElement(`div`)),this._shadow.setClassName(`minimap-shadow-hidden`),this._domNode.appendChild(this._shadow),this._canvas=W(document.createElement(`canvas`)),this._canvas.setPosition(`absolute`),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=W(document.createElement(`canvas`)),this._decorationsCanvas.setPosition(`absolute`),this._decorationsCanvas.setClassName(`minimap-decorations-layer`),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=W(document.createElement(`div`)),this._slider.setPosition(`absolute`),this._slider.setClassName(`minimap-slider`),this._slider.setLayerHinting(!0),this._slider.setContain(`strict`),this._domNode.appendChild(this._slider),this._sliderHorizontal=W(document.createElement(`div`)),this._sliderHorizontal.setPosition(`absolute`),this._sliderHorizontal.setClassName(`minimap-slider-horizontal`),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=Xi(this._domNode.domNode,`mousedown`,e=>{if(e.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!==`proportional`){if(e.leftButton&&this._lastRenderData){let t=_a(this._slider.domNode),n=t.top+t.height/2;this._startSliderDragging(e.buttons,e.posx,n,e.posy,this._lastRenderData.renderedLayout)}return}let t=this._model.options.minimapLineHeight,n=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.browserEvent.offsetY,r=Math.floor(n/t)+this._lastRenderData.renderedLayout.startLineNumber;r=Math.min(r,this._model.getLineCount()),this._model.revealLineNumber(r)}),this._sliderMouseMoveMonitor=new Zv,this._sliderMouseDownListener=Xi(this._slider.domNode,`mousedown`,e=>{e.preventDefault(),e.stopPropagation(),e.leftButton&&this._lastRenderData&&this._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Yv.addTarget(this._domNode.domNode),this._sliderTouchStartListener=R(this._domNode.domNode,Jv.Start,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName(`active`,!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))},{passive:!1}),this._sliderTouchMoveListener=R(this._domNode.domNode,Jv.Change,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)},{passive:!1}),this._sliderTouchEndListener=Xi(this._domNode.domNode,Jv.End,e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName(`active`,!1)})}_startSliderDragging(e,t,n,r,i){this._slider.toggleClassName(`active`,!0);let a=(e,r)=>{let a=Math.abs(r-t);if(f&&a>vA){this._model.setScrollTop(i.scrollTop);return}let o=e-n;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(o))};r!==n&&a(r,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,Xv,e=>a(e.posy,e.posx),()=>{this._slider.toggleClassName(`active`,!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider===`always`?`minimap slider-always`:`minimap slider-mouseover`}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new wA(this._canvas.domNode.getContext(`2d`),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(CT),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName(`minimap-shadow-hidden`),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName(`minimap-shadow-hidden`):this._shadow.setClassName(`minimap-shadow-visible`);let t=xA.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?`block`:`none`),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(L.compareRangesUsingStarts);let n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((e,t)=>(e.options.zIndex||0)-(t.options.zIndex||0));let{canvasInnerWidth:r,canvasInnerHeight:i}=this._model.options,a=this._model.options.minimapLineHeight,o=this._model.options.minimapCharWidth,s=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext(`2d`);c.clearRect(0,0,r,i);let l=new OA(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,l,e,a),this._renderDecorationsLineHighlights(c,n,l,e,a);let u=new OA(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,a,s,o,r),this._renderDecorationsHighlights(c,n,u,e,a,s,o,r)}}_renderSelectionLineHighlights(e,t,n,r,i){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let a=0,o=0;for(let s of t){let t=Math.max(r.startLineNumber,s.startLineNumber),c=Math.min(r.endLineNumber,s.endLineNumber);if(t>c)continue;for(let e=t;e<=c;e++)n.set(e,!0);let l=(t-r.startLineNumber)*i,u=(c-r.startLineNumber)*i+i;o>=l?o=u:(o>a&&e.fillRect(8,a,e.canvas.width,o-a),a=l,o=u)}o>a&&e.fillRect(8,a,e.canvas.width,o-a)}_renderDecorationsLineHighlights(e,t,n,r,i){let a=new Map;for(let o=t.length-1;o>=0;o--){let s=t[o],c=s.options.minimap;if(!c||c.position!==Vc.Inline)continue;let l=Math.max(r.startLineNumber,s.range.startLineNumber),u=Math.min(r.endLineNumber,s.range.endLineNumber);if(l>u)continue;let d=c.getColor(this._theme);if(!d||d.isTransparent())continue;let f=a.get(d.toString());f||(f=d.transparent(.5).toString(),a.set(d.toString(),f)),e.fillStyle=f;for(let t=l;t<=u;t++){if(n.has(t))continue;n.set(t,!0);let a=(l-r.startLineNumber)*i;e.fillRect(8,a,e.canvas.width,i)}}}_renderSelectionsHighlights(e,t,n,r,i,a,o,s){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let c of t){let t=Math.max(r.startLineNumber,c.startLineNumber),l=Math.min(r.endLineNumber,c.endLineNumber);if(!(t>l))for(let u=t;u<=l;u++)this.renderDecorationOnLine(e,n,c,this._selectionColor,r,u,i,i,a,o,s)}}_renderDecorationsHighlights(e,t,n,r,i,a,o,s){for(let c of t){let t=c.options.minimap;if(!t)continue;let l=Math.max(r.startLineNumber,c.range.startLineNumber),u=Math.min(r.endLineNumber,c.range.endLineNumber);if(l>u)continue;let d=t.getColor(this._theme);if(!(!d||d.isTransparent()))for(let f=l;f<=u;f++)switch(t.position){case Vc.Inline:this.renderDecorationOnLine(e,n,c.range,d,r,f,i,i,a,o,s);continue;case Vc.Gutter:let t=(f-r.startLineNumber)*i;this.renderDecoration(e,d,2,t,yA,i);continue}}}renderDecorationOnLine(e,t,n,r,i,a,o,s,c,l,u){let d=(a-i.startLineNumber)*s;if(d+o<0||d>this._model.options.canvasInnerHeight)return;let{startLineNumber:f,endLineNumber:p}=n,m=f===a?n.startColumn:1,h=p===a?n.endColumn:this._model.getLineMaxColumn(a),g=this.getXOffsetForPosition(t,a,m,c,l,u),_=this.getXOffsetForPosition(t,a,h,c,l,u);this.renderDecoration(e,r,g,d,_-g,o)}getXOffsetForPosition(e,t,n,r,i,a){if(n===1)return 8;if((n-1)*i>=a)return a;let o=e.get(t);if(!o){let n=this._model.getLineContent(t);o=[8];let s=8;for(let e=1;e<n.length+1;e++){let t=n.charCodeAt(e-1),c=t===9?r*i:qo(t)?2*i:i,l=s+c;if(l>=a){o[e]=a;break}o[e]=l,s=l}e.set(t,o)}return n-1<o.length?o[n-1]:a}renderDecoration(e,t,n,r,i,a){e.fillStyle=t&&t.toString()||``,e.fillRect(n,r,i,a)}renderLines(t){let n=t.startLineNumber,r=t.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(t)){let e=this._lastRenderData._get();return new CA(t,e.imageData,e.lines)}let a=this._getBuffer();if(!a)return null;let[o,s,c]=e._renderUntouchedLines(a,n,r,i,this._lastRenderData),l=this._model.getMinimapLinesRenderingData(n,r,c),u=this._model.getOptions().tabSize,d=this._model.options.defaultBackgroundColor,f=this._model.options.backgroundColor,p=this._model.options.foregroundAlpha,m=this._model.tokensColorTracker,h=m.backgroundIsLight(),g=this._model.options.renderMinimap,_=this._model.options.charRenderer(),v=this._model.options.fontScale,y=this._model.options.minimapCharWidth,b=(g===1?2:3)*v,x=i>b?Math.floor((i-b)/2):0,S=f.a/255,C=new lA(Math.round((f.r-d.r)*S+d.r),Math.round((f.g-d.g)*S+d.g),Math.round((f.b-d.b)*S+d.b),255),w=0,T=[];for(let t=0,o=r-n+1;t<o;t++)c[t]&&e._renderLine(a,C,f.a,h,g,y,m,p,_,w,x,u,l[t],v,i),T[t]=new SA(w),w+=i;let ee=o===-1?0:o,te=(s===-1?a.height:s)-ee;return this._canvas.domNode.getContext(`2d`).putImageData(a,0,0,0,ee,a.width,te),new CA(t,a,T)}static _renderUntouchedLines(e,t,n,r,i){let a=[];if(!i){for(let e=0,r=n-t+1;e<r;e++)a[e]=!0;return[-1,-1,a]}let o=i._get(),s=o.imageData.data,c=o.rendLineNumberStart,l=o.lines,u=l.length,d=e.width,f=e.data,p=(n-t+1)*r*d*4,m=-1,h=-1,g=-1,_=-1,v=-1,y=-1,b=0;for(let e=t;e<=n;e++){let n=e-t,i=e-c,o=i>=0&&i<u?l[i].dy:-1;if(o===-1){a[n]=!0,b+=r;continue}let x=o*d*4,S=(o+r)*d*4,C=b*d*4,w=(b+r)*d*4;_===x&&y===C?(_=S,y=w):(g!==-1&&(f.set(s.subarray(g,_),v),m===-1&&g===0&&g===v&&(m=_),h===-1&&_===p&&g===v&&(h=g)),g=x,_=S,v=C,y=w),a[n]=!1,b+=r}return g!==-1&&(f.set(s.subarray(g,_),v),m===-1&&g===0&&g===v&&(m=_),h===-1&&_===p&&g===v&&(h=g)),[m===-1?-1:m/(d*4),h===-1?-1:h/(d*4),a]}static _renderLine(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){let h=f.content,g=f.tokens,_=e.width-a,v=m===1,y=8,b=0,x=0;for(let f=0,m=g.getCount();f<m;f++){let m=g.getEndOffset(f),S=g.getForeground(f),C=o.getColor(S);for(;b<m;b++){if(y>_)return;let o=h.charCodeAt(b);if(o===9){let e=d-(b+x)%d;x+=e-1,y+=e*a}else if(o===32)y+=a;else{let d=qo(o)?2:1;for(let f=0;f<d;f++)if(i===2?c.blockRenderChar(e,y,l+u,C,s,t,n,v):c.renderChar(e,y,l+u,o,C,s,t,n,p,r,v),y+=a,y>_)return}}}}},OA=class{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let e=0,t=this._endLineNumber-this._startLineNumber+1;e<t;e++)this._values[e]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};iv((e,t)=>{let n=e.getColor(OT);n&&t.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${n}; }`);let r=e.getColor(kT);r&&t.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${r}; }`);let i=e.getColor(AT);i&&t.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);let a=e.getColor(EC);a&&t.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${a} -6px 0 6px -6px inset; }`)});var kA=class extends sy{constructor(e){super(e);let t=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,this._domNode=W(document.createElement(`div`)),cy.write(this._domNode,4),this._domNode.setClassName(`overlayWidgets`)}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){let t=W(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition(`absolute`),t.setAttribute(`widgetId`,e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.parentNode.removeChild(e),this.setShouldRender()}}_renderWidget(e){let t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){let e=t.domNode.clientHeight;t.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right=`50%`)}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets);for(let e=0,n=t.length;e<n;e++){let n=t[e];this._renderWidget(this._widgets[n])}}},AA=class{constructor(e,t){let n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(127),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);let r=t.getColor(lE);this.borderColor=r?r.toString():null,this.hideCursor=n.get(51);let i=t.getColor(ZT);this.cursorColor=i?i.transparent(.7).toString():null,this.themeType=t.type;let a=n.get(64),o=a.enabled,s=a.side,c=o?t.getColor(uE)||Iu.getDefaultBackground():null;c===null||s===`left`?this.backgroundColor=null:this.backgroundColor=J.Format.CSS.formatHex(c);let l=n.get(129).overviewRuler;this.top=l.top,this.right=l.right,this.domWidth=l.width,this.domHeight=l.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[u,d]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=u,this.w=d}_initLanes(e,t,n){let r=t-e;if(n>=3){let t=Math.floor(r/3),n=Math.floor(r/3),i=r-t-n,a=e,o=a+t;return[[0,a,o,a,a+t+i,a,o,a],[0,t,i,t+i,n,t+i+n,i+n,t+i+n]]}else if(n===2){let t=Math.floor(r/2),n=r-t,i=e;return[[0,i,i,i,i+t,i,i,i],[0,t,t,t,n,t+n,t+n,t+n]]}else{let t=e,n=r;return[[0,t,t,t,t,t,t,t],[0,n,n,n,n,n,n,n]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}},jA=class extends sy{constructor(e){super(e),this._domNode=W(document.createElement(`canvas`)),this._domNode.setClassName(`decorationsOverviewRuler`),this._domNode.setPosition(`absolute`),this._domNode.setLayerHinting(!0),this._domNode.setContain(`strict`),this._domNode.setAttribute(`aria-hidden`,`true`),this._updateSettings(!1),this._tokensColorTrackerListener=Iu.onDidChange(e=>{e.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new AA(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(I.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:``);return}let e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,r=this._context.viewLayout,i=t/this._context.viewLayout.getScrollHeight(),a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),o=6*this._settings.pixelRatio|0,s=o/2|0,c=this._domNode.domNode.getContext(`2d`);this._settings.backgroundColor===null?c.clearRect(0,0,e,t):(c.fillStyle=this._settings.backgroundColor,c.fillRect(0,0,e,t));let l=this._settings.x,u=this._settings.w;a.sort(Zm.cmp);for(let e of a){let a=e.color,d=e.data;c.fillStyle=a;let f=0,p=0,m=0;for(let e=0,a=d.length/3;e<a;e++){let a=d[3*e],h=d[3*e+1],g=d[3*e+2],_=r.getVerticalOffsetForLineNumber(h)*i|0,v=(r.getVerticalOffsetForLineNumber(g)+n)*i|0;if(v-_<o){let e=(_+v)/2|0;e<s?e=s:e+s>t&&(e=t-s),_=e-s,v=e+s}_>m+1||a!==f?(e!==0&&c.fillRect(l[f],p,u[f],m-p),f=a,p=_,m=v):v>m&&(m=v)}c.fillRect(l[f],p,u[f],m-p)}if(!this._settings.hideCursor&&this._settings.cursorColor){let e=2*this._settings.pixelRatio|0,n=e/2|0,a=this._settings.x[7],o=this._settings.w[7];c.fillStyle=this._settings.cursorColor;let s=-100,l=-100;for(let u=0,d=this._cursorPositions.length;u<d;u++){let d=this._cursorPositions[u],f=r.getVerticalOffsetForLineNumber(d.lineNumber)*i|0;f<n?f=n:f+n>t&&(f=t-n);let p=f-n,m=p+e;p>l+1?(u!==0&&c.fillRect(a,s,o,l-s),s=p,l=m):m>l&&(l=m)}c.fillRect(a,s,o,l-s)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(c.beginPath(),c.lineWidth=1,c.strokeStyle=this._settings.borderColor,c.moveTo(0,0),c.lineTo(0,t),c.stroke(),c.moveTo(0,0),c.lineTo(e,0),c.stroke())}},MA=class{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}},NA=class{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}},PA=class{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(NA.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),r=n/Math.floor(this._outerHeight),i=Math.floor(4*this._pixelRatio/2),a=[];for(let o=0,s=this._zones.length;o<s;o++){let s=this._zones[o];if(!e){let e=s.getColorZones();if(e){a.push(e);continue}}let c=Math.floor(r*this._getVerticalOffsetForLine(s.startLineNumber)),l=Math.floor(r*(this._getVerticalOffsetForLine(s.endLineNumber)+t)),u=Math.floor((c+l)/2),d=l-u;d<i&&(d=i),u-d<0&&(u=d),u+d>n&&(u=n-d);let f=s.color,p=this._color2Id[f];p||(p=++this._lastAssignedId,this._color2Id[f]=p,this._id2Color[p]=f);let m=new MA(u-d,u+d,p);s.setColorZone(m),a.push(m)}return this._colorZonesInvalid=!1,a.sort(MA.compare),a}},FA=class extends oy{constructor(e,t){super(),this._context=e;let n=this._context.configuration.options;this._domNode=W(document.createElement(`canvas`)),this._domNode.setClassName(t),this._domNode.setPosition(`absolute`),this._domNode.setLayerHinting(!0),this._domNode.setContain(`strict`),this._zoneManager=new PA(e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),i=this._domNode.domNode.getContext(`2d`);return i.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(i,n,r,e),!0}_renderOneLane(e,t,n,r){let i=0,a=0,o=0;for(let s of t){let t=s.colorId,c=s.from,l=s.to;t===i?o>=c?o=Math.max(o,l):(e.fillRect(0,a,r,o-a),a=c,o=l):(e.fillRect(0,a,r,o-a),i=t,e.fillStyle=n[i],a=c,o=l)}e.fillRect(0,a,r,o-a)}},IA=class extends sy{constructor(e){super(e),this.domNode=W(document.createElement(`div`)),this.domNode.setAttribute(`role`,`presentation`),this.domNode.setAttribute(`aria-hidden`,`true`),this.domNode.setClassName(`view-rulers`),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:n}=this._context.model.getTextModelOptions(),r=n,i=t-e;for(;i>0;){let e=W(document.createElement(`div`));e.setClassName(`view-ruler`),e.setWidth(r),this.domNode.appendChild(e),this._renderedRulers.push(e),i--}return}let n=e-t;for(;n>0;){let e=this._renderedRulers.pop();this.domNode.removeChild(e),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){let n=this._renderedRulers[t],r=this._rulers[t];n.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:``),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}};iv((e,t)=>{let n=e.getColor(aE);n&&t.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${n} inset; }`)});var LA=class extends sy{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1,this._useShadows=this._context.configuration.options.get(91).useShadows,this._domNode=W(document.createElement(`div`)),this._domNode.setAttribute(`role`,`presentation`),this._domNode.setAttribute(`aria-hidden`,`true`)}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow===e?!1:(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){let e=this._context.configuration.options.get(129);e.minimap.renderMinimap===0||e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?this._width=e.width:this._width=e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}onConfigurationChanged(e){return this._useShadows=this._context.configuration.options.get(91).useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?`scroll-decoration`:``)}};iv((e,t)=>{let n=e.getColor(EC);n&&t.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${n} 0 6px 6px -6px inset; }`)});var RA=class{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}},zA=class{constructor(e,t){this.lineNumber=e,this.ranges=t}};function BA(e){return new RA(e)}function VA(e){return new zA(e.lineNumber,e.ranges.map(BA))}var HA=class e extends dO{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){let r=this._typicalHalfwidthCharacterWidth/4,i=null,a=null;if(n&&n.length>0&&t.length>0){let r=t[0].lineNumber;if(r===e.startLineNumber)for(let e=0;!i&&e<n.length;e++)n[e].lineNumber===r&&(i=n[e].ranges[0]);let o=t[t.length-1].lineNumber;if(o===e.endLineNumber)for(let e=n.length-1;!a&&e>=0;e--)n[e].lineNumber===o&&(a=n[e].ranges[0]);i&&!i.startStyle&&(i=null),a&&!a.startStyle&&(a=null)}for(let e=0,n=t.length;e<n;e++){let o=t[e].ranges[0],s=o.left,c=o.left+o.width,l={top:0,bottom:0},u={top:0,bottom:0};if(e>0){let n=t[e-1].ranges[0].left,i=t[e-1].ranges[0].left+t[e-1].ranges[0].width;UA(s-n)<r?l.top=2:s>n&&(l.top=1),UA(c-i)<r?u.top=2:n<c&&c<i&&(u.top=1)}else i&&(l.top=i.startStyle.top,u.top=i.endStyle.top);if(e+1<n){let n=t[e+1].ranges[0].left,i=t[e+1].ranges[0].left+t[e+1].ranges[0].width;UA(s-n)<r?l.bottom=2:n<s&&s<i&&(l.bottom=1),UA(c-i)<r?u.bottom=2:c<i&&(u.bottom=1)}else a&&(l.bottom=a.startStyle.bottom,u.bottom=a.endStyle.bottom);o.startStyle=l,o.endStyle=u}}_getVisibleRangesWithStyle(e,t,n){let r=(t.linesVisibleRangesForRange(e,!0)||[]).map(VA);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,r,i){return`<div class="cslr `+n+`" style="top:`+e.toString()+`px;left:`+r.toString()+`px;width:`+i.toString()+`px;height:`+t+`px;"></div>`}_actualRenderOneSelection(t,n,r,i){if(i.length===0)return;let a=!!i[0].ranges[0].startStyle,o=this._lineHeight.toString(),s=(this._lineHeight-1).toString(),c=i[0].lineNumber,l=i[i.length-1].lineNumber;for(let u=0,d=i.length;u<d;u++){let d=i[u],f=d.lineNumber,p=f-n,m=r&&(f===l||f===c)?s:o,h=r&&f===c?1:0,g=``,_=``;for(let t=0,n=d.ranges.length;t<n;t++){let n=d.ranges[t];if(a){let t=n.startStyle,r=n.endStyle;if(t.top===1||t.bottom===1){g+=this._createSelectionPiece(h,m,e.SELECTION_CLASS_NAME,n.left-e.ROUNDED_PIECE_WIDTH,e.ROUNDED_PIECE_WIDTH);let r=e.EDITOR_BACKGROUND_CLASS_NAME;t.top===1&&(r+=` `+e.SELECTION_TOP_RIGHT),t.bottom===1&&(r+=` `+e.SELECTION_BOTTOM_RIGHT),g+=this._createSelectionPiece(h,m,r,n.left-e.ROUNDED_PIECE_WIDTH,e.ROUNDED_PIECE_WIDTH)}if(r.top===1||r.bottom===1){g+=this._createSelectionPiece(h,m,e.SELECTION_CLASS_NAME,n.left+n.width,e.ROUNDED_PIECE_WIDTH);let t=e.EDITOR_BACKGROUND_CLASS_NAME;r.top===1&&(t+=` `+e.SELECTION_TOP_LEFT),r.bottom===1&&(t+=` `+e.SELECTION_BOTTOM_LEFT),g+=this._createSelectionPiece(h,m,t,n.left+n.width,e.ROUNDED_PIECE_WIDTH)}}let r=e.SELECTION_CLASS_NAME;if(a){let t=n.startStyle,i=n.endStyle;t.top===0&&(r+=` `+e.SELECTION_TOP_LEFT),t.bottom===0&&(r+=` `+e.SELECTION_BOTTOM_LEFT),i.top===0&&(r+=` `+e.SELECTION_TOP_RIGHT),i.bottom===0&&(r+=` `+e.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(h,m,r,n.left,n.width)}t[p][0]+=g,t[p][1]+=_}}prepareRender(e){let t=[],n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let e=n;e<=r;e++){let r=e-n;t[r]=[``,``]}let i=[];for(let r=0,a=this._selections.length;r<a;r++){let a=this._selections[r];if(a.isEmpty()){i[r]=null;continue}let o=this._getVisibleRangesWithStyle(a,e,this._previousFrameVisibleRangesWithStyle[r]);i[r]=o,this._actualRenderOneSelection(t,n,this._selections.length>1,o)}this._previousFrameVisibleRangesWithStyle=i,this._renderResult=t.map(([e,t])=>e+t)}render(e,t){if(!this._renderResult)return``;let n=t-e;return n<0||n>=this._renderResult.length?``:this._renderResult[n]}};HA.SELECTION_CLASS_NAME=`selected-text`,HA.SELECTION_TOP_LEFT=`top-left-radius`,HA.SELECTION_BOTTOM_LEFT=`bottom-left-radius`,HA.SELECTION_TOP_RIGHT=`top-right-radius`,HA.SELECTION_BOTTOM_RIGHT=`bottom-right-radius`,HA.EDITOR_BACKGROUND_CLASS_NAME=`monaco-editor-background`,HA.ROUNDED_PIECE_WIDTH=10,iv((e,t)=>{let n=e.getColor(rw);n&&t.addRule(`.monaco-editor .focused .selected-text { background-color: ${n}; }`);let r=e.getColor(aw);r&&t.addRule(`.monaco-editor .selected-text { background-color: ${r}; }`);let i=e.getColor(iw);i&&!i.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function UA(e){return e<0?-e:e}var WA=class{constructor(e,t,n,r,i,a){this.top=e,this.left=t,this.width=n,this.height=r,this.textContent=i,this.textContentClassName=a}},GA=class{constructor(e){this._context=e;let t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=W(document.createElement(`div`)),this._domNode.setClassName(`cursor ${mO}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Wv.applyFontInfo(this._domNode,n),this._domNode.setDisplay(`none`),this._position=new I(1,1),this._lastRenderedContent=``,this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||=(this._domNode.setVisibility(`inherit`),!0)}hide(){this._isVisible&&=(this._domNode.setVisibility(`hidden`),!1)}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Wv.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t=``;if(this._cursorStyle===Se.Line||this._cursorStyle===Se.LineThin){let n=e.visibleRangeForPosition(this._position);if(!n||n.outsideRenderedLine)return null;let r;if(this._cursorStyle===Se.Line){if(r=Xa(this._lineCursorWidth>0?this._lineCursorWidth:2),r>2){let e=this._context.model.getLineContent(this._position.lineNumber),n=Io(e,this._position.column-1);t=e.substr(this._position.column-1,n)}}else r=Xa(1);let i=n.left;return r>=2&&i>=1&&--i,new WA(e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,i,r,this._lineHeight,t,``)}let n=this._context.model.getLineContent(this._position.lineNumber),r=Io(n,this._position.column-1),i=e.linesVisibleRangesForRange(new L(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+r),!1);if(!i||i.length===0)return null;let a=i[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;let o=a.ranges[0],s=o.width<1?this._typicalHalfwidthCharacterWidth:o.width,c=``;if(this._cursorStyle===Se.Block){let e=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,r);let i=e.tokens.findTokenIndexAtOffset(this._position.column-1);c=e.tokens.getClassName(i)}let l=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Se.Underline||this._cursorStyle===Se.UnderlineThin)&&(l+=this._lineHeight-2,u=2),new WA(l,o.left,s,u,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${mO} ${this._renderData.textContentClassName}`),this._domNode.setDisplay(`block`),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay(`none`),null)}},KA=class e extends sy{constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new GA(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=W(document.createElement(`div`)),this._domNode.setAttribute(`role`,`presentation`),this._domNode.setAttribute(`aria-hidden`,`true`),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Fi,this._cursorFlatBlinkInterval=new Ii,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){let e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){let e=new GA(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){let e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let e=0;e<t.length;e++)this._secondaryCursors[e].onCursorPositionChanged(t[e])}onCursorStateChanged(e){let t=[];for(let n=0,r=e.selections.length;n<r;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));let n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let t=t=>{for(let n=0,r=e.ranges.length;n<r;n++)if(e.ranges[n].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(let e of this._secondaryCursors)if(t(e.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let t=this._getCursorBlinking(),n=t===0,r=t===5;n?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!n&&!r&&(t===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},e.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},e.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e=`cursors-layer`;switch(this._selectionIsEmpty||(e+=` has-selection`),this._cursorStyle){case Se.Line:e+=` cursor-line-style`;break;case Se.Block:e+=` cursor-block-style`;break;case Se.Underline:e+=` cursor-underline-style`;break;case Se.LineThin:e+=` cursor-line-thin-style`;break;case Se.BlockOutline:e+=` cursor-block-outline-style`;break;case Se.UnderlineThin:e+=` cursor-underline-thin-style`;break;default:e+=` cursor-line-style`}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=` cursor-blink`;break;case 2:e+=` cursor-smooth`;break;case 3:e+=` cursor-phase`;break;case 4:e+=` cursor-expand`;break;case 5:e+=` cursor-solid`;break;default:e+=` cursor-solid`}else e+=` cursor-solid`;return this._cursorSmoothCaretAnimation&&(e+=` cursor-smooth-caret-animation`),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0,r=this._primaryCursor.render(e);r&&(t[n++]=r);for(let r=0,i=this._secondaryCursors.length;r<i;r++){let i=this._secondaryCursors[r].render(e);i&&(t[n++]=i)}this._renderData=t}getLastRenderData(){return this._renderData}};KA.BLINK_INTERVAL=500,iv((e,t)=>{let n=e.getColor(ZT);if(n){let r=e.getColor(QT);r||=n.opposite(),t.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${n}; border-color: ${n}; color: ${r}; }`),e.type===`hc`&&t.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}});var qA=()=>{throw Error(`Invalid change accessor`)},JA=class extends sy{constructor(e){super(e);let t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=W(document.createElement(`div`)),this.domNode.setClassName(`view-zones`),this.domNode.setPosition(`absolute`),this.domNode.setAttribute(`role`,`presentation`),this.domNode.setAttribute(`aria-hidden`,`true`),this.marginDomNode=W(document.createElement(`div`)),this.marginDomNode.setClassName(`margin-view-zones`),this.marginDomNode.setPosition(`absolute`),this.marginDomNode.setAttribute(`role`,`presentation`),this.marginDomNode.setAttribute(`aria-hidden`,`true`),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let n of e)t.set(n.id,n);let n=!1;return this._context.model.changeWhitespace(e=>{let r=Object.keys(this._zones);for(let i=0,a=r.length;i<a;i++){let a=r[i],o=this._zones[a],s=this._computeWhitespaceProps(o.delegate);o.isInHiddenArea=s.isInHiddenArea;let c=t.get(a);c&&(c.afterLineNumber!==s.afterViewLineNumber||c.height!==s.heightInPx)&&(e.changeOneWhitespace(a,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(o.delegate,s.heightInPx),n=!0)}}),n}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.afterColumn===void 0?1e4:e.afterColumn}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(e.afterColumn!==void 0)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let n=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new I(n,this._context.model.getModelLineMaxColumn(n))}let n;n=t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});let r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),i=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!i,afterViewLineNumber:r.lineNumber,heightInPx:i?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{let r={addZone:e=>(t=!0,this._addZone(n,e)),removeZone:e=>{e&&(t=this._removeZone(n,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(n,e)||t)}};YA(e,r),r.addZone=qA,r.removeZone=qA,r.layoutZone=qA}),t}_addZone(e,t){let n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:W(t.domNode),marginDomNode:t.marginDomNode?W(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition(`absolute`),r.domNode.domNode.style.width=`100%`,r.domNode.setDisplay(`none`),r.domNode.setAttribute(`monaco-view-zone`,r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition(`absolute`),r.marginDomNode.domNode.style.width=`100%`,r.marginDomNode.setDisplay(`none`),r.marginDomNode.setAttribute(`monaco-view-zone`,r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute(`monaco-visible-view-zone`),n.domNode.removeAttribute(`monaco-view-zone`),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute(`monaco-visible-view-zone`),n.marginDomNode.removeAttribute(`monaco-view-zone`),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t],r=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(n.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx==`number`?e.heightInPx:typeof e.heightInLines==`number`?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx==`number`?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight==`function`)try{e.onComputedHeight(t)}catch(e){ct(e)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop==`function`)try{e.onDomNodeTop(t)}catch(e){ct(e)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,n={},r=!1;for(let e of t)this._zones[e.id].isInHiddenArea||(n[e.id]=e,r=!0);let i=Object.keys(this._zones);for(let t=0,r=i.length;t<r;t++){let r=i[t],a=this._zones[r],o=0,s=0,c=`none`;n.hasOwnProperty(r)?(o=n[r].verticalOffset-e.bigNumbersDelta,s=n[r].height,c=`block`,a.isVisible||=(a.domNode.setAttribute(`monaco-visible-view-zone`,`true`),!0),this._safeCallOnDomNodeTop(a.delegate,e.getScrolledTopFromAbsoluteTop(n[r].verticalOffset))):(a.isVisible&&=(a.domNode.removeAttribute(`monaco-visible-view-zone`),!1),this._safeCallOnDomNodeTop(a.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),a.domNode.setTop(o),a.domNode.setHeight(s),a.domNode.setDisplay(c),a.marginDomNode&&(a.marginDomNode.setTop(o),a.marginDomNode.setHeight(s),a.marginDomNode.setDisplay(c))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};function YA(e,t){try{return e(t)}catch(e){ct(e)}}var XA=class{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}},ZA=class{constructor(e,t,n){this.configuration=e,this.theme=new XA(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}},QA=class{constructor(e,t,n,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=r,this.visibleRange=new L(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}},$A=class extends oy{constructor(e,t,n,r,i,a){super(),this._selections=[new $n(1,1,1,1)],this._renderAnimationFrame=null;let o=new nk(t,r,i,e);this._context=new ZA(t,n.getColorTheme(),r),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(e=>{this._context.theme.update(e),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new _O(this._context,o,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=W(document.createElement(`div`)),this._linesContent.setClassName(`lines-content monaco-editor-background`),this._linesContent.setPosition(`absolute`),this.domNode=W(document.createElement(`div`)),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute(`role`,`code`),this._overflowGuardContainer=W(document.createElement(`div`)),cy.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName(`overflow-guard`),this._scrollbar=new Zk(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new oA(this._context,this._linesContent),this._viewZones=new JA(this._context),this._viewParts.push(this._viewZones);let s=new jA(this._context);this._viewParts.push(s);let c=new LA(this._context);this._viewParts.push(c);let l=new uk(this._context);this._viewParts.push(l),l.addDynamicOverlay(new vk(this._context)),l.addDynamicOverlay(new HA(this._context)),l.addDynamicOverlay(new tA(this._context)),l.addDynamicOverlay(new bk(this._context));let u=new dk(this._context);this._viewParts.push(u),u.addDynamicOverlay(new yk(this._context)),u.addDynamicOverlay(new eA(this._context)),u.addDynamicOverlay(new cA(this._context)),u.addDynamicOverlay(new sA(this._context)),u.addDynamicOverlay(new fO(this._context));let d=new pO(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(d),this._contentWidgets=new pk(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new KA(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new kA(this._context),this._viewParts.push(this._overlayWidgets);let f=new IA(this._context);this._viewParts.push(f);let p=new EA(this._context);if(this._viewParts.push(p),s){let e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(s.getDomNode(),e.insertBefore)}this._linesContent.appendChild(l.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),a?a.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new uO(this._context,o,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>new kD(this._viewCursors.getLastRenderData()||[],this._textAreaHandler.getLastRenderData()),shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new I(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new I(e,t)))}}_applyLayout(){let e=this._context.configuration.options.get(129);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?` focused`:``;return this._context.configuration.options.get(126)+` `+tv(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=ia(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){ej(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(let n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!Ki(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;let t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);let n=new QA(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());let r=new uy(this._context.viewLayout,n,this._viewLines);for(let t of e)t.prepareRender(r);for(let t of e)t.render(r),t.onDidRender();Math.abs(Zr()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){let n=this._context.model.validateModelPosition({lineNumber:e,column:t}),r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();let i=this._viewLines.visibleRangeForPosition(new I(r.lineNumber,r.column));return i?i.left:-1}getTargetAtClientPoint(e,t){let n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?rk.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new FA(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(let e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){let n=e.position?e.position.position:null;n!==null&&(t=new L(n.lineNumber,n.column,n.lineNumber,n.column))}let n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){let t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}};function ej(e){try{return e()}catch(e){ct(e)}}var tj=class e{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new yD(new L(1,1,1,1),0,new I(1,1),0),new yD(new L(1,1,1,1),0,new I(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new X(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new $n(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new $n(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,r){return t.equals(n)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){let n=t.position,r=t.selectionStart.getStartPosition(),i=t.selectionStart.getEndPosition(),a=e.normalizePosition(n,2),o=this._validatePositionWithCache(e,r,n,a),s=this._validatePositionWithCache(e,i,r,o);return n.equals(a)&&r.equals(o)&&i.equals(s)?t:new yD(L.fromPositions(o,s),t.selectionStartLeftoverVisibleColumns+r.column-o.column,a,t.leftoverVisibleColumns+n.column-a.column)}_setState(t,n,r){if(r&&=e._validateViewState(t.viewModel,r),n){let e=t.model.validateRange(n.selectionStart),r=n.selectionStart.equalsRange(e)?n.selectionStartLeftoverVisibleColumns:0,i=t.model.validatePosition(n.position);n=new yD(e,r,i,n.position.equals(i)?n.leftoverVisibleColumns:0)}else{if(!r)return;let e=t.model.validateRange(t.coordinatesConverter.convertViewRangeToModelRange(r.selectionStart)),i=t.model.validatePosition(t.coordinatesConverter.convertViewPositionToModelPosition(r.position));n=new yD(e,r.selectionStartLeftoverVisibleColumns,i,r.leftoverVisibleColumns)}if(r){let e=t.coordinatesConverter.validateViewRange(r.selectionStart,n.selectionStart),i=t.coordinatesConverter.validateViewPosition(r.position,n.position);r=new yD(e,n.selectionStartLeftoverVisibleColumns,i,n.leftoverVisibleColumns)}else{let e=t.coordinatesConverter.convertModelPositionToViewPosition(new I(n.selectionStart.startLineNumber,n.selectionStart.startColumn)),i=t.coordinatesConverter.convertModelPositionToViewPosition(new I(n.selectionStart.endLineNumber,n.selectionStart.endColumn)),a=new L(e.lineNumber,e.column,i.lineNumber,i.column),o=t.coordinatesConverter.convertModelPositionToViewPosition(n.position);r=new yD(a,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}this.modelState=n,this.viewState=r,this._updateTrackedRange(t)}},nj=class{constructor(e){this.context=e,this.primaryCursor=new tj(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){let n=this.secondaryCursors[t].viewState.position;n.isBefore(e)&&(e=n)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){let n=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(n)&&(e=n)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(X.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.secondaryCursors.length,n=e.length;if(t<n){let e=n-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>n){let e=t-n;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let t=0;t<n;t++)this.secondaryCursors[t].setState(this.context,e[t].modelState,e[t].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new tj(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,r=e.length;n<r;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((e,t)=>e.selection.startLineNumber===t.selection.startLineNumber?e.selection.startColumn-t.selection.startColumn:e.selection.startLineNumber-t.selection.startLineNumber);for(let n=0;n<t.length-1;n++){let r=t[n],i=t[n+1],a=r.selection,o=i.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let s;if(s=o.isEmpty()||a.isEmpty()?o.getStartPosition().isBeforeOrEqual(a.getEndPosition()):o.getStartPosition().isBefore(a.getEndPosition()),s){let a=r.index<i.index?n:n+1,o=r.index<i.index?n+1:n,s=t[o].index,c=t[a].index,l=t[o].selection,u=t[a].selection;if(!l.equalsSelection(u)){let n=l.plusRange(u),r=l.selectionStartLineNumber===l.startLineNumber&&l.selectionStartColumn===l.startColumn,i=u.selectionStartLineNumber===u.startLineNumber&&u.selectionStartColumn===u.startColumn,o;s===this.lastAddedCursorIndex?(o=r,this.lastAddedCursorIndex=c):o=i;let d;d=o?new $n(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new $n(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn),t[a].selection=d;let f=X.fromModelSelection(d);e[c].setState(this.context,f.modelState,f.viewState)}for(let e of t)e.index>s&&e.index--;e.splice(s,1),t.splice(o,1),this._removeSecondaryCursor(s-1),n--}}}},rj=class{constructor(){this.type=0}},ij=class{constructor(){this.type=1}},aj=class{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}},oj=class{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}},sj=class{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}},cj=class{constructor(){this.type=5}},lj=class{constructor(e){this.type=6,this.isFocused=e}},uj=class{constructor(){this.type=7}},dj=class{constructor(){this.type=8}},fj=class{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}},pj=class{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}},mj=class{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}},hj=class{constructor(e,t,n,r,i,a){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=r,this.revealHorizontal=i,this.scrollType=a}},gj=class{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}},_j=class{constructor(){this.type=14}},vj=class{constructor(e){this.type=15,this.ranges=e}},yj=class{constructor(){this.type=16}},bj=class{constructor(){this.type=17}},xj=class extends j{constructor(){super(),this._onEvent=this._register(new N),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn(`Detected duplicate listener in ViewEventDispatcher`,e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Sj),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(let t of e)this._addOutgoingEvent(t);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let t=this._eventHandlers.slice(0);for(let n of t)n.handleEvents(e)}}},Sj=class{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}},Cj=class e{constructor(e,t,n,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(t){return t.kind===0?new e(this._oldContentWidth,this._oldContentHeight,t.contentWidth,t.contentHeight):this}},wj=class e{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(t){return t.kind===1?new e(this.oldHasFocus,t.hasFocus):this}},Tj=class e{constructor(e,t,n,r,i,a,o,s){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=r,this.scrollWidth=i,this.scrollLeft=a,this.scrollHeight=o,this.scrollTop=s,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(t){return t.kind===2?new e(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop):this}},Ej=class{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}},Dj=class e{constructor(e,t,n,r,i,a,o){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=r,this.source=i,this.reason=a,this.reachedMaxCursorCount=o}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return e._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(t){return t.kind===6?new e(this.oldSelections,t.selections,this.oldModelVersionId,t.modelVersionId,t.source,t.reason,this.reachedMaxCursorCount||t.reachedMaxCursorCount):this}},Oj=class{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}},kj=class{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}},Aj=class{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(let n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let e=0;e<this._autoClosedEnclosingDecorations.length;e++){let n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[e]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(L.compareRangesUsingStarts),e.sort(L.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}},jj=class e extends j{constructor(e,t,n,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new bD(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new nj(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Et(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new bD(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,`viewModel`,0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(t,n,r,i){let a=!1;i!==null&&i.length>e.MAX_CURSOR_COUNT&&(i=i.slice(0,e.MAX_CURSOR_COUNT),a=!0);let o=new kj(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,o,a)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,r){let i=this._cursors.getViewPositions();if(i.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,r);return}else{let a=i[0],o=new L(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,o,null,0,n,r)}}_revealPrimaryCursor(e,t,n,r,i){let a=this._cursors.getViewPositions();if(a.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,r,i);else{let o=a[0],s=new L(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,s,null,n,r,i)}}_emitCursorRevealRange(e,t,n,r,i,a,o){e.emitViewEvent(new hj(t,n,r,i,a,o))}saveState(){let e=[],t=this._cursors.getSelections();for(let n=0,r=t.length;n<r;n++){let r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let n=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],i=1,a=1;r.position&&r.position.lineNumber&&(i=r.position.lineNumber),r.position&&r.position.column&&(a=r.position.column);let o=i,s=a;r.selectionStart&&r.selectionStart.lineNumber&&(o=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(s=r.selectionStart.column),n.push({selectionStartLineNumber:o,selectionStartColumn:s,positionLineNumber:i,positionColumn:a})}this.setStates(e,`restoreState`,0,X.fromModelSelections(n)),this.revealPrimary(e,`restoreState`,!0,1)}onModelContentChanged(e,t){if(t instanceof Cx){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,`modelChange`,0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;let n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new nj(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,`model`,1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){let n=X.fromModelSelections(t.resultingSelection);this.setStates(e,`modelChange`,t.isUndoing?5:t.isRedoing?6:2,n)&&this._revealPrimaryCursor(e,`modelChange`,0,!0,0)}else{let t=this._cursors.readSelectionFromMarkers();this.setStates(e,`modelChange`,2,X.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:aS.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:aS.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,r){this.setStates(e,t,r,X.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],r=[];for(let i=0,a=e.length;i<a;i++)n.push({range:e[i],options:{description:`auto-closed-character`,inlineClassName:`auto-closed-character`,stickiness:1}}),r.push({range:t[i],options:{description:`auto-closed-enclosing`,stickiness:1}});let i=this._model.deltaDecorations([],n),a=this._model.deltaDecorations([],r);this._autoClosedActions.push(new Aj(this._model,i,a))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=Mj.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],r=[];for(let t=0;t<e.commands.length;t++){let i=e.commands[t];i instanceof BO&&i.enclosingRange&&i.closeCharacterRange&&(n.push(i.closeCharacterRange),r.push(i.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,r,i){let a=new kj(this._model,this);if(a.equals(r))return!1;let o=this._cursors.getSelections(),s=this._cursors.getViewSelections();if(e.emitViewEvent(new oj(s,o)),!r||r.cursorState.length!==a.cursorState.length||a.cursorState.some((e,t)=>!e.modelState.equals(r.cursorState[t].modelState))){let s=r?r.cursorState.map(e=>e.modelState.selection):null,c=r?r.modelVersionId:0;e.emitOutgoingEvent(new Dj(s,o,c,a.modelVersionId,t||`keyboard`,n,i))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;let i=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!i)return null;let a=i[1],o=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!o||o.length!==1)return null;let s=o[0].open,c=r.text.length-i[2].length-1,l=r.text.lastIndexOf(s,c-1);if(l===-1)return null;t.push([l,c])}return t}executeEdits(e,t,n,r){let i=null;t===`snippet`&&(i=this._findAutoClosingPairs(n)),i&&(n[0]._isTracked=!0);let a=[],o=[],s=this._model.pushEditOperations(this.getSelections(),n,e=>{if(i)for(let t=0,n=i.length;t<n;t++){let[n,r]=i[t],s=e[t],c=s.range.startLineNumber,l=s.range.startColumn-1+n,u=s.range.startColumn-1+r;a.push(new L(c,u+1,c,u+2)),o.push(new L(c,l+1,c,u+2))}let t=r(e);return t&&(this._isHandling=!0),t});s&&(this._isHandling=!1,this.setSelections(e,t,s,0)),a.length>0&&this._pushAutoClosedAction(a,o)}_executeEdit(e,t,n,r=0){if(this.context.cursorConfig.readOnly)return;let i=new kj(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){ct(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,i,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return Aj.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t===`keyboard`&&(this._executeEditOperation(zO.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n===`keyboard`){let e=t.length,n=0;for(;n<e;){let e=Io(t,n),r=t.substr(n,e);this._executeEditOperation(zO.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),r)),n+=e}}else this._executeEditOperation(zO.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,r,i,a){if(t.length===0&&n===0&&r===0){if(i!==0){let t=this.getSelections().map(e=>{let t=e.getPosition();return new $n(t.lineNumber,t.column+i,t.lineNumber,t.column+i)});this.setSelections(e,a,t,0)}return}this._executeEdit(()=>{this._executeEditOperation(zO.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,r,i))},e,a)}paste(e,t,n,r,i){this._executeEdit(()=>{this._executeEditOperation(zO.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,r||[]))},e,i,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(kO.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new CD(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new CD(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}};jj.MAX_CURSOR_COUNT=1e4;var Mj=class{static executeCommands(e,t,n){let r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},i=this._innerExecuteCommands(r,n);for(let e=0,t=r.trackedRanges.length;e<t;e++)r.model._setTrackedRange(r.trackedRanges[e],null,0);return i}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let n=this._getEditOperations(e,t);if(n.operations.length===0)return null;let r=n.operations,i=this._getLoserCursorMap(r);if(i.hasOwnProperty(`0`))return console.warn(`Ignoring commands`),null;let a=[];for(let e=0,t=r.length;e<t;e++)i.hasOwnProperty(r[e].identifier.major.toString())||a.push(r[e]);n.hadTrackedEditOperation&&a.length>0&&(a[0]._isTracked=!0);let o=e.model.pushEditOperations(e.selectionsBefore,a,n=>{let r=[];for(let t=0;t<e.selectionsBefore.length;t++)r[t]=[];for(let e of n)e.identifier&&r[e.identifier.major].push(e);let i=(e,t)=>e.identifier.minor-t.identifier.minor,a=[];for(let n=0;n<e.selectionsBefore.length;n++)r[n].length>0?(r[n].sort(i),a[n]=t[n].computeCursorState(e.model,{getInverseEditOperations:()=>r[n],getTrackedSelection:t=>{let n=parseInt(t,10),r=e.model._getTrackedRange(e.trackedRanges[n]);return e.trackedRangesDirection[n]===0?new $n(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn):new $n(r.endLineNumber,r.endColumn,r.startLineNumber,r.startColumn)}})):a[n]=e.selectionsBefore[n];return a});o||=e.selectionsBefore;let s=[];for(let e in i)i.hasOwnProperty(e)&&s.push(parseInt(e,10));s.sort((e,t)=>t-e);for(let e of s)o.splice(e,1);return o}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],r=!1;for(let i=0,a=t.length;i<a;i++){let a=t[i];if(a){let t=this._getEditOperationsFromCommand(e,i,a);n=n.concat(t.operations),r||=t.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,n){let r=[],i=0,a=(e,a,o=!1)=>{L.isEmpty(e)&&a===``||r.push({identifier:{major:t,minor:i++},range:e,text:a,forceMoveMarkers:o,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},o=!1,s={addEditOperation:a,addTrackedEditOperation:(e,t,n)=>{o=!0,a(e,t,n)},trackSelection:(t,n)=>{let r=$n.liftSelection(t),i;if(r.isEmpty())if(typeof n==`boolean`)i=n?2:3;else{let t=e.model.getLineMaxColumn(r.startLineNumber);i=r.startColumn===t?2:3}else i=1;let a=e.trackedRanges.length,o=e.model._setTrackedRange(null,r,i);return e.trackedRanges[a]=o,e.trackedRangesDirection[a]=r.getDirection(),a.toString()}};try{n.getEditOperations(e.model,s)}catch(e){return ct(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:o}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((e,t)=>-L.compareRangesUsingEnds(e.range,t.range));let t={};for(let n=1;n<e.length;n++){let r=e[n-1],i=e[n];if(L.getStartPosition(r.range).isBefore(L.getEndPosition(i.range))){let a;a=r.identifier.major>i.identifier.major?r.identifier.major:i.identifier.major,t[a.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===a&&(e.splice(t,1),t<n&&n--,t--);n>0&&n--}}return t}},Nj=class{constructor(e,t,n,r,i,a){this.id=e,this.label=t,this.alias=n,this._precondition=r,this._run=i,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}},Pj={getInitialState:()=>Lu,tokenize2:(e,t,n,r)=>Bu(0,e,n,r)};function Fj(e,t,n=Pj){return Lj(e,t,n||Pj)}function Ij(e,t,n,r,i,a,o){let s=`<div>`,c=r,l=0,u=!0;for(let d=0,f=t.getCount();d<f;d++){let f=t.getEndOffset(d);if(f<=r)continue;let p=``;for(;c<f&&c<i;c++){let t=e.charCodeAt(c);switch(t){case 9:let e=a-(c+l)%a;for(l+=e-1;e>0;)o&&u?(p+=`&#160;`,u=!1):(p+=` `,u=!0),e--;break;case 60:p+=`&lt;`,u=!1;break;case 62:p+=`&gt;`,u=!1;break;case 38:p+=`&amp;`,u=!1;break;case 0:p+=`&#00;`,u=!1;break;case 65279:case 8232:case 8233:case 133:p+=``,u=!1;break;case 13:p+=`&#8203`,u=!1;break;case 32:o&&u?(p+=`&#160;`,u=!1):(p+=` `,u=!0);break;default:p+=String.fromCharCode(t),u=!1}}if(s+=`<span style="${t.getInlineStyle(d,n)}">${p}</span>`,f>i||c>=i)break}return s+=`</div>`,s}function Lj(e,t,n){let r=`<div class="monaco-tokenized-source">`,i=_o(e),a=n.getInitialState();for(let e=0,o=i.length;e<o;e++){let o=i[e];e>0&&(r+=`<br/>`);let s=n.tokenize2(o,!0,a,0);_m.convertToEndOffset(s.tokens,o.length);let c=new _m(s.tokens,o,t).inflate(),l=0;for(let e=0,t=c.getCount();e<t;e++){let t=c.getClassName(e),n=c.getEndOffset(e);r+=`<span class="${t}">${oo(o.substring(l,n))}</span>`,l=n}a=s.endState}return r+=`</div>`,r}var Rj=class{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let t=this._inserts,n=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,r)}},zj=class{constructor(e,t,n,r,i){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=r,this.minWidth=i,this.prefixSum=0}},Bj=class e{constructor(t,n,r,i){this._instanceId=Zo(++e.INSTANCE_COUNT),this._pendingChanges=new Rj,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=t,this._lineHeight=n,this._paddingTop=r,this._paddingBottom=i}static findInsertionIndex(e,t,n){let r=0,i=e.length;for(;r<i;){let a=r+i>>>1;t===e[a].afterLineNumber?n<e[a].ordinal?i=a:r=a+1:t<e[a].afterLineNumber?i=a:r=a+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(e,n,r,i)=>{t=!0,e|=0,n|=0,r|=0,i|=0;let a=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new zj(a,e,n,r,i)),a},changeOneWhitespace:(e,n,r)=>{t=!0,n|=0,r|=0,this._pendingChanges.change({id:e,newAfterLineNumber:n,newHeight:r})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(let t of e)this._insertWhitespace(t);for(let e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(let e of n){let t=this._findWhitespaceIndex(e.id);t!==-1&&this._removeWhitespace(t)}return}let r=new Set;for(let e of n)r.add(e.id);let i=new Map;for(let e of t)i.set(e.id,e);let a=e=>{let t=[];for(let n of e)if(!r.has(n.id)){if(i.has(n.id)){let e=i.get(n.id);n.afterLineNumber=e.newAfterLineNumber,n.height=e.newHeight}t.push(n)}return t},o=a(this._arr).concat(a(e));o.sort((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber),this._arr=o,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(t){let n=e.findInsertionIndex(this._arr,t.afterLineNumber,t.ordinal);this._arr.splice(n,0,t),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)}_findWhitespaceIndex(e){let t=this._arr;for(let n=0,r=t.length;n<r;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){let r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==n&&(this._arr[r].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){let e=this._arr[r];this._removeWhitespace(r),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){let r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){let r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;let t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;let t=this._arr,n=0,r=t.length-1;for(;n<=r;){let i=(r-n|0)/2|0,a=n+i|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;let t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e|=0;let t;t=e>1?this._lineHeight*(e-1):0;let n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){return this._paddingBottom===0?!1:(this._checkPendingChanges(),e>=this.getLinesTotalHeight()-this._paddingBottom)}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e|=0,e<0)return 1;let t=this._lineCount|0,n=this._lineHeight,r=1,i=t;for(;r<i;){let t=(r+i)/2|0,a=this.getVerticalOffsetForLineNumber(t)|0;if(e>=a+n)r=t+1;else if(e>=a)return t;else i=t}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;let n=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,i=this.getVerticalOffsetForLineNumber(r)|0,a=this._lineCount|0,o=this.getFirstWhitespaceIndexAfterLineNumber(r)|0,s=this.getWhitespacesCount()|0,c,l;o===-1?(o=s,l=a+1,c=0):(l=this.getAfterLineNumberForWhitespaceIndex(o)|0,c=this.getHeightForWhitespaceIndex(o)|0);let u=i,d=u,f=5e5,p=0;i>=f&&(p=Math.floor(i/f)*f,p=Math.floor(p/n)*n,d-=p);let m=[],h=e+(t-e)/2,g=-1;for(let e=r;e<=a;e++){if(g===-1){let t=u,r=u+n;(t<=h&&h<r||t>h)&&(g=e)}for(u+=n,m[e-r]=d,d+=n;l===e;)d+=c,u+=c,o++,o>=s?l=a+1:(l=this.getAfterLineNumberForWhitespaceIndex(o)|0,c=this.getHeightForWhitespaceIndex(o)|0);if(u>=t){a=e;break}}g===-1&&(g=a);let _=this.getVerticalOffsetForLineNumber(a)|0,v=r,y=a;return v<y&&i<e&&v++,v<y&&_+n>t&&y--,{bigNumbersDelta:p,startLineNumber:r,endLineNumber:a,relativeVerticalOffset:m,centeredLineNumber:g,completelyVisibleStartLineNumber:v,completelyVisibleEndLineNumber:y}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;let t=this.getAfterLineNumberForWhitespaceIndex(e),n;n=t>=1?this._lineHeight*t:0;let r;return r=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,n+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;let r=this.getVerticalOffsetForWhitespaceIndex(n),i=this.getHeightForWhitespaceIndex(n);if(e>=r+i)return-1;for(;t<n;){let r=Math.floor((t+n)/2),i=this.getVerticalOffsetForWhitespaceIndex(r),a=this.getHeightForWhitespaceIndex(r);if(e>=i+a)t=r+1;else if(e>=i)return r;else n=r}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;let t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;let n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;let r=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;let n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(n<0)return[];let i=[];for(let e=n;e<=r;e++){let n=this.getVerticalOffsetForWhitespaceIndex(e),r=this.getHeightForWhitespaceIndex(e);if(n>=t)break;i.push({id:this.getIdForWhitespaceIndex(e),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(e),verticalOffset:n,height:r})}return i}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}};Bj.INSTANCE_COUNT=0;var Vj=125,Hj=class{constructor(e,t,n,r){e|=0,t|=0,n|=0,r|=0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=r,this.scrollHeight=Math.max(n,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}},Uj=class extends j{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new N),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Hj(0,0,0,0),this._scrollable=this._register(new Fk(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let n=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(n||r)&&this._onDidContentSizeChange.fire(new Cj(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}},Wj=class extends j{constructor(e,t,n){super(),this._configuration=e;let r=this._configuration.options,i=r.get(129),a=r.get(74);this._linesLayout=new Bj(t,r.get(58),a.top,a.bottom),this._scrollable=this._register(new Uj(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Hj(i.contentWidth,0,i.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?Vj:0)}onConfigurationChanged(e){let t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){let e=t.get(74);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(129)){let e=t.get(129),n=e.contentWidth,r=e.height,i=this._scrollable.getScrollDimensions(),a=i.contentWidth;this._scrollable.setScrollDimensions(new Hj(n,i.contentWidth,r,this._getContentHeight(n,r,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){let n=this._configuration.options.get(91);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,n){let r=this._configuration.options,i=this._linesLayout.getLinesTotalHeight();return r.get(93)?i+=Math.max(0,t-r.get(58)-r.get(74).bottom):i+=this._getHorizontalScrollbarHeight(e,n),i}_updateHeight(){let e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new Hj(t,e.contentWidth,n,this._getContentHeight(t,n,r)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Hm(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Hm(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){let t=this._configuration.options,n=t.get(130),r=t.get(43);if(n.isViewportWrapping){let n=t.get(129),i=t.get(64);return e>n.contentWidth+r.typicalHalfwidthCharacterWidth&&i.enabled&&i.side===`right`?e+n.verticalScrollbarWidth:e}else{let n=t.get(92)*r.typicalHalfwidthCharacterWidth,i=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+n,i)}}setMaxLineWidth(e){let t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Hj(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}changeWhitespace(e){let t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){let n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}},Gj=class{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}},Kj=class{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){let t=this._counts[e],n=e>0?this._modelToView[e-1]:0;this._modelToView[e]=n+t;for(let r=0;r<t;r++)this._viewToModel[n+r]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=Hp(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();let t=this._viewToModel[e];return new sp(t,e-(t>0?this._modelToView[t-1]:0))}},qj=class{constructor(e,t,n,r,i,a,o,s,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=i,this.tabSize=a,this.wrappingStrategy=o,this.wrappingColumn=s,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new Gj(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);let n=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),i=n.length,a=this.createLineBreaksComputer(),o=new Yp(_x.fromDecorations(r));for(let e=0;e<i;e++){let r=o.takeWhile(t=>t.lineNumber===e+1);a.addRequest(n[e],r,t?t[e]:null)}let s=a.finalize(),c=[],l=this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e)).sort(L.compareRangesUsingStarts),u=1,d=0,f=-1,p=f+1<l.length?d+1:i+2;for(let e=0;e<i;e++){let t=e+1;t===p&&(f++,u=l[f].startLineNumber,d=l[f].endLineNumber,p=f+1<l.length?d+1:i+2);let n=t>=u&&t<=d,r=nM(s[e],!n);c[e]=r.getViewLineCount(),this.lines[e]=r}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new Kj(c)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(e=>this.model.validateRange(e)).sort(L.compareRangesUsingStarts),n=[],r=t[0].startLineNumber,i=t[0].endLineNumber;for(let e=1,a=t.length;e<a;e++){let a=t[e];a.startLineNumber>i+1?(n.push(new L(r,1,i,1)),r=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return n.push(new L(r,1,i,1)),n}setHiddenAreas(e){let t=this._reduceRanges(e),n=this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e)).sort(L.compareRangesUsingStarts);if(t.length===n.length){let e=!1;for(let r=0;r<t.length;r++)if(!t[r].equalsRange(n[r])){e=!0;break}if(!e)return!1}let r=[];for(let e of t)r.push({range:e,options:uD.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,r);let i=t,a=1,o=0,s=-1,c=s+1<i.length?o+1:this.lines.length+2,l=!1;for(let e=0;e<this.lines.length;e++){let t=e+1;t===c&&(s++,a=i[s].startLineNumber,o=i[s].endLineNumber,c=s+1<i.length?o+1:this.lines.length+2);let n=!1;if(t>=a&&t<=o?this.lines[e].isVisible()&&(this.lines[e]=this.lines[e].setVisible(!1),n=!0):(l=!0,this.lines[e].isVisible()||(this.lines[e]=this.lines[e].setVisible(!0),n=!0)),n){let t=this.lines[e].getViewLineCount();this.prefixSumComputer.changeValue(e,t)}}return l||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,r){let i=this.fontInfo.equals(e),a=this.wrappingStrategy===t,o=this.wrappingColumn===n,s=this.wrappingIndent===r;if(i&&a&&o&&s)return!1;let c=i&&a&&!o&&s;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=r;let l=null;if(c){l=[];for(let e=0,t=this.lines.length;e<t;e++)l[e]=this.lines[e].getLineBreakData()}return this._constructLines(!1,l),!0}createLineBreaksComputer(){return(this.wrappingStrategy===`advanced`?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let r=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,i=this.prefixSumComputer.getAccumulatedValue(n-1);return this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1),new pj(r,i)}onModelLinesInserted(e,t,n,r){if(!e||e<=this._validModelVersionId)return null;let i=t>2&&!this.lines[t-2].isVisible(),a=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,o=0,s=[],c=[];for(let e=0,t=r.length;e<t;e++){let t=nM(r[e],!i);s.push(t);let n=t.getViewLineCount();o+=n,c[e]=n}return this.lines=this.lines.slice(0,t-1).concat(s).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,c),new mj(a,a+o-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let r=t-1,i=this.lines[r].getViewLineCount(),a=nM(n,this.lines[r].isVisible());this.lines[r]=a;let o=this.lines[r].getViewLineCount(),s=!1,c=0,l=-1,u=0,d=-1,f=0,p=-1;i>o?(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,l=c+o-1,f=l+1,p=f+(i-o)-1,s=!0):i<o?(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,l=c+i-1,u=l+1,d=u+(o-i)-1,s=!0):(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,l=c+o-1),this.prefixSumComputer.changeValue(r,o);let m=c<=l?new fj(c,l):null,h=u<=d?new mj(u,d):null,g=f<=p?new pj(f,p):null;return[s,m,h,g]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;let t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);let r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),a=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),o=this.model.getActiveIndentGuide(r.lineNumber,i.lineNumber,a.lineNumber),s=this.convertModelPositionToViewPosition(o.startLineNumber,1),c=this.convertModelPositionToViewPosition(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber));return{startLineNumber:s.lineNumber,endLineNumber:c.lineNumber,indent:o.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return new Jj(n+1,r)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let t=this.lines[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new I(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){let t=this.lines[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new I(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){let n=this.getViewLineInfo(e),r=this.getViewLineInfo(t),i=[],a=this.getModelStartPositionOfViewLine(n),o=[];for(let e=n.modelLineNumber;e<=r.modelLineNumber;e++){let t=this.lines[e-1];if(t.isVisible()){let i=e===n.modelLineNumber?n.modelLineWrappedLineIdx:0,a=e===r.modelLineNumber?r.modelLineWrappedLineIdx+1:t.getViewLineCount();for(let t=i;t<a;t++)o.push(new Jj(e,t))}if(!t.isVisible()&&a){let t=new I(e-1,this.model.getLineMaxColumn(e-1)+1),n=L.fromPositions(a,t);i.push(new Yj(n,o)),o=[],a=null}else t.isVisible()&&!a&&(a=new I(e,1))}if(a){let e=L.fromPositions(a,this.getModelEndPositionOfViewLine(r));i.push(new Yj(e,o))}return i}getViewLinesBracketGuides(e,t,n,r){let i=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,a=[];for(let n of this.getViewLineInfosGroupedByModelRanges(e,t)){let e=n.modelRange.startLineNumber,t=this.model.getLinesBracketGuides(e,n.modelRange.endLineNumber,i,r);for(let r of n.viewLines)if(r.isWrappedLineContinuation&&this.getMinColumnOfViewLine(r)===1)a.push([]);else{let n=t[r.modelLineNumber-e];n=n.map(e=>e.horizontalLine?new Gc(e.visibleColumn,e.className,new Kc(e.horizontalLine.top,this.convertModelPositionToViewPosition(r.modelLineNumber,e.horizontalLine.endColumn).column)):e),a.push(n)}}return a}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),i=[],a=[],o=[],s=n.lineNumber-1,c=r.lineNumber-1,l=null;for(let e=s;e<=c;e++){let t=this.lines[e];if(t.isVisible()){let r=t.getViewLineNumberOfModelPosition(0,e===s?n.column:1),i=t.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(e+1)),c=i-r+1,u=0;c>1&&t.getViewLineMinColumn(this.model,e+1,i)===1&&(u=r===0?1:2),a.push(c),o.push(u),l===null&&(l=new I(e+1,0))}else l!==null&&(i=i.concat(this.model.getLinesIndentGuides(l.lineNumber,e)),l=null)}l!==null&&(i=i.concat(this.model.getLinesIndentGuides(l.lineNumber,r.lineNumber)),l=null);let u=t-e+1,d=Array(u),f=0;for(let e=0,t=i.length;e<t;e++){let t=i[e],n=Math.min(u-f,a[e]),r=o[e],s;s=r===2?0:r===1?1:n;for(let e=0;e<n;e++)e===s&&(t=0),d[f++]=t}return d}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return this.lines[n].getViewLineContent(this.model,n+1,r)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return this.lines[n].getViewLineLength(this.model,n+1,r)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return this.lines[n].getViewLineMinColumn(this.model,n+1,r)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return this.lines[n].getViewLineMaxColumn(this.model,n+1,r)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,r=t.remainder;return this.lines[n].getViewLineData(this.model,n+1,r)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let r=this.prefixSumComputer.getIndexOf(e-1),i=e,a=r.index,o=r.remainder,s=[];for(let r=a,c=this.model.getLineCount();r<c;r++){let c=this.lines[r];if(!c.isVisible())continue;let l=r===a?o:0,u=c.getViewLineCount()-l,d=!1;i+u>t&&(d=!0,u=t-i+1);let f=l+u;if(c.getViewLinesData(this.model,r+1,l,f,i-e,n,s),i+=u,d)break}return s}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let r=this.prefixSumComputer.getIndexOf(e-1),i=r.index,a=r.remainder,o=this.lines[i],s=o.getViewLineMinColumn(this.model,i+1,a),c=o.getViewLineMaxColumn(this.model,i+1,a);t<s&&(t=s),t>c&&(t=c);let l=o.getModelColumnOfViewPosition(a,t);return this.model.validatePosition(new I(i+1,l)).equals(n)?new I(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){let n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new L(n.lineNumber,n.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),r=n.index,i=n.remainder,a=this.lines[r].getModelColumnOfViewPosition(i,t);return this.model.validatePosition(new I(r+1,a))}convertViewRangeToModelRange(e){let t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new L(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){let r=this.model.validatePosition(new I(e,t)),i=r.lineNumber,a=r.column,o=i-1,s=!1;for(;o>0&&!this.lines[o].isVisible();)o--,s=!0;if(o===0&&!this.lines[o].isVisible())return new I(1,1);let c=1+(o===0?0:this.prefixSumComputer.getAccumulatedValue(o-1)),l;return l=s?this.lines[o].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(o+1),n):this.lines[i-1].getViewPositionOfModelPosition(c,a,n),l}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){let n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return L.fromPositions(n)}else{let t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new L(t.lineNumber,t.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.lines[n].isVisible()){let e=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(e,t)}for(;n>0&&!this.lines[n].isVisible();)n--;if(n===0&&!this.lines[n].isVisible())return 1;let r=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){let r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(i.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new L(r.lineNumber,1,i.lineNumber,i.column),t,n);let a=[],o=r.lineNumber-1,s=i.lineNumber-1,c=null;for(let e=o;e<=s;e++)if(this.lines[e].isVisible())c===null&&(c=new I(e+1,e===o?r.column:1));else if(c!==null){let r=this.model.getLineMaxColumn(e);a=a.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,e,r),t,n)),c=null}c!==null&&(a=a.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,i.lineNumber,i.column),t,n)),c=null),a.sort((e,t)=>{let n=L.compareRangesUsingStarts(e.range,t.range);return n===0?e.id<t.id?-1:e.id>t.id?1:0:n});let l=[],u=0,d=null;for(let e of a){let t=e.id;d!==t&&(d=t,l[u++]=e)}return l}getInjectedTextAt(e){let t=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(t-1),r=n.index,i=n.remainder;return this.lines[r].getInjectedTextAt(i,e.column)}normalizePosition(e,t){let n=this._toValidViewLineNumber(e.lineNumber),r=this.prefixSumComputer.getIndexOf(n-1),i=r.index,a=r.remainder;return this.lines[i].normalizePosition(this.model,i+1,a,e,t)}getLineIndentColumn(e){let t=this._toValidViewLineNumber(e),n=this.prefixSumComputer.getIndexOf(t-1),r=n.index;return n.remainder===0?this.model.getLineIndentColumn(r+1):0}},Jj=class{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}},Yj=class{constructor(e,t){this.modelRange=e,this.viewLines=t}},Xj=class{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Zj.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let r=e.getLineTokens(t),i=r.getLineContent();return new Km(i,!1,1,i.length+1,0,r.inflate(),null)}getViewLinesData(e,t,n,r,i,a,o){if(!a[i]){o[i]=null;return}o[i]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new I(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n,r,i){return r}getInjectedTextAt(e,t){return null}};Xj.INSTANCE=new Xj;var Zj=class{constructor(){}isVisible(){return!1}setVisible(e){return e?Xj.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw Error(`Not supported`)}getViewLineLength(e,t,n){throw Error(`Not supported`)}getViewLineMinColumn(e,t,n){throw Error(`Not supported`)}getViewLineMaxColumn(e,t,n){throw Error(`Not supported`)}getViewLineData(e,t,n){throw Error(`Not supported`)}getViewLinesData(e,t,n,r,i,a,o){throw Error(`Not supported`)}getModelColumnOfViewPosition(e,t){throw Error(`Not supported`)}getViewPositionOfModelPosition(e,t){throw Error(`Not supported`)}getViewLineNumberOfModelPosition(e,t){throw Error(`Not supported`)}normalizePosition(e,t,n,r,i){throw Error(`Not supported`)}getInjectedTextAt(e,t){throw Error(`Not supported`)}};Zj.INSTANCE=new Zj;var Qj=class{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,n){return n+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(n+1,0)}getViewLineContent(e,t,n){if(!this._isVisible)throw Error(`Not supported`);let r=n>0?this._lineBreakData.breakOffsets[n-1]:0,i=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1],a;if(this._lineBreakData.injectionOffsets!==null){let n=this._lineBreakData.injectionOffsets.map((e,t)=>new _x(0,0,e+1,this._lineBreakData.injectionOptions[t],0));a=_x.applyInjectedText(e.getLineContent(t),n).substring(r,i)}else a=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:i+1});return n>0&&(a=eM(this._lineBreakData.wrappedTextIndentLength)+a),a}getViewLineLength(e,t,n){if(!this._isVisible)throw Error(`Not supported`);let r=n>0?this._lineBreakData.breakOffsets[n-1]:0,i=(n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-r;return n>0&&(i=this._lineBreakData.wrappedTextIndentLength+i),i}getViewLineMinColumn(e,t,n){if(!this._isVisible)throw Error(`Not supported`);return this._getViewLineMinColumn(n)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,n){if(!this._isVisible)throw Error(`Not supported`);return this.getViewLineLength(e,t,n)+1}getViewLineData(e,t,n){if(!this._isVisible)throw Error(`Not supported`);let r=this._lineBreakData,i=n>0?r.wrappedTextIndentLength:0,a=r.injectionOffsets,o=r.injectionOptions,s,c,l;if(a){let u=e.getLineTokens(t).withInserted(a.map((e,t)=>({offset:e,text:o[t].content,tokenMetadata:_m.defaultTokenMetadata}))),d=n>0?r.breakOffsets[n-1]:0,f=r.breakOffsets[n];s=u.getLineContent().substring(d,f),c=u.sliceAndInflate(d,f,i),l=[];let p=0;for(let e=0;e<a.length;e++){let t=o[e].content.length,i=a[e]+p,s=a[e]+p+t;if(i>f)break;if(d<s){let t=o[e];if(t.inlineClassName){let e=n>0?r.wrappedTextIndentLength:0,a=e+Math.max(i-d,0),o=e+Math.min(s-d,f);a!==o&&l.push(new Ym(a,o,t.inlineClassName,t.inlineClassNameAffectsLetterSpacing))}}p+=t}}else{let r=this.getInputStartOffsetOfOutputLineIndex(n),a=this.getInputEndOffsetOfOutputLineIndex(e,t,n),o=e.getLineTokens(t);s=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:a+1}),c=o.sliceAndInflate(r,a,i),l=null}n>0&&(s=eM(r.wrappedTextIndentLength)+s);let u=n>0?r.wrappedTextIndentLength+1:1,d=s.length+1,f=n+1<this.getViewLineCount(),p=n===0?0:r.breakOffsetsVisibleColumn[n-1];return new Km(s,f,u,d,p,c,l)}getViewLinesData(e,t,n,r,i,a,o){if(!this._isVisible)throw Error(`Not supported`);for(let s=n;s<r;s++){let r=i+s-n;if(!a[r]){o[r]=null;continue}o[r]=this.getViewLineData(e,t,s)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw Error(`Not supported`);let n=t-1;return e>0&&(n<this._lineBreakData.wrappedTextIndentLength?n=0:n-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,n)+1}getViewPositionOfModelPosition(e,t,n=2){if(!this._isVisible)throw Error(`Not supported`);let r=this._lineBreakData.getOutputPositionOfInputOffset(t-1,n),i=r.outputLineIndex,a=r.outputOffset+1;return i>0&&(a+=this._lineBreakData.wrappedTextIndentLength),new I(e+i,a)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw Error(`Not supported`);return e+this._lineBreakData.getOutputPositionOfInputOffset(t-1).outputLineIndex}normalizePosition(e,t,n,r,i){if(this._lineBreakData.injectionOffsets!==null){let e=r.lineNumber-n,t=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(n,r.column-1),a=this._lineBreakData.normalizeOffsetAroundInjections(t,i);if(a!==t)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(a,i).toPosition(e,this._lineBreakData.wrappedTextIndentLength)}if(i===0){if(n>0&&r.column===this._getViewLineMinColumn(n))return new I(r.lineNumber-1,this.getViewLineMaxColumn(e,t,n-1))}else if(i===1&&n<this.getViewLineCount()-1&&r.column===this.getViewLineMaxColumn(e,t,n))return new I(r.lineNumber+1,this._getViewLineMinColumn(n+1));return r}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}},$j=[``];function eM(e){if(e>=$j.length)for(let t=1;t<=e;t++)$j[t]=tM(t);return $j[e]}function tM(e){return Array(e+1).join(` `)}function nM(e,t){return e===null?t?Xj.INSTANCE:Zj.INSTANCE:new Qj(e,t)}var rM=class{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}},iM=class{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new rM(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,r){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new pj(t,n)}onModelLinesInserted(e,t,n,r){return new mj(t,n)}onModelLineChanged(e,t,n){return[!1,new fj(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){let n=t-e+1,r=Array(n);for(let e=0;e<n;e++)r[e]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new Km(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){let r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);let i=[];for(let r=e;r<=t;r++){let t=r-e;n[t]||(i[t]=null),i[t]=this.getViewLineData(r)}return i}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}},aM=class{constructor(e,t,n,r,i){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=r,this._coordinatesConverter=i,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){let t=e.id,n=this._decorationsCache[t];if(!n){let r=e.range,i=e.options,a;if(i.isWholeLine){let e=this._coordinatesConverter.convertModelPositionToViewPosition(new I(r.startLineNumber,1),0),t=this._coordinatesConverter.convertModelPositionToViewPosition(new I(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);a=new L(e.lineNumber,e.column,t.lineNumber,t.column)}else a=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new Xm(a,i),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t&&=e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){let t=this._linesCollection.getDecorationsInRange(e,this.editorId,We(this.configuration.options)),n=e.startLineNumber,r=e.endLineNumber,i=[],a=0,o=[];for(let e=n;e<=r;e++)o[e-n]=[];for(let e=0,s=t.length;e<s;e++){let s=t[e],c=s.options,l=this._getOrCreateViewModelDecoration(s),u=l.range;if(i[a++]=l,c.inlineClassName){let e=new Jm(u,c.inlineClassName,c.inlineClassNameAffectsLetterSpacing?3:0),t=Math.max(n,u.startLineNumber),i=Math.min(r,u.endLineNumber);for(let r=t;r<=i;r++)o[r-n].push(e)}if(c.beforeContentClassName&&n<=u.startLineNumber&&u.startLineNumber<=r){let e=new Jm(new L(u.startLineNumber,u.startColumn,u.startLineNumber,u.startColumn),c.beforeContentClassName,1);o[u.startLineNumber-n].push(e)}if(c.afterContentClassName&&n<=u.endLineNumber&&u.endLineNumber<=r){let e=new Jm(new L(u.endLineNumber,u.endColumn,u.endLineNumber,u.endColumn),c.afterContentClassName,2);o[u.endLineNumber-n].push(e)}}return{decorations:i,inlineDecorations:o}}};const oM={ModesRegistry:`editor.modesRegistry`},sM=new class{constructor(){this._onDidChangeLanguages=new N,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages,this._dynamicLanguages)}};Jd.add(oM.ModesRegistry,sM);const cM=`plaintext`;sM.registerLanguage({id:cM,extensions:[`.txt`],aliases:[t(`plainText.alias`,`Plain Text`),`text`],mimetypes:[WD.text]}),If.register(cM,{brackets:[[`(`,`)`],[`[`,`]`],[`{`,`}`]],surroundingPairs:[{open:`{`,close:`}`},{open:`[`,close:`]`},{open:`(`,close:`)`},{open:`<`,close:`>`},{open:`"`,close:`"`},{open:`'`,close:`'`},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);var lM=class extends j{constructor(e,t,n,r,i,a){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new xj,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new vD(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new Li(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Li(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new iM(this.model);else{let e=this._configuration.options,t=e.get(43),n=e.get(123),a=e.get(130),o=e.get(122);this._lines=new qj(this._editorId,this.model,r,i,t,this.model.getOptions().tabSize,n,a.wrappingColumn,o)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new jj(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Wj(this._configuration,this.getLineCount(),a)),this._register(this.viewLayout.onDidScroll(e=>{e.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new gj(e)),this._eventDispatcher.emitOutgoingEvent(new Tj(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(e=>{this._eventDispatcher.emitOutgoingEvent(e)})),this._decorations=new aM(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(e=>{try{let t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(uA.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new yj)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){let e=this.viewLayout.getLinesViewportData(),t=new L(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(let e of n)this.model.tokenizeViewport(e.startLineNumber,e.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new lj(e)),this._eventDispatcher.emitOutgoingEvent(new wj(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new rj)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new ij)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new _j)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let e=new I(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(e)}let r=!1,i=this._configuration.options,a=i.get(43),o=i.get(123),s=i.get(130),c=i.get(122);if(this._lines.setWrappingSettings(a,o,s.wrappingColumn,c)&&(e.emitViewEvent(new cj),e.emitViewEvent(new dj),e.emitViewEvent(new sj(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(r=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new sj(null))),e.emitViewEvent(new aj(t)),this.viewLayout.onConfigurationChanged(t),r&&n){let e=this.coordinatesConverter.convertModelPositionToViewPosition(n),t=this.viewLayout.getVerticalOffsetForLineNumber(e.lineNumber);this.viewLayout.setScrollPosition({scrollTop:t+this._viewportStartLineDelta},1)}vD.shouldRecreate(t)&&(this.cursorConfig=new vD(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{let t=this._eventDispatcher.beginEmitViewEvents(),n=!1,r=!1,i=e.changes,a=e instanceof Sx?e.versionId:null,o=this._lines.createLineBreaksComputer();for(let e of i)switch(e.changeType){case 4:for(let t=0;t<e.detail.length;t++){let n=e.detail[t],r=e.injectedTexts[t];r&&=r.filter(e=>!e.ownerId||e.ownerId===this._editorId),o.addRequest(n,r,null)}break;case 2:{let t=null;e.injectedText&&(t=e.injectedText.filter(e=>!e.ownerId||e.ownerId===this._editorId)),o.addRequest(e.detail,t,null);break}}let s=o.finalize(),c=0;for(let e of i)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new cj),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break;case 3:{let r=this._lines.onModelLinesDeleted(a,e.fromLineNumber,e.toLineNumber);r!==null&&(t.emitViewEvent(r),this.viewLayout.onLinesDeleted(r.fromLineNumber,r.toLineNumber)),n=!0;break}case 4:{let r=s.slice(c,c+e.detail.length);c+=e.detail.length;let i=this._lines.onModelLinesInserted(a,e.fromLineNumber,e.toLineNumber,r);i!==null&&(t.emitViewEvent(i),this.viewLayout.onLinesInserted(i.fromLineNumber,i.toLineNumber)),n=!0;break}case 2:{let n=s[c];c++;let[i,o,l,u]=this._lines.onModelLineChanged(a,e.lineNumber,n);r=i,o&&t.emitViewEvent(o),l&&(t.emitViewEvent(l),this.viewLayout.onLinesInserted(l.fromLineNumber,l.toLineNumber)),u&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!n&&r&&(t.emitViewEvent(new dj),t.emitViewEvent(new sj(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){let e=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(e){let t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),n=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:n+this._viewportStartLineDelta},1)}}try{let t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,r=e.ranges.length;n<r;n++){let r=e.ranges[n];t[n]={fromLineNumber:this.coordinatesConverter.convertModelPositionToViewPosition(new I(r.fromLineNumber,1)).lineNumber,toLineNumber:this.coordinatesConverter.convertModelPositionToViewPosition(new I(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber}}this._eventDispatcher.emitSingleViewEvent(new vj(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new uj),this.cursorConfig=new vD(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new vD(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new cj),e.emitViewEvent(new dj),e.emitViewEvent(new sj(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new vD(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new sj(e))}))}setHiddenAreas(e){let t=!1;try{let n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new cj),n.emitViewEvent(new dj),n.emitViewEvent(new sj(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new Ej)}getVisibleRangesPlusViewportAboveBelow(){let e=this._configuration.options.get(129),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),i=Math.max(1,r.completelyVisibleStartLineNumber-n),a=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new L(i,this.getLineMinColumn(i),a,this.getLineMaxColumn(a)))}getVisibleRanges(){let e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){let t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let r=[],i=0,a=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,c=t.endColumn;for(let e=0,t=n.length;e<t;e++){let t=n[e].startLineNumber,c=n[e].endLineNumber;c<a||t>s||(a<t&&(r[i++]=new L(a,o,t-1,this.model.getLineMaxColumn(t-1))),a=c+1,o=1)}return(a<s||a===s&&o<c)&&(r[i++]=new L(a,o,s,c)),r}getCompletelyVisibleViewRange(){let e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new L(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){let t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new L(n,this.getLineMinColumn(n),r,this.getLineMaxColumn(r))}saveState(){let e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new I(n,this.getLineMinColumn(n))),i=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:i}}reduceRestoreState(e){if(e.firstPosition===void 0)return this._reduceRestoreStateCompatibility(e);let t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let r=this.coordinatesConverter.convertViewPositionToModelPosition(new I(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new L(r.lineNumber,r.column,r.lineNumber,r.column),1);let i=this.viewLayout.getVerticalOffsetForLineNumber(e);this._viewportStartLineDelta=this.viewLayout.getCurrentScrollTop()-i}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,r){return this._lines.getViewLinesBracketGuides(e,t,n,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){let t=vo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=bo(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),i=this.getTabSize(),a=this._lines.getViewLineData(t),o=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return a.inlineDecorations&&(o=[...o,...a.inlineDecorations.map(e=>e.toInlineDecoration(t))]),new qm(a.minColumn,a.maxColumn,a.content,a.continuesWithWrappedLine,n,r,a.tokens,o,i,a.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let r=this._lines.getViewLinesData(e,t,n);return new Gm(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){let t=this.model.getOverviewRulerDecorations(this._editorId,We(this._configuration.options)),n=new uM;for(let r of t){let t=r.options,i=t.overviewRuler;if(!i)continue;let a=i.position;if(a===0)continue;let o=i.getColor(e),s=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);n.accept(o,t.zIndex,s,c,a)}return n.asArray}invalidateOverviewRulerColorCache(){let e=this.model.getOverviewRulerDecorations();for(let t of e){let e=t.options.overviewRuler;e&&e.invalidateCachedColor()}}invalidateMinimapColorCache(){let e=this.model.getAllDecorations();for(let t of e){let e=t.options.minimap;e&&e.invalidateCachedColor()}}getValueInRange(e,t){let n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){let r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);let i=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(i)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){let r=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(L.compareRangesUsingStarts);let i=!1,a=!1;for(let t of e)t.isEmpty()?i=!0:a=!0;if(!a){if(!t)return``;let n=e.map(e=>e.startLineNumber),i=``;for(let e=0;e<n.length;e++)e>0&&n[e-1]===n[e]||(i+=this.model.getLineContent(n[e])+r);return i}if(i&&t){let t=[],r=0;for(let i of e){let e=i.startLineNumber;i.isEmpty()?e!==r&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(i,n?2:0)),r=e}return t.length===1?t[0]:t}let o=[];for(let t of e)t.isEmpty()||o.push(this.model.getValueInRange(t,n?2:0));return o.length===1?o[0]:o}getRichTextToCopy(e,t){let n=this.model.getLanguageId();if(n===`plaintext`||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;let e=r.startLineNumber;r=new L(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}let i=this._configuration.options.get(43),a=this._getColorMap(),o=/[:;\\\/<>]/.test(i.fontFamily)||i.fontFamily===rt.fontFamily,s;return o?s=rt.fontFamily:(s=i.fontFamily,s=s.replace(/"/g,`'`),/[,']/.test(s)||/[+ ]/.test(s)&&(s=`'${s}'`),s=`${s}, ${rt.fontFamily}`),{mode:n,html:`<div style="color: ${a[1]};background-color: ${a[2]};font-family: ${s};font-weight: ${i.fontWeight};font-size: ${i.fontSize}px;line-height: ${i.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,a)+`</div>`}}_getHTMLToCopy(e,t){let n=e.startLineNumber,r=e.startColumn,i=e.endLineNumber,a=e.endColumn,o=this.getTabSize(),s=``;for(let e=n;e<=i;e++){let c=this.model.getLineTokens(e),l=c.getLineContent(),u=e===n?r-1:0,d=e===i?a-1:l.length;l===``?s+=`<br>`:s+=Ij(l,c.inflate(),t,u,d,o,f)}return s}_getColorMap(){let e=Iu.getColorMap(),t=[`#000000`];if(e)for(let n=1,r=e.length;n<r;n++)t[n]=J.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Oj);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,r,i){this._executeCursorEdit(a=>this._cursor.compositionType(a,e,t,n,r,i))}paste(e,t,n,r){this._executeCursorEdit(i=>this._cursor.paste(i,e,t,n,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){let t=this._cursor.getTopMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(t=>t.emitViewEvent(new hj(e,n,null,0,!0,0)))}revealBottomMostCursor(e){let t=this._cursor.getBottomMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(t=>t.emitViewEvent(new hj(e,n,null,0,!0,0)))}revealRange(e,t,n,r,i){this._withViewEventsCollector(a=>a.emitViewEvent(new hj(e,n,null,r,t,i)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new bj),this._eventDispatcher.emitOutgoingEvent(new Ej))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}},uM=class{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,r,i){let a=this._asMap[e];if(a){let e=a.data,t=e[e.length-3],o=e[e.length-1];if(t===i&&o+1>=n){r>o&&(e[e.length-1]=r);return}e.push(i,n,r)}else{let a=new Zm(e,t,[i,n,r]);this._asMap[e]=a,this.asArray.push(a)}}},dM=class{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};const fM=Ur(`accessibilityService`),pM=new H(`accessibilityModeEnabled`,!1);var mM=class extends up{constructor(e,t){super(0);for(let t=0;t<e.length;t++)this.set(e.charCodeAt(t),1);for(let e=0;e<t.length;e++)this.set(t.charCodeAt(e),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}},hM=[],gM=[],_M=class e{constructor(e,t){this.classifier=new mM(e,t)}static create(t){return new e(t.get(118),t.get(117))}createLineBreaksComputer(e,t,n,r){t|=0,n=+n;let i=[],a=[],o=[];return{addRequest:(e,t,n)=>{i.push(e),a.push(t),o.push(n)},finalize:()=>{let s=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let e=0,l=i.length;e<l;e++){let l=a[e],u=o[e];u&&!u.injectionOptions&&!l?c[e]=vM(this.classifier,u,i[e],t,n,s,r):c[e]=yM(this.classifier,i[e],l,t,n,s,r)}return hM.length=0,gM.length=0,c}}}};function vM(e,t,n,r,i,a,o){if(i===-1)return null;let s=n.length;if(s<=1)return null;let c=t.breakOffsets,l=t.breakOffsetsVisibleColumn,u=CM(n,r,i,a,o),d=i-u,f=hM,p=gM,m=0,h=0,g=0,_=i,v=c.length,y=0;if(y>=0){let e=Math.abs(l[y]-_);for(;y+1<v;){let t=Math.abs(l[y+1]-_);if(t>=e)break;e=t,y++}}for(;y<v;){let t=y<0?0:c[y],i=y<0?0:l[y];h>t&&(t=h,i=g);let o=0,u=0,b=0,x=0;if(i<=_){let g=i,v=t===0?0:n.charCodeAt(t-1),y=t===0?0:e.get(v),S=!0;for(let i=t;i<s;i++){let t=i,s=n.charCodeAt(i),c,l;if(jo(s)?(i++,c=0,l=2):(c=e.get(s),l=bM(s,g,r,a)),t>h&&SM(v,y,s,c)&&(o=t,u=g),g+=l,g>_){t>h?(b=t,x=g-l):(b=i+1,x=g),g-u>d&&(o=0),S=!1;break}v=s,y=c}if(S){m>0&&(f[m]=c[c.length-1],p[m]=l[c.length-1],m++);break}}if(o===0){let s=i,c=n.charCodeAt(t),l=e.get(c),f=!1;for(let r=t-1;r>=h;r--){let t=r+1,i=n.charCodeAt(r);if(i===9){f=!0;break}let p,m;if(Mo(i)?(r--,p=0,m=2):(p=e.get(i),m=qo(i)?a:1),s<=_){if(b===0&&(b=t,x=s),s<=_-d)break;if(SM(i,p,c,l)){o=t,u=s;break}}s-=m,c=i,l=p}if(o!==0){let e=d-(x-u);if(e<=r){let t=n.charCodeAt(b),i;i=jo(t)?2:bM(t,x,r,a),e-i<0&&(o=0)}}if(f){y--;continue}}if(o===0&&(o=b,u=x),o<=h){let e=n.charCodeAt(h);jo(e)?(o=h+2,u=g+2):(o=h+1,u=g+bM(e,g,r,a))}for(h=o,f[m]=o,g=u,p[m]=u,m++,_=u+d;y<0||y<v&&l[y]<u;)y++;let S=Math.abs(l[y]-_);for(;y+1<v;){let e=Math.abs(l[y+1]-_);if(e>=S)break;S=e,y++}}return m===0?null:(f.length=m,p.length=m,hM=t.breakOffsets,gM=t.breakOffsetsVisibleColumn,t.breakOffsets=f,t.breakOffsetsVisibleColumn=p,t.wrappedTextIndentLength=u,t)}function yM(e,t,n,r,i,a,o){let s=_x.applyInjectedText(t,n),c,l;if(n&&n.length>0?(c=n.map(e=>e.options),l=n.map(e=>e.column-1)):(c=null,l=null),i===-1)return c?new Wm([s.length],[],0,l,c):null;let u=s.length;if(u<=1)return c?new Wm([s.length],[],0,l,c):null;let d=CM(s,r,i,a,o),f=i-d,p=[],m=[],h=0,g=0,_=0,v=i,y=s.charCodeAt(0),b=e.get(y),x=bM(y,0,r,a),S=1;jo(y)&&(x+=1,y=s.charCodeAt(1),b=e.get(y),S++);for(let t=S;t<u;t++){let n=t,i=s.charCodeAt(t),o,c;jo(i)?(t++,o=0,c=2):(o=e.get(i),c=bM(i,x,r,a)),SM(y,b,i,o)&&(g=n,_=x),x+=c,x>v&&((g===0||x-_>f)&&(g=n,_=x-c),p[h]=g,m[h]=_,h++,v=_+f,g=0),y=i,b=o}return h===0&&(!n||n.length===0)?null:(p[h]=u,m[h]=x,new Wm(p,m,d,l,c))}function bM(e,t,n,r){return e===9?n-t%n:qo(e)||e<32?r:1}function xM(e,t){return t-e%t}function SM(e,t,n,r){return n!==32&&(t===2||t===3&&r!==2||r===1||r===3&&t!==1)}function CM(e,t,n,r,i){let a=0;if(i!==0){let o=vo(e);if(o!==-1){for(let n=0;n<o;n++){let r=e.charCodeAt(n)===9?xM(a,t):1;a+=r}let s=i===3?2:i===2?1:0;for(let e=0;e<s;e++){let e=xM(a,t);a+=e}a+r>n&&(a=0)}}return a}var wM=window.trustedTypes?.createPolicy(`domLineBreaksComputer`,{createHTML:e=>e}),TM=class e{static create(){return new e}constructor(){}createLineBreaksComputer(e,t,n,r){t|=0,n=+n;let i=[],a=[];return{addRequest:(e,t,n)=>{i.push(e),a.push(t)},finalize:()=>EM(i,e,t,n,r,a)}}};function EM(e,t,n,r,i,a){function o(t){let n=a[t];if(n){let r=_x.applyInjectedText(e[t],n),i=n.map(e=>e.options),a=n.map(e=>e.column-1);return new Wm([r.length],[],0,a,i)}else return null}if(r===-1){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=o(n);return t}let s=Math.round(r*t.typicalHalfwidthCharacterWidth),c=i===3?2:i===2?1:0,l=Math.round(n*c),u=Math.ceil(t.spaceWidth*l),d=document.createElement(`div`);Wv.applyFontInfoSlow(d,t);let f=wd(1e4),p=[],m=[],h=[],g=[],_=[];for(let r=0;r<e.length;r++){let o=_x.applyInjectedText(e[r],a[r]),c=0,l=0,d=s;if(i!==0)if(c=vo(o),c===-1)c=0;else{for(let e=0;e<c;e++){let t=o.charCodeAt(e)===9?n-l%n:1;l+=t}let e=Math.ceil(t.spaceWidth*l);e+t.typicalFullwidthCharacterWidth>s?(c=0,l=0):d=s-e}let v=o.substr(c),y=DM(v,l,n,d,f,u);p[r]=c,m[r]=l,h[r]=v,g[r]=y[0],_[r]=y[1]}let v=f.build();d.innerHTML=wM?.createHTML(v)??v,d.style.position=`absolute`,d.style.top=`10000`,d.style.wordWrap=`break-word`,document.body.appendChild(d);let y=document.createRange(),b=Array.prototype.slice.call(d.children,0),x=[];for(let t=0;t<e.length;t++){let e=b[t],n=OM(y,e,h[t],g[t]);if(n===null){x[t]=o(t);continue}let r=p[t],i=m[t]+l,s=_[t],c=[];for(let e=0,t=n.length;e<t;e++)c[e]=s[n[e]];if(r!==0)for(let e=0,t=n.length;e<t;e++)n[e]+=r;let u,d,f=a[t];f?(u=f.map(e=>e.options),d=f.map(e=>e.column-1)):(u=null,d=null),x[t]=new Wm(n,c,i,d,u)}return document.body.removeChild(d),x}function DM(e,t,n,r,i,a){if(a!==0){let e=String(a);i.appendASCIIString(`<div style="text-indent: -`),i.appendASCIIString(e),i.appendASCIIString(`px; padding-left: `),i.appendASCIIString(e),i.appendASCIIString(`px; box-sizing: border-box; width:`)}else i.appendASCIIString(`<div style="width:`);i.appendASCIIString(String(r)),i.appendASCIIString(`px;">`);let o=e.length,s=t,c=0,l=[],u=[],d=0<o?e.charCodeAt(0):0;i.appendASCIIString(`<span>`);for(let t=0;t<o;t++){t!==0&&t%16384==0&&i.appendASCIIString(`</span><span>`),l[t]=c,u[t]=s;let r=d;d=t+1<o?e.charCodeAt(t+1):0;let a=1,f=1;switch(r){case 9:a=n-s%n,f=a;for(let e=1;e<=a;e++)e<a?i.write1(160):i.appendASCII(32);break;case 32:d===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString(`&lt;`);break;case 62:i.appendASCIIString(`&gt;`);break;case 38:i.appendASCIIString(`&amp;`);break;case 0:i.appendASCIIString(`&#00;`);break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:qo(r)&&f++,r<32?i.write1(9216+r):i.write1(r)}c+=a,s+=f}return i.appendASCIIString(`</span>`),l[e.length]=c,u[e.length]=s,i.appendASCIIString(`</div>`),[l,u]}function OM(e,t,n,r){if(n.length<=1)return null;let i=Array.prototype.slice.call(t.children,0),a=[];try{kM(e,i,r,0,null,n.length-1,null,a)}catch(e){return console.log(e),null}return a.length===0?null:(a.push(n.length),a)}function kM(e,t,n,r,i,a,o,s){if(r===a||(i||=AM(e,t,n[r],n[r+1]),o||=AM(e,t,n[a],n[a+1]),Math.abs(i[0].top-o[0].top)<=.1))return;if(r+1===a){s.push(a);return}let c=r+(a-r)/2|0,l=AM(e,t,n[c],n[c+1]);kM(e,t,n,r,i,c,l,s),kM(e,t,n,c,l,a,o,s)}function AM(e,t,n,r){return e.setStart(t[n/16384|0].firstChild,n%16384),e.setEnd(t[r/16384|0].firstChild,r%16384),e.getClientRects()}var jM=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},MM=function(e,t){return function(n,r){t(n,r,e)}},NM=0,PM=class{constructor(e,t,n,r,i){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=r,this.listenersToRemove=i}dispose(){Et(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},FM=class e extends j{constructor(e,t,n,r,i,a,o,s,c,l){super(),this._onDidDispose=this._register(new N),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new N),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new N),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new N),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new N),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new N),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new N),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new N),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new N),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new N),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new N),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new N),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new IM),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new IM),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new N),this.onWillType=this._onWillType.event,this._onDidType=this._register(new N),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new N),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new N),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new N),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new N),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new N),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new N),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new N),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new N),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new N),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new N),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new N),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new N),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new N),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new N),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new N),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new N),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new N),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new N),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;let u=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++NM,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(u,l)),this._register(this._configuration.onDidChange(e=>{this._onDidChangeConfiguration.fire(e);let t=this._configuration.options;if(e.hasChanged(129)){let e=t.get(129);this._onDidLayoutChange.fire(e)}})),this._contextKeyService=this._register(o.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=i,this._commandService=a,this._themeService=s,this._register(new LM(this,this._contextKeyService)),this._register(new RM(this,this._contextKeyService)),this._instantiationService=r.createChild(new dM([Pg,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new zM(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let d;d=Array.isArray(n.contributions)?n.contributions:Dv.getEditorContributions();for(let e of d){if(this._contributions[e.id]){ct(Error(`Cannot have two contributions with the same id ${e.id}`));continue}try{let t=this._instantiationService.createInstance(e.ctor,this);this._contributions[e.id]=t}catch(e){ct(e)}}Dv.getEditorActions().forEach(e=>{if(this._actions[e.id]){ct(Error(`Cannot have two actions with the same id ${e.id}`));return}let t=new Nj(e.id,e.label,e.alias,sc(e.precondition),()=>this._instantiationService.invokeFunction(t=>Promise.resolve(e.runEditorCommand(t,this,null))),this._contextKeyService);this._actions[t.id]=t}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Wv(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+`:`+this._id}getEditorType(){return zc.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();let e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){let n=e[t];this._contributions[n].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?AO.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return``;let t=!!(e&&e.preserveBOM),n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){let t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;let n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();let i={oldModelUrl:r?r.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(r)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+`-`+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){let r=e.model.validatePosition({lineNumber:t,column:n}),i=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)}getTopForLineNumber(t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,1):-1}getTopForPosition(t,n){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,n):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(e=>L.lift(e)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return aS.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!I.isIPosition(e))throw Error(`Invalid arguments`);this._modelData.viewModel.setSelections(`api`,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,r){if(!this._modelData)return;if(!L.isIRange(e))throw Error(`Invalid arguments`);let i=this._modelData.model.validateRange(e),a=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(i);this._modelData.viewModel.revealRange(`api`,n,a,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!=`number`)throw Error(`Invalid arguments`);this._sendRevealRange(new L(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,r){if(!I.isIPosition(e))throw Error(`Invalid arguments`);this._sendRevealRange(new L(e.lineNumber,e.column,e.lineNumber,e.column),t,n,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let t=$n.isISelection(e),n=L.isIRange(e);if(!t&&!n)throw Error(`Invalid arguments`);if(t)this._setSelectionImpl(e);else if(n){let t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t)}}_setSelectionImpl(e){if(!this._modelData)return;let t=new $n(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(`api`,[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,r){if(typeof e!=`number`||typeof t!=`number`)throw Error(`Invalid arguments`);this._sendRevealRange(new L(e,1,t,1),n,!1,r)}revealRange(e,t=0,n=!1,r=!0){this._revealRange(e,n?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,r){if(!L.isIRange(e))throw Error(`Invalid arguments`);this._sendRevealRange(L.lift(e),t,n,r)}setSelections(e,t=`api`,n=0){if(this._modelData){if(!e||e.length===0)throw Error(`Invalid arguments`);for(let t=0,n=e.length;t<n;t++)if(!$n.isISelection(e[t]))throw Error(`Invalid arguments`);this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!=`number`)throw Error(`Invalid arguments`);this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!=`number`)throw Error(`Invalid arguments`);this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;let e={},t=Object.keys(this._contributions);for(let n of t){let t=this._contributions[n];typeof t.saveViewState==`function`&&(e[n]=t.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;let t=e;if(t&&t.cursorState&&t.viewState){let e=t.cursorState;Array.isArray(e)?this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);let n=t.contributionsState||{},r=Object.keys(this._contributions);for(let e=0,t=r.length;e<t;e++){let t=r[e],i=this._contributions[t];typeof i.restoreViewState==`function`&&i.restoreViewState(n[t])}let i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}getContribution(e){return this._contributions[e]||null}getActions(){let e=[],t=Object.keys(this._actions);for(let n=0,r=t.length;n<r;n++){let r=t[n];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(e=>e.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n||={},t){case`compositionStart`:this._startComposition();return;case`compositionEnd`:this._endComposition(e);return;case`type`:{let t=n;this._type(e,t.text||``);return}case`replacePreviousChar`:{let t=n;this._compositionType(e,t.text||``,t.replaceCharCnt||0,0,0);return}case`compositionType`:{let t=n;this._compositionType(e,t.text||``,t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0);return}case`paste`:{let t=n;this._paste(e,t.text||``,t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null);return}case`cut`:this._cut(e);return}let r=this.getAction(t);if(r){Promise.resolve(r.run()).then(void 0,ct);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e===`keyboard`&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e===`keyboard`&&this._onDidType.fire(t))}_compositionType(e,t,n,r,i){this._modelData&&this._modelData.viewModel.compositionType(t,n,r,i,e)}_paste(e,t,n,r,i){if(!this._modelData||t.length===0)return;let a=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,r,e);let o=this._modelData.viewModel.getSelection().getStartPosition();e===`keyboard`&&this._onDidPaste.fire({range:new L(a.lineNumber,a.column,o.lineNumber,o.column),languageId:i})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){let r=Dv.getEditorCommand(t);return r?(n||={},n.source=e,this._instantiationService.invokeFunction(e=>{Promise.resolve(r.runEditorCommand(e,this,n)).then(void 0,ct)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let r;return r=n?Array.isArray(n)?()=>n:n:()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,We(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){let t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn(`Overwriting a content widget with the same id.`),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){let t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn(`Overwriting an overlay widget with the same id.`),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;let n=this._modelData.model.validatePosition(t),r=this._configuration.options,i=r.get(129);return{top:e._getVerticalOffsetForPosition(this._modelData,n.lineNumber,n.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(n.lineNumber,n.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft(),height:r.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Wv.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}let n=[];this._domElement.setAttribute(`data-mode-id`,e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();let r=new lM(this._id,this._configuration,e,TM.create(),_M.create(this._configuration.options),e=>aa(e));n.push(e.onDidChangeDecorations(e=>this._onDidChangeModelDecorations.fire(e))),n.push(e.onDidChangeLanguage(t=>{this._domElement.setAttribute(`data-mode-id`,e.getLanguageId()),this._onDidChangeModelLanguage.fire(t)})),n.push(e.onDidChangeLanguageConfiguration(e=>this._onDidChangeModelLanguageConfiguration.fire(e))),n.push(e.onDidChangeContent(e=>this._onDidChangeModelContent.fire(e))),n.push(e.onDidChangeOptions(e=>this._onDidChangeModelOptions.fire(e))),n.push(e.onWillDispose(()=>this.setModel(null))),n.push(r.onEvent(e=>{switch(e.kind){case 0:this._onDidContentSizeChange.fire(e);break;case 1:this._editorTextFocus.setValue(e.hasFocus);break;case 2:this._onDidScrollChange.fire(e);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{e.reachedMaxCursorCount&&this._notificationService.warn(t(`cursors.maximum`,`The number of cursors has been limited to {0}.`,jj.MAX_CURSOR_COUNT));let n=[];for(let t=0,r=e.selections.length;t<r;t++)n[t]=e.selections[t].getPosition();let r={position:n[0],secondaryPositions:n.slice(1),reason:e.reason,source:e.source};this._onDidChangeCursorPosition.fire(r);let i={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};this._onDidChangeCursorSelection.fire(i);break}}}));let[i,a]=this._createView(r);if(a){this._domElement.appendChild(i.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,n=t.length;e<n;e++){let n=t[e];i.addContentWidget(this._contentWidgets[n])}t=Object.keys(this._overlayWidgets);for(let e=0,n=t.length;e<n;e++){let n=t[e];i.addOverlayWidget(this._overlayWidgets[n])}i.render(!1,!0),i.domNode.domNode.setAttribute(`data-uri`,e.uri.toString())}this._modelData=new PM(e,r,i,a,n)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,n,r)=>{this._paste(`keyboard`,e,t,n,r)},type:e=>{this._type(`keyboard`,e)},compositionType:(e,t,n,r)=>{this._compositionType(`keyboard`,e,t,n,r)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition(`keyboard`)},cut:()=>{this._cut(`keyboard`)}}:{paste:(e,t,n,r)=>{let i={text:e,pasteOnNewLine:t,multicursorText:n,mode:r};this._commandService.executeCommand(`paste`,i)},type:e=>{let t={text:e};this._commandService.executeCommand(`type`,t)},compositionType:(e,t,n,r)=>{if(n||r){let i={text:e,replacePrevCharCnt:t,replaceNextCharCnt:n,positionDelta:r};this._commandService.executeCommand(`compositionType`,i)}else{let n={text:e,replaceCharCnt:t};this._commandService.executeCommand(`replacePreviousChar`,n)}},startComposition:()=>{this._commandService.executeCommand(`compositionStart`,{})},endComposition:()=>{this._commandService.executeCommand(`compositionEnd`,{})},cut:()=>{this._commandService.executeCommand(`cut`,{})}};let n=new rk(e.coordinatesConverter);return n.onKeyDown=e=>this._onKeyDown.fire(e),n.onKeyUp=e=>this._onKeyUp.fire(e),n.onContextMenu=e=>this._onContextMenu.fire(e),n.onMouseMove=e=>this._onMouseMove.fire(e),n.onMouseLeave=e=>this._onMouseLeave.fire(e),n.onMouseDown=e=>this._onMouseDown.fire(e),n.onMouseUp=e=>this._onMouseUp.fire(e),n.onMouseDrag=e=>this._onMouseDrag.fire(e),n.onMouseDrop=e=>this._onMouseDrop.fire(e),n.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),n.onMouseWheel=e=>this._onMouseWheel.fire(e),[new $A(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;let e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute(`data-mode-id`),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};FM=jM([MM(3,Vr),MM(4,Gr),MM(5,lc),MM(6,Pg),MM(7,Z_),MM(8,$g),MM(9,fM)],FM);var IM=class extends j{constructor(){super(),this._onDidChangeToTrue=this._register(new N),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new N),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}},LM=class extends j{constructor(e,t){super(),this._editor=e,t.createKey(`editorId`,e.getId()),this._editorSimpleInput=Z.editorSimpleInput.bindTo(t),this._editorFocus=Z.focus.bindTo(t),this._textInputFocus=Z.textInputFocus.bindTo(t),this._editorTextFocus=Z.editorTextFocus.bindTo(t),this._editorTabMovesFocus=Z.tabMovesFocus.bindTo(t),this._editorReadonly=Z.readOnly.bindTo(t),this._inDiffEditor=Z.inDiffEditor.bindTo(t),this._editorColumnSelection=Z.columnSelection.bindTo(t),this._hasMultipleSelections=Z.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Z.hasNonEmptySelection.bindTo(t),this._canUndo=Z.canUndo.bindTo(t),this._canRedo=Z.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(e=>!e.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}},RM=class extends j{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=Z.languageId.bindTo(t),this._hasCompletionItemProvider=Z.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Z.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Z.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Z.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Z.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Z.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Z.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Z.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Z.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Z.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Z.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Z.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Z.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Z.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Z.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Z.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Z.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Z.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=Z.isInWalkThroughSnippet.bindTo(t);let n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(pu.onDidChange(n)),this._register(Eu.onDidChange(n)),this._register(wu.onDidChange(n)),this._register(bu.onDidChange(n)),this._register(xu.onDidChange(n)),this._register(Su.onDidChange(n)),this._register(Cu.onDidChange(n)),this._register(gu.onDidChange(n)),this._register(vu.onDidChange(n)),this._register(_u.onDidChange(n)),this._register(du.onDidChange(n)),this._register(fu.onDidChange(n)),this._register(Du.onDidChange(n)),this._register(Ou.onDidChange(n)),this._register(hu.onDidChange(n)),this._register(Tu.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){let e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(pu.has(e)),this._hasCodeActionsProvider.set(Eu.has(e)),this._hasCodeLensProvider.set(wu.has(e)),this._hasDefinitionProvider.set(bu.has(e)),this._hasDeclarationProvider.set(xu.has(e)),this._hasImplementationProvider.set(Su.has(e)),this._hasTypeDefinitionProvider.set(Cu.has(e)),this._hasHoverProvider.set(gu.has(e)),this._hasDocumentHighlightProvider.set(vu.has(e)),this._hasDocumentSymbolProvider.set(_u.has(e)),this._hasReferenceProvider.set(du.has(e)),this._hasRenameProvider.set(fu.has(e)),this._hasSignatureHelpProvider.set(hu.has(e)),this._hasInlayHintsProvider.set(Tu.has(e)),this._hasDocumentFormattingProvider.set(Du.has(e)||Ou.has(e)),this._hasDocumentSelectionFormattingProvider.set(Ou.has(e)),this._hasMultipleDocumentFormattingProvider.set(Du.all(e).length+Ou.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Ou.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Vi.walkThroughSnippet)})}},zM=class extends j{constructor(e){super(),this._onChange=this._register(new N),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Va(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}},BM=`%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'`,VM=`'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E`;function HM(e){return BM+encodeURIComponent(e.toString())+VM}var UM=`%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%223%22%20width%3D%2212%22%3E%3Cg%20fill%3D%22`,WM=`%22%3E%3Ccircle%20cx%3D%221%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3Ccircle%20cx%3D%225%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3Ccircle%20cx%3D%229%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E`;function GM(e){return UM+encodeURIComponent(e.toString())+WM}iv((e,t)=>{let n=e.getColor(NC);n&&t.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${n}; }`);let r=e.getColor(MC);r&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${HM(r)}") repeat-x bottom left; }`);let i=e.getColor(jC);i&&t.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);let a=e.getColor(IC);a&&t.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${a}; }`);let o=e.getColor(FC);o&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${HM(o)}") repeat-x bottom left; }`);let s=e.getColor(PC);s&&t.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${s}; }`);let c=e.getColor(zC);c&&t.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${c}; }`);let l=e.getColor(RC);l&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${HM(l)}") repeat-x bottom left; }`);let u=e.getColor(LC);u&&t.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${u}; }`);let d=e.getColor(VC);d&&t.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${d}; }`);let f=e.getColor(BC);f&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${GM(f)}") no-repeat bottom left; }`);let p=e.getColor(pE);p&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${p.rgba.a}; }`);let m=e.getColor(fE);m&&t.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${m}; }`);let h=e.getColor(UC)||`inherit`;t.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${h}}`)});var KM=class{constructor(e,t,n){let r=e=>this.emitter.fire(e);this.emitter=new N({onFirstListenerAdd:()=>e.addEventListener(t,r,n),onLastListenerRemove:()=>e.removeEventListener(t,r,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}};function qM(e){return e.preventDefault(),e.stopPropagation(),e}var JM=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},YM=!1,XM;(function(e){e.North=`north`,e.South=`south`,e.East=`east`,e.West=`west`})(XM||={});var ZM=4,QM=new N,$M=300,eN=new N,tN=class{constructor(){this.disposables=new A}get onPointerMove(){return this.disposables.add(new KM(window,`mousemove`)).event}get onPointerUp(){return this.disposables.add(new KM(window,`mouseup`)).event}dispose(){this.disposables.dispose()}};JM([Kv],tN.prototype,`onPointerMove`,null),JM([Kv],tN.prototype,`onPointerUp`,null);var nN=class{constructor(e){this.el=e,this.disposables=new A}get onPointerMove(){return this.disposables.add(new KM(this.el,Jv.Change)).event}get onPointerUp(){return this.disposables.add(new KM(this.el,Jv.End)).event}dispose(){this.disposables.dispose()}};JM([Kv],nN.prototype,`onPointerMove`,null),JM([Kv],nN.prototype,`onPointerUp`,null);var rN=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};JM([Kv],rN.prototype,`onPointerMove`,null),JM([Kv],rN.prototype,`onPointerUp`,null);var iN=class e extends j{constructor(t,n,r){super(),this.hoverDelay=$M,this.hoverDelayer=this._register(new Ai(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new N),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new N),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new N),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new N),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new A),this.orthogonalStartDragHandleDisposables=this._register(new A),this.orthogonalEndSashDisposables=this._register(new A),this.orthogonalEndDragHandleDisposables=this._register(new A),this.el=B(t,V(`.monaco-sash`)),r.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${r.orthogonalEdge}`),p&&this.el.classList.add(`mac`);let i=this._register(new KM(this.el,`mousedown`)).event;this._register(i(e=>this.onPointerStart(e,new tN),this));let a=this._register(new KM(this.el,`dblclick`)).event;this._register(a(this.onPointerDoublePress,this));let o=this._register(new KM(this.el,`mouseenter`)).event;this._register(o(()=>e.onMouseEnter(this)));let s=this._register(new KM(this.el,`mouseleave`)).event;this._register(s(()=>e.onMouseLeave(this))),this._register(Yv.addTarget(this.el));let c=M.map(this._register(new KM(this.el,Jv.Start)).event,e=>Object.assign(Object.assign({},e),{target:e.initialTarget??null}));this._register(c(e=>this.onPointerStart(e,new nN(this.el)),this));let l=this._register(new KM(this.el,Jv.Tap)).event,u=M.map(M.filter(M.debounce(l,(e,t)=>({event:t,count:(e?.count??0)+1}),250),({count:e})=>e===2),({event:e})=>Object.assign(Object.assign({},e),{target:e.initialTarget??null}));this._register(u(this.onPointerDoublePress,this)),typeof r.size==`number`?(this.size=r.size,r.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=ZM,this._register(QM.event(e=>{this.size=e,this.layout()}))),this._register(eN.event(e=>this.hoverDelay=e)),this.hidden=!1,this.layoutProvider=n,this.orthogonalStartSash=r.orthogonalStartSash,this.orthogonalEndSash=r.orthogonalEndSash,this.orientation=r.orientation||0,this.orientation===1?(this.el.classList.add(`horizontal`),this.el.classList.remove(`vertical`)):(this.el.classList.remove(`horizontal`),this.el.classList.add(`vertical`)),this.el.classList.toggle(`debug`,YM),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(`disabled`,e===0),this.el.classList.toggle(`minimum`,e===1),this.el.classList.toggle(`maximum`,e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(t){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),t){let n=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=B(this.el,V(`.orthogonal-drag-handle.start`)),this.orthogonalStartDragHandleDisposables.add(Ot(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new KM(this._orthogonalStartDragHandle,`mouseenter`)).event(()=>e.onMouseEnter(t),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new KM(this._orthogonalStartDragHandle,`mouseleave`)).event(()=>e.onMouseLeave(t),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(t.onDidEnablementChange(n,this)),n(t.state)}this._orthogonalStartSash=t}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(t){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),t){let n=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=B(this.el,V(`.orthogonal-drag-handle.end`)),this.orthogonalEndDragHandleDisposables.add(Ot(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new KM(this._orthogonalEndDragHandle,`mouseenter`)).event(()=>e.onMouseEnter(t),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new KM(this._orthogonalEndDragHandle,`mouseleave`)).event(()=>e.onMouseLeave(t),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(t.onDidEnablementChange(n,this)),n(t.state)}this._orthogonalEndSash=t}onPointerStart(e,t){La.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let r=this.getOrthogonalSash(e);r&&(n=!0,e.__orthogonalSashEvent=!0,r.onPointerStart(e,new rN(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new rN(t))),!this.state)return;let r=Ya(`iframe`);for(let e of r)e.style.pointerEvents=`none`;let i=e.pageX,a=e.pageY,o=e.altKey,s={startX:i,currentX:i,startY:a,currentY:a,altKey:o};this.el.classList.add(`active`),this._onDidStart.fire(s);let c=Aa(this.el),l=()=>{let e=``;e=n?`all-scroll`:this.orientation===1?this.state===1?`s-resize`:this.state===2?`n-resize`:p?`row-resize`:`ns-resize`:this.state===1?`e-resize`:this.state===2?`w-resize`:p?`col-resize`:`ew-resize`,c.textContent=`* { cursor: ${e} !important; }`},u=new A;l(),n||this.onDidEnablementChange(l,null,u),t.onPointerMove(e=>{La.stop(e,!1);let t={startX:i,currentX:e.pageX,startY:a,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)},null,u),t.onPointerUp(e=>{La.stop(e,!1),this.el.removeChild(c),this.el.classList.remove(`active`),this._onDidEnd.fire(),u.dispose();for(let e of r)e.style.pointerEvents=`auto`},null,u),u.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(t,n=!1){t.el.classList.contains(`active`)?(t.hoverDelayer.cancel(),t.el.classList.add(`hover`)):t.hoverDelayer.trigger(()=>t.el.classList.add(`hover`),t.hoverDelay).then(void 0,()=>{}),!n&&t.linkedSash&&e.onMouseEnter(t.linkedSash,!0)}static onMouseLeave(t,n=!1){t.hoverDelayer.cancel(),t.el.classList.remove(`hover`),!n&&t.linkedSash&&e.onMouseLeave(t.linkedSash,!0)}clearSashHoverState(){e.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+`px`,e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+`px`),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+`px`)}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+`px`,e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+`px`),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+`px`)}}hide(){this.hidden=!0,this.el.style.display=`none`,this.el.setAttribute(`aria-hidden`,`true`)}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains(`orthogonal-drag-handle`))return e.target.classList.contains(`start`)?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}},aN=Ur(`IEditorCancelService`),oN=new H(`cancellableOperation`,!1,t(`cancellableOperation`,`Whether the editor runs a cancellable operation, e.g. like 'Peek References'`));wf(aN,class{constructor(){this._tokens=new WeakMap}add(e,t){let n=this._tokens.get(e);n||(n=e.invokeWithinContext(e=>({key:oN.bindTo(e.get(Pg)),tokens:new Mt})),this._tokens.set(e,n));let r;return n.key.set(!0),r=n.tokens.push(t),()=>{r&&=(r(),n.key.set(!n.tokens.isEmpty()),void 0)}}cancel(e){let t=this._tokens.get(e);if(!t)return;let n=t.tokens.pop();n&&(n.cancel(),t.key.set(!t.tokens.isEmpty()))}},!0);var sN=class extends Gt{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(t=>t.get(aN).add(e,this))}dispose(){this._unregister(),super.dispose()}};U(new class extends vv{constructor(){super({id:`editor.cancelOperation`,kbOpts:{weight:100,primary:9},precondition:oN})}runEditorCommand(e,t){e.get(aN).cancel(t)}});var cN=class e{constructor(e,t){if(this.flags=t,this.flags&1){let t=e.getModel();this.modelVersionId=t?ao(`{0}#{1}`,t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(t){if(!(t instanceof e))return!1;let n=t;return!(this.modelVersionId!==n.modelVersionId||this.scrollLeft!==n.scrollLeft||this.scrollTop!==n.scrollTop||!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position)||!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection))}validate(t){return this._equals(new e(t,this.flags))}},lN=class extends sN{constructor(e,t,n,r){super(e,r),this._listener=new A,t&4&&this._listener.add(e.onDidChangeCursorPosition(e=>{(!n||!L.containsPosition(n,e.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(e=>{(!n||!L.containsRange(n,e.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(e=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(e=>this.cancel())),this._listener.add(e.onDidChangeModelContent(e=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}},uN=class extends Gt{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}},dN=class e{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(t){let n=null,r=0;if(t.getScrollTop()!==0){let e=t.getVisibleRanges();if(e.length>0){n=e[0].getStartPosition();let i=t.getTopForPosition(n.lineNumber,n.column);r=t.getScrollTop()-i}}return new e(n,r,t.getPosition())}restore(e){if(this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){let t=e.getPosition();if(!this._cursorPosition||!t)return;let n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}};const fN={RESOURCES:`ResourceURLs`,DOWNLOAD_URL:`DownloadURL`,FILES:`Files`,TEXT:WD.text,TERMINALS:`Terminals`};var pN=class{constructor(e){this.data=e}update(){}getData(){return this.data}};const mN={CurrentDragAndDropData:void 0};var hN=class extends j{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof G_&&this._register(t.onDidChange(e=>{this.element&&this.handleActionChangeEvent(e)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||=this._register(new K_),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(Yv.addTarget(e));let n=this.options&&this.options.draggable;n&&(e.draggable=!0,$r&&this._register(R(e,z.DRAG_START,e=>e.dataTransfer?.setData(fN.TEXT,this._action.label)))),this._register(R(t,Jv.Tap,e=>this.onClick(e,!0))),this._register(R(t,z.MOUSE_DOWN,e=>{n||La.stop(e,!0),this._action.enabled&&e.button===0&&t.classList.add(`active`)})),p&&this._register(R(t,z.CONTEXT_MENU,e=>{e.button===0&&e.ctrlKey===!0&&this.onClick(e)})),this._register(R(t,z.CLICK,e=>{La.stop(e,!0),this.options&&this.options.isMenu||this.onClick(e)})),this._register(R(t,z.DBLCLICK,e=>{La.stop(e,!0)})),[z.MOUSE_UP,z.MOUSE_OUT].forEach(e=>{this._register(R(t,e,e=>{La.stop(e),t.classList.remove(`active`)}))})}onClick(e,t=!1){La.stop(e,!0);let n=Qs(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add(`focused`))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove(`focused`))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&=(this.element.remove(),void 0),super.dispose()}},gN=class extends hN{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon===void 0?!1:n.icon,this.options.label=n.label===void 0?!0:n.label,this.cssClass=``}render(e){super.render(e),this.element&&(this.label=B(this.element,V(`a.action-label`))),this.label&&(this._action.id===q_.ID?this.label.setAttribute(`role`,`presentation`):this.options.isMenu?this.label.setAttribute(`role`,`menuitem`):this.label.setAttribute(`role`,`button`)),this.options.label&&this.options.keybinding&&this.element&&(B(this.element,V(`span.keybinding`)).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=t({key:`titleLabel`,comment:[`action title`,`action keybinding`]},`{0} ({1})`,e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(` `)),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add(`codicon`),this.cssClass&&this.label.classList.add(...this.cssClass.split(` `))),this.updateEnabled()):this.label&&this.label.classList.remove(`codicon`)}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute(`aria-disabled`),this.label.classList.remove(`disabled`)),this.element&&this.element.classList.remove(`disabled`)):(this.label&&(this.label.setAttribute(`aria-disabled`,`true`),this.label.classList.add(`disabled`)),this.element&&this.element.classList.add(`disabled`))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add(`checked`):this.label.classList.remove(`checked`))}},_N=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},vN=class extends j{constructor(e,t={}){super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new N),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new N({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new N),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new N),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new K_,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._register(this._actionRunner.onBeforeRun(e=>this._onBeforeRun.fire(e))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement(`div`),this.domNode.className=`monaco-action-bar`,t.animated!==!1&&this.domNode.classList.add(`animated`);let n,r;switch(this._orientation){case 0:n=[15],r=[17];break;case 1:n=[16],r=[18],this.domNode.className+=` vertical`;break}this._register(R(this.domNode,z.KEY_DOWN,e=>{let t=new vi(e),i=!0,a=typeof this.focusedItem==`number`?this.viewItems[this.focusedItem]:void 0;n&&(t.equals(n[0])||t.equals(n[1]))?i=this.focusPrevious():r&&(t.equals(r[0])||t.equals(r[1]))?i=this.focusNext():t.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(14)?i=this.focusFirst():t.equals(13)?i=this.focusLast():t.equals(2)&&a instanceof hN&&a.trapsArrowNavigation?i=this.focusNext():this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())})),this._register(R(this.domNode,z.KEY_UP,e=>{let t=new vi(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Va(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(ka()===this.domNode||!Ca(ka(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement(`ul`),this.actionsList.className=`actions-container`,this.actionsList.setAttribute(`role`,`toolbar`),this.options.ariaLabel&&this.actionsList.setAttribute(`aria-label`,this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t||=e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(Ca(ka(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){let n=Array.isArray(e)?e:[e],r=Js(t.index)?t.index:null;n.forEach(e=>{let n=document.createElement(`li`);n.className=`action-item`,n.setAttribute(`role`,`presentation`),this.options.allowContextMenu||this._register(R(n,z.CONTEXT_MENU,e=>{La.stop(e,!0)}));let i;this.options.actionViewItemProvider&&(i=this.options.actionViewItemProvider(e)),i||=new gN(this.context,e,t),i.actionRunner=this._actionRunner,i.setActionContext(this.context),i.render(n),this.focusable&&i instanceof hN&&this.viewItems.length===0&&i.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(n),this.viewItems.push(i),this._actionIds.push(e.id)):(this.actionsList.insertBefore(n,this.actionsList.children[r]),this.viewItems.splice(r,0,i),this._actionIds.splice(r,0,e.id),r++)}),typeof this.focusedItem==`number`&&this.focus(this.focusedItem)}clear(){Et(this.viewItems),this.viewItems=[],this._actionIds=[],Gi(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e==`number`?n=e:typeof e==`boolean`&&(t=e),t&&this.focusedItem===void 0){let e=this.viewItems.findIndex(e=>e.isEnabled());this.focusedItem=e===-1?void 0:e,this.updateFocus()}else n!==void 0&&(this.focusedItem=n),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(this.focusedItem===void 0)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let e=this.focusedItem,t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(this.focusedItem===void 0)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let e=this.focusedItem,t;do{if(--this.focusedItem,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){this.focusedItem===void 0&&this.actionsList.focus({preventScroll:t});for(let n=0;n<this.viewItems.length;n++){let r=this.viewItems[n],i=r;if(n===this.focusedItem){let n=!0;tc(i.focus)||(n=!1),this.options.focusOnlyEnabledItems&&tc(r.isEnabled)&&!r.isEnabled()&&(n=!1),n?i.focus(e):this.actionsList.focus({preventScroll:t})}else tc(i.blur)&&i.blur()}}doTrigger(e){if(this.focusedItem===void 0)return;let t=this.viewItems[this.focusedItem];if(t instanceof hN){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return _N(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){Et(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}};const yN={IconContribution:`base.contributions.icons`};var bN=new class{constructor(){this._onDidChange=new N,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:`object`,properties:{fontId:{type:`string`,description:t(`iconDefintion.fontId`,`The id of the font to use. If not set, the font that is defined first is used.`)},fontCharacter:{type:`string`,description:t(`iconDefintion.fontCharacter`,`The font character associated with the icon definition.`)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:`\\\\e030`}}]}},type:`object`,properties:{}},this.iconReferenceSchema={type:`string`,pattern:`^${eu.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){let i=this.iconsById[e];if(i){if(n&&!i.description){i.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enumDescriptions[t]=n),this._onDidChange.fire()}return i}let a={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=a;let o={$ref:`#/definitions/icons`};return r&&(o.deprecationMessage=r),n&&(o.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||``),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;ev.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:``}`},n=[];n.push(`| preview     | identifier                        | default codicon ID                | description`),n.push(`| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |`);let r=Object.keys(this.iconsById).map(e=>this.iconsById[e]);for(let i of r.filter(e=>!!e.description).sort(e))n.push(`|<i class="${t(i)}"></i>|${i.id}|${ev.isThemeIcon(i.defaults)?i.defaults.id:i.id}|${i.description||``}|`);n.push(`| preview     | identifier                        `),n.push(`| ----------- | --------------------------------- |`);for(let i of r.filter(e=>!ev.isThemeIcon(e.defaults)).sort(e))n.push(`|<i class="${t(i)}"></i>|${i.id}|`);return n.join(`
`)}};Jd.add(yN.IconContribution,bN);function xN(e,t,n,r){return bN.registerIcon(e,t,n,r)}function SN(){return bN}function CN(){for(let e of Xl.all)bN.registerIcon(e.id,e.definition,e.description);Xl.onDidRegister(e=>bN.registerIcon(e.id,e.definition,e.description))}CN();const wN=`vscode://schemas/icons`;var TN=Jd.as(Yd.JSONContribution);TN.registerSchema(wN,bN.getIconSchema());var EN=new Li(()=>TN.notifySchemaChanged(wN),200);bN.onDidChange(()=>{EN.isScheduled()||EN.schedule()});const DN=xN(`widget-close`,$l.close,t(`widgetClose`,`Icon for the close action in widgets.`));var ON=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},kN=function(e,t){return function(n,r){t(n,r,e)}},AN=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},jN=3,MN=class{constructor(e,t,n,r){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=r}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}},NN=class{constructor(e){this.entries=e}},PN=xN(`diff-review-insert`,$l.add,t(`diffReviewInsertIcon`,`Icon for 'Insert' in diff review.`)),FN=xN(`diff-review-remove`,$l.remove,t(`diffReviewRemoveIcon`,`Icon for 'Remove' in diff review.`)),IN=xN(`diff-review-close`,$l.close,t(`diffReviewCloseIcon`,`Icon for 'Close' in diff review.`)),LN=class e extends j{constructor(e,n){super(),this._modeService=n,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=W(document.createElement(`div`)),this.shadow.setClassName(`diff-review-shadow`),this.actionBarContainer=W(document.createElement(`div`)),this.actionBarContainer.setClassName(`diff-review-actions`),this._actionBar=this._register(new vN(this.actionBarContainer.domNode)),this._actionBar.push(new G_(`diffreview.close`,t(`label.close`,`Close`),`close-diff-review `+ev.asClassName(IN),!0,()=>AN(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=W(document.createElement(`div`)),this.domNode.setClassName(`diff-review monaco-editor-background`),this._content=W(document.createElement(`div`)),this._content.setClassName(`diff-review-content`),this._content.setAttribute(`role`,`code`),this.scrollbar=this._register(new Yk(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Xi(this.domNode.domNode,`click`,e=>{e.preventDefault();let t=wa(e.target,`diff-review-row`);t&&this._goToRow(t)})),this._register(Xi(this.domNode.domNode,`keydown`,e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,n=this._diffs.length;e<n;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=this._diffs.length+t-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e%=this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new I(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,n=this._diffs.length;e<n;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=t+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e%=this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new I(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute(`data-line`),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new I(e,1)),this._diffEditor.revealPosition(new I(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(`.diff-review-row`)}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute(`aria-hidden`,`false`),this.actionBarContainer.setDisplay(`block`)):(this.actionBarContainer.setAttribute(`aria-hidden`,`true`),this.actionBarContainer.setDisplay(`none`))}_compute(){let t=this._diffEditor.getLineChanges();if(!t||t.length===0)return[];let n=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel();return!n||!r?[]:e._mergeAdjacent(t,n.getLineCount(),r.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let r=[],i=0;for(let a=0,o=e.length;a<o;a++){let s=e[a],c=s.originalStartLineNumber,l=s.originalEndLineNumber,u=s.modifiedStartLineNumber,d=s.modifiedEndLineNumber,f=[],p=0;{let t=l===0?c:c-1,n=d===0?u:u-1,r=1,i=1;if(a>0){let t=e[a-1];r=t.originalEndLineNumber===0?t.originalStartLineNumber+1:t.originalEndLineNumber+1,i=t.modifiedEndLineNumber===0?t.modifiedStartLineNumber+1:t.modifiedEndLineNumber+1}let o=t-jN+1,s=n-jN+1;if(o<r){let e=r-o;o+=e,s+=e}if(s<i){let e=i-s;o+=e,s+=e}f[p++]=new MN(o,t,s,n)}l!==0&&(f[p++]=new MN(c,l,0,0)),d!==0&&(f[p++]=new MN(0,0,u,d));{let r=l===0?c+1:l+1,i=d===0?u+1:d+1,s=t,m=n;if(a+1<o){let t=e[a+1];s=t.originalEndLineNumber===0?t.originalStartLineNumber:t.originalStartLineNumber-1,m=t.modifiedEndLineNumber===0?t.modifiedStartLineNumber:t.modifiedStartLineNumber-1}let h=r+jN-1,g=i+jN-1;if(h>s){let e=s-h;h+=e,g+=e}if(g>m){let e=m-g;h+=e,g+=e}f[p++]=new MN(r,h,i,g)}r[i++]=new NN(f)}let a=r[0].entries,o=[],s=0;for(let e=1,t=r.length;e<t;e++){let t=r[e].entries,n=a[a.length-1],i=t[0];if(n.getType()===0&&i.getType()===0&&i.originalLineStart<=n.originalLineEnd){a[a.length-1]=new MN(n.originalLineStart,i.originalLineEnd,n.modifiedLineStart,i.modifiedLineEnd),a=a.concat(t.slice(1));continue}o[s++]=new NN(a),a=t}return o[s++]=new NN(a),o}_findDiffIndex(e){let t=e.lineNumber;for(let e=0,n=this._diffs.length;e<n;e++){let n=this._diffs[e].entries;if(t<=n[n.length-1].modifiedLineEnd)return e}return 0}_render(){let n=this._diffEditor.getOriginalEditor().getOptions(),r=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),a=this._diffEditor.getModifiedEditor().getModel(),o=i.getOptions(),s=a.getOptions();if(!this._isVisible||!i||!a){Gi(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});let c=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[c]===this._currentDiff)return;this._currentDiff=this._diffs[c];let l=this._diffs[c].entries,u=document.createElement(`div`);u.className=`diff-review-table`,u.setAttribute(`role`,`list`),u.setAttribute(`aria-label`,`Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands`),Wv.applyFontInfoSlow(u,r.get(43));let d=0,f=0,p=0,m=0;for(let e=0,t=l.length;e<t;e++){let t=l[e],n=t.originalLineStart,r=t.originalLineEnd,i=t.modifiedLineStart,a=t.modifiedLineEnd;n!==0&&(d===0||n<d)&&(d=n),r!==0&&(f===0||r>f)&&(f=r),i!==0&&(p===0||i<p)&&(p=i),a!==0&&(m===0||a>m)&&(m=a)}let h=document.createElement(`div`);h.className=`diff-review-row`;let g=document.createElement(`div`);g.className=`diff-review-cell diff-review-summary`;let _=f-d+1,v=m-p+1;g.appendChild(document.createTextNode(`${c+1}/${this._diffs.length}: @@ -${d},${_} +${p},${v} @@`)),h.setAttribute(`data-line`,String(p));let y=e=>e===0?t(`no_lines_changed`,`no lines changed`):e===1?t(`one_line_changed`,`1 line changed`):t(`more_lines_changed`,`{0} lines changed`,e),b=y(_),x=y(v);h.setAttribute(`aria-label`,t({key:`header`,comment:[`This is the ARIA label for a git diff header.`,`A git diff header looks like this: @@ -154,12 +159,39 @@.`,`That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.`,`Variables 0 and 1 refer to the diff index out of total number of diffs.`,`Variables 2 and 4 will be numbers (a line number).`,`Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.`]},`Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}`,c+1,this._diffs.length,d,b,p,x)),h.appendChild(g),h.setAttribute(`role`,`listitem`),u.appendChild(h);let S=r.get(58),C=p;for(let t=0,c=l.length;t<c;t++){let c=l[t];e._renderSection(u,c,C,S,this._width,n,i,o,r,a,s,this._modeService.languageIdCodec),c.modifiedLineStart!==0&&(C=c.modifiedLineEnd)}Gi(this._content.domNode),this._content.domNode.appendChild(u),this.scrollbar.scanDomNode()}static _renderSection(n,r,i,a,o,s,c,l,u,d,f,p){let m=r.getType(),h=`diff-review-row`,g=``,_=null;switch(m){case 1:h=`diff-review-row line-insert`,g=` char-insert`,_=PN;break;case 2:h=`diff-review-row line-delete`,g=` char-delete`,_=FN;break}let v=r.originalLineStart,y=r.originalLineEnd,b=r.modifiedLineStart,x=r.modifiedLineEnd,S=Math.max(x-b,y-v),C=s.get(129),w=C.glyphMarginWidth+C.lineNumbersWidth,T=u.get(129),ee=10+T.glyphMarginWidth+T.lineNumbersWidth;for(let r=0;r<=S;r++){let y=v===0?0:v+r,x=b===0?0:b+r,S=document.createElement(`div`);S.style.minWidth=o+`px`,S.className=h,S.setAttribute(`role`,`listitem`),x!==0&&(i=x),S.setAttribute(`data-line`,String(i));let C=document.createElement(`div`);C.className=`diff-review-cell`,C.style.height=`${a}px`,S.appendChild(C);let T=document.createElement(`span`);T.style.width=w+`px`,T.style.minWidth=w+`px`,T.className=`diff-review-line-number`+g,y===0?T.innerText=`\xA0`:T.appendChild(document.createTextNode(String(y))),C.appendChild(T);let te=document.createElement(`span`);te.style.width=ee+`px`,te.style.minWidth=ee+`px`,te.style.paddingRight=`10px`,te.className=`diff-review-line-number`+g,x===0?te.innerText=`\xA0`:te.appendChild(document.createTextNode(String(x))),C.appendChild(te);let ne=document.createElement(`span`);if(ne.className=`diff-review-spacer`,_){let e=document.createElement(`span`);e.className=ev.asClassName(_),e.innerText=`\xA0\xA0`,ne.appendChild(e)}else ne.innerText=`\xA0\xA0`;C.appendChild(ne);let re;if(x!==0){let t=this._renderLine(d,u,f.tabSize,x,p);e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),C.insertAdjacentHTML(`beforeend`,t),re=d.getLineContent(x)}else{let t=this._renderLine(c,s,l.tabSize,y,p);e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),C.insertAdjacentHTML(`beforeend`,t),re=c.getLineContent(y)}re.length===0&&(re=t(`blankLine`,`blank`));let ie=``;switch(m){case 0:ie=y===x?t({key:`unchangedLine`,comment:[`The placeholders are contents of the line and should not be translated.`]},`{0} unchanged line {1}`,re,y):t(`equalLine`,`{0} original line {1} modified line {2}`,re,y,x);break;case 1:ie=t(`insertLine`,`+ {0} modified line {1}`,re,x);break;case 2:ie=t(`deleteLine`,`- {0} original line {1}`,re,y);break}S.setAttribute(`aria-label`,ie),n.appendChild(S)}}static _renderLine(e,t,n,r,i){let a=e.getLineContent(r),o=t.get(43),s=_m.createEmpty(a,i),c=qm.isBasicASCII(a,e.mightContainNonBasicASCII()),l=qm.containsRTL(a,c,e.mightContainRTL());return jm(new Tm(o.isMonospace&&!t.get(29),o.canUseHalfwidthRightwardsArrow,a,!1,c,l,0,s,[],n,0,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==De.OFF,null)).html}};LN._ttPolicy=window.trustedTypes?.createPolicy(`diffReview`,{createHTML:e=>e}),LN=ON([kN(1,Hu)],LN),iv((e,t)=>{let n=e.getColor(nE);n&&t.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${n}; }`);let r=e.getColor(EC);r&&t.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${r} 0 -6px 6px -6px inset; }`)});var RN=class extends yv{constructor(){super({id:`editor.action.diffReview.next`,label:t(`editor.action.diffReview.next`,`Go to Next Difference`),alias:`Go to Next Difference`,precondition:pg.has(`isInDiffEditor`),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){let n=BN(e);n&&n.diffReviewNext()}},zN=class extends yv{constructor(){super({id:`editor.action.diffReview.prev`,label:t(`editor.action.diffReview.prev`,`Go to Previous Difference`),alias:`Go to Previous Difference`,precondition:pg.has(`isInDiffEditor`),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){let n=BN(e);n&&n.diffReviewPrev()}};function BN(e){let t=e.get(Gr),n=t.listDiffEditors(),r=t.getActiveCodeEditor();if(!r)return null;for(let e=0,t=n.length;e<t;e++){let t=n[e];if(t.getModifiedEditor().getId()===r.getId()||t.getOriginalEditor().getId()===r.getId())return t}return null}Cv(RN),Cv(zN);const VN=Ur(`contextViewService`),HN=Ur(`contextMenuService`);var UN=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},WN=class extends j{constructor(e,n,r,i,a,o){super(),this._viewZoneId=e,this._marginDomNode=n,this.editor=r,this.diff=i,this._contextMenuService=a,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex=`10`,this._diffActions=document.createElement(`div`),this._diffActions.className=$l.lightBulb.classNames+` lightbulb-glyph`,this._diffActions.style.position=`absolute`;let s=r.getOption(58),c=r.getModel().getEOL();this._diffActions.style.right=`0px`,this._diffActions.style.visibility=`hidden`,this._diffActions.style.height=`${s}px`,this._diffActions.style.lineHeight=`${s}px`,this._marginDomNode.appendChild(this._diffActions);let l=[],u=i.modifiedEndLineNumber===0;l.push(new G_(`diff.clipboard.copyDeletedContent`,u?i.originalEndLineNumber>i.modifiedStartLineNumber?t(`diff.clipboard.copyDeletedLinesContent.label`,`Copy deleted lines`):t(`diff.clipboard.copyDeletedLinesContent.single.label`,`Copy deleted line`):i.originalEndLineNumber>i.modifiedStartLineNumber?t(`diff.clipboard.copyChangedLinesContent.label`,`Copy changed lines`):t(`diff.clipboard.copyChangedLinesContent.single.label`,`Copy changed line`),void 0,!0,()=>UN(this,void 0,void 0,function*(){let e=new L(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),t=i.originalModel.getValueInRange(e);yield this._clipboardService.writeText(t)})));let d=0,f;i.originalEndLineNumber>i.modifiedStartLineNumber&&(f=new G_(`diff.clipboard.copyDeletedLineContent`,u?t(`diff.clipboard.copyDeletedLineContent.label`,`Copy deleted line ({0})`,i.originalStartLineNumber):t(`diff.clipboard.copyChangedLineContent.label`,`Copy changed line ({0})`,i.originalStartLineNumber),void 0,!0,()=>UN(this,void 0,void 0,function*(){let e=i.originalModel.getLineContent(i.originalStartLineNumber+d);if(e===``){let e=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(e===0?`
`:`\r
`)}else yield this._clipboardService.writeText(e)})),l.push(f)),r.getOption(80)||l.push(new G_(`diff.inline.revertChange`,t(`diff.inline.revertChange.label`,`Revert this change`),void 0,!0,()=>UN(this,void 0,void 0,function*(){let e=new L(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),t=i.originalModel.getValueInRange(e);if(i.modifiedEndLineNumber===0){let e=r.getModel().getLineMaxColumn(i.modifiedStartLineNumber);r.executeEdits(`diffEditor`,[{range:new L(i.modifiedStartLineNumber,e,i.modifiedStartLineNumber,e),text:c+t}])}else{let e=r.getModel().getLineMaxColumn(i.modifiedEndLineNumber);r.executeEdits(`diffEditor`,[{range:new L(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,e),text:t}])}})));let p=(e,n)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:n}),getActions:()=>(f&&(f.label=u?t(`diff.clipboard.copyDeletedLineContent.label`,`Copy deleted line ({0})`,i.originalStartLineNumber+d):t(`diff.clipboard.copyChangedLineContent.label`,`Copy changed line ({0})`,i.originalStartLineNumber+d)),l),autoSelectFirstItem:!0})};this._register(Xi(this._diffActions,`mousedown`,e=>{let{top:t,height:n}=_a(this._diffActions),r=Math.floor(s/3);e.preventDefault(),p(e.posx,t+n+r)})),this._register(r.onMouseMove(e=>{(e.target.type===8||e.target.type===5)&&e.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,d=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,s)):this.visibility=!1})),this._register(r.onMouseDown(e=>{e.event.rightButton&&(e.target.type===8||e.target.type===5)&&e.target.detail.viewZoneId===this._viewZoneId&&(e.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,s),p(e.event.posx,e.event.posy+s))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility=`visible`:this._diffActions.style.visibility=`hidden`)}_updateLightBulbPosition(e,t,n){let{top:r}=_a(e),i=t-r,a=Math.floor(i/n),o=a*n;if(this._diffActions.style.top=`${o}px`,this.diff.viewLineCounts){let e=0;for(let t=0;t<this.diff.viewLineCounts.length;t++)if(e+=this.diff.viewLineCounts[t],a<e)return t}return a}};const GN=Ur(`clipboardService`);var KN=class{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};KN.None=Object.freeze({report(){}});const qN=Ur(`editorProgressService`);var JN=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},YN=function(e,t){return function(n,r){t(n,r,e)}},XN=class{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(e=>!this._zonesMap[String(e.id)])}clean(e){this._zones.length>0&&e.changeViewZones(e=>{for(let t of this._zones)e.removeZone(t)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,r){let i=r?dN.capture(e):null;e.changeViewZones(t=>{for(let e of this._zones)t.removeZone(e);for(let e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let r=0,i=n.zones.length;r<i;r++){let i=n.zones[r];i.suppressMouseDown=!0;let a=t.addZone(i);this._zones.push(a),this._zonesMap[String(a)]=!0,n.zones[r].diff&&i.marginDomNode&&(i.suppressMouseDown=!1,n.zones[r].diff?.originalModel.getValueLength()!==0&&this._inlineDiffMargins.push(new WN(a,i.marginDomNode,e,n.zones[r].diff,this._contextMenuService,this._clipboardService)))}}),i&&i.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}},ZN=0,QN=xN(`diff-insert`,$l.add,t(`diffInsertIcon`,`Line decoration for inserts in the diff editor.`)),$N=xN(`diff-remove`,$l.remove,t(`diffRemoveIcon`,`Line decoration for removals in the diff editor.`)),eP=window.trustedTypes?.createPolicy(`diffEditorWidget`,{createHTML:e=>e}),tP=class e extends j{constructor(t,n,r,i,a,o,s,c,l,u,d,f){super(),this._editorProgressService=f,this._onDidDispose=this._register(new N),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new N),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new N),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=a,this._codeEditorService=c,this._contextKeyService=this._register(o.createScoped(t)),this._instantiationService=s.createChild(new dM([Pg,this._contextKeyService])),this._contextKeyService.createKey(`isInDiffEditor`,!0),this._themeService=l,this._notificationService=u,this._id=++ZN,this._state=0,this._updatingDiffProgress=null,this._domElement=t,n||={},this._options=gP(n,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:`inherit`}),n.isInEmbeddedEditor===void 0?this._contextKeyService.createKey(`isInEmbeddedDiffEditor`,!1):this._contextKeyService.createKey(`isInEmbeddedDiffEditor`,n.isInEmbeddedEditor),this._updateDecorationsRunner=this._register(new Li(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement(`div`),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position=`relative`,this._containerDomElement.style.height=`100%`,this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=W(document.createElement(`div`)),this._overviewViewportDomElement.setClassName(`diffViewport`),this._overviewViewportDomElement.setPosition(`absolute`),this._overviewDomElement=document.createElement(`div`),this._overviewDomElement.className=`diffOverview`,this._overviewDomElement.style.position=`absolute`,this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Xi(this._overviewDomElement,`mousedown`,e=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(e)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement(`div`),this._originalDomNode.className=`editor original`,this._originalDomNode.style.position=`absolute`,this._originalDomNode.style.height=`100%`,this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement(`div`),this._modifiedDomNode.className=`editor modified`,this._modifiedDomNode.style.position=`absolute`,this._modifiedDomNode.style.height=`100%`,this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new XN(d,i),this._modifiedEditorState=new XN(d,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Bv(this._containerDomElement,n.dimension,()=>this._onDidContainerSizeChanged())),n.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(n,r.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(n,r.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=s.createInstance(LN,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new sP(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new lP(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(l.onDidColorThemeChange(t=>{this._strategy&&this._strategy.applyColors(t)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));let p=Dv.getDiffEditorContributions();for(let e of p)try{this._register(s.createInstance(e.ctor,this))}catch(e){ct(e)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&=(this._updatingDiffProgress.done(),null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n=`monaco-diff-editor monaco-editor-background `;return t&&(n+=`side-by-side `),n+=tv(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler(`original diffOverviewRuler`),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler(`modified diffOverviewRuler`),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(t,n){let r=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(t),n);this._register(r.onDidScrollChange(e=>{this._isHandlingScrollEvent||!e.scrollTopChanged&&!e.scrollLeftChanged&&!e.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(r.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(r.onDidChangeConfiguration(e=>{r.getModel()&&(e.hasChanged(43)&&this._updateDecorationsRunner.schedule(),e.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(r.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(r.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));let i=this._contextKeyService.createKey(`isInDiffLeftEditor`,r.hasWidgetFocus());return this._register(r.onDidFocusEditorWidget(()=>i.set(!0))),this._register(r.onDidBlurEditorWidget(()=>i.set(!1))),this._register(r.onDidContentSizeChange(t=>{let n=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,r=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:r,contentWidth:n,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),r}_createRightHandSideEditor(t,n){let r=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(t),n);this._register(r.onDidScrollChange(e=>{this._isHandlingScrollEvent||!e.scrollTopChanged&&!e.scrollLeftChanged&&!e.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(r.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(r.onDidChangeConfiguration(e=>{r.getModel()&&(e.hasChanged(43)&&this._updateDecorationsRunner.schedule(),e.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(r.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(r.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(r.onDidChangeModelOptions(e=>{e.tabSize&&this._updateDecorationsRunner.schedule()}));let i=this._contextKeyService.createKey(`isInDiffRightEditor`,r.hasWidgetFocus());return this._register(r.onDidFocusEditorWidget(()=>i.set(!0))),this._register(r.onDidBlurEditorWidget(()=>i.set(!1))),this._register(r.onDidContentSizeChange(t=>{let n=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,r=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:r,contentWidth:n,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),r}_createInnerEditor(e,t,n,r){return e.createInstance(FM,t,n,r)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+`:`+this._id}getEditorType(){return zc.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(t){let n=gP(t,this._options),r=_P(this._options,n);this._options=n;let i=r.ignoreTrimWhitespace||r.renderIndicators,a=this._isVisible&&(r.maxComputationTime||r.maxFileSize);i?this._beginUpdateDecorations():a&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(t)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(t)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),r.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new sP(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new lP(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),r.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw Error(e.original?`DiffEditorWidget.setModel: Modified model is null`:`DiffEditorWidget.setModel: Original model is null`);this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,r=!0){this._modifiedEditor.revealRange(e,t,n,r)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}restoreViewState(e){if(e&&e.original&&e.modified){let t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;let t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),r=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:r+e.ONE_OVERVIEW_WIDTH,height:t-n}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:t-n}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),e.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;let n=this._originalEditor.getModel(),r=this._modifiedEditor.getModel();if(!n||!r)return;this._diffComputationToken++;let i=this._diffComputationToken,a=this._options.maxFileSize*1024*1024,o=e=>{let t=e.getValueLength();return a===0||t<=a};if(!o(n)||!o(r)){(!e._equals(n.uri,this._lastOriginalWarning)||!e._equals(r.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=n.uri,this._lastModifiedWarning=r.uri,this._notificationService.warn(t(`diff.tooLarge`,`Cannot compare files because one file is too large.`)));return}this._setState(1),this._editorWorkerService.computeDiff(n.uri,r.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(e=>{i===this._diffComputationToken&&n===this._originalEditor.getModel()&&r===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},e=>{i===this._diffComputationToken&&n===this._originalEditor.getModel()&&r===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;let e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),r=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,r.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,r.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){let t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical=`visible`,t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){let t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1=`off`,e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName=`original-in-monaco-diff-editor`,Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(t){let n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.wordWrapOverride1=this._options.diffWordWrap,n.revealHorizontalRightPadding=ot.revealHorizontalRightPadding.defaultValue+e.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName=`modified-in-monaco-diff-editor`,Object.assign(Object.assign({},n),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){let t=this._elementSizeObserver.getWidth(),n=this._elementSizeObserver.getHeight(),r=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+`px`,this._originalDomNode.style.left=`0px`,this._modifiedDomNode.style.width=t-i+`px`,this._modifiedDomNode.style.left=i+`px`,this._overviewDomElement.style.top=`0px`,this._overviewDomElement.style.height=n-r+`px`,this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+`px`,this._overviewDomElement.style.left=t-e.ENTIRE_DIFF_OVERVIEW_WIDTH+`px`,this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:n-r}),this._modifiedEditor.layout({width:t-i-(this._options.renderOverviewRuler?e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:n-r}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(n-r,t,r),this._layoutOverviewViewport()}_layoutOverviewViewport(){let e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){let e=this._modifiedEditor.getLayoutInfo();if(!e)return null;let t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),r=Math.max(0,e.height),i=Math.max(0,r-0),a=n>0?i/n:0;return{height:Math.max(0,Math.floor(e.height*a)),top:Math.floor(t*a)}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){let n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let r=0,i=n.length-1;for(;r<i;){let a=Math.floor((r+i)/2),o=t(n[a]),s=a+1<=i?t(n[a+1]):1073741824;e<o?i=a-1:e>=s?r=a+1:(r=a,i=a)}return n[r]}_getEquivalentLineForOriginalLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.originalStartLineNumber);if(!t)return e;let n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),i=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,a=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,o=e-n;return o<=i?r+Math.min(o,a):r+a-i+o}_getEquivalentLineForModifiedLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.modifiedStartLineNumber);if(!t)return e;let n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),i=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,a=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,o=e-r;return o<=a?n+Math.min(o,i):n+i-a+o}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};tP.ONE_OVERVIEW_WIDTH=15,tP.ENTIRE_DIFF_OVERVIEW_WIDTH=30,tP.UPDATE_DIFF_DECORATIONS_DELAY=200,tP=JN([YN(3,GN),YN(4,Vu),YN(5,Pg),YN(6,Vr),YN(7,Gr),YN(8,Z_),YN(9,$g),YN(10,HN),YN(11,qN)],tP);var nP=class extends j{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){let t=(e.getColor(Aw)||Ow).transparent(2),n=(e.getColor(jw)||kw).transparent(2),r=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,r}getEditorsDiffDecorations(e,t,n,r,i){i=i.sort((e,t)=>e.afterLineNumber-t.afterLineNumber),r=r.sort((e,t)=>e.afterLineNumber-t.afterLineNumber);let a=this._getViewZones(e,r,i,n),o=this._getOriginalEditorDecorations(e,t,n),s=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:o.decorations,overviewZones:o.overviewZones,zones:a.original},modified:{decorations:s.decorations,overviewZones:s.overviewZones,zones:a.modified}}}},rP=class{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}},iP=class e{constructor(e,t,n,r,i){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=r,this._modifiedEditor=i}static _getViewLineCount(e,t,n){let r=e.getModel(),i=e._getViewModel();if(r&&i){let e=hP(r,i,t,n);return e.endLineNumber-e.startLineNumber+1}return n-t+1}getViewZones(){let t=this._originalEditor.getOption(58),n=this._modifiedEditor.getOption(58),r=this._originalEditor.getOption(130).wrappingColumn!==-1,i=this._modifiedEditor.getOption(130).wrappingColumn!==-1,a=r||i,o=this._originalEditor.getModel(),s=this._originalEditor._getViewModel().coordinatesConverter,c=this._modifiedEditor._getViewModel().coordinatesConverter,l={original:[],modified:[]},u=0,d=0,f=0,p=0,m=0,h=0,g=(e,t)=>e.afterLineNumber-t.afterLineNumber,_=(e,t)=>{if(t.domNode===null&&e.length>0){let n=e[e.length-1];if(n.afterLineNumber===t.afterLineNumber&&n.domNode===null){n.heightInLines+=t.heightInLines;return}}e.push(t)},v=new rP(this._modifiedForeignVZ),y=new rP(this._originalForeignVZ),b=1,x=1;for(let r=0,i=this._lineChanges.length;r<=i;r++){let S=r<i?this._lineChanges[r]:null;S===null?(f+=1e7+d,p+=1e7+u,m=f,h=p):(f=S.originalStartLineNumber+(S.originalEndLineNumber>0?-1:0),p=S.modifiedStartLineNumber+(S.modifiedEndLineNumber>0?-1:0),d=S.originalEndLineNumber>0?e._getViewLineCount(this._originalEditor,S.originalStartLineNumber,S.originalEndLineNumber):0,u=S.modifiedEndLineNumber>0?e._getViewLineCount(this._modifiedEditor,S.modifiedStartLineNumber,S.modifiedEndLineNumber):0,m=Math.max(S.originalStartLineNumber,S.originalEndLineNumber),h=Math.max(S.modifiedStartLineNumber,S.modifiedEndLineNumber));let C=[],w=[];if(a){let e;e=S?S.originalEndLineNumber>0?S.originalStartLineNumber-b:S.modifiedStartLineNumber-x:o.getLineCount()-b;for(let t=0;t<e;t++){let e=b+t,n=x+t,r=s.getModelLineViewLineCount(e),i=c.getModelLineViewLineCount(n);r<i?C.push({afterLineNumber:e,heightInLines:i-r,domNode:null,marginDomNode:null}):r>i&&w.push({afterLineNumber:n,heightInLines:r-i,domNode:null,marginDomNode:null})}S&&(b=(S.originalEndLineNumber>0?S.originalEndLineNumber:S.originalStartLineNumber)+1,x=(S.modifiedEndLineNumber>0?S.modifiedEndLineNumber:S.modifiedStartLineNumber)+1)}for(;v.current&&v.current.afterLineNumber<=h;){let e;e=v.current.afterLineNumber<=p?f-p+v.current.afterLineNumber:m;let t=null;S&&S.modifiedStartLineNumber<=v.current.afterLineNumber&&v.current.afterLineNumber<=S.modifiedEndLineNumber&&(t=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),C.push({afterLineNumber:e,heightInLines:v.current.height/n,domNode:null,marginDomNode:t}),v.advance()}for(;y.current&&y.current.afterLineNumber<=m;){let e;e=y.current.afterLineNumber<=f?p-f+y.current.afterLineNumber:h,w.push({afterLineNumber:e,heightInLines:y.current.height/t,domNode:null}),y.advance()}if(S!==null&&fP(S)){let e=this._produceOriginalFromDiff(S,d,u);e&&C.push(e)}if(S!==null&&pP(S)){let e=this._produceModifiedFromDiff(S,d,u);e&&w.push(e)}let T=0,ee=0;for(C=C.sort(g),w=w.sort(g);T<C.length&&ee<w.length;){let e=C[T],t=w[ee],n=e.afterLineNumber-f,r=t.afterLineNumber-p;n<r?(_(l.original,e),T++):r<n?(_(l.modified,t),ee++):e.shouldNotShrink?(_(l.original,e),T++):t.shouldNotShrink?(_(l.modified,t),ee++):e.heightInLines>=t.heightInLines?(e.heightInLines-=t.heightInLines,ee++):(t.heightInLines-=e.heightInLines,T++)}for(;T<C.length;)_(l.original,C[T]),T++;for(;ee<w.length;)_(l.modified,w[ee]),ee++}return{original:e._ensureDomNodes(l.original),modified:e._ensureDomNodes(l.modified)}}static _ensureDomNodes(e){return e.map(e=>(e.domNode||=mP(),e))}};function aP(e,t,n,r,i){return{range:new L(e,t,n,r),options:i}}var oP={charDelete:uD.register({description:`diff-editor-char-delete`,className:`char-delete`}),charDeleteWholeLine:uD.register({description:`diff-editor-char-delete-whole-line`,className:`char-delete`,isWholeLine:!0}),charInsert:uD.register({description:`diff-editor-char-insert`,className:`char-insert`}),charInsertWholeLine:uD.register({description:`diff-editor-char-insert-whole-line`,className:`char-insert`,isWholeLine:!0}),lineInsert:uD.register({description:`diff-editor-line-insert`,className:`line-insert`,marginClassName:`line-insert`,isWholeLine:!0}),lineInsertWithSign:uD.register({description:`diff-editor-line-insert-with-sign`,className:`line-insert`,linesDecorationsClassName:`insert-sign `+ev.asClassName(QN),marginClassName:`line-insert`,isWholeLine:!0}),lineDelete:uD.register({description:`diff-editor-line-delete`,className:`line-delete`,marginClassName:`line-delete`,isWholeLine:!0}),lineDeleteWithSign:uD.register({description:`diff-editor-line-delete-with-sign`,className:`line-delete`,linesDecorationsClassName:`delete-sign `+ev.asClassName($N),marginClassName:`line-delete`,isWholeLine:!0}),lineDeleteMargin:uD.register({description:`diff-editor-line-delete-margin`,marginClassName:`line-delete`})},sP=class e extends nP{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new iN(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(e=>this._onSashDrag(e)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){let t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(t=this._sashRatio){let n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?tP.ENTIRE_DIFF_OVERVIEW_WIDTH:0),r=Math.floor((t||.5)*n),i=Math.floor(.5*n);return r=this._disableSash?i:r||i,n>e.MINIMUM_EDITOR_WIDTH*2?(r<e.MINIMUM_EDITOR_WIDTH&&(r=e.MINIMUM_EDITOR_WIDTH),r>n-e.MINIMUM_EDITOR_WIDTH&&(r=n-e.MINIMUM_EDITOR_WIDTH)):r=i,this._sashPosition!==r&&(this._sashPosition=r,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){let t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?tP.ENTIRE_DIFF_OVERVIEW_WIDTH:0);this._sashRatio=this.layout((this._startSashPosition+(e.currentX-e.startX))/t)/t,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){return new cP(e,t,n,this._dataSource.getOriginalEditor(),this._dataSource.getModifiedEditor()).getViewZones()}_getOriginalEditorDecorations(e,t,n){let r=this._dataSource.getOriginalEditor(),i=String(this._removeColor),a={decorations:[],overviewZones:[]},o=r.getModel(),s=r._getViewModel();for(let r of e)if(pP(r)){a.decorations.push({range:new L(r.originalStartLineNumber,1,r.originalEndLineNumber,1073741824),options:n?oP.lineDeleteWithSign:oP.lineDelete}),(!fP(r)||!r.charChanges)&&a.decorations.push(aP(r.originalStartLineNumber,1,r.originalEndLineNumber,1073741824,oP.charDeleteWholeLine));let e=hP(o,s,r.originalStartLineNumber,r.originalEndLineNumber);if(a.overviewZones.push(new NA(e.startLineNumber,e.endLineNumber,i)),r.charChanges){for(let e of r.charChanges)if(pP(e))if(t)for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++){let n,r;n=t===e.originalStartLineNumber?e.originalStartColumn:o.getLineFirstNonWhitespaceColumn(t),r=t===e.originalEndLineNumber?e.originalEndColumn:o.getLineLastNonWhitespaceColumn(t),a.decorations.push(aP(t,n,t,r,oP.charDelete))}else a.decorations.push(aP(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn,oP.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n){let r=this._dataSource.getModifiedEditor(),i=String(this._insertColor),a={decorations:[],overviewZones:[]},o=r.getModel(),s=r._getViewModel();for(let r of e)if(fP(r)){a.decorations.push({range:new L(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824),options:n?oP.lineInsertWithSign:oP.lineInsert}),(!pP(r)||!r.charChanges)&&a.decorations.push(aP(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824,oP.charInsertWholeLine));let e=hP(o,s,r.modifiedStartLineNumber,r.modifiedEndLineNumber);if(a.overviewZones.push(new NA(e.startLineNumber,e.endLineNumber,i)),r.charChanges){for(let e of r.charChanges)if(fP(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let n,r;n=t===e.modifiedStartLineNumber?e.modifiedStartColumn:o.getLineFirstNonWhitespaceColumn(t),r=t===e.modifiedEndLineNumber?e.modifiedEndColumn:o.getLineLastNonWhitespaceColumn(t),a.decorations.push(aP(t,n,t,r,oP.charInsert))}else a.decorations.push(aP(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,oP.charInsert))}}return a}};sP.MINIMUM_EDITOR_WIDTH=100;var cP=class extends iP{constructor(e,t,n,r,i){super(e,t,n,r,i)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}},lP=class extends nP{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(t=>{this._decorationsLeft!==t.decorationsLeft&&(this._decorationsLeft=t.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,r){return new uP(e,t,n,this._dataSource.getOriginalEditor(),this._dataSource.getModifiedEditor(),r).getViewZones()}_getOriginalEditorDecorations(e,t,n){let r=String(this._removeColor),i={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),o=a.getModel(),s=a._getViewModel();for(let t of e)if(pP(t)){i.decorations.push({range:new L(t.originalStartLineNumber,1,t.originalEndLineNumber,1073741824),options:oP.lineDeleteMargin});let e=hP(o,s,t.originalStartLineNumber,t.originalEndLineNumber);i.overviewZones.push(new NA(e.startLineNumber,e.endLineNumber,r))}return i}_getModifiedEditorDecorations(e,t,n){let r=this._dataSource.getModifiedEditor(),i=String(this._insertColor),a={decorations:[],overviewZones:[]},o=r.getModel(),s=r._getViewModel();for(let r of e)if(fP(r)){a.decorations.push({range:new L(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824),options:n?oP.lineInsertWithSign:oP.lineInsert});let e=hP(o,s,r.modifiedStartLineNumber,r.modifiedEndLineNumber);if(a.overviewZones.push(new NA(e.startLineNumber,e.endLineNumber,i)),r.charChanges){for(let e of r.charChanges)if(fP(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let n,r;n=t===e.modifiedStartLineNumber?e.modifiedStartColumn:o.getLineFirstNonWhitespaceColumn(t),r=t===e.modifiedEndLineNumber?e.modifiedEndColumn:o.getLineLastNonWhitespaceColumn(t),a.decorations.push(aP(t,n,t,r,oP.charInsert))}else a.decorations.push(aP(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,oP.charInsert))}else a.decorations.push(aP(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824,oP.charInsertWholeLine))}return a}layout(){return Math.max(5,this._decorationsLeft)}},uP=class extends iP{constructor(e,t,n,r,i,a){super(e,t,n,r,i),this._originalModel=r.getModel(),this._renderIndicators=a,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){let e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){let e=document.createElement(`div`);return e.className=`inline-added-margin-view-zone`,e}_produceOriginalFromDiff(e,t,n){let r=document.createElement(`div`);return r.className=`inline-added-margin-view-zone`,{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement(`div`),marginDomNode:r}}_produceModifiedFromDiff(e,t,n){let r=document.createElement(`div`);r.className=`view-lines line-delete ${mO}`;let i=document.createElement(`div`);i.className=`inline-deleted-margin-view-zone`;let a={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:r,marginDomNode:i,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(t),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(a),a}_finalize(e){let t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,r=t.get(43),i=t.get(29),a=r.typicalHalfwidthCharacterWidth,o=t.get(92),s=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),l=t.get(58),u=t.get(129).decorationsWidth,d=t.get(104),f=t.get(87),p=t.get(82),m=t.get(44),h=this._lineBreaksComputer.finalize(),g=0;for(let t=0;t<this._pendingLineChange.length;t++){let _=this._pendingLineChange[t],v=this._pendingViewZones[t],y=v.domNode;Wv.applyFontInfoSlow(y,r);let b=v.marginDomNode;Wv.applyFontInfoSlow(b,r);let x=[];if(_.charChanges)for(let e of _.charChanges)pP(e)&&x.push(new Jm(new L(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),`char-delete`,0));let S=x.length>0,C=wd(1e4),w=0,T=0,ee=null;for(let t=_.originalStartLineNumber;t<=_.originalEndLineNumber;t++){let a=t-_.originalStartLineNumber,o=this._originalModel.getLineTokens(t),y=o.getLineContent(),te=h[g++],ne=ym.filter(x,t,1,y.length+1);if(te){let h=0;for(let e of te.breakOffsets){let t=o.sliceAndInflate(h,e,0),a=y.substring(h,e);w=Math.max(w,this._renderOriginalLine(T++,a,t,ym.extractWrapped(ne,h,e),S,s,c,r,i,l,u,d,f,p,m,n,C,b)),h=e}for(ee||=[];ee.length<a;)ee[ee.length]=1;ee[a]=te.breakOffsets.length,v.heightInLines+=te.breakOffsets.length-1;let g=document.createElement(`div`);g.className=`line-delete`,e.original.push({afterLineNumber:t,afterColumn:0,heightInLines:te.breakOffsets.length-1,domNode:mP(),marginDomNode:g})}else w=Math.max(w,this._renderOriginalLine(T++,y,o,ne,S,s,c,r,i,l,u,d,f,p,m,n,C,b))}w+=o;let te=C.build();if(y.innerHTML=eP?eP.createHTML(te):te,v.minWidthInPx=w*a,ee){let e=_.originalEndLineNumber-_.originalStartLineNumber;for(;ee.length<=e;)ee[ee.length]=1}v.diff.viewLineCounts=ee}e.original.sort((e,t)=>e.afterLineNumber-t.afterLineNumber)}_renderOriginalLine(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){g.appendASCIIString(`<div class="view-line`),i||g.appendASCIIString(` char-delete`),g.appendASCIIString(`" style="top:`),g.appendASCIIString(String(e*l)),g.appendASCIIString(`px;width:1000000px;">`);let v=qm.isBasicASCII(t,a),y=qm.containsRTL(t,v,o),b=km(new Tm(s.isMonospace&&!c,s.canUseHalfwidthRightwardsArrow,t,!1,v,y,0,n,r,h,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,d,f,p,m!==De.OFF,null),g);if(g.appendASCIIString(`</div>`),this._renderIndicators){let t=document.createElement(`div`);t.className=`delete-sign ${ev.asClassName($N)}`,t.setAttribute(`style`,`position:absolute;top:${e*l}px;width:${u}px;height:${l}px;right:0;`),_.appendChild(t)}return b.characterMapping.getAbsoluteOffset(b.characterMapping.length)}};function dP(e,t){return he(e,t,[`off`,`on`,`inherit`])}function fP(e){return e.modifiedEndLineNumber>0}function pP(e){return e.originalEndLineNumber>0}function mP(){let e=document.createElement(`div`);return e.className=`diagonal-fill`,e}function hP(e,t,n,r){let i=e.getLineCount();return n=Math.min(i,Math.max(1,n)),r=Math.min(i,Math.max(1,r)),t.coordinatesConverter.convertModelRangeToViewRange(new L(n,e.getLineMinColumn(n),r,e.getLineMaxColumn(r)))}function gP(e,t){return{enableSplitViewResizing:E(e.enableSplitViewResizing,t.enableSplitViewResizing),renderSideBySide:E(e.renderSideBySide,t.renderSideBySide),maxComputationTime:de(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:de(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:E(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:E(e.renderIndicators,t.renderIndicators),originalEditable:E(e.originalEditable,t.originalEditable),diffCodeLens:E(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:E(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:dP(e.diffWordWrap,t.diffWordWrap)}}function _P(e,t){return{enableSplitViewResizing:e.enableSplitViewResizing!==t.enableSplitViewResizing,renderSideBySide:e.renderSideBySide!==t.renderSideBySide,maxComputationTime:e.maxComputationTime!==t.maxComputationTime,maxFileSize:e.maxFileSize!==t.maxFileSize,ignoreTrimWhitespace:e.ignoreTrimWhitespace!==t.ignoreTrimWhitespace,renderIndicators:e.renderIndicators!==t.renderIndicators,originalEditable:e.originalEditable!==t.originalEditable,diffCodeLens:e.diffCodeLens!==t.diffCodeLens,renderOverviewRuler:e.renderOverviewRuler!==t.renderOverviewRuler,diffWordWrap:e.diffWordWrap!==t.diffWordWrap}}iv((e,t)=>{let n=e.getColor(Aw);n&&(t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${n}; }`),t.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${n}; }`),t.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${n}; }`));let r=e.getColor(jw);r&&(t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${r}; }`),t.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${r}; }`),t.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${r}; }`));let i=e.getColor(Mw);i&&t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${e.type===`hc`?`dashed`:`solid`} ${i}; }`);let a=e.getColor(Nw);a&&t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${e.type===`hc`?`dashed`:`solid`} ${a}; }`);let o=e.getColor(EC);o&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);let s=e.getColor(Pw);s&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${s}; }`);let c=e.getColor(DC);c&&t.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${c};
			}
		`);let l=e.getColor(OC);l&&t.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${l};
			}
		`);let u=e.getColor(kC);u&&t.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${u};
			}
		`);let d=e.getColor(Fw);t.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${d} 12.5%,
			#0000 12.5%, #0000 50%,
			${d} 50%, ${d} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const vP=Ur(`themeService`),yP=Ur(`keybindingService`);var bP=class extends j{constructor(){super(),this._onCodeEditorAdd=this._register(new N),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new N),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new N),this._onDiffEditorRemove=this._register(new N),this._onDecorationTypeRegistered=this._register(new N),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null,t=this.listCodeEditors();for(let n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){let r=e.toString(),i;this._modelProperties.has(r)?i=this._modelProperties.get(r):(i=new Map,this._modelProperties.set(r,i)),i.set(t,n)}getModelProperty(e,t){let n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}},xP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},SP=function(e,t){return function(n,r){t(n,r,e)}},CP=class{constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)==null||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Fa(e,this._styleSheet)}},wP=class{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Fa(e,this._styleSheet)}},TP=class extends bP{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||=new wP(Aa()),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();let t=e.getContainerDomNode();if(!Da(t))return this._getOrCreateGlobalStyleSheet();let n=e.getId();if(!this._editorStyleSheets.has(n)){let e=new CP(this,n,Aa(t));this._editorStyleSheets.set(n,e)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,r,i){let a=this._decorationOptionProviders.get(t);if(!a){let o=this._getOrCreateStyleSheet(i),s={styleSheet:o,key:t,parentTypeKey:r,options:n||Object.create(null)};a=r?new EP(this._themeService,o,s):new DP(e,this._themeService,o,s),this._decorationOptionProviders.set(t,a),this._onDecorationTypeRegistered.fire(t)}a.refCount++}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorations(e))))}resolveDecorationOptions(e,t){let n=this._decorationOptionProviders.get(e);if(!n)throw Error(`Unknown decoration type key: `+e);return n.getOptions(this,t)}};TP=xP([SP(1,Z_)],TP);var EP=class{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new kP(3,n,e),this._afterContentRules=new kP(4,n,e)}getOptions(e,t){let n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}dispose(){this._beforeContentRules&&=(this._beforeContentRules.dispose(),null),this._afterContentRules&&=(this._afterContentRules.dispose(),null),this._styleSheet.unref()}},DP=class{constructor(e,t,n,r){this._disposables=new A,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;let i=e=>{let n=new kP(e,r,t);if(this._disposables.add(n),n.hasContent)return n.className},a=e=>{let n=new kP(e,r,t);return this._disposables.add(n),n.hasContent?{className:n.className,hasLetterSpacing:n.hasLetterSpacing}:null};this.className=i(0);let o=a(1);if(o&&(this.inlineClassName=o.className,this.inlineClassNameAffectsLetterSpacing=o.hasLetterSpacing),this.beforeContentClassName=i(3),this.afterContentClassName=i(4),r.options.beforeInjectedText&&r.options.beforeInjectedText.contentText){let e=a(5);this.beforeInjectedText={content:r.options.beforeInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||r.options.beforeInjectedText.affectsLetterSpacing}}if(r.options.afterInjectedText&&r.options.afterInjectedText.contentText){let e=a(6);this.afterInjectedText={content:r.options.afterInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||r.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=i(2);let s=r.options;this.isWholeLine=!!s.isWholeLine,this.stickiness=s.rangeBehavior;let c=s.light&&s.light.overviewRulerColor||s.overviewRulerColor,l=s.dark&&s.dark.overviewRulerColor||s.overviewRulerColor;(c!==void 0||l!==void 0)&&(this.overviewRuler={color:c||l,darkColor:l||c,position:s.overviewRulerLane||Bc.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}};const OP={color:`color:{0} !important;`,opacity:`opacity:{0};`,backgroundColor:`background-color:{0};`,outline:`outline:{0};`,outlineColor:`outline-color:{0};`,outlineStyle:`outline-style:{0};`,outlineWidth:`outline-width:{0};`,border:`border:{0};`,borderColor:`border-color:{0};`,borderRadius:`border-radius:{0};`,borderSpacing:`border-spacing:{0};`,borderStyle:`border-style:{0};`,borderWidth:`border-width:{0};`,fontStyle:`font-style:{0};`,fontWeight:`font-weight:{0};`,fontSize:`font-size:{0};`,fontFamily:`font-family:{0};`,textDecoration:`text-decoration:{0};`,cursor:`cursor:{0};`,letterSpacing:`letter-spacing:{0};`,gutterIconPath:`background:{0} center center no-repeat;`,gutterIconSize:`background-size:{0};`,contentText:`content:'{0}';`,contentIconPath:`content:{0};`,margin:`margin:{0};`,padding:`padding:{0};`,width:`width:{0};`,height:`height:{0};`,verticalAlign:`vertical-align:{0};`};var kP=class{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let r=AP.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(r=r+` `+AP.getClassName(this._providerArgs.parentTypeKey,e)),this._className=r,this._unThemedSelector=AP.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(e=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&=(this._removeCSS(),!1),this._themeListener&&=(this._themeListener.dispose(),null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){let e=this._providerArgs.options,t,n,r;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),r=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),r=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),r=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw Error(`Unknown rule type: `+this._ruleType)}let i=this._providerArgs.styleSheet,a=!1;t.length>0&&(i.insertRule(`${this._unThemedSelector} {${t}}`,0),a=!0),n.length>0&&(i.insertRule(`.vs${this._unThemedSelector} {${n}}`,0),a=!0),r.length>0&&(i.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${r}}`,0),a=!0),this._hasContent=a}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return``;let t=[];return this.collectCSSText(e,[`backgroundColor`],t),this.collectCSSText(e,[`outline`,`outlineColor`,`outlineStyle`,`outlineWidth`],t),this.collectBorderSettingsCSSText(e,t),t.join(``)}getCSSTextForModelDecorationInlineClassName(e){if(!e)return``;let t=[];return this.collectCSSText(e,[`fontStyle`,`fontWeight`,`textDecoration`,`cursor`,`color`,`opacity`,`letterSpacing`],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join(``)}getCSSTextForModelDecorationContentClassName(e){if(!e)return``;let t=[];if(e!==void 0){if(this.collectBorderSettingsCSSText(e,t),e.contentIconPath!==void 0&&t.push(ao(OP.contentIconPath,$a(F.revive(e.contentIconPath)))),typeof e.contentText==`string`){let n=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,`\\$&`);t.push(ao(OP.contentText,n))}this.collectCSSText(e,[`verticalAlign`,`fontStyle`,`fontWeight`,`fontSize`,`fontFamily`,`textDecoration`,`color`,`opacity`,`backgroundColor`,`margin`,`padding`],t),this.collectCSSText(e,[`width`,`height`],t)&&t.push(`display:inline-block;`)}return t.join(``)}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return``;let t=[];return e.gutterIconPath!==void 0&&(t.push(ao(OP.gutterIconPath,$a(F.revive(e.gutterIconPath)))),e.gutterIconSize!==void 0&&t.push(ao(OP.gutterIconSize,e.gutterIconSize))),t.join(``)}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,[`border`,`borderColor`,`borderRadius`,`borderSpacing`,`borderStyle`,`borderWidth`],t)?(t.push(ao(`box-sizing: border-box;`)),!0):!1}collectCSSText(e,t,n){let r=n.length;for(let r of t){let t=this.resolveValue(e[r]);typeof t==`string`&&n.push(ao(OP[r],t))}return n.length!==r}resolveValue(e){if(Rc(e)){this._usesThemeColors=!0;let t=this._theme.getColor(e.id);return t?t.toString():`transparent`}return e}},AP=class{static getClassName(e,t){return`ced-`+e+`-`+t}static getSelector(e,t,n){let r=`.monaco-editor .`+this.getClassName(e,n);return t&&(r=r+`.`+this.getClassName(t,n)),n===3?r+=`::before`:n===4&&(r+=`::after`),r}},jP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},MP=function(e,t){return function(n,r){t(n,r,e)}},NP=class extends TP{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey(`editorIsOpen`,!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(let t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){let n=t.resource.scheme;if(n===Vi.http||n===Vi.https)return Za(t.resource.toString()),e}return null}let n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber==`number`&&typeof n.endColumn==`number`)e.setSelection(n),e.revealRangeInCenter(n,1);else{let t={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){let n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};NP=jP([MP(1,Pg),MP(2,Z_)],NP);var PP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},FP=function(e,t){return function(n,r){t(n,r,e)}},IP=0,LP=!1;function RP(e){if(!e){if(LP)return;LP=!0}z_(e||document.body)}var zP=class extends FM{constructor(e,t,n,r,i,a,o,s,c,l){let u=Object.assign({},t);u.ariaLabel=u.ariaLabel||l_.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+`;`+l_.accessibilityHelpMessage,super(e,u,{},n,r,i,a,s,c,l),o instanceof S_?this._standaloneKeybindingService=o:this._standaloneKeybindingService=null,RP(u.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn(`Cannot add command because the editor is configured with an unrecognized KeybindingService`),null;let r=`DYNAMIC_`+ ++IP,i=pg.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,i),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!=`string`||typeof e.label!=`string`||typeof e.run!=`function`)throw Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn(`Cannot add keybinding because the editor is configured with an unrecognized KeybindingService`),j.None;let t=e.id,n=e.label,r=pg.and(pg.equals(`editorId`,this.getId()),pg.deserialize(e.precondition)),i=e.keybindings,a=pg.and(r,pg.deserialize(e.keybindingContext)),o=e.contextMenuGroupId||null,s=e.contextMenuOrder||0,c=(t,...n)=>Promise.resolve(e.run(this,...n)),l=new A,u=this.getId()+`:`+t;if(l.add(uc.registerCommand(u,c)),o){let e={command:{id:u,title:n},when:r,group:o,order:s};l.add(dv.appendMenuItem(lv.EditorContext,e))}if(Array.isArray(i))for(let e of i)l.add(this._standaloneKeybindingService.addDynamicKeybinding(u,e,c,a));let d=new Nj(u,n,n,r,c,this._contextKeyService);return this._actions[t]=d,l.add(Ot(()=>{delete this._actions[t]})),l}_triggerCommand(e,t){if(this._codeEditorService instanceof NP)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};zP=PP([FP(2,Vr),FP(3,Gr),FP(4,lc),FP(5,Pg),FP(6,yP),FP(7,Z_),FP(8,$g),FP(9,fM)],zP);var BP=class extends zP{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){let h=Object.assign({},t);k_(d,h,!1);let g=l.registerEditorContainer(e);typeof h.theme==`string`&&l.setTheme(h.theme),h.autoDetectHighContrast!==void 0&&l.setAutoDetectHighContrast(!!h.autoDetectHighContrast);let _=h.model;delete h.model,super(e,h,r,i,a,o,s,l,u,f),this._contextViewService=c,this._configurationService=d,this._standaloneThemeService=l,this._register(n),this._register(g);let v;if(_===void 0?(v=HP(p,m,h.value||``,h.language||WD.text,void 0),this._ownsModel=!0):(v=_,this._ownsModel=!1),this._attachModel(v),v){let e={oldModelUrl:null,newModelUrl:v.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){k_(this._configurationService,e,!1),typeof e.theme==`string`&&this._standaloneThemeService.setTheme(e.theme),e.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};BP=PP([FP(3,Vr),FP(4,Gr),FP(5,lc),FP(6,Pg),FP(7,yP),FP(8,VN),FP(9,vP),FP(10,$g),FP(11,mf),FP(12,fM),FP(13,Bl),FP(14,Hu)],BP);var VP=class extends tP{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){let h=Object.assign({},t);k_(d,h,!0);let g=l.registerEditorContainer(e);typeof h.theme==`string`&&l.setTheme(h.theme),h.autoDetectHighContrast!==void 0&&l.setAutoDetectHighContrast(!!h.autoDetectHighContrast),super(e,h,{},m,s,i,r,c,l,u,f,p),this._contextViewService=o,this._configurationService=d,this._standaloneThemeService=l,this._register(n),this._register(g),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){k_(this._configurationService,e,!0),typeof e.theme==`string`&&this._standaloneThemeService.setTheme(e.theme),e.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(zP,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};VP=PP([FP(3,Vr),FP(4,Pg),FP(5,yP),FP(6,VN),FP(7,Vu),FP(8,Gr),FP(9,vP),FP(10,$g),FP(11,mf),FP(12,HN),FP(13,qN),FP(14,GN)],VP);function HP(e,t,n,r,i){if(n||=``,!r){let r=n.indexOf(`
`),a=n;return r!==-1&&(a=n.substring(0,r)),UP(e,n,t.createByFilepathOrFirstLine(i||null,a),i)}return UP(e,n,t.create(r),i)}function UP(e,t,n,r){return e.createModel(t,n,r)}var WP=Object.prototype.hasOwnProperty,GP=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Ru,0),this._register(cM,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||`vs.editor.nullMode`}},KP=class e extends j{constructor(t=!0,n=!1){super(),this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,e.instanceCount++,this._warnOnOverwrite=n,this.languageIdCodec=new GP,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},t&&(this._initializeFromRegistry(),this._register(sM.onDidChangeLanguages(e=>{this._initializeFromRegistry()})))}dispose(){e.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},XD();let e=sM.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier}),t.mimetypes.forEach(e=>{this._mimeTypesMap[e]=t.identifier})}),Jd.as(Qd.Configuration).registerOverrideIdentifiers(sM.getLanguages().map(e=>e.id)),this._onDidChange.fire()}_registerLanguage(e){let t=e.id,n;WP.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){let n=t.id,r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let e of t.extensions)JD({id:n,mime:r,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let i of t.filenames)JD({id:n,mime:r,filename:i},this._warnOnOverwrite),e.filenames.push(i);if(Array.isArray(t.filenamePatterns))for(let e of t.filenamePatterns)JD({id:n,mime:r,filepattern:e},this._warnOnOverwrite);if(typeof t.firstLine==`string`&&t.firstLine.length>0){let e=t.firstLine;e.charAt(0)!==`^`&&(e=`^`+e);try{let t=new RegExp(e);ho(t)||JD({id:n,mime:r,firstline:t},this._warnOnOverwrite)}catch(e){ct(e)}}e.aliases.push(n);let i=null;if(t.aliases!==void 0&&Array.isArray(t.aliases)&&(i=t.aliases.length===0?[null]:t.aliases),i!==null)for(let t of i)!t||t.length===0||e.aliases.push(t);let a=i!==null&&i.length>0;if(!(a&&i[0]===null)){let t=(a?i[0]:null)||n;(a||!e.name)&&(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return WP.call(this._mimeTypesMap,e)?!0:WP.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return WP.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(`,`).map(e=>e.trim()).map(e=>WP.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:e).filter(e=>WP.call(this._languages,e)):[]}validateLanguageId(e){return!e||e===`vs.editor.nullMode`?Ru:WP.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=ZD(e,t);return this.extractModeIds(n.join(`,`))}};KP.instanceCount=0;var qP=class{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new N({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){let e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}},JP=class e extends j{constructor(t=!1){super(),this._onDidEncounterLanguage=this._register(new N),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new N({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,e.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new KP(!0,t)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){e.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){return zp(this._registry.getModeIdsFromFilepathOrFirstLine(e,t),null)}getModeId(e){return zp(this._registry.extractModeIds(e),null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new qP(this.onLanguagesMaybeChanged,()=>{let t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new qP(this.onLanguagesMaybeChanged,()=>{let n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){let t=this.validateLanguageId(e||`plaintext`)||`vs.editor.nullMode`;return this._getOrCreateMode(t),t}triggerMode(e){let t=this.getModeId(e);this._getOrCreateMode(t||`plaintext`)}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);let t=this.validateLanguageId(e)||`vs.editor.nullMode`;this._onDidEncounterLanguage.fire(t)}}};JP.instanceCount=0;var YP=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},XP=function(e,t){return function(n,r){t(n,r,e)}},ZP=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._modeService=n,this._logService=r,this._hashTable=new eF,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){let r=this._modeService.languageIdCodec.encodeLanguageId(n),i=this._hashTable.get(e,t,r),a;if(i)a=i.metadata,this._logService.getLevel()===Zp.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${tu.getForeground(a)}, fontStyle ${tu.getFontStyle(a).toString(2)}`);else{let i=this._legend.tokenTypes[e],o=[];if(i){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)e&1&&o.push(this._legend.tokenModifiers[t]),e>>=1;e>0&&this._logService.getLevel()===Zp.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),o.push(`not-in-legend`));let r=this._themeService.getColorTheme().getTokenStyleMetadata(i,o,n);if(r===void 0)a=2147483647;else{if(a=0,r.italic!==void 0){let e=(r.italic?1:0)<<11;a|=e|1}if(r.bold!==void 0){let e=(r.bold?2:0)<<11;a|=e|2}if(r.underline!==void 0){let e=(r.underline?4:0)<<11;a|=e|4}if(r.foreground){let e=r.foreground<<14;a|=e|8}a===0&&(a=2147483647)}}else this._logService.getLevel()===Zp.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),a=2147483647,i=`not-in-legend`;this._hashTable.add(e,t,r,a),this._logService.getLevel()===Zp.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${i}) / ${t} (${o.join(` `)}): foreground ${tu.getForeground(a)}, fontStyle ${tu.getFontStyle(a).toString(2)}`)}return a}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};ZP=YP([XP(1,Z_),XP(2,Hu),XP(3,Xp)],ZP);function QP(e,t,n){let r=e.data,i=e.data.length/5|0,a=Math.max(Math.ceil(i/1024),400),o=[],s=0,c=1,l=0;for(;s<i;){let e=s,u=Math.min(e+a,i);if(u<i){let t=u;for(;t-1>e&&r[5*t]===0;)t--;if(t-1===e){let e=u;for(;e+1<i&&r[5*e]===0;)e++;u=e}else u=t}let d=new Uint32Array((u-e)*4),f=0,p=0,m=0,h=0,g=0;for(;s<u;){let e=5*s,i=r[e],a=r[e+1],o=c+i|0,u=i===0?l+a|0:a,_=r[e+2],v=r[e+3],y=r[e+4],b=t.getMetadata(v,y,n);b!==2147483647&&(p===0&&(p=o),m===o&&g>u&&(t.warnOverlappingSemanticTokens(o,u+1),h<u?d[f-4+2]=u:f-=4),d[f]=o-p,d[f+1]=u,d[f+2]=u+_,d[f+3]=b,f+=4,m=o,h=u,g=u+_),c=o,l=u,s++}f!==d.length&&(d=d.subarray(0,f));let _=new cx(p,new ox(d));o.push(_)}return o}var $P=class{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}},eF=class e{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){let r=this._hashFunc(e,t,n),i=this._elements[r];for(;i;){if(i.tokenTypeIndex===e&&i.tokenModifierSet===t&&i.languageId===n)return i;i=i.next}return null}add(t,n,r,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let t=this._elements;this._currentLengthIndex++,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength);for(let e of t){let t=e;for(;t;){let e=t.next;t.next=null,this._add(t),t=e}}}this._add(new $P(t,n,r,i))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};eF._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function tF(e){for(let t=0,n=e.length;t<n;t+=4){let n=e[t+0],r=e[t+1],i=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=i,e[t+2]=r,e[t+3]=n}}function nF(e){let t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return C()||tF(t),bs.wrap(t)}function rF(e){let t=new Uint32Array(iF(e)),n=0;if(t[n++]=e.id,e.type===`full`)t[n++]=1,t[n++]=e.data.length,t.set(e.data,n),n+=e.data.length;else{t[n++]=2,t[n++]=e.deltas.length;for(let r of e.deltas)t[n++]=r.start,t[n++]=r.deleteCount,r.data?(t[n++]=r.data.length,t.set(r.data,n),n+=r.data.length):t[n++]=0}return nF(t)}function iF(e){let t=0;if(t+=2,e.type===`full`)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(let n of e.deltas)n.data&&(t+=n.data.length)}return t}var aF=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function oF(e){return e&&!!e.data}function sF(e){return e&&Array.isArray(e.edits)}var cF=class{constructor(e,t){this.provider=e,this.tokens=t}};function lF(e){return Pu.has(e)}function uF(e){let t=Pu.orderedGroups(e);return t.length>0?t[0]:[]}function dF(e,t,n,r){return aF(this,void 0,void 0,function*(){let i=uF(e),a=yield Promise.all(i.map(i=>aF(this,void 0,void 0,function*(){let a;try{a=yield i.provideDocumentSemanticTokens(e,i===t?n:null,r)}catch(e){lt(e),a=null}return(!a||!oF(a)&&!sF(a))&&(a=null),new cF(i,a)})));for(let e of a)if(e.tokens)return e;return a.length>0?a[0]:null})}function fF(e){let t=Pu.orderedGroups(e);return t.length>0?t[0]:null}var pF=class{constructor(e,t){this.provider=e,this.tokens=t}};function mF(e){return Fu.has(e)}function hF(e){let t=Fu.orderedGroups(e);return t.length>0?t[0]:[]}function gF(e,t,n){return aF(this,void 0,void 0,function*(){let r=hF(e),i=yield Promise.all(r.map(r=>aF(this,void 0,void 0,function*(){let i;try{i=yield r.provideDocumentRangeSemanticTokens(e,t,n)}catch(e){lt(e),i=null}return(!i||!oF(i))&&(i=null),new pF(r,i)})));for(let e of i)if(e.tokens)return e;return i.length>0?i[0]:null})}uc.registerCommand(`_provideDocumentSemanticTokensLegend`,(e,...t)=>aF(void 0,void 0,void 0,function*(){let[n]=t;$s(n instanceof F);let r=e.get(Bl).getModel(n);if(!r)return;let i=fF(r);return i?i[0].getLegend():e.get(lc).executeCommand(`_provideDocumentRangeSemanticTokensLegend`,n)})),uc.registerCommand(`_provideDocumentSemanticTokens`,(e,...t)=>aF(void 0,void 0,void 0,function*(){let[n]=t;$s(n instanceof F);let r=e.get(Bl).getModel(n);if(!r)return;if(!lF(r))return e.get(lc).executeCommand(`_provideDocumentRangeSemanticTokens`,n,r.getFullModelRange());let i=yield dF(r,null,null,Ut.None);if(!i)return;let{provider:a,tokens:o}=i;if(!o||!oF(o))return;let s=rF({id:0,type:`full`,data:o.data});return o.resultId&&a.releaseDocumentSemanticTokens(o.resultId),s})),uc.registerCommand(`_provideDocumentRangeSemanticTokensLegend`,(e,...t)=>aF(void 0,void 0,void 0,function*(){let[n,r]=t;$s(n instanceof F);let i=e.get(Bl).getModel(n);if(!i)return;let a=hF(i);if(a.length===0)return;if(a.length===1)return a[0].getLegend();if(!r||!L.isIRange(r))return console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`),a[0].getLegend();let o=yield gF(i,L.lift(r),Ut.None);if(o)return o.provider.getLegend()})),uc.registerCommand(`_provideDocumentRangeSemanticTokens`,(e,...t)=>aF(void 0,void 0,void 0,function*(){let[n,r]=t;$s(n instanceof F),$s(L.isIRange(r));let i=e.get(Bl).getModel(n);if(!i)return;let a=yield gF(i,L.lift(r),Ut.None);if(!(!a||!a.tokens))return rF({id:0,type:`full`,data:a.tokens.data})}));var _F=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vF=function(e,t){return function(n,r){t(n,r,e)}};function yF(e){return e.toString()}function bF(e){let t=new ol,n=e.createSnapshot(),r;for(;r=n.read();)t.update(r);return t.digest()}var xF=class{constructor(e,t,n){this._modelEventListeners=new A,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(t=>n(e,t)))}_disposeLanguageSelection(){this._languageSelectionListener&&=(this._languageSelectionListener.dispose(),null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}},SF=m||p?1:2,CF=class{constructor(e,t,n,r,i,a,o,s){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=i,this.sha1=a,this.versionId=o,this.alternativeVersionId=s}},wF=class e extends j{constructor(e,t,n,r,i,a,o){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=r,this._undoRedoService=i,this._modeService=a,this._languageConfigurationService=o,this._onModelAdded=this._register(new N),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new N),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new N),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new OF(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new DF(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){let n=it.tabSize;if(e.editor&&e.editor.tabSize!==void 0){let t=parseInt(e.editor.tabSize,10);isNaN(t)||(n=t),n<1&&(n=1)}let r=n;if(e.editor&&e.editor.indentSize!==void 0&&e.editor.indentSize!==`tabSize`){let t=parseInt(e.editor.indentSize,10);isNaN(t)||(r=t),r<1&&(r=1)}let i=it.insertSpaces;e.editor&&e.editor.insertSpaces!==void 0&&(i=e.editor.insertSpaces===`false`?!1:!!e.editor.insertSpaces);let a=SF,o=e.eol;o===`\r
`?a=2:o===`
`&&(a=1);let s=it.trimAutoWhitespace;e.editor&&e.editor.trimAutoWhitespace!==void 0&&(s=e.editor.trimAutoWhitespace===`false`?!1:!!e.editor.trimAutoWhitespace);let c=it.detectIndentation;e.editor&&e.editor.detectIndentation!==void 0&&(c=e.editor.detectIndentation===`false`?!1:!!e.editor.detectIndentation);let l=it.largeFileOptimizations;e.editor&&e.editor.largeFileOptimizations!==void 0&&(l=e.editor.largeFileOptimizations===`false`?!1:!!e.editor.largeFileOptimizations);let u=it.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization==`object`&&(u={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:n,indentSize:r,insertSpaces:i,detectIndentation:c,defaultEOL:a,trimAutoWhitespace:s,largeFileOptimizations:l,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let n=this._configurationService.getValue(`files.eol`,{overrideIdentifier:t});return n&&typeof n==`string`&&n!==`auto`?n:b===3||b===2?`
`:`\r
`}_shouldRestoreUndoStack(){let e=this._configurationService.getValue(`files.restoreUndoStack`);return typeof e==`boolean`?e:!0}getCreationOptions(t,n,r){let i=this._modelCreationOptionsByLanguageAndResource[t+n];if(!i){let a=this._configurationService.getValue(`editor`,{overrideIdentifier:t,resource:n}),o=this._getEOL(n,t);i=e._readModelOptions({editor:a,eol:o},r),this._modelCreationOptionsByLanguageAndResource[t+n]=i}return i}_updateModelOptions(){let t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let n=Object.keys(this._models);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=this._models[i],o=a.model.getLanguageId(),s=a.model.uri,c=t[o+s],l=this.getCreationOptions(o,s,a.model.isForSimpleWidget);e._setModelOptionsForModel(a.model,l,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&kc(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(yF(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(yF(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(yF(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(e=>{e.sharesUndoRedoStack||t.push(e)}),t.sort((e,t)=>e.time-t.time);t.length>0&&this._disposedModelsHeapSize>e;){let e=t.shift();this._removeDisposedModel(e.uri),e.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){let i=new $E(e,this.getCreationOptions(t,n,r),t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(yF(n))){let e=this._removeDisposedModel(n),t=this._undoRedoService.getElements(n),r=bF(i)===e.sha1;if(r||e.sharesUndoRedoStack){for(let e of t.past)Ly(e)&&e.matchesResource(n)&&e.setModel(i);for(let e of t.future)Ly(e)&&e.matchesResource(n)&&e.setModel(i);this._undoRedoService.setElementsValidFlag(n,!0,e=>Ly(e)&&e.matchesResource(n)),r&&(i._overwriteVersionId(e.versionId),i._overwriteAlternativeVersionId(e.alternativeVersionId),i._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else e.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}let a=yF(i.uri);if(this._models[a])throw Error(`ModelService: Cannot add model because it already exists!`);let o=new xF(i,e=>this._onWillDispose(e),(e,t)=>this._onDidChangeLanguage(e,t));return this._models[a]=o,o}createModel(e,t,n,r=!1){let i;return t?(i=this._createModelData(e,t.languageId,n,r),this.setMode(i.model,t)):i=this._createModelData(e,cM,n,r),this._onModelAdded.fire(i.model),i.model}setMode(e,t){if(!t)return;let n=this._models[yF(e.uri)];n&&n.setLanguage(t)}getModels(){let e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){let r=t[n];e.push(this._models[r].model)}return e}getModel(e){let t=yF(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Vi.file||e.scheme===Vi.vscodeRemote||e.scheme===Vi.userData||e.scheme===Vi.vscodeNotebookCell||e.scheme===`fake-fs`}_onWillDispose(t){let n=yF(t.uri),r=this._models[n],i=this._undoRedoService.getUriComparisonKey(t.uri)!==t.uri.toString(),a=!1,o=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(t.uri)){let e=this._undoRedoService.getElements(t.uri);if(e.past.length>0||e.future.length>0){for(let n of e.past)Ly(n)&&n.matchesResource(t.uri)&&(a=!0,o+=n.heapSize(t.uri),n.setModel(t.uri));for(let n of e.future)Ly(n)&&n.matchesResource(t.uri)&&(a=!0,o+=n.heapSize(t.uri),n.setModel(t.uri))}}let s=e.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(a)if(!i&&o>s){let e=r.model.getInitialUndoRedoSnapshot();e!==null&&this._undoRedoService.restoreSnapshot(e)}else this._ensureDisposedModelsHeapSize(s-o),this._undoRedoService.setElementsValidFlag(t.uri,!1,e=>Ly(e)&&e.matchesResource(t.uri)),this._insertDisposedModel(new CF(t.uri,r.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,bF(t),t.getVersionId(),t.getAlternativeVersionId()));else if(!i){let e=r.model.getInitialUndoRedoSnapshot();e!==null&&this._undoRedoService.restoreSnapshot(e)}delete this._models[n],r.dispose(),delete this._modelCreationOptionsByLanguageAndResource[t.getLanguageId()+t.uri],this._onModelRemoved.fire(t)}_onDidChangeLanguage(t,n){let r=n.oldLanguage,i=t.getLanguageId(),a=this.getCreationOptions(r,t.uri,t.isForSimpleWidget),o=this.getCreationOptions(i,t.uri,t.isForSimpleWidget);e._setModelOptionsForModel(t,o,a),this._onModelModeChanged.fire({model:t,oldModeId:r})}};wF.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,wF=_F([vF(0,mf),vF(1,Tp),vF(2,Z_),vF(3,Xp),vF(4,Mx),vF(5,Hu),vF(6,kf)],wF);const TF=`editor.semanticHighlighting`;function EF(e,t,n){let r=n.getValue(`editor.semanticHighlighting`,{overrideIdentifier:e.getLanguageId(),resource:e.uri})?.enabled;return typeof r==`boolean`?r:t.getColorTheme().semanticHighlighting}var DF=class extends j{constructor(e,t,n,r){super(),this._watchers=Object.create(null),this._semanticStyling=r;let i=e=>{this._watchers[e.uri.toString()]=new AF(e,t,this._semanticStyling)},a=(e,t)=>{t.dispose(),delete this._watchers[e.uri.toString()]},o=()=>{for(let r of e.getModels()){let e=this._watchers[r.uri.toString()];EF(r,t,n)?e||i(r):e&&a(r,e)}};this._register(e.onModelAdded(e=>{EF(e,t,n)&&i(e)})),this._register(e.onModelRemoved(e=>{let t=this._watchers[e.uri.toString()];t&&a(e,t)})),this._register(n.onDidChangeConfiguration(e=>{e.affectsConfiguration(`editor.semanticHighlighting`)&&o()})),this._register(t.onDidColorThemeChange(o))}},OF=class extends j{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new ZP(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}},kF=class{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}},AF=class e extends j{constructor(t,n,r){super(),this._isDisposed=!1,this._model=t,this._semanticStyling=r,this._fetchDocumentSemanticTokens=this._register(new Li(()=>this._fetchDocumentSemanticTokensNow(),e.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._currentDocumentRequestCancellationTokenSource&&=(this._currentDocumentRequestCancellationTokenSource.cancel(),null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let i=()=>{Et(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let e of Pu.all(t))typeof e.onDidChange==`function`&&this._documentProvidersChangeListeners.push(e.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};i(),this._register(Pu.onDidChange(()=>{i(),this._fetchDocumentSemanticTokens.schedule()})),this._register(n.onDidColorThemeChange(e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._currentDocumentRequestCancellationTokenSource&&=(this._currentDocumentRequestCancellationTokenSource.cancel(),null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!lF(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}let e=new Gt,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=dF(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;let i=[],a=this._model.onDidChangeContent(e=>{i.push(e)});r.then(e=>{if(this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),!e)this._setDocumentSemanticTokens(null,null,null,i);else{let{provider:t,tokens:n}=e,r=this._semanticStyling.get(t);this._setDocumentSemanticTokens(t,n||null,r,i)}},e=>{e&&(ft(e)||typeof e.message==`string`&&e.message.indexOf(`busy`)!==-1)||ct(e),this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),i.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,r,i){for(let a=0;a<i;a++)n[r+a]=e[t+a]}_setDocumentSemanticTokens(t,n,r,i){let a=this._currentDocumentResponse,o=()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&=(this._currentDocumentResponse.dispose(),null),this._isDisposed){t&&n&&t.releaseDocumentSemanticTokens(n.resultId);return}if(!t||!r){this._model.setSemanticTokens(null,!1);return}if(!n){this._model.setSemanticTokens(null,!0),o();return}if(sF(n)){if(!a){this._model.setSemanticTokens(null,!0);return}if(n.edits.length===0)n={resultId:n.resultId,data:a.data};else{let t=0;for(let e of n.edits)t+=(e.data?e.data.length:0)-e.deleteCount;let r=a.data,i=new Uint32Array(r.length+t),o=r.length,s=i.length;for(let t=n.edits.length-1;t>=0;t--){let a=n.edits[t],c=o-(a.start+a.deleteCount);c>0&&(e._copy(r,o-c,i,s-c,c),s-=c),a.data&&(e._copy(a.data,0,i,s-a.data.length,a.data.length),s-=a.data.length),o=a.start}o>0&&e._copy(r,0,i,0,o),n={resultId:n.resultId,data:i}}}if(oF(n)){this._currentDocumentResponse=new kF(t,n.resultId,n.data);let e=QP(n,r,this._model.getLanguageId());if(i.length>0)for(let t of i)for(let n of e)for(let e of t.changes)n.applyEdit(e.range,e.text);this._model.setSemanticTokens(e,!0)}else this._model.setSemanticTokens(null,!0);o()}};AF.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;var jF=class{constructor(e,t,n,r,i){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=i}};function MF(e){if(!e||!Array.isArray(e))return[];let t=[],n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r],a=-1;if(typeof i.fontStyle==`string`){a=0;let e=i.fontStyle.split(` `);for(let t=0,n=e.length;t<n;t++)switch(e[t]){case`italic`:a|=1;break;case`bold`:a|=2;break;case`underline`:a|=4;break}}let o=null;typeof i.foreground==`string`&&(o=i.foreground);let s=null;typeof i.background==`string`&&(s=i.background),t[n++]=new jF(i.token||``,r,a,o,s)}return t}function NF(e,t){e.sort((e,t)=>{let n=zF(e.token,t.token);return n===0?e.index-t.index:n});let n=0,r=`000000`,i=`ffffff`;for(;e.length>=1&&e[0].token===``;){let t=e.shift();t.fontStyle!==-1&&(n=t.fontStyle),t.foreground!==null&&(r=t.foreground),t.background!==null&&(i=t.background)}let a=new FF;for(let e of t)a.getId(e);let o=a.getId(r),s=a.getId(i),c=new VF(new BF(n,o,s));for(let t=0,n=e.length;t<n;t++){let n=e[t];c.insert(n.token,n.fontStyle,a.getId(n.foreground),a.getId(n.background))}return new IF(a,c)}var PF=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,FF=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;let t=e.match(PF);if(!t)throw Error(`Illegal value for token color: `+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=J.fromHex(`#`+e),n)}getColorMap(){return this._id2color.slice(0)}},IF=class{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(MF(e),t)}static createFromParsedTokenTheme(e,t){return NF(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(n===void 0){let e=this._match(t),r=RF(t);n=(e.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}},LF=/\b(comment|string|regex|regexp)\b/;function RF(e){let t=e.match(LF);if(!t)return 0;switch(t[1]){case`comment`:return 1;case`string`:return 2;case`regex`:return 4;case`regexp`:return 4}throw Error(`Unexpected match for standard token type!`)}function zF(e,t){return e<t?-1:e>t?1:0}var BF=class e{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new e(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}},VF=class e{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e===``)return this._mainRule;let t=e.indexOf(`.`),n,r;t===-1?(n=e,r=``):(n=e.substring(0,t),r=e.substring(t+1));let i=this._children.get(n);return i===void 0?this._mainRule:i.match(r)}insert(t,n,r,i){if(t===``){this._mainRule.acceptOverwrite(n,r,i);return}let a=t.indexOf(`.`),o,s;a===-1?(o=t,s=``):(o=t.substring(0,a),s=t.substring(a+1));let c=this._children.get(o);c===void 0&&(c=new e(this._mainRule.clone()),this._children.set(o,c)),c.insert(s,n,r,i)}};function HF(e){let t=[];for(let n=1,r=e.length;n<r;n++){let r=e[n];t[n]=`.mtk${n} { color: ${r}; }`}return t.push(`.mtki { font-style: italic; }`),t.push(`.mtkb { font-weight: bold; }`),t.push(`.mtku { text-decoration: underline; text-underline-position: under; }`),t.join(`
`)}const UF={base:`vs`,inherit:!1,rules:[{token:``,foreground:`000000`,background:`fffffe`},{token:`invalid`,foreground:`cd3131`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`001188`},{token:`variable.predefined`,foreground:`4864AA`},{token:`constant`,foreground:`dd0000`},{token:`comment`,foreground:`008000`},{token:`number`,foreground:`098658`},{token:`number.hex`,foreground:`3030c0`},{token:`regexp`,foreground:`800000`},{token:`annotation`,foreground:`808080`},{token:`type`,foreground:`008080`},{token:`delimiter`,foreground:`000000`},{token:`delimiter.html`,foreground:`383838`},{token:`delimiter.xml`,foreground:`0000FF`},{token:`tag`,foreground:`800000`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta.scss`,foreground:`800000`},{token:`metatag`,foreground:`e00000`},{token:`metatag.content.html`,foreground:`FF0000`},{token:`metatag.html`,foreground:`808080`},{token:`metatag.xml`,foreground:`808080`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`863B00`},{token:`string.key.json`,foreground:`A31515`},{token:`string.value.json`,foreground:`0451A5`},{token:`attribute.name`,foreground:`FF0000`},{token:`attribute.value`,foreground:`0451A5`},{token:`attribute.value.number`,foreground:`098658`},{token:`attribute.value.unit`,foreground:`098658`},{token:`attribute.value.html`,foreground:`0000FF`},{token:`attribute.value.xml`,foreground:`0000FF`},{token:`string`,foreground:`A31515`},{token:`string.html`,foreground:`0000FF`},{token:`string.sql`,foreground:`FF0000`},{token:`string.yaml`,foreground:`0451A5`},{token:`keyword`,foreground:`0000FF`},{token:`keyword.json`,foreground:`0451A5`},{token:`keyword.flow`,foreground:`AF00DB`},{token:`keyword.flow.scss`,foreground:`0000FF`},{token:`operator.scss`,foreground:`666666`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`666666`},{token:`predefined.sql`,foreground:`C700C7`}],colors:{[HC]:`#FFFFFE`,[UC]:`#000000`,[aw]:`#E5EBF1`,[eE]:`#D3D3D3`,[tE]:`#939393`,[ow]:`#ADD6FF4D`}},WF={base:`vs-dark`,inherit:!1,rules:[{token:``,foreground:`D4D4D4`,background:`1E1E1E`},{token:`invalid`,foreground:`f44747`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`74B0DF`},{token:`variable.predefined`,foreground:`4864AA`},{token:`variable.parameter`,foreground:`9CDCFE`},{token:`constant`,foreground:`569CD6`},{token:`comment`,foreground:`608B4E`},{token:`number`,foreground:`B5CEA8`},{token:`number.hex`,foreground:`5BB498`},{token:`regexp`,foreground:`B46695`},{token:`annotation`,foreground:`cc6666`},{token:`type`,foreground:`3DC9B0`},{token:`delimiter`,foreground:`DCDCDC`},{token:`delimiter.html`,foreground:`808080`},{token:`delimiter.xml`,foreground:`808080`},{token:`tag`,foreground:`569CD6`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta.scss`,foreground:`A79873`},{token:`meta.tag`,foreground:`CE9178`},{token:`metatag`,foreground:`DD6A6F`},{token:`metatag.content.html`,foreground:`9CDCFE`},{token:`metatag.html`,foreground:`569CD6`},{token:`metatag.xml`,foreground:`569CD6`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`9CDCFE`},{token:`string.key.json`,foreground:`9CDCFE`},{token:`string.value.json`,foreground:`CE9178`},{token:`attribute.name`,foreground:`9CDCFE`},{token:`attribute.value`,foreground:`CE9178`},{token:`attribute.value.number.css`,foreground:`B5CEA8`},{token:`attribute.value.unit.css`,foreground:`B5CEA8`},{token:`attribute.value.hex.css`,foreground:`D4D4D4`},{token:`string`,foreground:`CE9178`},{token:`string.sql`,foreground:`FF0000`},{token:`keyword`,foreground:`569CD6`},{token:`keyword.flow`,foreground:`C586C0`},{token:`keyword.json`,foreground:`CE9178`},{token:`keyword.flow.scss`,foreground:`569CD6`},{token:`operator.scss`,foreground:`909090`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`909090`},{token:`predefined.sql`,foreground:`FF00FF`}],colors:{[HC]:`#1E1E1E`,[UC]:`#D4D4D4`,[aw]:`#3A3D41`,[eE]:`#404040`,[tE]:`#707070`,[ow]:`#ADD6FF26`}},GF={base:`hc-black`,inherit:!1,rules:[{token:``,foreground:`FFFFFF`,background:`000000`},{token:`invalid`,foreground:`f44747`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`1AEBFF`},{token:`variable.parameter`,foreground:`9CDCFE`},{token:`constant`,foreground:`569CD6`},{token:`comment`,foreground:`608B4E`},{token:`number`,foreground:`FFFFFF`},{token:`regexp`,foreground:`C0C0C0`},{token:`annotation`,foreground:`569CD6`},{token:`type`,foreground:`3DC9B0`},{token:`delimiter`,foreground:`FFFF00`},{token:`delimiter.html`,foreground:`FFFF00`},{token:`tag`,foreground:`569CD6`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta`,foreground:`D4D4D4`},{token:`meta.tag`,foreground:`CE9178`},{token:`metatag`,foreground:`569CD6`},{token:`metatag.content.html`,foreground:`1AEBFF`},{token:`metatag.html`,foreground:`569CD6`},{token:`metatag.xml`,foreground:`569CD6`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`9CDCFE`},{token:`string.key`,foreground:`9CDCFE`},{token:`string.value`,foreground:`CE9178`},{token:`attribute.name`,foreground:`569CD6`},{token:`attribute.value`,foreground:`3FF23F`},{token:`string`,foreground:`CE9178`},{token:`string.sql`,foreground:`FF0000`},{token:`keyword`,foreground:`569CD6`},{token:`keyword.flow`,foreground:`C586C0`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`909090`},{token:`predefined.sql`,foreground:`FF00FF`}],colors:{[HC]:`#000000`,[UC]:`#FFFFFF`,[eE]:`#FFFFFF`,[tE]:`#FFFFFF`}};function KF(){let e=new N,t=SN();return t.onDidChange(()=>e.fire()),{onDidChange:e.event,getCSS(){let e={},n=n=>{let r=n.defaults;for(;ev.isThemeIcon(r);){let e=t.getIcon(r.id);if(!e)return;r=e.defaults}let i=r.fontId;if(i){let a=t.getIconFont(i);if(a)return e[i]=a,`.codicon-${n.id}:before { content: '${r.fontCharacter}'; font-family: ${eo(i)}; }`}return`.codicon-${n.id}:before { content: '${r.fontCharacter}'; }`},r=[];for(let e of t.getIcons()){let t=n(e);t&&r.push(t)}for(let t in e){let n=e[t].definition.src.map(e=>`${$a(e.location)} format('${e.format}')`).join(`, `);r.push(`@font-face { src: ${n}; font-family: ${eo(t)}; font-display: block; }`)}return r.join(`
`)}}}var qF=`vs`,JF=`vs-dark`,YF=`hc-black`,XF=Jd.as(KS.ColorContribution),ZF=Jd.as(nv.ThemingContribution),QF=class{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?($F(e)?this.id=e:this.id=n+` `+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,J.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=eI(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,J.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){let n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=XF.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case qF:return X_.LIGHT;case YF:return X_.HIGH_CONTRAST;default:return X_.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let n=eI(this.themeData.base);e=n.rules,n.encodedTokensColors&&(t=n.encodedTokensColors)}let n=this.themeData.colors[`editor.foreground`],r=this.themeData.colors[`editor.background`];if(n||r){let t={token:``};n&&(t.foreground=n),r&&(t.background=r),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=IF.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){let r=this.tokenTheme._match([e].concat(t).join(`.`)).metadata,i=tu.getForeground(r),a=tu.getFontStyle(r);return{foreground:i,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}};function $F(e){return e===qF||e===JF||e===YF}function eI(e){switch(e){case qF:return UF;case JF:return WF;case YF:return GF}}function tI(e){return new QF(e,eI(e))}var nI=class extends j{constructor(){super(),this._onColorThemeChange=this._register(new N),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(qF,tI(qF)),this._knownThemes.set(JF,tI(JF)),this._knownThemes.set(YF,tI(YF));let e=KF();this._codiconCSS=e.getCSS(),this._themeCSS=``,this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(qF),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),no(`(forced-colors: active)`,()=>{this._updateActualTheme()})}registerEditorContainer(e){return Da(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Aa(),this._globalStyleElement.className=`monaco-colors`,this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),j.None}_registerShadowDomContainer(e){let t=Aa(e);return t.className=`monaco-colors`,t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t){this._styleElements.splice(e,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw Error(`Illegal theme name!`);if(!$F(t.base)&&!$F(e))throw Error(`Illegal theme base!`);this._knownThemes.set(e,new QF(e,t)),$F(e)&&this._knownThemes.forEach(t=>{t.base===e&&t.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(qF),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){let e=this._autoDetectHighContrast&&window.matchMedia(`(forced-colors: active)`).matches?this._knownThemes.get(YF):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:n=>{t[n]||(e.push(n),t[n]=!0)}};ZF.getThemingParticipants().forEach(e=>e(this._theme,n,this._environment));let r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(HF(r)),this._themeCSS=e.join(`
`),this._updateCSS(),Iu.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}},rI=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},iI=function(e,t){return function(n,r){t(n,r,e)}},aI=`data-keybinding-context`,oI=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]===t?!1:(this._value[e]=t,!0)}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){let t=this._value[e];return t===void 0&&this._parent?this._parent.getValue(e):t}},sI=class extends oI{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};sI.INSTANCE=new sI;var cI=class e extends oI{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=ps.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(e=>{if(e.source===6){let e=Array.from(k.map(this._values,([e])=>e));this._values.clear(),n.fire(new dI(e))}else{let t=[];for(let n of e.affectedKeys){let e=`config.${n}`,r=this._values.findSuperstr(e);r!==void 0&&(t.push(...k.map(r,([e])=>e)),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}n.fire(new dI(t))}})}dispose(){this._listener.dispose()}getValue(t){if(t.indexOf(e._keyPrefix)!==0)return super.getValue(t);if(this._values.has(t))return this._values.get(t);let n=t.substr(e._keyPrefix.length),r=this._configurationService.getValue(n),i;switch(typeof r){case`number`:case`boolean`:case`string`:i=r;break;default:i=Array.isArray(r)?JSON.stringify(r):r}return this._values.set(t,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};cI._keyPrefix=`config.`;var lI=class{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){this._defaultValue===void 0?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}},uI=class{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}},dI=class{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}},fI=class{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}},pI=class{constructor(e){this._onDidChangeContext=new Rt({merge:e=>new fI(e)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);return new lI(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);return new hI(this,e)}contextMatchesRules(e){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);let t=this.getContextValuesContainer(this._myContextId);return zg.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new uI(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new uI(e))}getContext(e){return this._isDisposed?sI.INSTANCE:this.getContextValuesContainer(gI(e))}},mI=class extends pI{constructor(e){super(0),this._contexts=new Map,this._toDispose=new A,this._lastContextId=0;let t=new cI(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?sI.INSTANCE:this._contexts.get(e)||sI.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error(`ContextKeyService has been disposed`);let t=++this._lastContextId;return this._contexts.set(t,new oI(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};mI=rI([iI(0,mf)],mI);var hI=class extends pI{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new kt,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(aI)){let e=``;this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(`, `)),console.error(`Element already has context attribute${e?`: `+e:``}`)}this._domNode.setAttribute(aI,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||=(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(aI),!0)}getContextValuesContainer(e){return this._isDisposed?sI.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error(`ScopedContextKeyService has been disposed`);return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}};function gI(e){for(;e;){if(e.hasAttribute(aI)){let t=e.getAttribute(aI);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}uc.registerCommand(`setContext`,function(e,t,n){e.get(Pg).createKey(String(t),n)}),uc.registerCommand({id:`getContextKeyInfo`,handler(){return[...H.all()].sort((e,t)=>e.key.localeCompare(t.key))},description:{description:t(`getContextKeyInfo`,`A command that returns information about context keys`),args:[]}}),uc.registerCommand(`_generateContextKeyInfo`,function(){let e=[],t=new Set;for(let n of H.all())t.has(n.key)||(t.add(n.key),e.push(n));e.sort((e,t)=>e.key.localeCompare(t.key)),console.log(JSON.stringify(e,void 0,2))});function _I(e){let t=e.definition;for(;t instanceof $l;)t=t.definition;return`.codicon-${e.id}:before { content: '${t.fontCharacter}'; }`}var vI;(function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};let n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return r-n<=0?{start:0,end:0}:{start:n,end:r}}e.intersect=t;function n(e){return e.end-e.start<=0}e.isEmpty=n;function r(e,r){return!n(t(e,r))}e.intersects=r;function i(e,t){let r=[],i={start:e.start,end:Math.min(t.start,e.end)},a={start:Math.max(t.end,e.start),end:e.end};return n(i)||r.push(i),n(a)||r.push(a),r}e.relativeComplement=i})(vI||={});var yI;(function(e){e[e.AVOID=0]=`AVOID`,e[e.ALIGN=1]=`ALIGN`})(yI||={});function bI(e,t,n){let r=n.mode===yI.ALIGN?n.offset:n.offset+n.size,i=n.mode===yI.ALIGN?n.offset+n.size:n.offset;return n.position===0?t<=e-r?r:t<=i?i-t:Math.max(e-t,0):t<=i?i-t:t<=e-r?r:0}var xI=class e extends j{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=j.None,this.toDisposeOnSetContainer=j.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=V(`.context-view`),this.useFixedPosition=!1,this.useShadowDOM=!1,Ja(this.view),this.setContainer(e,t),this._register(Ot(()=>this.setContainer(null,1)))}setContainer(t,n){var r;if(this.container&&=(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(r=this.shadowRootHostElement)==null||r.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),null),t){if(this.container=t,this.useFixedPosition=n!==1,this.useShadowDOM=n===3,this.useShadowDOM){this.shadowRootHostElement=V(`.shadow-root-host`),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:`open`});let e=document.createElement(`style`);e.textContent=SI,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(V(`slot`))}else this.container.appendChild(this.view);let r=new A;e.BUBBLE_UP_EVENTS.forEach(e=>{r.add(Xi(this.container,e,e=>{this.onDOMEvent(e,!1)}))}),e.BUBBLE_DOWN_EVENTS.forEach(e=>{r.add(Xi(this.container,e,e=>{this.onDOMEvent(e,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){this.isVisible()&&this.hide(),Gi(this.view),this.view.className=`context-view`,this.view.style.top=`0px`,this.view.style.left=`0px`,this.view.style.zIndex=`2500`,this.view.style.position=this.useFixedPosition?`fixed`:`absolute`,qa(this.view),this.toDisposeOnClean=e.render(this.view)||j.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(_&&oi.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(Ia(e)){let n=_a(e);t={top:n.top,left:n.left,width:n.width,height:n.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};let n=ya(this.view),r=Sa(this.view),i=this.delegate.anchorPosition||0,a=this.delegate.anchorAlignment||0,o=this.delegate.anchorAxisAlignment||0,s,c;if(o===0){let e={offset:t.top-window.pageYOffset,size:t.height,position:i===0?0:1},o={offset:t.left,size:t.width,position:a===0?0:1,mode:yI.ALIGN};s=bI(window.innerHeight,r,e)+window.pageYOffset,vI.intersects({start:s,end:s+r},{start:e.offset,end:e.offset+e.size})&&(o.mode=yI.AVOID),c=bI(window.innerWidth,n,o)}else{let e={offset:t.left,size:t.width,position:a===0?0:1},o={offset:t.top,size:t.height,position:i===0?0:1,mode:yI.ALIGN};c=bI(window.innerWidth,n,e),vI.intersects({start:c,end:c+n},{start:e.offset,end:e.offset+e.size})&&(o.mode=yI.AVOID),s=bI(window.innerHeight,r,o)+window.pageYOffset}this.view.classList.remove(`top`,`bottom`,`left`,`right`),this.view.classList.add(i===0?`bottom`:`top`),this.view.classList.add(a===0?`left`:`right`),this.view.classList.toggle(`fixed`,this.useFixedPosition);let l=_a(this.container);this.view.style.top=`${s-(this.useFixedPosition?_a(this.view).top:l.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?_a(this.view).left:l.left)}px`,this.view.style.width=`initial`}hide(e){let t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Ja(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Ca(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};xI.BUBBLE_UP_EVENTS=[`click`,`keydown`,`focus`,`blur`],xI.BUBBLE_DOWN_EVENTS=[`click`];var SI=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function CI(...e){return function(t,n){for(let r=0,i=e.length;r<i;r++){let i=e[r](t,n);if(i)return i}return null}}const wI=TI.bind(void 0,!0);function TI(e,t,n){if(!n||n.length<t.length)return null;let r;return r=e?Oo(n,t):n.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function EI(e,t){let n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?null:[{start:n,end:n+e.length}]}function DI(e,t){return OI(e.toLowerCase(),t.toLowerCase(),0,0)}function OI(e,t,n,r){if(n===e.length)return[];if(r===t.length)return null;if(e[n]===t[r]){let i=null;return(i=OI(e,t,n+1,r+1))?LI({start:r,end:r+1},i):null}return OI(e,t,n,r+1)}function kI(e){return 97<=e&&e<=122}function AI(e){return 65<=e&&e<=90}function jI(e){return 48<=e&&e<=57}function MI(e){return e===32||e===9||e===10||e===13}var NI=new Set;`\`~!@#$%^&*()-=+[{]}\\|;:'",.<>/?`.split(``).forEach(e=>NI.add(e.charCodeAt(0)));function PI(e){return MI(e)||NI.has(e)}function FI(e,t){return e===t||PI(e)&&PI(t)}function II(e){return kI(e)||AI(e)||jI(e)}function LI(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function RI(e,t){for(let n=t;n<e.length;n++){let t=e.charCodeAt(n);if(AI(t)||jI(t)||n>0&&!II(e.charCodeAt(n-1)))return n}return e.length}function zI(e,t,n,r){if(n===e.length)return[];if(r===t.length||e[n]!==t[r].toLowerCase())return null;{let i=null,a=r+1;for(i=zI(e,t,n+1,r+1);!i&&(a=RI(t,a))<t.length;)i=zI(e,t,n+1,a),a++;return i===null?null:LI({start:r,end:r+1},i)}}function BI(e){let t=0,n=0,r=0,i=0,a=0;for(let o=0;o<e.length;o++)a=e.charCodeAt(o),AI(a)&&t++,kI(a)&&n++,II(a)&&r++,jI(a)&&i++;return{upperPercent:t/e.length,lowerPercent:n/e.length,alphaPercent:r/e.length,numericPercent:i/e.length}}function VI(e){let{upperPercent:t,lowerPercent:n}=e;return n===0&&t>.6}function HI(e){let{upperPercent:t,lowerPercent:n,alphaPercent:r,numericPercent:i}=e;return n>.2&&t<.8&&r>.6&&i<.2}function UI(e){let t=0,n=0,r=0,i=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a),AI(r)&&t++,kI(r)&&n++,MI(r)&&i++;return(t===0||n===0)&&i===0?e.length<=30:t<=5}function WI(e,t){if(!t||(t=t.trim(),t.length===0)||!UI(e)||t.length>60)return null;let n=BI(t);if(!HI(n)){if(!VI(n))return null;t=t.toLowerCase()}let r=null,i=0;for(e=e.toLowerCase();i<t.length&&(r=zI(e,t,0,i))===null;)i=RI(t,i+1);return r}function GI(e,t,n=!1){if(!t||t.length===0)return null;let r=null,i=0;for(e=e.toLowerCase(),t=t.toLowerCase();i<t.length&&(r=KI(e,t,0,i,n))===null;)i=qI(t,i+1);return r}function KI(e,t,n,r,i){if(n===e.length)return[];if(r===t.length)return null;if(FI(e.charCodeAt(n),t.charCodeAt(r))){let a=null,o=r+1;if(a=KI(e,t,n+1,r+1,i),!i)for(;!a&&(o=qI(t,o))<t.length;)a=KI(e,t,n+1,o,i),o++;return a===null?null:LI({start:r,end:r+1},a)}else return null}function qI(e,t){for(let n=t;n<e.length;n++)if(PI(e.charCodeAt(n))||n>0&&PI(e.charCodeAt(n-1)))return n;return e.length}var JI=CI(wI,WI,EI),YI=CI(wI,WI,DI),XI=new _s(1e4);function ZI(e,t,n=!1){if(typeof e!=`string`||typeof t!=`string`)return null;let r=XI.get(e);r||(r=new RegExp(fo(e),`i`),XI.set(e,r));let i=r.exec(t);return i?[{start:i.index,end:i.index+i[0].length}]:n?YI(e,t):JI(e,t)}function QI(e,t,n,r,i,a){let o=Math.min(13,e.length);for(;n<o;n++){let o=pL(e,t,n,r,i,a,!1);if(o)return o}return[0,a]}function $I(e){if(e===void 0)return[];let t=[],n=e[1];for(let r=e.length-1;r>1;r--){let i=e[r]+n,a=t[t.length-1];a&&a.end===i?a.end=i+1:t.push({start:i,end:i+1})}return t}var eL=128;function tL(){let e=[],t=[];for(let e=0;e<=eL;e++)t[e]=0;for(let n=0;n<=eL;n++)e.push(t.slice(0));return e}function nL(e){let t=[];for(let n=0;n<=e;n++)t[n]=0;return t}var rL=nL(2*eL),iL=nL(2*eL),aL=tL(),oL=tL(),sL=tL();function cL(e,t){if(t<0||t>=e.length)return!1;let n=e.codePointAt(t);switch(n){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!Jo(n)}}function lL(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function uL(e,t,n){return t[e]!==n[e]}function dL(e,t,n,r,i,a,o=!1){for(;t<n&&i<a;)e[t]===r[i]&&(o&&(rL[t]=i),t+=1),i+=1;return t===n}var fL;(function(e){e.Default=[-100,0];function t(e){return!e||e.length===2&&e[0]===-100&&e[1]===0}e.isDefault=t})(fL||={});function pL(e,t,n,r,i,a,o){let s=e.length>eL?eL:e.length,c=r.length>eL?eL:r.length;if(n>=s||a>=c||s-n>c-a||!dL(t,n,s,i,a,c,!0))return;mL(s,c,n,a,t,i);let l=1,u=1,d=n,f=a,p=[!1];for(l=1,d=n;d<s;l++,d++){let o=rL[d],m=iL[d],h=d+1<s?iL[d+1]:c;for(u=o-a+1,f=o;f<h;u++,f++){let s=-(2**53-1),h=!1;f<=m&&(s=hL(e,t,d,n,r,i,f,c,a,aL[l-1][u-1]===0,p));let g=0;s!==2**53-1&&(h=!0,g=s+oL[l-1][u-1]);let _=f>o,v=_?oL[l][u-1]+(aL[l][u-1]>0?-5:0):0,y=f>o+1&&aL[l][u-1]>0,b=y?oL[l][u-2]+(aL[l][u-2]>0?-5:0):0;if(y&&(!_||b>=v)&&(!h||b>=g))oL[l][u]=b,sL[l][u]=3,aL[l][u]=0;else if(_&&(!h||v>=g))oL[l][u]=v,sL[l][u]=2,aL[l][u]=0;else if(h)oL[l][u]=g,sL[l][u]=1,aL[l][u]=aL[l-1][u-1]+1;else throw Error(`not possible`)}}if(!p[0]&&!o)return;l--,u--;let m=[oL[l][u],a],h=0,g=0;for(;l>=1;){let e=u;do{let t=sL[l][e];if(t===3)e-=2;else if(t===2)--e;else break}while(e>=1);h>1&&t[n+l-1]===i[a+u-1]&&!uL(e+a-1,r,i)&&h+1>aL[l][e]&&(e=u),e===u?h++:h=1,g||=e,l--,u=e-1,m.push(u)}c===s&&(m[0]+=2);let _=g-s;return m[0]-=_,m}function mL(e,t,n,r,i,a){let o=e-1,s=t-1;for(;o>=n&&s>=r;)i[o]===a[s]&&(iL[o]=s,o--),s--}function hL(e,t,n,r,i,a,o,s,c,l,u){if(t[n]!==a[o])return-(2**53-1);let d=1,f=!1;return o===n-r?d=e[n]===i[o]?7:5:uL(o,i,a)&&(o===0||!uL(o-1,i,a))?(d=e[n]===i[o]?7:5,f=!0):cL(a,o)&&(o===0||!cL(a,o-1))?d=5:(cL(a,o-1)||lL(a,o-1))&&(d=5,f=!0),d>1&&n===r&&(u[0]=!0),f||=uL(o,i,a)||cL(a,o-1)||lL(a,o-1),n===r?o>c&&(d-=f?3:5):l?d+=f?2:0:d+=f?0:1,o+1===s&&(d-=f?3:5),d}function gL(e,t,n,r,i,a,o){return _L(e,t,n,r,i,a,!0,o)}function _L(e,t,n,r,i,a,o,s){let c=pL(e,t,n,r,i,a,s);if(c&&!o)return c;if(e.length>=3){let t=Math.min(7,e.length-1);for(let o=n+1;o<t;o++){let t=vL(e,o);if(t){let e=pL(t,t.toLowerCase(),n,r,i,a,s);e&&(e[0]-=3,(!c||e[0]>c[0])&&(c=e))}}}return c}function vL(e,t){if(t+1>=e.length)return;let n=e[t],r=e[t+1];if(n!==r)return e.slice(0,t)+r+n+e.slice(t+2)}var yL=RegExp(`\\$\\(${eu.iconNameExpression}(?:${eu.iconModifierExpression})?\\)`,`g`),bL=RegExp(`(\\\\)?${yL.source}`,`g`);function xL(e){return e.replace(bL,(e,t)=>t?e:`\\${e}`)}var SL=RegExp(`\\\\${yL.source}`,`g`);function CL(e){return e.replace(SL,e=>`\\${e}`)}var wL=RegExp(`(\\s)?(\\\\)?${yL.source}(\\s)?`,`g`);function TL(e){return e.indexOf(`$(`)===-1?e:e.replace(wL,(e,t,n,r)=>n?e:t||r||``)}function EL(e){let t=e.indexOf(`$(`);return t===-1?{text:e}:DL(e,t)}function DL(e,t){let n=[],r=``;function i(e){if(e){r+=e;for(let t of e)n.push(s)}}let a=-1,o=``,s=0,c,l,u=t,d=e.length;for(i(e.substr(0,t));u<d;){if(c=e[u],l=e[u+1],c===`$`&&l===`(`)a=u,i(o),o=`$(`,u++;else if(c===`)`&&a!==-1){let e=u-a+1;s+=e,a=-1,o=``}else a===-1?i(c):/^[a-z0-9\-]$/i.test(c)?o+=c:(i(o),a=-1,o=``);u++}return i(o),{text:r,iconOffsets:n}}function OL(e,t,n=!1){let{text:r,iconOffsets:i}=t;if(!i||i.length===0)return ZI(e,r,n);let a=lo(r,` `),o=r.length-a.length,s=ZI(e,a,n);if(s)for(let e of s){let t=i[e.start+o]+o;e.start+=t,e.end+=t}return s}const kL=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,AL=/(&amp;)?(&amp;)([^\s&])/g;var jL=Zl(`menu-selection`,$l.check),ML=Zl(`menu-submenu`,$l.chevronRight),NL;(function(e){e[e.Right=0]=`Right`,e[e.Left=1]=`Left`})(NL||={});var PL=class e extends vN{constructor(e,t,n={}){e.classList.add(`monaco-menu-container`),e.setAttribute(`role`,`presentation`);let r=document.createElement(`div`);r.classList.add(`monaco-menu`),r.setAttribute(`role`,`presentation`),super(r,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,n,i),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...p||m?[10]:[]],keyDown:!0}}),this.menuElement=r,this.actionsList.setAttribute(`role`,`menu`),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new A),this.initializeStyleSheet(e),this._register(Yv.addTarget(r)),R(r,z.KEY_DOWN,e=>{new vi(e).equals(2)&&e.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(R(r,z.KEY_DOWN,e=>{let t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){La.stop(e,!0);let n=this.mnemonics.get(t);if(n.length===1&&(n[0]instanceof IL&&n[0].container&&this.focusItemByElement(n[0].container),n[0].onClick(e)),n.length>1){let e=n.shift();e&&e.container&&(this.focusItemByElement(e.container),n.push(e)),this.mnemonics.set(t,n)}}})),m&&this._register(R(r,z.KEY_DOWN,e=>{let t=new vi(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),La.stop(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),La.stop(e,!0))})),this._register(R(this.domNode,z.MOUSE_OUT,e=>{let t=e.relatedTarget;Ca(t,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())})),this._register(R(this.actionsList,z.MOUSE_OVER,e=>{let t=e.target;if(!(!t||!Ca(t,this.actionsList)||t===this.actionsList)){for(;t.parentElement!==this.actionsList&&t.parentElement!==null;)t=t.parentElement;if(t.classList.contains(`action-item`)){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})),this._register(Yv.addTarget(this.actionsList)),this._register(R(this.actionsList,Jv.Tap,e=>{let t=e.initialTarget;if(!(!t||!Ca(t,this.actionsList)||t===this.actionsList)){for(;t.parentElement!==this.actionsList&&t.parentElement!==null;)t=t.parentElement;if(t.classList.contains(`action-item`)){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}));let i={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Yk(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let a=this.scrollableElement.getDomNode();a.style.position=``,this._register(R(r,Jv.Change,e=>{La.stop(e,!0);let t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})})),this._register(R(a,z.MOUSE_UP,e=>{e.preventDefault()})),r.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(e=>n.submenuIds?.has(e.id)?(console.warn(`Found submenu cycle: ${e.id}`),!1):!0),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(e=>!(e instanceof LL)).forEach((e,t,n)=>{e.updatePositionInSet(t+1,n.length)})}initializeStyleSheet(t){Da(t)?(this.styleSheet=Aa(t),this.styleSheet.textContent=zL):(e.globalStyleSheet||(e.globalStyleSheet=Aa(),e.globalStyleSheet.textContent=zL),this.styleSheet=e.globalStyleSheet)}style(e){let t=this.getContainer(),n=e.foregroundColor?`${e.foregroundColor}`:``,r=e.backgroundColor?`${e.backgroundColor}`:``,i=e.borderColor?`1px solid ${e.borderColor}`:``,a=e.shadowColor?`0 2px 4px ${e.shadowColor}`:``;t.style.border=i,this.domNode.style.color=n,this.domNode.style.backgroundColor=r,t.style.boxShadow=a,this.viewItems&&this.viewItems.forEach(t=>{(t instanceof FL||t instanceof LL)&&t.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){let t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++)if(e===this.actionsList.children[t]){this.focusedItem=t;break}}updateFocus(e){super.updateFocus(e,!0),this.focusedItem!==void 0&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof q_)return new LL(t.context,e,{icon:!0});if(e instanceof J_){let r=new IL(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){let e=r.getMnemonic();if(e&&r.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(r),this.mnemonics.set(e,t)}}return r}else{let n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){let r=t.getKeyBinding(e);if(r){let e=r.getLabel();e&&(n.keybinding=e)}}let r=new FL(t.context,e,n);if(t.enableMnemonics){let e=r.getMnemonic();if(e&&r.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(r),this.mnemonics.set(e,t)}}return r}}},FL=class extends hN{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon===void 0?!1:n.icon,this.options.label=n.label===void 0?!0:n.label,this.cssClass=``,this.options.label&&n.enableMnemonics){let e=this.getAction().label;if(e){let t=kL.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Li(()=>{this.element&&(this._register(R(this.element,z.MOUSE_UP,e=>{if(La.stop(e,!0),$r){if(new Ci(e).rightButton)return;this.onClick(e)}else setTimeout(()=>{this.onClick(e)},0)})),this._register(R(this.element,z.CONTEXT_MENU,e=>{La.stop(e,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=B(this.element,V(`a.action-menu-item`)),this._action.id===q_.ID?this.item.setAttribute(`role`,`presentation`):(this.item.setAttribute(`role`,`menuitem`),this.mnemonic&&this.item.setAttribute(`aria-keyshortcuts`,`${this.mnemonic}`)),this.check=B(this.item,V(`span.menu-item-check`+jL.cssSelector)),this.check.setAttribute(`role`,`none`),this.label=B(this.item,V(`span.action-label`)),this.options.label&&this.options.keybinding&&(B(this.item,V(`span.keybinding`)).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute(`aria-posinset`,`${e}`),this.item.setAttribute(`aria-setsize`,`${t}`))}updateLabel(){if(this.label&&this.options.label){Gi(this.label);let e=TL(this.getAction().label);if(e){let t=RL(e);this.options.enableMnemonics||(e=t),this.label.setAttribute(`aria-label`,t.replace(/&&/g,`&`));let n=kL.exec(e);if(n){e=oo(e),AL.lastIndex=0;let t=AL.exec(e);for(;t&&t[1];)t=AL.exec(e);let r=e=>e.replace(/&amp;&amp;/g,`&amp;`);t?this.label.append(lo(r(e.substr(0,t.index)),` `),V(`u`,{"aria-hidden":`true`},t[3]),uo(r(e.substr(t.index+t[0].length)),` `)):this.label.innerText=r(e).trim(),this.item&&this.item.setAttribute(`aria-keyshortcuts`,(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,`&`).trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=t({key:`titleLabel`,comment:[`action title`,`action keybinding`]},`{0} ({1})`,e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(` `)),this.options.icon&&this.label?(this.cssClass=this.getAction().class||``,this.label.classList.add(`icon`),this.cssClass&&this.label.classList.add(...this.cssClass.split(` `)),this.updateEnabled()):this.label&&this.label.classList.remove(`icon`)}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove(`disabled`),this.element.removeAttribute(`aria-disabled`)),this.item&&(this.item.classList.remove(`disabled`),this.item.removeAttribute(`aria-disabled`),this.item.tabIndex=0)):(this.element&&(this.element.classList.add(`disabled`),this.element.setAttribute(`aria-disabled`,`true`)),this.item&&(this.item.classList.add(`disabled`),this.item.setAttribute(`aria-disabled`,`true`)))}updateChecked(){if(!this.item)return;let e=this.getAction().checked;this.item.classList.toggle(`checked`,!!e),e===void 0?(this.item.setAttribute(`role`,`menuitem`),this.item.setAttribute(`aria-checked`,``)):(this.item.setAttribute(`role`,`menuitemcheckbox`),this.item.setAttribute(`aria-checked`,e?`true`:`false`))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;let e=this.element&&this.element.classList.contains(`focused`),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:``;this.item&&(this.item.style.color=t?t.toString():``,this.item.style.backgroundColor=n?n.toString():``),this.check&&(this.check.style.color=t?t.toString():``),this.container&&(this.container.style.border=r)}style(e){this.menuStyle=e,this.applyStyle()}},IL=class extends FL{constructor(e,t,n,r){super(e,e,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new A),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:NL.Right,this.showScheduler=new Li(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Li(()=>{this.element&&!Ca(ka(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add(`monaco-submenu-item`),this.item.tabIndex=0,this.item.setAttribute(`aria-haspopup`,`true`),this.updateAriaExpanded(`false`),this.submenuIndicator=B(this.item,V(`span.submenu-indicator`+ML.cssSelector)),this.submenuIndicator.setAttribute(`aria-hidden`,`true`)),this._register(R(this.element,z.KEY_UP,e=>{let t=new vi(e);(t.equals(17)||t.equals(3))&&(La.stop(e,!0),this.createSubmenu(!0))})),this._register(R(this.element,z.KEY_DOWN,e=>{let t=new vi(e);ka()===this.item&&(t.equals(17)||t.equals(3))&&La.stop(e,!0)})),this._register(R(this.element,z.MOUSE_OVER,e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(R(this.element,z.MOUSE_LEAVE,e=>{this.mouseOver=!1})),this._register(R(this.element,z.FOCUS_OUT,e=>{this.element&&!Ca(ka(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){La.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded(`false`),this.submenuContainer&&=(this.submenuDisposables.clear(),void 0)}}calculateSubmenuMenuLayout(e,t,n,r){let i={top:0,left:0};return i.left=bI(e.width,t.width,{position:r===NL.Right?0:1,offset:n.left,size:n.width}),i.left>=n.left&&i.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(i.left=n.left+10),n.top+=10,n.height=0),i.top=bI(e.height,t.height,{position:0,offset:n.top,size:0}),i.top+t.height===n.top&&i.top+n.height+t.height<=e.height&&(i.top+=n.height),i}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded(`true`),this.submenuContainer=B(this.element,V(`div.monaco-submenu`)),this.submenuContainer.classList.add(`menubar-menu-items-holder`,`context-view`);let t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||`0`)||0;this.submenuContainer.style.zIndex=`1`,this.submenuContainer.style.position=`fixed`,this.submenuContainer.style.top=`0`,this.submenuContainer.style.left=`0`,this.parentData.submenu=new PL(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Y_],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);let r=this.element.getBoundingClientRect(),i={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},a=this.submenuContainer.getBoundingClientRect(),{top:o,left:s}=this.calculateSubmenuMenuLayout(new ma(window.innerWidth,window.innerHeight),ma.lift(a),i,this.expandDirection);this.submenuContainer.style.left=`${s-a.left}px`,this.submenuContainer.style.top=`${o-a.top}px`,this.submenuDisposables.add(R(this.submenuContainer,z.KEY_UP,e=>{new vi(e).equals(15)&&(La.stop(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(R(this.submenuContainer,z.KEY_DOWN,e=>{new vi(e).equals(15)&&La.stop(e,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute(`aria-expanded`,e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;let e=this.element&&this.element.classList.contains(`focused`)&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e?`${e}`:``),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&=(this.mysubmenu.dispose(),null),this.submenuContainer&&=void 0}},LL=class extends gN{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:``)}};function RL(e){let t=kL,n=t.exec(e);if(!n)return e;let r=!n[1];return e.replace(t,r?`$2$3`:``).trim()}var zL=`
.monaco-menu {
	font-size: 13px;

}

${_I(jL)}
${_I(ML)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function BL(e,t){let n=Object.create(null);for(let r in t){let i=t[r];i&&(n[r]=VT(i,e))}return n}function VL(e,t,n){function r(){let r=BL(e.getColorTheme(),t);typeof n==`function`?n(r):n.style(r)}return r(),e.onDidColorThemeChange(r)}function HL(e,t,n){return VL(t,{badgeBackground:n?.badgeBackground||wC,badgeForeground:n?.badgeForeground||TC,badgeBorder:QS},e)}function UL(e,t,n){return VL(t,Object.assign(Object.assign({},WL),n||{}),e)}const WL={listFocusBackground:Iw,listFocusForeground:Lw,listFocusOutline:Rw,listActiveSelectionBackground:zw,listActiveSelectionForeground:Bw,listActiveSelectionIconForeground:Vw,listFocusAndSelectionBackground:zw,listFocusAndSelectionForeground:Bw,listInactiveSelectionBackground:Hw,listInactiveSelectionIconForeground:Ww,listInactiveSelectionForeground:Uw,listInactiveFocusBackground:Gw,listInactiveFocusOutline:Kw,listHoverBackground:qw,listHoverForeground:Jw,listDropBackground:Yw,listSelectionOutline:$S,listHoverOutline:$S,listFilterWidgetBackground:Qw,listFilterWidgetOutline:$w,listFilterWidgetNoMatchesOutline:eT,listMatchesShadow:rC,treeIndentGuidesStroke:tT,tableColumnsBorder:nT},GL={shadowColor:rC,borderColor:sT,foregroundColor:cT,backgroundColor:lT,selectionForegroundColor:uT,selectionBackgroundColor:dT,selectionBorderColor:fT,separatorColor:pT};function KL(e,t,n){return VL(t,Object.assign(Object.assign({},GL),n),e)}var qL=class{constructor(e,t,n,r,i){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.themeService=i,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,r=Ia(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let i=e.getMenuClassName?e.getMenuClassName():``;i&&(r.className+=` `+i),this.options.blockMouse&&(this.block=r.appendChild(V(`.context-view-block`)),this.block.style.position=`fixed`,this.block.style.cursor=`initial`,this.block.style.left=`0`,this.block.style.top=`0`,this.block.style.width=`100%`,this.block.style.height=`100%`,this.block.style.zIndex=`-1`,R(this.block,z.MOUSE_DOWN,e=>e.stopPropagation()));let a=new A,o=e.actionRunner||new K_;return o.onBeforeRun(this.onActionRun,this,a),o.onDidRun(this.onDidActionRun,this,a),n=new PL(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:o,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)}),a.add(KL(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(R(window,z.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(R(window,z.MOUSE_DOWN,e=>{if(e.defaultPrevented)return;let t=new Ci(e),n=t.target;if(!t.rightButton){for(;n;){if(n===r)return;n=n.parentElement}this.contextViewService.hideContextView(!0)}})),Dt(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:t=>{e.onHide&&e.onHide(!!t),this.block&&=(this.block.remove(),null),this.focusToReturn&&this.focusToReturn.focus()}},r,!!r)}onActionRun(e){this.telemetryService.publicLog2(`workbenchActionExecuted`,{id:e.action.id,from:`contextMenu`}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!ft(e.error)&&this.notificationService.error(e.error)}},JL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},YL=function(e,t){return function(n,r){t(n,r,e)}},XL=class extends j{constructor(e,t,n,r,i){super(),this.contextMenuHandler=new qL(n,e,t,r,i)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),to.getInstance().resetKeyStatus()}};XL=JL([YL(0,mv),YL(1,$g),YL(2,VN),YL(3,yP),YL(4,Z_)],XL);const ZL=Ur(`layoutService`);var QL=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$L=function(e,t){return function(n,r){t(n,r,e)}},eR=class extends j{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=j.None,this.container=e.container,this.contextView=this._register(new xI(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);let r=Ot(()=>{this.currentViewDisposable===r&&this.hideContextView()});return this.currentViewDisposable=r,r}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};eR=QL([$L(0,ZL)],eR);const tR=Ur(`dialogService`);var nR=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}},rR=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){let n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),r),r.incoming.set(this._hashFn(e),n)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),n=this._nodes.get(t);return n||(n=new nR(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(`, `)}], (outgoing)[${[...n.outgoing.keys()].join(`,`)}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){let n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(let[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(` -> `);t.add(n);let e=this._findCycle(r,t);if(e)return e;t.delete(n)}}},iR=class extends Error{constructor(e){super(`cyclic dependency between services`),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}},aR=class e{constructor(e=new dM,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Vr,this)}createChild(t){return new e(t,this._strict,this)}invokeFunction(e,...t){let n=oR.traceInvocation(e),r=!1;try{return e({get:(e,t)=>{if(r)throw ht(`service accessor is only valid during the invocation of its target method`);let i=this._getOrCreateServiceInstance(e,n);if(!i&&t!==Wr)throw Error(`[invokeFunction] unknown service '${e}'`);return i}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){let n,r;return e instanceof Sf?(n=oR.traceCreation(e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=oR.traceCreation(e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){let r=Br.getServiceDependencies(e).sort((e,t)=>e.index-t.index),i=[];for(let t of r){let r=this._getOrCreateServiceInstance(t.id,n);if(!r&&this._strict&&!t.optional)throw Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);i.push(r)}let a=r.length>0?r[0].index:t.length;if(t.length!==a){console.warn(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${t.length} static arguments`);let n=a-t.length;t=n>0?t.concat(Array(n)):t.slice(0,a)}return new e(...t,...i)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Sf)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw Error(`illegalState - setting UNKNOWN service instance`)}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Sf?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){let r=new rR(e=>e.id.toString()),i=0,a=[{id:e,desc:t,_trace:n}];for(;a.length;){let t=a.pop();if(r.lookupOrInsertNode(t),i++>1e3)throw new iR(r);for(let n of Br.getServiceDependencies(t.desc.ctor)){let i=this._getServiceInstanceOrDescriptor(n.id);if(!i&&!n.optional&&console.warn(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`),i instanceof Sf){let e={id:n.id,desc:i,_trace:t._trace.branch(n.id,!0)};r.insertEdge(t,e),a.push(e)}}}for(;;){let e=r.roots();if(e.length===0){if(!r.isEmpty())throw new iR(r);break}for(let{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof Sf){let e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}r.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,i){if(this._services.get(e)instanceof Sf)return this._createServiceInstance(t,n,r,i);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,i);throw Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,r){if(n){let n=new zi(()=>this._createInstance(e,t,r));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];let r=n.value,i=r[t];return typeof i==`function`?(i=i.bind(r),e[t]=i,i):i},set(e,t,r){return n.value[t]=r,!0}})}else return this._createInstance(e,t,r)}},oR=class e{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(t){return e._None}static traceCreation(t){return e._None}branch(t,n){let r=new e(2,t.toString());return this._dep.push([t,n,r]),r}stop(){let t=Date.now()-this._start;e._totals+=t;let n=!1;function r(e,t){let i=[],a=Array(e+1).join(`	`);for(let[o,s,c]of t._dep)if(s&&c){n=!0,i.push(`${a}CREATES -> ${o}`);let t=r(e+1,c);t&&i.push(t)}else i.push(`${a}uses -> ${o}`);return i.join(`
`)}let i=[`${this.type===0?`CREATE`:`CALL`} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${e._totals.toFixed(2)}ms)`];(t>2||n)&&console.log(i.join(`
`))}};oR._None=new class extends oR{constructor(){super(-1,null)}stop(){}branch(){return this}},oR._totals=0;const sR=Ur(`labelService`);var cR=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}},lR=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};function uR(e,t){let n=[];for(let r of t){if(e.start>=r.range.end)continue;if(e.end<r.range.start)break;let t=vI.intersect(e,r.range);vI.isEmpty(t)||n.push({range:t,size:r.size})}return n}function dR({start:e,end:t},n){return{start:e+n,end:t+n}}function fR(e){let t=[],n=null;for(let r of e){let e=r.range.start,i=r.range.end,a=r.size;if(n&&a===n.size){n.range.end=i;continue}n={range:{start:e,end:i},size:a},t.push(n)}return t}function pR(...e){return fR(e.reduce((e,t)=>e.concat(t),[]))}var mR=class{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){let r=n.length-t,i=uR({start:0,end:e},this.groups),a=uR({start:e+t,end:1/0},this.groups).map(e=>({range:dR(e.range,r),size:e.size}));this.groups=pR(i,n.map((t,n)=>({range:{start:e+n,end:e+n+1},size:t.size})),a),this._size=this.groups.reduce((e,t)=>e+t.size*(t.range.end-t.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){let i=r.range.end-r.range.start,a=n+i*r.size;if(e<a)return t+Math.floor((e-n)/r.size);t+=i,n=a}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){let i=r.range.end-r.range.start,a=n+i;if(e<a)return t+(e-n)*r.size;t+=i*r.size,n=a}return-1}};function hR(e){try{e.parentElement&&e.parentElement.removeChild(e)}catch{}}var gR=class{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){let n=V(`.monaco-list-row`);t={domNode:n,templateId:e,templateData:this.getRenderer(e).renderTemplate(n)}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(t.classList.remove(`scrolling`),hR(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw Error(`No renderer found for ${e}`);return t}},_R=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},vR={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(e){return[e]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},yR=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},bR=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},xR=class{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function SR(e,t){return Array.isArray(e)&&Array.isArray(t)?Op(e,t):e===t}var CR=class{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,n)=>n,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=e=>`listitem`,e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>void 0}},wR=class e{constructor(t,n,r,i=vR){if(this.virtualDelegate=n,this.domId=`list_id_${++e.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ai(50),this.splicing=!1,this.dragOverAnimationStopDisposable=j.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=j.None,this.onDragLeaveTimeout=j.None,this.disposables=new A,this._onDidChangeContentHeight=new N,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw Error(`Horizontal scrolling and dynamic heights not supported simultaneously`);this.items=[],this.itemId=0,this.rangeMap=new mR;for(let e of r)this.renderers.set(e.templateId,e);this.cache=this.disposables.add(new gR(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement(`div`),this.domNode.className=`monaco-list`,this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle(`mouse-support`,typeof i.mouseSupport==`boolean`?i.mouseSupport:!0),this._horizontalScrolling=Ac(i,e=>e.horizontalScrolling,vR.horizontalScrolling),this.domNode.classList.toggle(`horizontal-scrolling`,this._horizontalScrolling),this.additionalScrollHeight=i.additionalScrollHeight===void 0?0:i.additionalScrollHeight,this.accessibilityProvider=new CR(i.accessibilityProvider),this.rowsContainer=document.createElement(`div`),this.rowsContainer.className=`monaco-list-rows`,Ac(i,e=>e.transformOptimization,vR.transformOptimization)&&(this.rowsContainer.style.transform=`translate3d(0px, 0px, 0px)`),this.disposables.add(Yv.addTarget(this.rowsContainer)),this.scrollable=new Fk(Ac(i,e=>e.smoothScrolling,!1)?125:0,e=>aa(e)),this.scrollableElement=this.disposables.add(new Jk(this.rowsContainer,{alwaysConsumeMouseWheel:Ac(i,e=>e.alwaysConsumeMouseWheel,vR.alwaysConsumeMouseWheel),horizontal:1,vertical:Ac(i,e=>e.verticalScrollMode,vR.verticalScrollMode),useShadows:Ac(i,e=>e.useShadows,vR.useShadows),mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(R(this.rowsContainer,Jv.Change,e=>this.onTouchChange(e))),this.disposables.add(R(this.scrollableElement.getDomNode(),`scroll`,e=>e.target.scrollTop=0)),this.disposables.add(R(this.domNode,`dragover`,e=>this.onDragOver(this.toDragEvent(e)))),this.disposables.add(R(this.domNode,`drop`,e=>this.onDrop(this.toDragEvent(e)))),this.disposables.add(R(this.domNode,`dragleave`,e=>this.onDragLeave(this.toDragEvent(e)))),this.disposables.add(R(this.domNode,`dragend`,e=>this.onDragEnd(e))),this.setRowLineHeight=Ac(i,e=>e.setRowLineHeight,vR.setRowLineHeight),this.setRowHeight=Ac(i,e=>e.setRowHeight,vR.setRowHeight),this.supportDynamicHeights=Ac(i,e=>e.supportDynamicHeights,vR.supportDynamicHeights),this.dnd=Ac(i,e=>e.dnd,vR.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw Error(`Horizontal scrolling and dynamic heights not supported simultaneously`);if(this._horizontalScrolling=e,this.domNode.classList.toggle(`horizontal-scrolling`,this._horizontalScrolling),this._horizontalScrolling){for(let e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:ba(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=``}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw Error(`Can't run recursive splices.`);this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i={start:e,end:e+t},a=vI.intersect(r,i),o=new Map;for(let e=a.start;e<a.end;e++){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){let n=o.get(t.templateId);n||(n=[],o.set(t.templateId,n));let r=this.renderers.get(t.templateId);r&&r.disposeElement&&r.disposeElement(t.element,e,t.row.templateData,t.size),n.push(t.row)}t.row=null}let s={start:e+t,end:this.items.length},c=vI.intersect(s,r),l=vI.relativeComplement(s,r),u=n.map(e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:j.None})),d;e===0&&t>=this.items.length?(this.rangeMap=new mR,this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));let f=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=dR(c,f),h=vI.intersect(p,m);for(let e=h.start;e<h.end;e++)this.updateItemInDOM(this.items[e],e);let g=vI.relativeComplement(m,p);for(let e of g)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);let _=l.map(e=>dR(e,f)),v=[{start:e,end:e+n.length},..._].map(e=>vI.intersect(p,e)),y=this.getNextToLastElement(v);for(let e of v)for(let t=e.start;t<e.end;t++){let e=this.items[t],n=o.get(e.templateId)?.pop();this.insertItemInDOM(t,y,n)}for(let e of o.values())for(let t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(e=>e.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||=aa(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)t.width!==void 0&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e==`number`?e:xa(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),t!==void 0&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t==`number`?t:ba(this.domNode)})}render(e,t,n,r,i,a=!1){let o=this.getRenderRange(t,n),s=vI.relativeComplement(o,e),c=vI.relativeComplement(e,o),l=this.getNextToLastElement(s);if(a){let t=vI.intersect(e,o);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}for(let e of s)for(let t=e.start;t<e.end;t++)this.insertItemInDOM(t,l);for(let e of c)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&i!==void 0&&(this.rowsContainer.style.width=`${Math.max(i,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){let r=this.items[e];r.row||=n??this.cache.alloc(r.templateId);let i=this.accessibilityProvider.getRole(r.element)||`listitem`;r.row.domNode.setAttribute(`role`,i);let a=this.accessibilityProvider.isChecked(r.element);a!==void 0&&r.row.domNode.setAttribute(`aria-checked`,String(!!a)),r.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);let o=this.renderers.get(r.templateId);if(!o)throw Error(`No renderer found for template id ${r.templateId}`);o&&o.renderElement(r.element,e,r.row.templateData,r.size);let s=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!s,s&&(r.dragStartDisposable=R(r.row.domNode,`dragstart`,e=>this.onDragStart(r.element,s,e))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=$r?`-moz-fit-content`:`fit-content`,e.width=ba(e.row.domNode);let t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=``}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute(`data-index`,`${t}`),e.row.domNode.setAttribute(`data-last-element`,t===this.length-1?`true`:`false`),e.row.domNode.setAttribute(`data-parity`,t%2==0?`even`:`odd`),e.row.domNode.setAttribute(`aria-setsize`,String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute(`aria-posinset`,String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute(`id`,this.getElementDomId(t)),e.row.domNode.classList.toggle(`drop-target`,e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return M.map(this.disposables.add(new KM(this.domNode,`click`)).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return M.map(this.disposables.add(new KM(this.domNode,`dblclick`)).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return M.filter(M.map(this.disposables.add(new KM(this.domNode,`auxclick`)).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return M.map(this.disposables.add(new KM(this.domNode,`mousedown`)).event,e=>this.toMouseEvent(e))}get onContextMenu(){return M.any(M.map(this.disposables.add(new KM(this.domNode,`contextmenu`)).event,e=>this.toMouseEvent(e)),M.map(this.disposables.add(new KM(this.domNode,Jv.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return M.map(this.disposables.add(new KM(this.domNode,`touchstart`)).event,e=>this.toTouchEvent(e))}get onTap(){return M.map(this.disposables.add(new KM(this.rowsContainer,Jv.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error(`Got bad scroll event:`,e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed=`copyMove`,n.dataTransfer.setData(fN.TEXT,t),n.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(r,n)),e===void 0&&(e=String(r.length));let t=V(`.monaco-drag-image`);t.textContent=e,document.body.appendChild(t),n.dataTransfer.setDragImage(t,-10,-10),setTimeout(()=>document.body.removeChild(t),0)}this.currentDragData=new yR(r),mN.CurrentDragAndDropData=new bR(r),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),mN.CurrentDragAndDropData&&mN.CurrentDragAndDropData.getData()===`vscode-ui`||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(mN.CurrentDragAndDropData)this.currentDragData=mN.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new xR}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t==`boolean`?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!=`boolean`&&t.effect===0?`copy`:`move`;let n;if(n=typeof t!=`boolean`&&t.feedback?t.feedback:e.index===void 0?[-1]:[e.index],n=Ip(n).filter(e=>e>=-1&&e<this.length).sort((e,t)=>e-t),n=n[0]===-1?[-1]:n,SR(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(`drop-target`),this.rowsContainer.classList.add(`drop-target`),this.currentDragFeedbackDisposable=Ot(()=>{this.domNode.classList.remove(`drop-target`),this.rowsContainer.classList.remove(`drop-target`)});else{for(let e of n){let t=this.items[e];t.dropTarget=!0,t.row&&t.row.domNode.classList.add(`drop-target`)}this.currentDragFeedbackDisposable=Ot(()=>{for(let e of n){let t=this.items[e];t.dropTarget=!1,t.row&&t.row.domNode.classList.remove(`drop-target`)}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Ni(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)==null||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,mN.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,mN.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=j.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let e=ha(this.domNode).top;this.dragOverAnimationDisposable=Qa(this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Ni(()=>{this.dragOverAnimationDisposable&&=(this.dragOverAnimationDisposable.dispose(),void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&=(this.dragOverAnimationDisposable.dispose(),void 0)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){let e=n.getAttribute(`data-index`);if(e){let t=Number(e);if(!isNaN(t))return t}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let r=this.getRenderRange(e,t),i,a;e===this.elementTop(r.start)?(i=r.start,a=0):r.end-r.start>1&&(i=r.start+1,a=this.elementTop(i)-e);let o=0;for(;;){let s=this.getRenderRange(e,t),c=!1;for(let e=s.start;e<s.end;e++){let t=this.probeDynamicHeight(e);t!==0&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,c||=t!==0}if(!c){o!==0&&this.eventuallyUpdateScrollDimensions();let t=vI.relativeComplement(r,s);for(let e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);let c=vI.relativeComplement(s,r);for(let e of c)for(let t=e.start;t<e.end;t++){let e=t+1,n=e<this.items.length?this.items[e].row:null,r=n?n.domNode:null;this.insertItemInDOM(t,r)}for(let e=s.start;e<s.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if(typeof i==`number`){let t=this.scrollable.getFutureScrollPosition().scrollTop-e,r=this.elementTop(i)-a+t;this.setScrollTop(r,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let e=this.virtualDelegate.getDynamicHeight(t.element);if(e!==null){let n=t.size;return t.size=e,t.lastDynamicHeightWidth=this.renderWidth,e-n}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(!this.setRowHeight&&t.row){let e=t.row.domNode.offsetHeight;return t.size=e,t.lastDynamicHeightWidth=this.renderWidth,e-n}let r=this.cache.alloc(t.templateId);r.domNode.style.height=``,this.rowsContainer.appendChild(r.domNode);let i=this.renderers.get(t.templateId);return i&&(i.renderElement(t.element,e,r.templateData,void 0),i.disposeElement&&i.disposeElement(t.element,e,r.templateData,void 0)),t.size=r.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(r.domNode),this.cache.release(r),t.size-n}getNextToLastElement(e){let t=e[e.length-1];if(!t)return null;let n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(let e of this.items)if(e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),Et(this.disposables)}};wR.InstanceCount=0,_R([Kv],wR.prototype,`onMouseClick`,null),_R([Kv],wR.prototype,`onMouseDblClick`,null),_R([Kv],wR.prototype,`onMouseMiddleClick`,null),_R([Kv],wR.prototype,`onMouseDown`,null),_R([Kv],wR.prototype,`onContextMenu`,null),_R([Kv],wR.prototype,`onTouchStart`,null),_R([Kv],wR.prototype,`onTap`,null);var TR=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ER=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},DR=class{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){let r=this.renderedElements.findIndex(e=>e.templateData===n);if(r>=0){let e=this.renderedElements[r];this.trait.unrender(n),e.index=t}else{let e={index:t,templateData:n};this.renderedElements.push(e)}this.trait.renderIndex(t,n)}splice(e,t,n){let r=[];for(let i of this.renderedElements)i.index<e?r.push(i):i.index>=e+t&&r.push({index:i.index+n-t,templateData:i.templateData});this.renderedElements=r}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(t=>t.templateData===e);t<0||this.renderedElements.splice(t,1)}},OR=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new N,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new DR(this)}splice(e,t,n){t=Math.max(0,Math.min(t,this.length-e));let r=n.length-t,i=e+t,a=[...this.sortedIndexes.filter(t=>t<e),...n.map((t,n)=>t?n+e:-1).filter(e=>e!==-1),...this.sortedIndexes.filter(e=>e>=i).map(e=>e+r)],o=this.length+r;if(this.sortedIndexes.length>0&&a.length===0&&o>0){let t=this.sortedIndexes.find(t=>t>=e)??o-1;a.push(Math.min(t,o-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=o}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(YR),t)}_set(e,t,n){let r=this.indexes,i=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let a=qR(i,e);return this.renderer.renderIndexes(a),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return kp(this.sortedIndexes,e,YR)>=0}dispose(){Et(this._onChange)}};TR([Kv],OR.prototype,`renderer`,null);var kR=class extends OR{constructor(e){super(`selected`),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute(`aria-selected`,`true`):t.setAttribute(`aria-selected`,`false`))}},AR=class{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));let r=this.trait.get().map(e=>this.identityProvider.getId(this.view.element(e)).toString()),i=n.map(e=>r.indexOf(this.identityProvider.getId(e).toString())>-1);this.trait.splice(e,t,i)}};function jR(e){return e.tagName===`INPUT`||e.tagName===`TEXTAREA`}function MR(e){return e.classList.contains(`monaco-editor`)?!0:e.classList.contains(`monaco-list`)||!e.parentElement?!1:MR(e.parentElement)}var NR=class{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new A,this.multipleSelectionDisposables=new A,this.onKeyDown.filter(e=>e.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(e=>e.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(e=>e.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(e=>e.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(e=>e.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(e=>e.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(e=>(p?e.metaKey:e.ctrlKey)&&e.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return M.chain(this.disposables.add(new KM(this.view.domNode,`keydown`)).event).filter(e=>!jR(e.target)).map(e=>new vi(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(e=>(p?e.metaKey:e.ctrlKey)&&e.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Vp(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};TR([Kv],NR.prototype,`onKeyDown`,null);var PR;(function(e){e[e.Idle=0]=`Idle`,e[e.Typing=1]=`Typing`})(PR||={});const FR=new class{mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey||e.altKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=93&&e.keyCode<=102||e.keyCode>=80&&e.keyCode<=90}};var IR=class{constructor(e,t,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=r,this.enabled=!1,this.state=PR.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new A,this.disposables=new A,this.updateOptions(e.options)}updateOptions(e){e.enableKeyboardNavigation===void 0||e.enableKeyboardNavigation?this.enable():this.disable(),e.automaticKeyboardNavigation!==void 0&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;let e=M.chain(this.enabledDisposables.add(new KM(this.view.domNode,`keydown`)).event).filter(e=>!jR(e.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(e=>new vi(e)).filter(e=>this.delegate.mightProducePrintableCharacter(e)).forEach(e=>{e.stopPropagation(),e.preventDefault()}).map(e=>e.browserEvent.key).event,t=M.debounce(e,()=>null,800);M.reduce(M.any(e,t),(e,t)=>t===null?null:(e||``)+t)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));t&&B_(t)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=PR.Idle,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===PR.Idle?1:0;this.state=PR.Typing;for(let t=0;t<this.list.length;t++){let i=(n+t+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(i)),o=a&&a.toString();if(o===void 0||wI(e,o)){this.previouslyFocused=n,this.list.setFocus([i]),this.list.reveal(i);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},LR=class{constructor(e,t){this.list=e,this.view=t,this.disposables=new A,M.chain(this.disposables.add(new KM(t.domNode,`keydown`)).event).filter(e=>!jR(e.target)).map(e=>new vi(e)).filter(e=>e.keyCode===2&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let r=n.querySelector(`[tabIndex]`);if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;let i=window.getComputedStyle(r);i.visibility===`hidden`||i.display===`none`||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}};function RR(e){return p?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function zR(e){return e.browserEvent.shiftKey}function BR(e){return e instanceof MouseEvent&&e.button===2}var VR={isSelectionSingleChangeEvent:RR,isSelectionRangeChangeEvent:zR},HR=class{constructor(e){this.list=e,this.disposables=new A,this._onPointer=new N,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||VR),this.mouseSupport=e.options.mouseSupport===void 0||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Yv.addTarget(e.getHTMLElement()))),M.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||VR))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){MR(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(MR(e.browserEvent.target))return;let t=e.index===void 0?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||jR(e.browserEvent.target)||MR(e.browserEvent.target))return;let t=e.index;if(t===void 0){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e)||this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),BR(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(jR(e.browserEvent.target)||MR(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){n===void 0&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let r=Vp(Math.min(n,t),Math.max(n,t)+1),i=this.list.getSelection(),a=KR(qR(i,[n]),n);if(a.length===0)return;let o=qR(r,JR(i,a));this.list.setSelection(o,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let n=this.list.getSelection(),r=n.filter(e=>e!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}},UR=class{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):p||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=n.join(`
`)}},WR={listFocusBackground:J.fromHex(`#7FB0D0`),listActiveSelectionBackground:J.fromHex(`#0E639C`),listActiveSelectionForeground:J.fromHex(`#FFFFFF`),listActiveSelectionIconForeground:J.fromHex(`#FFFFFF`),listFocusAndSelectionBackground:J.fromHex(`#094771`),listFocusAndSelectionForeground:J.fromHex(`#FFFFFF`),listInactiveSelectionBackground:J.fromHex(`#3F3F46`),listInactiveSelectionIconForeground:J.fromHex(`#FFFFFF`),listHoverBackground:J.fromHex(`#2A2D2E`),listDropBackground:J.fromHex(`#383B3D`),treeIndentGuidesStroke:J.fromHex(`#a9a9a9`),tableColumnsBorder:J.fromHex(`#cccccc`).transparent(.2)},GR={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function KR(e,t){let n=e.indexOf(t);if(n===-1)return[];let r=[],i=n-1;for(;i>=0&&e[i]===t-(n-i);)r.push(e[i--]);for(r.reverse(),i=n;i<e.length&&e[i]===t+(i-n);)r.push(e[i++]);return r}function qR(e,t){let n=[],r=0,i=0;for(;r<e.length||i<t.length;)if(r>=e.length)n.push(t[i++]);else if(i>=t.length)n.push(e[r++]);else if(e[r]===t[i]){n.push(e[r]),r++,i++;continue}else e[r]<t[i]?n.push(e[r++]):n.push(t[i++]);return n}function JR(e,t){let n=[],r=0,i=0;for(;r<e.length||i<t.length;)if(r>=e.length)n.push(t[i++]);else if(i>=t.length)n.push(e[r++]);else if(e[r]===t[i]){r++,i++;continue}else e[r]<t[i]?n.push(e[r++]):i++;return n}var YR=(e,t)=>e-t,XR=class{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let i=0;for(let a of this.renderers)a.renderElement(e,t,n[i++],r)}disposeElement(e,t,n,r){let i=0;for(let a of this.renderers)a.disposeElement&&a.disposeElement(e,t,n[i],r),i+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},ZR=class{constructor(e){this.accessibilityProvider=e,this.templateId=`a18n`}renderTemplate(e){return e}renderElement(e,t,n){let r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute(`aria-label`,r):n.removeAttribute(`aria-label`);let i=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof i==`number`?n.setAttribute(`aria-level`,`${i}`):n.removeAttribute(`aria-level`)}disposeTemplate(e){}},QR=class{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){var i,a;(a=(i=this.dnd).onDragLeave)==null||a.call(i,e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}},$R=class{constructor(e,t,n,r,i=GR){this.user=e,this._options=i,this.focus=new OR(`focused`),this.anchor=new OR(`anchor`),this.eventBufferer=new Bt,this._ariaLabel=``,this.disposables=new A,this._onDidDispose=new N,this.onDidDispose=this._onDidDispose.event;let a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():`list`;this.selection=new kR(a!==`listbox`),Oc(i,WR,!1);let o=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=i.accessibilityProvider,this.accessibilityProvider&&(o.push(new ZR(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(e=>new XR(e.templateId,[...o,e]));let s=Object.assign(Object.assign({},i),{dnd:i.dnd&&new QR(this,i.dnd)});if(this.view=new wR(t,n,r,s),this.view.domNode.setAttribute(`role`,a),i.styleController?this.styleController=i.styleController(this.view.domId):this.styleController=new UR(Aa(this.view.domNode),this.view.domId),this.spliceable=new cR([new AR(this.focus,this.view,i.identityProvider),new AR(this.selection,this.view,i.identityProvider),new AR(this.anchor,this.view,i.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new LR(this,this.view)),(typeof i.keyboardSupport!=`boolean`||i.keyboardSupport)&&(this.keyboardController=new NR(this,this.view,i),this.disposables.add(this.keyboardController)),i.keyboardNavigationLabelProvider){let e=i.keyboardNavigationDelegate||FR;this.typeLabelController=new IR(this,this.view,i.keyboardNavigationLabelProvider,e),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(i),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute(`aria-multiselectable`,`true`)}get onDidChangeFocus(){return M.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return M.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=M.chain(this.disposables.add(new KM(this.view.domNode,`keydown`)).event).map(e=>new vi(e)).filter(t=>e=t.keyCode===58||t.shiftKey&&t.keyCode===68).map(qM).filter(()=>!1).event,n=M.chain(this.disposables.add(new KM(this.view.domNode,`keyup`)).event).forEach(()=>e=!1).map(e=>new vi(e)).filter(e=>e.keyCode===58||e.shiftKey&&e.keyCode===68).map(qM).map(({browserEvent:e})=>{let t=this.getFocus(),n=t.length?t[0]:void 0;return{index:n,element:n===void 0?void 0:this.view.element(n),anchor:n===void 0?this.view.domNode:this.view.domElement(n),browserEvent:e}}).event,r=M.chain(this.view.onContextMenu).filter(t=>!e).map(({element:e,index:t,browserEvent:n})=>({element:e,index:t,anchor:{x:n.pageX+1,y:n.pageY},browserEvent:n})).event;return M.any(t,n,r)}get onKeyDown(){return this.disposables.add(new KM(this.view.domNode,`keydown`)).event}get onDidFocus(){return M.signal(this.disposables.add(new KM(this.view.domNode,`focus`,!0)).event)}createMouseController(e){return new HR(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute(`aria-multiselectable`,`true`):this.view.domNode.removeAttribute(`aria-multiselectable`)),this.mouseController.updateOptions(e),(t=this.keyboardController)==null||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new lR(this.user,`Invalid start index: ${e}`);if(t<0)throw new lR(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute(`aria-label`,e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(let t of e)if(t<0||t>=this.length)throw new lR(this.user,`Invalid index ${t}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(e===void 0){this.anchor.set([]);return}if(e<0||e>=this.length)throw new lR(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return zp(this.anchor.get(),void 0)}getAnchorElement(){let e=this.getAnchor();return e===void 0?void 0:this.element(e)}setFocus(e,t){for(let t of e)if(t<0||t>=this.length)throw new lR(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;let i=this.focus.get(),a=this.findNextIndex(i.length>0?i[0]+e:0,t,r);a>-1&&this.setFocus([a],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;let i=this.focus.get(),a=this.findPreviousIndex(i.length>0?i[0]-e:0,t,r);a>-1&&this.setFocus([a],n)}focusNextPage(e,t){return ER(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let r=this.view.element(n),i=this.getFocusedElements()[0];if(i!==r){let r=this.findPreviousIndex(n,!1,t);r>-1&&i!==this.view.element(r)?this.setFocus([r],e):this.setFocus([n],e)}else{let r=this.view.getScrollTop();this.view.setScrollTop(r+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==r&&(this.setFocus([]),yield Mi(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return ER(this,void 0,void 0,function*(){let n,r=this.view.getScrollTop();n=r===0?this.view.indexAt(r):this.view.indexAfter(r-1);let i=this.view.element(n),a=this.getFocusedElements()[0];if(a!==i){let r=this.findNextIndex(n,!1,t);r>-1&&a!==this.view.element(r)?this.setFocus([r],e):this.setFocus([n],e)}else{let n=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==n&&(this.setFocus([]),yield Mi(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e%=this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new lR(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),r=this.view.elementTop(e),i=this.view.elementHeight(e);if(Js(t)){let e=i-this.view.renderHeight;this.view.setScrollTop(e*sl(t,0,1)+r)}else{let e=r+i,t=n+this.view.renderHeight;r<n&&e>=t||(r<n||e>=t&&i>=this.view.renderHeight?this.view.setScrollTop(r):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new lR(this.user,`Invalid index ${e}`);let t=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<t||n+r>t+this.view.renderHeight)return null;let i=r-this.view.renderHeight;return Math.abs((t-n)/i)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(e=>this.view.element(e)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle(`element-focused`,e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute(`aria-activedescendant`,t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute(`aria-activedescendant`)}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle(`selection-none`,e.length===0),this.view.domNode.classList.toggle(`selection-single`,e.length===1),this.view.domNode.classList.toggle(`selection-multiple`,e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};TR([Kv],$R.prototype,`onDidChangeFocus`,null),TR([Kv],$R.prototype,`onDidChangeSelection`,null),TR([Kv],$R.prototype,`onContextMenu`,null),TR([Kv],$R.prototype,`onKeyDown`,null),TR([Kv],$R.prototype,`onDidFocus`,null);var ez=class{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:j.None}}renderElement(e,t,n,r){if(n.disposable&&n.disposable.dispose(),!n.data)return;let i=this.modelProvider();if(i.isResolved(e))return this.renderer.renderElement(i.get(e),e,n.data,r);let a=new Gt,o=i.resolve(e,a.token);n.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,n.data),o.then(t=>this.renderer.renderElement(t,e,n.data,r))}disposeTemplate(e){e.disposable&&=(e.disposable.dispose(),void 0),e.data&&=(this.renderer.disposeTemplate(e.data),void 0)}},tz=class{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function nz(e,t){return Object.assign(Object.assign({},t),{accessibilityProvider:t.accessibilityProvider&&new tz(e,t.accessibilityProvider)})}var rz=class{constructor(e,t,n,r,i={}){let a=()=>this.model;this.list=new $R(e,t,n,r.map(e=>new ez(e,a)),nz(a,i))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return M.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return M.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return M.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(e=>this._model.get(e)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Vp(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}},iz={separatorBorder:J.transparent},az=class{constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n==`number`?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add(`visible`)):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,t){e!==this.visible&&(e?(this.size=sl(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t==`number`?t:this.size,this.size=0),this.container.classList.toggle(`visible`,e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?``:`none`}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}},oz=class extends az{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},sz=class extends az{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}},cz;(function(e){e[e.Idle=0]=`Idle`,e[e.Busy=1]=`Busy`})(cz||={});var lz;(function(e){e.Distribute={type:`distribute`};function t(e){return{type:`split`,index:e}}e.Split=t;function n(e){return{type:`invisible`,cachedVisibleSize:e}}e.Invisible=n})(lz||={});var uz=class extends j{constructor(e,t={}){super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=cz.Idle,this._onDidSashChange=this._register(new N),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new N),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=Xs(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=Xs(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement(`div`),this.el.classList.add(`monaco-split-view2`),this.el.classList.add(this.orientation===0?`vertical`:`horizontal`),e.appendChild(this.el),this.sashContainer=B(this.el,V(`.sash-container`)),this.viewContainer=V(`.split-view-container`),this.scrollable=new Fk(125,aa),this.scrollableElement=this._register(new Jk(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(e=>{this.viewContainer.scrollTop=e.scrollTop,this.viewContainer.scrollLeft=e.scrollLeft})),B(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||iz),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((e,t)=>{let n=Xs(e.visible)||e.visible?e.size:{type:`invisible`,cachedVisibleSize:e.size},r=e.view;this.doAddView(r,n,t,!0)}),this.contentSize=this.viewItems.reduce((e,t)=>e+t.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove(`separator-border`),this.el.style.removeProperty(`--separator-border`)):(this.el.classList.add(`separator-border`),this.el.style.setProperty(`--separator-border`,e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}layout(e,t){let n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let t=0;t<this.viewItems.length;t++){let n=this.viewItems[t];n.size=sl(Math.round(this.proportions[t]*e),n.minimumSize,n.maximumSize)}else{let t=Vp(this.viewItems.length),r=t.filter(e=>this.viewItems[e].priority===1),i=t.filter(e=>this.viewItems[e].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,i)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(let e of this.viewItems)e.enabled=!1;let r=this.sashItems.findIndex(t=>t.sash===e),i=Dt(R(document.body,`keydown`,e=>a(this.sashDragState.current,e.altKey)),R(document.body,`keyup`,()=>a(this.sashDragState.current,!1))),a=(e,t)=>{let n=this.viewItems.map(e=>e.size),a=-1/0,o=1/0;if(this.inverseAltBehavior&&(t=!t),t)if(r===this.sashItems.length-1){let e=this.viewItems[r];a=(e.minimumSize-e.size)/2,o=(e.maximumSize-e.size)/2}else{let e=this.viewItems[r+1];a=(e.size-e.maximumSize)/2,o=(e.size-e.minimumSize)/2}let s,c;if(!t){let e=Vp(r,-1),t=Vp(r+1,this.viewItems.length),i=e.reduce((e,t)=>e+(this.viewItems[t].minimumSize-n[t]),0),a=e.reduce((e,t)=>e+(this.viewItems[t].viewMaximumSize-n[t]),0),o=t.length===0?1/0:t.reduce((e,t)=>e+(n[t]-this.viewItems[t].minimumSize),0),l=t.length===0?-1/0:t.reduce((e,t)=>e+(n[t]-this.viewItems[t].viewMaximumSize),0),u=Math.max(i,l),d=Math.min(o,a),f=this.findFirstSnapIndex(e),p=this.findFirstSnapIndex(t);if(typeof f==`number`){let e=this.viewItems[f],t=Math.floor(e.viewMinimumSize/2);s={index:f,limitDelta:e.visible?u-t:u+t,size:e.size}}if(typeof p==`number`){let e=this.viewItems[p],t=Math.floor(e.viewMinimumSize/2);c={index:p,limitDelta:e.visible?d+t:d-t,size:e.size}}}this.sashDragState={start:e,current:e,index:r,sizes:n,minDelta:a,maxDelta:o,alt:t,snapBefore:s,snapAfter:c,disposable:i}};a(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:r,alt:i,minDelta:a,maxDelta:o,snapBefore:s,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;let l=e-n,u=this.resize(t,l,r,void 0,void 0,a,o,s,c);if(i){let e=t===this.sashItems.length-1,n=this.viewItems.map(e=>e.size),r=e?t:t+1,i=this.viewItems[r],a=i.size-i.maximumSize,o=i.size-i.minimumSize,s=e?t-1:t+1;this.resize(s,-u,n,void 0,void 0,a,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let e of this.viewItems)e.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t==`number`?t:e.size,t=sl(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==cz.Idle)throw Error(`Cant modify splitview`);if(this.state=cz.Busy,e<0||e>=this.viewItems.length)return;let n=Vp(this.viewItems.length).filter(t=>t!==e),r=[...n.filter(e=>this.viewItems[e].priority===1),e],i=n.filter(e=>this.viewItems[e].priority===2),a=this.viewItems[e];t=Math.round(t),t=sl(t,a.minimumSize,Math.min(a.maximumSize,this.size)),a.size=t,this.relayout(r,i),this.state=cz.Idle}distributeViewSizes(){let e=[],t=0;for(let n of this.viewItems)n.maximumSize-n.minimumSize>0&&(e.push(n),t+=n.size);let n=Math.floor(t/e.length);for(let t of e)t.size=sl(n,t.minimumSize,t.maximumSize);let r=Vp(this.viewItems.length),i=r.filter(e=>this.viewItems[e].priority===1),a=r.filter(e=>this.viewItems[e].priority===2);this.relayout(i,a)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==cz.Idle)throw Error(`Cant modify splitview`);this.state=cz.Busy;let i=V(`.split-view-view`);n===this.viewItems.length?this.viewContainer.appendChild(i):this.viewContainer.insertBefore(i,this.viewContainer.children.item(n));let a=Dt(e.onDidChange(e=>this.onViewChange(s,e)),Ot(()=>this.viewContainer.removeChild(i))),o;o=typeof t==`number`?t:t.type===`split`?this.getViewSize(t.index)/2:t.type===`invisible`?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize;let s=this.orientation===0?new oz(i,e,o,a):new sz(i,e,o,a);if(this.viewItems.splice(n,0,s),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=this.orientation===0?new iN(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:1})):new iN(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:0})),r=this.orientation===0?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),i={sash:t,disposable:Dt(M.map(t.onDidStart,r)(this.onSashStart,this),M.map(t.onDidChange,r)(this.onSashChange,this),M.map(t.onDidEnd,()=>this.sashItems.findIndex(e=>e.sash===t))(this.onSashEnd,this),t.onDidReset(()=>{let e=this.sashItems.findIndex(e=>e.sash===t),n=Vp(e,-1),r=Vp(e+1,this.viewItems.length),i=this.findFirstSnapIndex(n),a=this.findFirstSnapIndex(r);typeof i==`number`&&!this.viewItems[i].visible||typeof a==`number`&&!this.viewItems[a].visible||this._onDidSashReset.fire(e)}),t)};this.sashItems.splice(n-1,0,i)}i.appendChild(e.element);let c;typeof t!=`number`&&t.type===`split`&&(c=[t.index]),r||this.relayout([n],c),this.state=cz.Idle,!r&&typeof t!=`number`&&t.type===`distribute`&&this.distributeViewSizes()}relayout(e,t){let n=this.viewItems.reduce((e,t)=>e+t.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(e=>e.size),r,i,a=-1/0,o=1/0,s,c){if(e<0||e>=this.viewItems.length)return 0;let l=Vp(e,-1),u=Vp(e+1,this.viewItems.length);if(i)for(let e of i)Up(l,e),Up(u,e);if(r)for(let e of r)Wp(l,e),Wp(u,e);let d=l.map(e=>this.viewItems[e]),f=l.map(e=>n[e]),p=u.map(e=>this.viewItems[e]),m=u.map(e=>n[e]),h=l.reduce((e,t)=>e+(this.viewItems[t].minimumSize-n[t]),0),g=l.reduce((e,t)=>e+(this.viewItems[t].maximumSize-n[t]),0),_=u.length===0?1/0:u.reduce((e,t)=>e+(n[t]-this.viewItems[t].minimumSize),0),v=u.length===0?-1/0:u.reduce((e,t)=>e+(n[t]-this.viewItems[t].maximumSize),0),y=Math.max(h,v,a),b=Math.min(_,g,o),x=!1;if(s){let e=this.viewItems[s.index],n=t>=s.limitDelta;x=n!==e.visible,e.setVisible(n,s.size)}if(!x&&c){let e=this.viewItems[c.index],n=t<c.limitDelta;x=n!==e.visible,e.setVisible(n,c.size)}if(x)return this.resize(e,t,n,r,i,a,o);t=sl(t,y,b);for(let e=0,n=t;e<d.length;e++){let t=d[e],r=sl(f[e]+n,t.minimumSize,t.maximumSize),i=r-f[e];n-=i,t.size=r}for(let e=0,n=t;e<p.length;e++){let t=p[e],r=sl(m[e]-n,t.minimumSize,t.maximumSize),i=r-m[e];n+=i,t.size=r}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((e,t)=>e+t.size,0),n=this.size-t,r=Vp(this.viewItems.length-1,-1),i=r.filter(e=>this.viewItems[e].priority===1),a=r.filter(e=>this.viewItems[e].priority===2);for(let e of a)Up(r,e);for(let e of i)Wp(r,e);typeof e==`number`&&Wp(r,e);for(let e=0;n!==0&&e<r.length;e++){let t=this.viewItems[r[e]],i=sl(t.size+n,t.minimumSize,t.maximumSize),a=i-t.size;n-=a,t.size=i}}layoutViews(){this.contentSize=this.viewItems.reduce((e,t)=>e+t.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(e=>e.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(t=>e=t.size-t.minimumSize>0||e);e=!1;let n=this.viewItems.map(t=>e=t.maximumSize-t.size>0||e),r=[...this.viewItems].reverse();e=!1;let i=r.map(t=>e=t.size-t.minimumSize>0||e).reverse();e=!1;let a=r.map(t=>e=t.maximumSize-t.size>0||e).reverse(),o=0;for(let e=0;e<this.sashItems.length;e++){let{sash:r}=this.sashItems[e],s=this.viewItems[e];o+=s.size;let c=!(t[e]&&a[e+1]),l=!(n[e]&&i[e+1]);if(c&&l){let n=Vp(e,-1),a=Vp(e+1,this.viewItems.length),s=this.findFirstSnapIndex(n),c=this.findFirstSnapIndex(a),l=typeof s==`number`&&!this.viewItems[s].visible,u=typeof c==`number`&&!this.viewItems[c].visible;l&&i[e]&&(o>0||this.startSnappingEnabled)?r.state=1:u&&t[e]&&(o<this.contentSize||this.endSnappingEnabled)?r.state=2:r.state=0}else c&&!l?r.state=1:!c&&l?r.state=2:r.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let e=this.viewItems[t];if(e.visible&&e.snap)return t}for(let t of e){let e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}},dz=class e{constructor(t,n,r){this.columns=t,this.getColumnSize=r,this.templateId=e.TemplateId,this.renderedTemplates=new Set;let i=new Map(n.map(e=>[e.templateId,e]));this.renderers=[];for(let e of t){let t=i.get(e.templateId);if(!t)throw Error(`Table cell renderer for template id ${e.templateId} not found.`);this.renderers.push(t)}}renderTemplate(e){let t=B(e,V(`.monaco-table-tr`)),n=[],r=[];for(let e=0;e<this.columns.length;e++){let i=this.renderers[e],a=B(t,V(`.monaco-table-td`,{"data-col-index":e}));a.style.width=`${this.getColumnSize(e)}px`,n.push(a),r.push(i.renderTemplate(a))}let i={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(i),i}renderElement(e,t,n,r){for(let i=0;i<this.columns.length;i++){let a=this.columns[i].project(e);this.renderers[i].renderElement(a,t,n.cellTemplateData[i],r)}}disposeElement(e,t,n,r){for(let i=0;i<this.columns.length;i++){let a=this.renderers[i];if(a.disposeElement){let o=this.columns[i].project(e);a.disposeElement(o,t,n.cellTemplateData[i],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Gi(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};dz.TemplateId=`row`;function fz(e){return{getHeight(t){return e.getHeight(t)},getTemplateId(){return dz.TemplateId}}}var pz=class{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new N,this.onDidLayout=this._onDidLayout.event,this.element=V(`.monaco-table-th`,{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??1/0}get onDidChange(){return this.column.onDidChangeWidthConstraints??M.None}layout(e){this._onDidLayout.fire([this.index,e])}},mz=class e{constructor(t,n,r,i,a,o){this.virtualDelegate=r,this.domId=`table_id_${++e.InstanceCount}`,this.cachedHeight=0,this.domNode=B(n,V(`.monaco-table.${this.domId}`));let s=i.map((e,t)=>new pz(e,t)),c={size:s.reduce((e,t)=>e+t.column.weight,0),views:s.map(e=>({size:e.column.weight,view:e}))};this.splitview=new uz(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:c}),this.splitview.el.style.height=`${r.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${r.headerRowHeight}px`;let l=new dz(i,a,e=>this.splitview.getViewSize(e));this.list=new $R(t,this.domNode,fz(r),[l],o),this.columnLayoutDisposable=M.any(...s.map(e=>e.onDidLayout))(([e,t])=>l.layoutColumn(e,t)),this.styleElement=Aa(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}};mz.InstanceCount=0;var hz;(function(e){e[e.Unknown=0]=`Unknown`,e[e.Twistie=1]=`Twistie`,e[e.Element=2]=`Element`})(hz||={});var gz=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},_z=class{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};function vz(e){return typeof e==`object`&&`visibility`in e&&`data`in e}function yz(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function bz(e){return typeof e.collapsible==`boolean`}var xz=class{constructor(e,t,n,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new Bt,this._onDidChangeCollapseState=new N,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new N,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new N,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=r.collapseByDefault===void 0?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=r.autoExpandSingleChildren===void 0?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=k.empty(),r={}){if(e.length===0)throw new gz(this.user,`Invalid tree location`);r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r,i,a){r===void 0&&(r=k.empty()),a===void 0&&(a=i.diffDepth??0);let{parentNode:o}=this.getParentNodeWithListIndex(t);if(!o.lastDiffIds)return this.spliceSimple(t,n,r,i);let s=[...r],c=t[t.length-1],l=new qf({getElements:()=>o.lastDiffIds},{getElements:()=>[...o.children.slice(0,c),...s,...o.children.slice(c+n)].map(t=>e.getId(t.element).toString())}).ComputeDiff(!1);if(l.quitEarly)return o.lastDiffIds=void 0,this.spliceSimple(t,n,s,i);let u=t.slice(0,-1),d=(t,n,r)=>{if(a>0)for(let o=0;o<r;o++)t--,n--,this.spliceSmart(e,[...u,t,0],2**53-1,s[n].children,i,a-1)},f=Math.min(o.children.length,c+n),p=s.length;for(let e of l.changes.sort((e,t)=>t.originalStart-e.originalStart))d(f,p,f-(e.originalStart+e.originalLength)),f=e.originalStart,p=e.modifiedStart-c,this.spliceSimple([...u,f],e.originalLength,k.slice(s,p,p+e.modifiedLength),i);d(f,p,f)}spliceSimple(e,t,n=k.empty(),{onDidCreateNode:r,onDidDeleteNode:i,diffIdentityProvider:a}){let{parentNode:o,listIndex:s,revealed:c,visible:l}=this.getParentNodeWithListIndex(e),u=[],d=k.map(n,e=>this.createTreeNode(e,o,o.visible?1:0,c,u,r)),f=e[e.length-1],p=o.children.length>0,m=0;for(let e=f;e>=0&&e<o.children.length;e--){let t=o.children[e];if(t.visible){m=t.visibleChildIndex;break}}let h=[],g=0,_=0;for(let e of d)h.push(e),_+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=m+ g++);let v=qp(o.children,f,t,h);a?o.lastDiffIds?qp(o.lastDiffIds,f,t,h.map(e=>a.getId(e.element).toString())):o.lastDiffIds=o.children.map(e=>a.getId(e.element).toString()):o.lastDiffIds=void 0;let y=0;for(let e of v)e.visible&&y++;if(y!==0)for(let e=f+h.length;e<o.children.length;e++){let t=o.children[e];t.visible&&(t.visibleChildIndex-=y)}if(o.visibleChildrenCount+=g-y,c&&l){let e=v.reduce((e,t)=>e+(t.visible?t.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(o,_-e),this.list.splice(s,e,u)}if(v.length>0&&i){let e=t=>{i(t),t.children.forEach(e)};v.forEach(e)}let b=o.children.length>0;p!==b&&this.setCollapsible(e.slice(0,-1),b),this._onDidSplice.fire({insertedNodes:h,deletedNodes:v});let x=o;for(;x;){if(x.visibility===2){this.refilter();break}x=x.parent}}rerender(e){if(e.length===0)throw new gz(this.user,`Invalid tree location`);let{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let n=this.getTreeNode(e);t===void 0&&(t=!n.collapsible);let r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){let r=this.getTreeNode(e);t===void 0&&(t=!r.collapsed);let i={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}_setCollapseState(e,t){let{node:n,listIndex:r,revealed:i}=this.getTreeNodeWithListIndex(e),a=this._setListNodeCollapseState(n,r,i,t);if(n!==this.root&&this.autoExpandSingleChildren&&a&&!bz(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let r=-1;for(let e=0;e<n.children.length;e++)if(n.children[e].visible)if(r>-1){r=-1;break}else r=e;r>-1&&this._setCollapseState([...e,r],t)}return a}_setListNodeCollapseState(e,t,n,r){let i=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!i)return i;let a=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),s=a-(t===-1?0:1);return this.list.splice(t+1,s,o.slice(1)),i}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(bz(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!bz(t)&&t.recursive)for(let n of e.children)r=this._setNodeCollapseState(n,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,r,i,a){let o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible==`boolean`?e.collapsible:e.collapsed!==void 0,collapsed:e.collapsed===void 0?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},s=this._filterNode(o,n);o.visibility=s,r&&i.push(o);let c=e.children||k.empty(),l=r&&s!==0&&!o.collapsed,u=k.map(c,e=>this.createTreeNode(e,o,s,l,i,a)),d=0,f=1;for(let e of u)o.children.push(e),f+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=d++);return o.collapsible=o.collapsible||o.children.length>0,o.visibleChildrenCount=d,o.visible=s===2?d>0:s===1,o.visible?o.collapsed||(o.renderNodeCount=f):(o.renderNodeCount=0,r&&i.pop()),a&&a(o),o}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let i;if(e!==this.root){if(i=this._filterNode(e,t),i===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}let a=n.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(!e.collapsed||i!==0){let t=0;for(let a of e.children)o=this._updateNodeAfterFilterChange(a,i,n,r&&!e.collapsed)||o,a.visible&&(a.visibleChildIndex=t++);e.visibleChildrenCount=t}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=i===2?o:i===1,e.visibility=i),e.visible?e.collapsed||(e.renderNodeCount+=n.length-a):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let n=this.filter?this.filter.filter(e.element,t):1;return typeof n==`boolean`?(e.filterData=void 0,n?1:0):vz(n)?(e.filterData=n.data,yz(n.visibility)):(e.filterData=void 0,yz(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[n,...r]=e;if(n<0||n>t.children.length)throw new gz(this.user,`Invalid tree location`);return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:n,revealed:r,visible:i}=this.getParentNodeWithListIndex(e),a=e[e.length-1];if(a<0||a>t.children.length)throw new gz(this.user,`Invalid tree location`);let o=t.children[a];return{node:o,listIndex:n,revealed:r,visible:i&&o.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,i=!0){let[a,...o]=e;if(a<0||a>t.children.length)throw new gz(this.user,`Invalid tree location`);for(let e=0;e<a;e++)n+=t.children[e].renderNodeCount;return r&&=!t.collapsed,i&&=t.visible,o.length===0?{parentNode:t,listIndex:n,revealed:r,visible:i}:this.getParentNodeWithListIndex(o,t.children[a],n+1,r,i)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Dp(e)[0]}};const Sz=Zl(`tree-item-expanded`,$l.chevronDown),Cz=Zl(`tree-filter-on-type-on`,$l.listFilter),wz=Zl(`tree-filter-on-type-off`,$l.listSelection),Tz=Zl(`tree-filter-clear`,$l.close),Ez=Zl(`tree-item-loading`,$l.loading);var Dz=class extends yR{constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function Oz(e){return e instanceof yR?new Dz(e):e}var kz=class{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=j.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(Oz(e),t)}onDragOver(e,t,n,r,i=!0){let a=this.dnd.onDragOver(Oz(e),t&&t.element,n,r),o=this.autoExpandNode!==t;if(o&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),t===void 0)return a;if(o&&typeof a!=`boolean`&&a.autoExpand&&(this.autoExpandDisposable=Ni(()=>{let e=this.modelProvider(),n=e.getNodeLocation(t);e.isCollapsed(n)&&e.setCollapsed(n,!1),this.autoExpandNode=void 0},500)),typeof a==`boolean`||!a.accept||a.bubble===void 0||a.feedback)return i?a:{accept:typeof a==`boolean`?a:a.accept,effect:typeof a==`boolean`?void 0:a.effect,feedback:[n]};if(a.bubble===1){let n=this.modelProvider(),i=n.getNodeLocation(t),a=n.getParentNodeLocation(i),o=n.getNode(a),s=a&&n.getListIndex(a);return this.onDragOver(e,o,s,r,!1)}let s=this.modelProvider(),c=s.getNodeLocation(t),l=s.getListIndex(c),u=s.getListRenderCount(c);return Object.assign(Object.assign({},a),{feedback:Vp(l,l+u)})}drop(e,t,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(Oz(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}};function Az(e,t){return t&&Object.assign(Object.assign({},t),{identityProvider:t.identityProvider&&{getId(e){return t.identityProvider.getId(e.element)}},dnd:t.dnd&&new kz(e,t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return t.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return t.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:t.accessibilityProvider&&Object.assign(Object.assign({},t.accessibilityProvider),{getSetSize(t){let n=e(),r=n.getNodeLocation(t),i=n.getParentNodeLocation(r);return n.getNode(i).visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?e=>t.accessibilityProvider.isChecked(e.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?e=>t.accessibilityProvider.getRole(e.element):()=>`treeitem`,getAriaLabel(e){return t.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return t.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>`tree`,getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?e=>t.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(e=>t.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},t.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),enableKeyboardNavigation:t.simpleKeyboardNavigation})}var jz=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}},Mz;(function(e){e.None=`none`,e.OnHover=`onHover`,e.Always=`always`})(Mz||={});var Nz=class{constructor(e,t=[]){this._elements=t,this.onDidChange=M.forEach(e,e=>this._elements=e)}get elements(){return this._elements}},Pz=class e{constructor(t,n,r,i,a={}){this.renderer=t,this.modelProvider=n,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=e.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new zh,this.activeIndentNodes=new Set,this.indentGuidesDisposable=j.None,this.disposables=new A,this.templateId=t.templateId,this.updateOptions(a),M.map(r,e=>e.node)(this.onDidChangeNodeTwistieState,this,this.disposables),t.onDidChangeTwistieState&&t.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(e.indent!==void 0&&(this.indent=sl(e.indent,0,40)),e.renderIndentGuides!==void 0){let t=e.renderIndentGuides!==Mz.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){let e=new A;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}e.hideTwistiesOfChildlessElements!==void 0&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=B(e,V(`.monaco-tl-row`)),n=B(t,V(`.monaco-tl-indent`)),r=B(t,V(`.monaco-tl-twistie`)),i=B(t,V(`.monaco-tl-contents`)),a=this.renderer.renderTemplate(i);return{container:e,indent:n,twistie:r,indentGuidesDisposable:j.None,templateData:a}}renderElement(t,n,r,i){typeof i==`number`&&(this.renderedNodes.set(t,{templateData:r,height:i}),this.renderedElements.set(t.element,t));let a=e.DefaultIndent+(t.depth-1)*this.indent;r.twistie.style.paddingLeft=`${a}px`,r.indent.style.width=`${a+this.indent-16}px`,this.renderTwistie(t,r),typeof i==`number`&&this.renderIndentGuides(t,r),this.renderer.renderElement(t,n,r.templateData,i)}disposeElement(e,t,n,r){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,r),typeof r==`number`&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...Sz.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...Sz.classNamesArray),t.twistie.classList.add(`collapsible`),t.twistie.classList.toggle(`collapsed`,e.collapsed)):t.twistie.classList.remove(`collapsible`,`collapsed`),e.collapsible?t.container.setAttribute(`aria-expanded`,String(!e.collapsed)):t.container.removeAttribute(`aria-expanded`)}renderIndentGuides(e,t){if(Gi(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let n=new A,r=this.modelProvider(),i=e;for(;;){let e=r.getNodeLocation(i),a=r.getParentNodeLocation(e);if(!a)break;let o=r.getNode(a),s=V(`.indent-guide`,{style:`width: ${this.indent}px`});this.activeIndentNodes.has(o)&&s.classList.add(`active`),t.indent.childElementCount===0?t.indent.appendChild(s):t.indent.insertBefore(s,t.indent.firstElementChild),this.renderedIndentGuides.add(o,s),n.add(Ot(()=>this.renderedIndentGuides.delete(o,s))),i=o}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set,n=this.modelProvider();e.forEach(e=>{let r=n.getNodeLocation(e);try{let i=n.getParentNodeLocation(r);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):i&&t.add(n.getNode(i))}catch{}}),this.activeIndentNodes.forEach(e=>{t.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.remove(`active`))}),t.forEach(e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.add(`active`))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Et(this.disposables)}};Pz.DefaultIndent=8;var Fz=class{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern=``,this._lowercasePattern=``,this.disposables=new A,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){let n=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return n;let r;if(r=typeof n==`boolean`?n?1:0:vz(n)?yz(n.visibility):n,r===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:fL.Default,visibility:!0};let n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(let e of r){let t=e&&e.toString();if(t===void 0)return{data:fL.Default,visibility:!0};let n=pL(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,!0);if(n)return this._matchCount++,r.length===1?{data:n,visibility:!0}:{data:{label:t,score:n},visibility:!0}}return this.tree.options.filterOnType?2:{data:fL.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Et(this.disposables)}},Iz=class{constructor(e,n,r,i,a){this.tree=e,this.view=r,this.filter=i,this.keyboardNavigationDelegate=a,this._enabled=!1,this._pattern=``,this._empty=!1,this._onDidChangeEmptyState=new N,this.positionClassName=`ne`,this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new N,this.enabledDisposables=new A,this.disposables=new A,this.domNode=V(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(R(this.domNode,`dragstart`,()=>this.onDragStart())),this.messageDomNode=B(r.getHTMLElement(),V(`.monaco-list-type-filter-message`)),this.labelDomNode=B(this.domNode,V(`span.label`));let o=B(this.domNode,V(`.controls`));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=B(o,V(`input.filter`)),this.filterOnTypeDomNode.type=`checkbox`,this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(R(this.filterOnTypeDomNode,`input`,()=>this.onDidChangeFilterOnType())),this.clearDomNode=B(o,V(`button.clear`+Tz.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=t(`clear`,`Clear`),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,n.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),e.filterOnType!==void 0&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),e.automaticKeyboardNavigation!==void 0&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput(``)}enable(){if(this._enabled)return;let e=this.enabledDisposables.add(new KM(this.view.getHTMLElement(),`keydown`)),t=M.chain(e.event).filter(e=>!jR(e.target)||e.target===this.filterOnTypeDomNode).filter(e=>e.key!==`Dead`&&!/^Media/.test(e.key)).map(e=>new vi(e)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(e=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(e)&&!(e.keyCode===18||e.keyCode===16||e.keyCode===15||e.keyCode===17)||(this.pattern.length>0||this.triggered)&&(e.keyCode===9||e.keyCode===1)&&!e.altKey&&!e.ctrlKey&&!e.metaKey||e.keyCode===1&&(p?e.altKey&&!e.metaKey:e.ctrlKey)&&!e.shiftKey).forEach(e=>{e.stopPropagation(),e.preventDefault()}).event,n=this.enabledDisposables.add(new KM(this.clearDomNode,`click`));M.chain(M.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern=``,this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e==`string`?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(p?e.altKey:e.ctrlKey)?this.onInput(``):e.keyCode===1?this.onInput(this.pattern.length===0?``:this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){let t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,e=>!fL.isDefault(e.filterData));let n=this.tree.getFocus();if(n.length>0){let e=n[0];this.tree.getRelativeTop(e)===null&&this.tree.reveal(e,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){let e=this.view.getHTMLElement(),{left:t}=_a(e),n=e.clientWidth,r=n/2,i=this.domNode.clientWidth,a=new A,o=this.positionClassName,s=()=>{switch(o){case`nw`:this.domNode.style.top=`4px`,this.domNode.style.left=`4px`;break;case`ne`:this.domNode.style.top=`4px`,this.domNode.style.left=`${n-i-6}px`;break}},c=e=>{e.preventDefault();let n=e.clientX-t;e.dataTransfer&&(e.dataTransfer.dropEffect=`none`),o=n<r?`nw`:`ne`,s()},l=()=>{this.positionClassName=o,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top=``,this.domNode.style.left=``,Et(a)};s(),this.domNode.classList.remove(o),this.domNode.classList.add(`dragging`),a.add(Ot(()=>this.domNode.classList.remove(`dragging`))),a.add(R(document,`dragover`,e=>c(e))),a.add(R(this.domNode,`dragend`,()=>l())),mN.CurrentDragAndDropData=new pN(`vscode-ui`),a.add(Ot(()=>mN.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...wz.classNamesArray),this.filterOnTypeDomNode.classList.add(...Cz.classNamesArray),this.filterOnTypeDomNode.title=t(`disable filter on type`,`Disable Filter on Type`)):(this.filterOnTypeDomNode.classList.remove(...Cz.classNamesArray),this.filterOnTypeDomNode.classList.add(...wz.classNamesArray),this.filterOnTypeDomNode.title=t(`enable filter on type`,`Enable Filter on Type`))}render(){let e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=t(`empty`,`No elements found`),this._empty=!0):(this.messageDomNode.innerText=``,this._empty=!1),this.domNode.classList.toggle(`no-matches`,e),this.domNode.title=t(`found`,`Matched {0} out of {1} elements`,this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?``+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!fL.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),Et(this.disposables)}};function Lz(e){let t=hz.Unknown;return Ta(e.browserEvent.target,`monaco-tl-twistie`,`monaco-tl-row`)?t=hz.Twistie:Ta(e.browserEvent.target,`monaco-tl-contents`,`monaco-tl-row`)&&(t=hz.Element),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function Rz(e,t){t(e),e.children.forEach(e=>Rz(e,t))}var zz=class{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new N,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||=this.createNodeSet(),this._nodeSet}set(e,t){!t?.__forceEvent&&Op(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:n})}}get(){return this.elements||=this.nodes.map(e=>e.element),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let e=this.createNodeSet(),n=t=>e.delete(t);t.forEach(e=>Rz(e,n)),this.set([...e.values()]);return}let n=new Set,r=e=>n.add(this.identityProvider.getId(e.element).toString());t.forEach(e=>Rz(e,r));let i=new Map,a=e=>i.set(this.identityProvider.getId(e.element).toString(),e);e.forEach(e=>Rz(e,a));let o=[];for(let e of this.nodes){let t=this.identityProvider.getId(e.element).toString();if(!n.has(t))o.push(e);else{let e=i.get(t);e&&o.push(e)}}if(this.nodes.length>0&&o.length===0){let e=this.getFirstViewElementWithTrait();e&&o.push(e)}this._set(o,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},Bz=class extends HR{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(jR(e.browserEvent.target)||MR(e.browserEvent.target))return;let t=e.element;if(!t||this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let n=e.browserEvent.target,r=n.classList.contains(`monaco-tl-twistie`)||n.classList.contains(`monaco-icon-label`)&&n.classList.contains(`folder-icon`)&&e.browserEvent.offsetX<16,i=!1;if(i=typeof this.tree.expandOnlyOnTwistieClick==`function`?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick,i&&!r&&e.browserEvent.detail!==2||!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){let n=this.tree.model,a=n.getNodeLocation(t),o=e.browserEvent.altKey;if(this.tree.setFocus([a]),n.setCollapsed(a,void 0,o),i&&r)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains(`monaco-tl-twistie`)||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}},Vz=class extends $R{constructor(e,t,n,r,i,a,o,s){super(e,t,n,r,s),this.focusTrait=i,this.selectionTrait=a,this.anchorTrait=o}createMouseController(e){return new Bz(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;let r=[],i=[],a;n.forEach((t,n)=>{this.focusTrait.has(t)&&r.push(e+n),this.selectionTrait.has(t)&&i.push(e+n),this.anchorTrait.has(t)&&(a=e+n)}),r.length>0&&super.setFocus(Ip([...super.getFocus(),...r])),i.length>0&&super.setSelection(Ip([...super.getSelection(),...i])),typeof a==`number`&&super.setAnchor(a)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(e=>this.element(e)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(e=>this.element(e)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(e===void 0?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}},Hz=class{constructor(e,t,n,r,i={}){this._options=i,this.eventBufferer=new Bt,this.disposables=new A,this._onWillRefilter=new N,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new N;let a=new jz(n),o=new Vt,s=new Vt,c=new Nz(s.event);this.renderers=r.map(e=>new Pz(e,()=>this.model,o.event,c,i));for(let e of this.renderers)this.disposables.add(e);let l;i.keyboardNavigationLabelProvider&&(l=new Fz(this,i.keyboardNavigationLabelProvider,i.filter),i=Object.assign(Object.assign({},i),{filter:l}),this.disposables.add(l)),this.focus=new zz(()=>this.view.getFocusedElements()[0],i.identityProvider),this.selection=new zz(()=>this.view.getSelectedElements()[0],i.identityProvider),this.anchor=new zz(()=>this.view.getAnchorElement(),i.identityProvider),this.view=new Vz(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Az(()=>this.model,i)),{tree:this})),this.model=this.createModel(e,this.view,i),o.input=this.model.onDidChangeCollapseState;let u=M.forEach(this.model.onDidSplice,e=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)})});if(u(()=>null,null,this.disposables),s.input=M.chain(M.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{let e=new Set;for(let t of this.focus.getNodes())e.add(t);for(let t of this.selection.getNodes())e.add(t);return[...e.values()]}).event,i.keyboardSupport!==!1){let e=M.chain(this.view.onKeyDown).filter(e=>!jR(e.target)).map(e=>new vi(e));e.filter(e=>e.keyCode===15).on(this.onLeftArrow,this,this.disposables),e.filter(e=>e.keyCode===17).on(this.onRightArrow,this,this.disposables),e.filter(e=>e.keyCode===10).on(this.onSpace,this,this.disposables)}if(i.keyboardNavigationLabelProvider){let e=i.keyboardNavigationDelegate||FR;this.typeFilterController=new Iz(this,this.model,this.view,l,e),this.focusNavigationFilter=e=>this.typeFilterController.shouldAllowFocus(e),this.disposables.add(this.typeFilterController)}this.styleElement=Aa(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle(`always`,this._options.renderIndentGuides===Mz.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return M.map(this.view.onMouseDblClick,Lz)}get onPointer(){return M.map(this.view.onPointer,Lz)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return this._options.expandOnDoubleClick===void 0?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return this._options.expandOnlyOnTwistieClick===void 0?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle(`always`,this._options.renderIndentGuides===Mz.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){let t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){let n=e.map(e=>this.model.getNode(e));this.selection.set(n,t);let r=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setSelection(r,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){let n=e.map(e=>this.model.getNode(e));this.focus.set(n,t);let r=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setFocus(r,t,!0)}focusNext(e=1,t=!1,n,r=this.focusNavigationFilter){this.view.focusNext(e,t,n,r)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);let n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){let t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){let e=this.model.getParentNodeLocation(r);if(!e)return;let t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(e=>e.visible))return;let[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n),i=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,i)}dispose(){Et(this.disposables),this.view.dispose()}},Uz=class{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new xz(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(e,t){return n.sorter.compare(e.element,t.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=k.empty(),n={}){let r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=k.empty(),n){let r=new Set,i=new Set,a=e=>{var t;if(e.element===null)return;let a=e;if(r.add(a.element),this.nodes.set(a.element,a),this.identityProvider){let e=this.identityProvider.getId(a.element).toString();i.add(e),this.nodesByIdentity.set(e,a)}(t=n.onDidCreateNode)==null||t.call(n,a)},o=e=>{var t;if(e.element===null)return;let a=e;if(r.has(a.element)||this.nodes.delete(a.element),this.identityProvider){let e=this.identityProvider.getId(a.element).toString();i.has(e)||this.nodesByIdentity.delete(e)}(t=n.onDidDeleteNode)==null||t.call(n,a)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:a,onDidDeleteNode:o}))}preserveCollapseState(e=k.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),k.map(e,e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){let n=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(n)}if(!t)return Object.assign(Object.assign({},e),{children:this.preserveCollapseState(e.children)});let n=typeof e.collapsible==`boolean`?e.collapsible:t.collapsible,r=e.collapsed===void 0?t.collapsed:e.collapsed;return Object.assign(Object.assign({},e),{collapsible:n,collapsed:r,children:this.preserveCollapseState(e.children)})})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new gz(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new gz(this.user,`Invalid getParentNodeLocation call`);let t=this.nodes.get(e);if(!t)throw new gz(this.user,`Tree element not found: ${e}`);let n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new gz(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function Wz(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:k.map(k.from(e.children),Wz),collapsible:e.collapsible,collapsed:e.collapsed}}function Gz(e){let t=[e.element],n=e.incompressible||!1,r,i;for(;[i,r]=k.consume(k.from(e.children),2),!(i.length!==1||i[0].incompressible);)e=i[0],t.push(e.element);return{element:{elements:t,incompressible:n},children:k.map(k.concat(i,r),Gz),collapsible:e.collapsible,collapsed:e.collapsed}}function Kz(e,t=0){let n;return n=t<e.element.elements.length-1?[Kz(e,t+1)]:k.map(k.from(e.children),e=>Kz(e,0)),t===0&&e.element.incompressible?{element:e.element.elements[t],children:n,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:n,collapsible:e.collapsible,collapsed:e.collapsed}}function qz(e){return Kz(e,0)}function Jz(e,t,n){return e.element===t?Object.assign(Object.assign({},e),{children:n}):Object.assign(Object.assign({},e),{children:k.map(k.from(e.children),e=>Jz(e,t,n))})}var Yz=e=>({getId(t){return t.elements.map(t=>e.getId(t).toString()).join(`\0`)}}),Xz=class{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new Uz(e,t,n),this.enabled=n.compressionEnabled===void 0?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=k.empty(),n){let r=n.diffIdentityProvider&&Yz(n.diffIdentityProvider);if(e===null){let e=k.map(t,this.enabled?Gz:Wz);this._setChildren(null,e,{diffIdentityProvider:r,diffDepth:1/0});return}let i=this.nodes.get(e);if(!i)throw Error(`Unknown compressed tree node`);let a=this.model.getNode(i),o=this.model.getParentNodeLocation(i),s=this.model.getNode(o),c=Jz(qz(a),e,t),l=(this.enabled?Gz:Wz)(c),u=s.children.map(e=>e===a?l:e);this._setChildren(s.element,u,{diffIdentityProvider:r,diffDepth:a.depth-s.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let t=this.model.getNode().children,n=k.map(t,qz),r=k.map(n,e?Gz:Wz);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){let r=new Set;this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:e=>{for(let t of e.element.elements)r.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(let t of e.element.elements)r.has(t)||this.nodes.delete(t)}}))}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(e===void 0)return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new gz(this.user,`Tree element not found: ${e}`);return t}};const Zz=e=>e[e.length-1];var Qz=class e{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(t=>new e(this.unwrapper,t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}};function $z(e,t){return{splice(n,r,i){t.splice(n,r,i.map(t=>e.map(t)))},updateElementHeight(e,n){t.updateElementHeight(e,n)}}}function eB(e,t){return Object.assign(Object.assign({},t),{identityProvider:t.identityProvider&&{getId(n){return t.identityProvider.getId(e(n))}},sorter:t.sorter&&{compare(e,n){return t.sorter.compare(e.elements[0],n.elements[0])}},filter:t.filter&&{filter(n,r){return t.filter.filter(e(n),r)}}})}var tB=class{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Zz;let r=e=>this.elementMapper(e.elements);this.nodeMapper=new _z(e=>new Qz(r,e)),this.model=new Xz(e,$z(this.nodeMapper,t),eB(r,n))}get onDidSplice(){return M.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(e=>this.nodeMapper.map(e)),deletedNodes:t.map(e=>this.nodeMapper.map(e))}))}get onDidChangeCollapseState(){return M.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return M.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=k.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}},nB=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},rB=class extends Hz{constructor(e,t,n,r,i={}){super(e,t,n,r,i)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=k.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new Uz(e,t,n)}},iB=class{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){let i=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);i.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=i,this.renderer.renderCompressedElements(i,t,n.data,r))}disposeElement(e,t,n,r){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,r):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};nB([Kv],iB.prototype,`compressedTreeNodeProvider`,null);function aB(e,t){return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(n){let r;try{r=e().getCompressedTreeNode(n)}catch{return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n)}return r.element.elements.length===1?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(r.element.elements)}}})}var oB=class extends rB{constructor(e,t,n,r,i={}){let a=()=>this,o=r.map(e=>new iB(a,e));super(e,t,n,o,aB(a,i))}setChildren(e,t=k.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new tB(e,t,n)}updateOptions(e={}){super.updateOptions(e),e.compressionEnabled!==void 0&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}},sB=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function cB(e){return Object.assign(Object.assign({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function lB(e,t){return t.parent?t.parent===e?!0:lB(e,t.parent):!1}function uB(e,t){return e===t||lB(e,t)||lB(t,e)}var dB=class e{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},fB=class{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ez.classNamesArray),!0):(t.classList.remove(...Ez.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function pB(e){return{browserEvent:e.browserEvent,elements:e.elements.map(e=>e.element)}}function mB(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}var hB=class extends yR{constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function gB(e){return e instanceof yR?new hB(e):e}var _B=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(gB(e),t)}onDragOver(e,t,n,r,i=!0){return this.dnd.onDragOver(gB(e),t&&t.element,n,r)}drop(e,t,n,r){this.dnd.drop(gB(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}};function vB(e){return e&&Object.assign(Object.assign({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new _B(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>`treeitem`,isChecked:e.accessibilityProvider.isChecked?t=>!!e.accessibilityProvider?.isChecked(t.element):void 0,getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>`tree`,getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),filter:e.filter&&{filter(t,n){return e.filter.filter(t.element,n)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),sorter:void 0,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick===void 0?void 0:typeof e.expandOnlyOnTwistieClick==`function`?(t=>e.expandOnlyOnTwistieClick(t.element)):e.expandOnlyOnTwistieClick,additionalScrollHeight:e.additionalScrollHeight})}function yB(e,t){t(e),e.children.forEach(e=>yB(e,t))}var bB=class{constructor(e,t,n,r,i,a={}){this.user=e,this.dataSource=i,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new N,this._onDidChangeNodeSlowState=new N,this.nodeMapper=new _z(e=>new dB(e)),this.disposables=new A,this.identityProvider=a.identityProvider,this.autoExpandSingleChildren=a.autoExpandSingleChildren===void 0?!1:a.autoExpandSingleChildren,this.sorter=a.sorter,this.collapseByDefault=a.collapseByDefault,this.tree=this.createTree(e,t,n,r,a),this.root=cB({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return M.map(this.tree.onDidChangeFocus,pB)}get onDidChangeSelection(){return M.map(this.tree.onDidChangeSelection,pB)}get onMouseDblClick(){return M.map(this.tree.onMouseDblClick,mB)}get onPointer(){return M.map(this.tree.onPointer,mB)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,r,i){return new rB(e,t,new jz(n),r.map(e=>new fB(e,this.nodeMapper,this._onDidChangeNodeSlowState.event)),vB(i)||{})}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return sB(this,void 0,void 0,function*(){this.refreshPromises.forEach(e=>e.cancel()),this.refreshPromises.clear(),this.root.element=e;let n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop==`number`&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,r,i){return sB(this,void 0,void 0,function*(){if(this.root.element===void 0)throw new gz(this.user,`Tree input not set`);this.root.refreshPromise&&(yield this.root.refreshPromise,yield M.toPromise(this._onDidRender.event));let a=this.getDataNode(e);if(yield this.refreshAndRenderNode(a,t,r,i),n)try{this.tree.rerender(a)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){let n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return sB(this,void 0,void 0,function*(){if(this.root.element===void 0)throw new gz(this.user,`Tree input not set`);this.root.refreshPromise&&(yield this.root.refreshPromise,yield M.toPromise(this._onDidRender.event));let n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield M.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;let r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield M.toPromise(this._onDidRender.event)),r})}setSelection(e,t){let n=e.map(e=>this.getDataNode(e));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(e=>e.element)}setFocus(e,t){let n=e.map(e=>this.getDataNode(e));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(e=>e.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new gz(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,r){return sB(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,r)})}refreshNode(e,t,n){return sB(this,void 0,void 0,function*(){let r;return this.subTreeRefreshPromises.forEach((i,a)=>{!r&&uB(a,e)&&(r=i.then(()=>this.refreshNode(e,t,n)))}),r||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return sB(this,void 0,void 0,function*(){let r;e.refreshPromise=new Promise(e=>r=e),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let r=yield this.doRefreshNode(e,t,n);e.stale=!1,yield Bi.settled(r.map(e=>this.doRefreshSubTree(e,t,n)))}finally{r()}})}doRefreshNode(e,t,n){return sB(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(k.empty());else{let t=Mi(800);t.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},e=>null),r=this.doGetChildren(e).finally(()=>t.cancel())}try{let i=yield r;return this.setChildren(e,i,t,n)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),ft(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=Di(()=>sB(this,void 0,void 0,function*(){let t=yield this.dataSource.getChildren(e.element);return this.processChildren(t)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(ct))}setChildren(e,t,n,r){let i=[...t];if(e.children.length===0&&i.length===0)return[];let a=new Map,o=new Map;for(let t of e.children)if(a.set(t.element,t),this.identityProvider){let e=this.tree.isCollapsed(t);o.set(t.id,{node:t,collapsed:e})}let s=[],c=i.map(t=>{let i=!!this.dataSource.hasChildren(t);if(!this.identityProvider){let n=cB({element:t,parent:e,hasChildren:i});return i&&this.collapseByDefault&&!this.collapseByDefault(t)&&(n.collapsedByDefault=!1,s.push(n)),n}let c=this.identityProvider.getId(t).toString(),l=o.get(c);if(l){let e=l.node;return a.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=i,n?l.collapsed?(e.children.forEach(e=>yB(e,e=>this.nodes.delete(e.element))),e.children.splice(0,e.children.length),e.stale=!0):s.push(e):i&&this.collapseByDefault&&!this.collapseByDefault(t)&&(e.collapsedByDefault=!1,s.push(e)),e}let u=cB({element:t,parent:e,id:c,hasChildren:i});return r&&r.viewState.focus&&r.viewState.focus.indexOf(c)>-1&&r.focus.push(u),r&&r.viewState.selection&&r.viewState.selection.indexOf(c)>-1&&r.selection.push(u),r&&r.viewState.expanded&&r.viewState.expanded.indexOf(c)>-1?s.push(u):i&&this.collapseByDefault&&!this.collapseByDefault(t)&&(u.collapsedByDefault=!1,s.push(u)),u});for(let e of a.values())yB(e,e=>this.nodes.delete(e.element));for(let e of c)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&s.length===0&&(c[0].collapsedByDefault=!1,s.push(c[0])),s}render(e,t,n){let r=e.children.map(e=>this.asTreeElement(e,t)),i=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(e){return n.diffIdentityProvider.getId(e.element)}}});this.tree.setChildren(e===this.root?null:e,r,i),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return n=t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?!1:e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?k.map(e.children,e=>this.asTreeElement(e,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}},xB=class e{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},SB=class{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ez.classNamesArray),!0):(t.classList.remove(...Ez.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Et(this.disposables)}};function CB(e){let t=e&&vB(e);return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},t.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(e=>e.element))}})})}var wB=class extends bB{constructor(e,t,n,r,i,a,o={}){super(e,t,n,i,a,o),this.compressionDelegate=r,this.compressibleNodeMapper=new _z(e=>new xB(e)),this.filter=o.filter}createTree(e,t,n,r,i){return new oB(e,t,new jz(n),r.map(e=>new SB(e,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),CB(i)||{})}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);let n=e=>this.identityProvider.getId(e).toString(),r=e=>{let t=new Set;for(let r of e){let e=this.tree.getCompressedTreeNode(r===this.root?null:r);if(e.element)for(let r of e.element.elements)t.add(n(r.element))}return t},i=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t);let o=this.getSelection(),s=!1,c=this.getFocus(),l=!1,u=e=>{let t=e.element;if(t)for(let e=0;e<t.elements.length;e++){let r=n(t.elements[e].element),u=t.elements[t.elements.length-1].element;i.has(r)&&o.indexOf(u)===-1&&(o.push(u),s=!0),a.has(r)&&c.indexOf(u)===-1&&(c.push(u),l=!0)}e.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),s&&this.setSelection(o),l&&this.setFocus(c)}processChildren(e){return this.filter&&(e=k.filter(e,e=>{let t=TB(this.filter.filter(e,1));if(t===2)throw Error(`Recursive tree visibility not supported in async data compressed trees`);return t===1})),super.processChildren(e)}};function TB(e){return typeof e==`boolean`?e?1:0:vz(e)?yz(e.visibility):yz(e)}var EB=class extends Hz{constructor(e,t,n,r,i,a={}){super(e,t,n,r,a),this.user=e,this.dataSource=i,this.identityProvider=a.identityProvider}createModel(e,t,n){return new Uz(e,t,n)}};const DB=new H(`isWindows`,f,t(`isWindows`,`Whether the operating system is Windows`));var OB=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$=function(e,t){return function(n,r){t(n,r,e)}};const kB=Ur(`listService`);var AB=class{constructor(e){this._themeService=e,this.disposables=new A,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;let e=new UR(Aa(),``);this.disposables.add(UL(e,this._themeService))}if(this.lists.some(t=>t.widget===e))throw Error(`Cannot register the same widget multiple times`);let n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),Dt(e.onDidFocus(()=>this._lastFocusedWidget=e),Ot(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(e=>e!==n),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};AB=OB([$(0,Z_)],AB);var jB=new H(`listFocus`,!0);const MB=new H(`listSupportsMultiselect`,!0),NB=pg.and(jB,pg.not(`inputFocus`)),PB=new H(`listHasSelectionOrFocus`,!1),FB=new H(`listDoubleSelection`,!1),IB=new H(`listMultiSelection`,!1),LB=new H(`listSelectionNavigation`,!1),RB=`listAutomaticKeyboardNavigation`;function zB(e,t){let n=e.createScoped(t.getHTMLElement());return jB.bindTo(n),n}var BB=`workbench.list.multiSelectModifier`,VB=`workbench.list.openMode`,HB=`workbench.list.horizontalScrolling`,UB=`workbench.list.keyboardNavigation`,WB=`workbench.list.automaticKeyboardNavigation`,GB=`workbench.tree.indent`,KB=`workbench.tree.renderIndentGuides`,qB=`workbench.list.smoothScrolling`,JB=`workbench.list.mouseWheelScrollSensitivity`,YB=`workbench.list.fastScrollSensitivity`,XB=`workbench.tree.expandMode`;function ZB(e){return e.getValue(BB)===`alt`}var QB=class extends j{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=ZB(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(BB)&&(this.useAltAsMultipleSelectionModifier=ZB(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:RR(e)}isSelectionRangeChangeEvent(e){return zR(e)}};function $B(e,t,n){let r=new A;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(e){return n.mightProducePrintableCharacter(e)}},smoothScrolling:!!t.getValue(qB),mouseWheelScrollSensitivity:t.getValue(JB),fastScrollSensitivity:t.getValue(YB),multipleSelectionController:e.multipleSelectionController??r.add(new QB(t))}),r]}var eV=class extends $R{constructor(e,t,n,r,i,a,o,s,c,l){let u=i.horizontalScrolling===void 0?!!c.getValue(HB):i.horizontalScrolling,[d,f]=$B(i,c,l);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},BL(s.getColorTheme(),WL)),d),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=zB(a,this),this.themeService=s,this.listSupportsMultiSelect=MB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),LB.bindTo(this.contextKeyService).set(!!i.selectionNavigation),this.listHasSelectionOrFocus=PB.bindTo(this.contextKeyService),this.listDoubleSelection=FB.bindTo(this.contextKeyService),this.listMultiSelection=IB.bindTo(this.contextKeyService),this.horizontalScrolling=i.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ZB(c),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),i.overrideStyles&&this.updateStyles(i.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(e.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(c.onDidChangeConfiguration(e=>{e.affectsConfiguration(BB)&&(this._useAltAsMultipleSelectionModifier=ZB(c));let t={};if(e.affectsConfiguration(HB)&&this.horizontalScrolling===void 0){let e=!!c.getValue(HB);t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(qB)){let e=!!c.getValue(qB);t=Object.assign(Object.assign({},t),{smoothScrolling:e})}if(e.affectsConfiguration(JB)){let e=c.getValue(JB);t=Object.assign(Object.assign({},t),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(YB)){let e=c.getValue(YB);t=Object.assign(Object.assign({},t),{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new iV(this,Object.assign({configurationService:c},i)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)==null||t.dispose(),this._styler=UL(this,this.themeService,e)}dispose(){var e;(e=this._styler)==null||e.dispose(),super.dispose()}};eV=OB([$(5,Pg),$(6,kB),$(7,Z_),$(8,mf),$(9,yP)],eV);var tV=class extends rz{constructor(e,t,n,r,i,a,o,s,c,l){let u=i.horizontalScrolling===void 0?!!c.getValue(HB):i.horizontalScrolling,[d,f]=$B(i,c,l);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},BL(s.getColorTheme(),WL)),d),{horizontalScrolling:u})),this.disposables=new A,this.disposables.add(f),this.contextKeyService=zB(a,this),this.themeService=s,this.horizontalScrolling=i.horizontalScrolling,this.listSupportsMultiSelect=MB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),LB.bindTo(this.contextKeyService).set(!!i.selectionNavigation),this._useAltAsMultipleSelectionModifier=ZB(c),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),i.overrideStyles&&this.updateStyles(i.overrideStyles),i.overrideStyles&&this.disposables.add(UL(this,s,i.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(e=>{e.affectsConfiguration(BB)&&(this._useAltAsMultipleSelectionModifier=ZB(c));let t={};if(e.affectsConfiguration(HB)&&this.horizontalScrolling===void 0){let e=!!c.getValue(HB);t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(qB)){let e=!!c.getValue(qB);t=Object.assign(Object.assign({},t),{smoothScrolling:e})}if(e.affectsConfiguration(JB)){let e=c.getValue(JB);t=Object.assign(Object.assign({},t),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(YB)){let e=c.getValue(YB);t=Object.assign(Object.assign({},t),{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new iV(this,Object.assign({configurationService:c},i)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)==null||t.dispose(),this._styler=UL(this,this.themeService,e)}dispose(){var e;(e=this._styler)==null||e.dispose(),this.disposables.dispose(),super.dispose()}};tV=OB([$(5,Pg),$(6,kB),$(7,Z_),$(8,mf),$(9,yP)],tV);var nV=class extends mz{constructor(e,t,n,r,i,a,o,s,c,l,u){let d=a.horizontalScrolling===void 0?!!l.getValue(HB):a.horizontalScrolling,[f,p]=$B(a,l,u);super(e,t,n,r,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},BL(c.getColorTheme(),WL)),f),{horizontalScrolling:d})),this.disposables=new A,this.disposables.add(p),this.contextKeyService=zB(o,this),this.themeService=c,this.listSupportsMultiSelect=MB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(a.multipleSelectionSupport!==!1),LB.bindTo(this.contextKeyService).set(!!a.selectionNavigation),this.listHasSelectionOrFocus=PB.bindTo(this.contextKeyService),this.listDoubleSelection=FB.bindTo(this.contextKeyService),this.listMultiSelection=IB.bindTo(this.contextKeyService),this.horizontalScrolling=a.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ZB(l),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),a.overrideStyles&&this.updateStyles(a.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(e.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(l.onDidChangeConfiguration(e=>{e.affectsConfiguration(BB)&&(this._useAltAsMultipleSelectionModifier=ZB(l));let t={};if(e.affectsConfiguration(HB)&&this.horizontalScrolling===void 0){let e=!!l.getValue(HB);t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(qB)){let e=!!l.getValue(qB);t=Object.assign(Object.assign({},t),{smoothScrolling:e})}if(e.affectsConfiguration(JB)){let e=l.getValue(JB);t=Object.assign(Object.assign({},t),{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration(YB)){let e=l.getValue(YB);t=Object.assign(Object.assign({},t),{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new aV(this,Object.assign({configurationService:l},a)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)==null||t.dispose(),this._styler=UL(this,this.themeService,e)}dispose(){var e;(e=this._styler)==null||e.dispose(),this.disposables.dispose(),super.dispose()}};nV=OB([$(6,Pg),$(7,kB),$(8,Z_),$(9,mf),$(10,yP)],nV);var rV=class extends j{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new N),this.onDidOpen=this._onDidOpen.event,this._register(M.filter(this.widget.onDidChangeSelection,e=>e.browserEvent instanceof KeyboardEvent)(e=>this.onSelectionFromKeyboard(e))),this._register(this.widget.onPointer(e=>this.onPointer(e.element,e.browserEvent))),this._register(this.widget.onMouseDblClick(e=>this.onMouseDblClick(e.element,e.browserEvent))),typeof t?.openOnSingleClick!=`boolean`&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(VB)!==`doubleClick`,this._register(t?.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=t?.configurationService.getValue(VB)!==`doubleClick`}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;let t=e.browserEvent,n=typeof t.preserveFocus==`boolean`?t.preserveFocus:!0,r=typeof t.pinned==`boolean`?t.pinned:!n;this._open(this.getSelectedElement(),n,r,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;let n=t.button===1,r=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,n,r,t)}onMouseDblClick(e,t){if(!t)return;let n=t.target;if(n.classList.contains(`monaco-tl-twistie`)||n.classList.contains(`monaco-icon-label`)&&n.classList.contains(`folder-icon`)&&t.offsetX<16)return;let r=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,r,t)}_open(e,t,n,r,i){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:i})}},iV=class extends rV{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},aV=class extends rV{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},oV=class extends rV{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}};function sV(e,t){let n=!1;return r=>{if(n)return n=!1,!1;let i=t.softDispatch(r,e);return i&&i.enterChord?(n=!0,!1):(n=!1,!0)}}var cV=class extends rB{constructor(e,t,n,r,i,a,o,s,c,l,u){let{options:d,getAutomaticKeyboardNavigation:f,disposable:p}=pV(t,i,a,c,l,u);super(e,t,n,r,d),this.disposables.add(p),this.internals=new mV(this,i,f,i.overrideStyles,a,o,s,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};cV=OB([$(5,Pg),$(6,kB),$(7,Z_),$(8,mf),$(9,yP),$(10,fM)],cV);var lV=class extends oB{constructor(e,t,n,r,i,a,o,s,c,l,u){let{options:d,getAutomaticKeyboardNavigation:f,disposable:p}=pV(t,i,a,c,l,u);super(e,t,n,r,d),this.disposables.add(p),this.internals=new mV(this,i,f,i.overrideStyles,a,o,s,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};lV=OB([$(5,Pg),$(6,kB),$(7,Z_),$(8,mf),$(9,yP),$(10,fM)],lV);var uV=class extends EB{constructor(e,t,n,r,i,a,o,s,c,l,u,d){let{options:f,getAutomaticKeyboardNavigation:p,disposable:m}=pV(t,a,o,l,u,d);super(e,t,n,r,i,f),this.disposables.add(m),this.internals=new mV(this,a,p,a.overrideStyles,o,s,c,l,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};uV=OB([$(6,Pg),$(7,kB),$(8,Z_),$(9,mf),$(10,yP),$(11,fM)],uV);var dV=class extends bB{constructor(e,t,n,r,i,a,o,s,c,l,u,d){let{options:f,getAutomaticKeyboardNavigation:p,disposable:m}=pV(t,a,o,l,u,d);super(e,t,n,r,i,f),this.disposables.add(m),this.internals=new mV(this,a,p,a.overrideStyles,o,s,c,l,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};dV=OB([$(6,Pg),$(7,kB),$(8,Z_),$(9,mf),$(10,yP),$(11,fM)],dV);var fV=class extends wB{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){let{options:p,getAutomaticKeyboardNavigation:m,disposable:h}=pV(t,o,s,u,d,f);super(e,t,n,r,i,a,p),this.disposables.add(h),this.internals=new mV(this,o,m,o.overrideStyles,s,c,l,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};fV=OB([$(7,Pg),$(8,kB),$(9,Z_),$(10,mf),$(11,yP),$(12,fM)],fV);function pV(e,t,n,r,i,a){let o=()=>{let e=!!n.getContextKeyValue(RB);return e&&=!!r.getValue(WB),e},s=a.isScreenReaderOptimized(),c=t.simpleKeyboardNavigation||s?`simple`:r.getValue(UB),l=t.horizontalScrolling===void 0?!!r.getValue(HB):t.horizontalScrolling,[u,d]=$B(t,r,i),f=t.additionalScrollHeight;return{getAutomaticKeyboardNavigation:o,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof r.getValue(GB)==`number`?r.getValue(GB):void 0,renderIndentGuides:r.getValue(KB),smoothScrolling:!!r.getValue(qB),automaticKeyboardNavigation:o(),simpleKeyboardNavigation:c===`simple`,filterOnType:c===`filter`,horizontalScrolling:l,keyboardNavigationEventFilter:sV(e,i),additionalScrollHeight:f,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick??r.getValue(XB)===`doubleClick`})}}var mV=class{constructor(e,t,n,r,i,a,o,s,c){this.tree=e,this.themeService=o,this.disposables=[],this.contextKeyService=zB(i,e),this.listSupportsMultiSelect=MB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),LB.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=PB.bindTo(this.contextKeyService),this.hasDoubleSelection=FB.bindTo(this.contextKeyService),this.hasMultiSelection=IB.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=ZB(s);let l=new Set;l.add(RB);let u=()=>{let t=c.isScreenReaderOptimized()?`simple`:s.getValue(UB);e.updateOptions({simpleKeyboardNavigation:t===`simple`,filterOnType:t===`filter`})};this.updateStyleOverrides(r),this.disposables.push(this.contextKeyService,a.register(e),e.onDidChangeSelection(()=>{let t=e.getSelection(),n=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(t.length>0||n.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(t.length===2)})}),e.onDidChangeFocus(()=>{let t=e.getSelection(),n=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||n.length>0)}),s.onDidChangeConfiguration(r=>{let i={};if(r.affectsConfiguration(BB)&&(this._useAltAsMultipleSelectionModifier=ZB(s)),r.affectsConfiguration(GB)){let e=s.getValue(GB);i=Object.assign(Object.assign({},i),{indent:e})}if(r.affectsConfiguration(KB)){let e=s.getValue(KB);i=Object.assign(Object.assign({},i),{renderIndentGuides:e})}if(r.affectsConfiguration(qB)){let e=!!s.getValue(qB);i=Object.assign(Object.assign({},i),{smoothScrolling:e})}if(r.affectsConfiguration(UB)&&u(),r.affectsConfiguration(WB)&&(i=Object.assign(Object.assign({},i),{automaticKeyboardNavigation:n()})),r.affectsConfiguration(HB)&&t.horizontalScrolling===void 0){let e=!!s.getValue(HB);i=Object.assign(Object.assign({},i),{horizontalScrolling:e})}if(r.affectsConfiguration(XB)&&t.expandOnlyOnTwistieClick===void 0&&(i=Object.assign(Object.assign({},i),{expandOnlyOnTwistieClick:s.getValue(XB)===`doubleClick`})),r.affectsConfiguration(JB)){let e=s.getValue(JB);i=Object.assign(Object.assign({},i),{mouseWheelScrollSensitivity:e})}if(r.affectsConfiguration(YB)){let e=s.getValue(YB);i=Object.assign(Object.assign({},i),{fastScrollSensitivity:e})}Object.keys(i).length>0&&e.updateOptions(i)}),this.contextKeyService.onDidChangeContext(t=>{t.affectsSome(l)&&e.updateOptions({automaticKeyboardNavigation:n()})}),c.onDidChangeScreenReaderOptimized(()=>u())),this.navigator=new oV(e,Object.assign({configurationService:s},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){Et(this.styler),this.styler=e?UL(this.tree,this.themeService,e):j.None}dispose(){this.disposables=Et(this.disposables),Et(this.styler),this.styler=void 0}};mV=OB([$(4,Pg),$(5,kB),$(6,Z_),$(7,mf),$(8,fM)],mV),Jd.as(Qd.Configuration).registerConfiguration({id:`workbench`,order:7,title:t(`workbenchConfigurationTitle`,`Workbench`),type:`object`,properties:{[BB]:{type:`string`,enum:[`ctrlCmd`,`alt`],enumDescriptions:[t(`multiSelectModifier.ctrlCmd`,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),t(`multiSelectModifier.alt`,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:`ctrlCmd`,description:t({key:`multiSelectModifier`,comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},`The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.`)},[VB]:{type:`string`,enum:[`singleClick`,`doubleClick`],default:`singleClick`,description:t({key:`openModeModifier`,comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},`Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.`)},[HB]:{type:`boolean`,default:!1,description:t(`horizontalScrolling setting`,`Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.`)},[GB]:{type:`number`,default:8,minimum:0,maximum:40,description:t(`tree indent setting`,`Controls tree indentation in pixels.`)},[KB]:{type:`string`,enum:[`none`,`onHover`,`always`],default:`onHover`,description:t(`render tree indent guides`,`Controls whether the tree should render indent guides.`)},[qB]:{type:`boolean`,default:!1,description:t(`list smoothScrolling setting`,`Controls whether lists and trees have smooth scrolling.`)},[JB]:{type:`number`,default:1,description:t(`Mouse Wheel Scroll Sensitivity`,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[YB]:{type:`number`,default:5,description:t(`Fast Scroll Sensitivity`,"Scrolling speed multiplier when pressing `Alt`.")},[UB]:{type:`string`,enum:[`simple`,`highlight`,`filter`],enumDescriptions:[t(`keyboardNavigationSettingKey.simple`,`Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes.`),t(`keyboardNavigationSettingKey.highlight`,`Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements.`),t(`keyboardNavigationSettingKey.filter`,`Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.`)],default:`highlight`,description:t(`keyboardNavigationSettingKey`,`Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.`)},[WB]:{type:`boolean`,default:!0,markdownDescription:t(`automatic keyboard navigation setting`,"Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[XB]:{type:`string`,enum:[`singleClick`,`doubleClick`],default:`singleClick`,description:t(`expand mode`,`Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.`)}}});var hV;(function(e){e[e.Hint=1]=`Hint`,e[e.Info=2]=`Info`,e[e.Warning=4]=`Warning`,e[e.Error=8]=`Error`})(hV||={}),(function(e){function n(e,t){return t-e}e.compare=n;let r=Object.create(null);r[e.Error]=t(`sev.error`,`Error`),r[e.Warning]=t(`sev.warning`,`Warning`),r[e.Info]=t(`sev.info`,`Info`);function i(e){return r[e]||``}e.toString=i;function a(t){switch(t){case Dh.Error:return e.Error;case Dh.Warning:return e.Warning;case Dh.Info:return e.Info;case Dh.Ignore:return e.Hint}}e.fromSeverity=a;function o(t){switch(t){case e.Error:return Dh.Error;case e.Warning:return Dh.Warning;case e.Info:return Dh.Info;case e.Hint:return Dh.Ignore}}e.toSeverity=o})(hV||={});var gV;(function(e){function t(e){return n(e,!0)}e.makeKey=t;function n(e,t){let n=[``];return e.source?n.push(e.source.replace(``,`\\`)):n.push(``),e.code?typeof e.code==`string`?n.push(e.code.replace(``,`\\`)):n.push(e.code.value.replace(``,`\\`)):n.push(``),e.severity!==void 0&&e.severity!==null?n.push(hV.toString(e.severity)):n.push(``),e.message&&t?n.push(e.message.replace(``,`\\`)):n.push(``),e.startLineNumber!==void 0&&e.startLineNumber!==null?n.push(e.startLineNumber.toString()):n.push(``),e.startColumn!==void 0&&e.startColumn!==null?n.push(e.startColumn.toString()):n.push(``),e.endLineNumber!==void 0&&e.endLineNumber!==null?n.push(e.endLineNumber.toString()):n.push(``),e.endColumn!==void 0&&e.endColumn!==null?n.push(e.endColumn.toString()):n.push(``),n.push(``),n.join(``)}e.makeKeyOptionalMessage=n})(gV||={});const _V=Ur(`markerService`);var vV=class{constructor(){this._byResource=new hs,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let i=this._byOwner.get(t);i||(i=new hs,this._byOwner.set(t,i)),i.set(e,n)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let n=!1,r=!1,i=this._byResource.get(e);i&&(n=i.delete(t));let a=this._byOwner.get(t);if(a&&(r=a.delete(e)),n!==r)throw Error(`illegal state`);return n&&r}values(e){return typeof e==`string`?this._byOwner.get(e)?.values()??k.empty():F.isUri(e)?this._byResource.get(e)?.values()??k.empty():k.map(k.concat(...this._byOwner.values()),e=>e[1])}},yV=class{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new hs,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let e=this._data.get(t);e&&this._substract(e);let n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Vi.inMemory||e.scheme===Vi.walkThrough||e.scheme===Vi.walkThroughSnippet)return t;for(let{severity:n}of this._service.read({resource:e}))n===hV.Error?t.errors+=1:n===hV.Warning?t.warnings+=1:n===hV.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}},bV=class e{constructor(){this._onMarkerChanged=new zt({delay:0,merge:e._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new vV,this._stats=new yV(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(let n of t||[])this.changeOne(e,n,[])}changeOne(t,n,r){if(Pp(r))this._data.delete(n,t)&&this._onMarkerChanged.fire([n]);else{let i=[];for(let a of r){let r=e._toMarker(t,n,a);r&&i.push(r)}this._data.set(n,t,i),this._onMarkerChanged.fire([n])}}static _toMarker(e,t,n){let{code:r,severity:i,message:a,source:o,startLineNumber:s,startColumn:c,endLineNumber:l,endColumn:u,relatedInformation:d,tags:f}=n;if(a)return s=s>0?s:1,c=c>0?c:1,l=l>=s?l:s,u=u>0?u:c,{resource:t,owner:e,code:r,severity:i,message:a,source:o,startLineNumber:s,startColumn:c,endLineNumber:l,endColumn:u,relatedInformation:d,tags:f}}read(t=Object.create(null)){let{owner:n,resource:r,severities:i,take:a}=t;if((!a||a<0)&&(a=-1),n&&r){let t=this._data.get(r,n);if(t){let n=[];for(let r of t)if(e._accept(r,i)){let e=n.push(r);if(a>0&&e===a)break}return n}else return[]}else if(!n&&!r){let t=[];for(let n of this._data.values())for(let r of n)if(e._accept(r,i)){let e=t.push(r);if(a>0&&e===a)return t}return t}else{let t=this._data.values(r??n),o=[];for(let n of t)for(let t of n)if(e._accept(t,i)){let e=o.push(t);if(a>0&&e===a)return o}return o}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){let t=new hs;for(let n of e)for(let e of n)t.set(e,!0);return Array.from(t.keys())}},xV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},SV;(function(e){e[e.None=0]=`None`,e[e.Initialized=1]=`Initialized`,e[e.Closed=2]=`Closed`})(SV||={});var CV=class e extends j{constructor(t,n=Object.create(null)){super(),this.database=t,this.options=n,this._onDidChangeStorage=this._register(new N),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=SV.None,this.cache=new Map,this.flushDelayer=new ji(e.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)==null||t.forEach((e,t)=>this.accept(t,e)),(n=e.deleted)==null||n.forEach(e=>this.accept(e,void 0))}accept(e,t){if(this.state===SV.Closed)return;let n=!1;Qs(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){let n=this.cache.get(e);return Qs(n)?t:n}getBoolean(e,t){let n=this.get(e);return Qs(n)?t:n===`true`}getNumber(e,t){let n=this.get(e);return Qs(n)?t:parseInt(n,10)}set(e,t){return xV(this,void 0,void 0,function*(){if(this.state===SV.Closed)return;if(Qs(t))return this.delete(e);let n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return xV(this,void 0,void 0,function*(){if(this.state!==SV.Closed&&this.cache.delete(e))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return xV(this,void 0,void 0,function*(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var e;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(e=this.whenFlushedCallbacks.pop())==null||e()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}};CV.DEFAULT_FLUSH_DELAY=100;var wV=class{constructor(){this.onDidChangeItemsExternal=M.None,this.items=new Map}updateItems(e){return xV(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((e,t)=>this.items.set(t,e)),e.delete&&e.delete.forEach(e=>this.items.delete(e))})}},TV=`__$__targetStorageMarker`;const EV=Ur(`storageService`);var DV;(function(e){e[e.NONE=0]=`NONE`,e[e.SHUTDOWN=1]=`SHUTDOWN`})(DV||={});var OV=class e extends j{constructor(t={flushInterval:e.DEFAULT_FLUSH_INTERVAL}){super(),this.options=t,this._onDidChangeValue=this._register(new Rt),this._onDidChangeTarget=this._register(new Rt),this._onWillSaveState=this._register(new N),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===TV?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){return this.getStorage(t)?.get(e,n)}getBoolean(e,t,n){return this.getStorage(t)?.getBoolean(e,n)}getNumber(e,t,n){return this.getStorage(t)?.getNumber(e,n)}store(e,t,n,r){if(Qs(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,n,r),(i=this.getStorage(n))==null||i.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))==null||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var r,i;let a=this.getKeyTargets(t);typeof n==`number`?a[e]!==n&&(a[e]=n,(r=this.getStorage(t))==null||r.set(TV,JSON.stringify(a))):typeof a[e]==`number`&&(delete a[e],(i=this.getStorage(t))==null||i.set(TV,JSON.stringify(a)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||=this.loadKeyTargets(1),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||=this.loadKeyTargets(0),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){let t=this.get(TV,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}};OV.DEFAULT_FLUSH_INTERVAL=60*1e3;var kV=class extends OV{constructor(){super(),this.globalStorage=this._register(new CV(new wV)),this.workspaceStorage=this._register(new CV(new wV)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}},AV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},jV=function(e,t){return function(n,r){t(n,r,e)}},MV=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new NV(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};MV=AV([jV(0,lc)],MV);var NV=class e{constructor(e,t,n,r,i){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=r,this._menuService=i,this._disposables=new A,this._menuGroups=[],this._contextKeys=new Set,this._build();let a=new Li(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(a),this._disposables.add(dv.onDidChangeMenu(t=>{t.has(e)&&a.schedule()}));let o=this._disposables.add(new A);this._onDidChange=new N({onFirstListenerAdd:()=>{let e=new Li(()=>this._onDidChange.fire(this),t.eventDebounceDelay);o.add(e),o.add(r.onDidChangeContext(t=>{t.affectsSome(this._contextKeys)&&e.schedule()}))},onLastListenerRemove:o.clear.bind(o)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();let t=dv.getMenuItems(this._id),n;t.sort(e._compareMenuItems);for(let e of t){let t=e.group||``;(!n||n[0]!==t)&&(n=[t,[]],this._menuGroups.push(n)),n[1].push(e),this._collectContextKeys(e)}}_collectContextKeys(t){if(e._fillInKbExprKeys(t.when,this._contextKeys),cv(t)){if(t.command.precondition&&e._fillInKbExprKeys(t.command.precondition,this._contextKeys),t.command.toggled){let n=t.command.toggled.condition||t.command.toggled;e._fillInKbExprKeys(n,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&dv.getMenuItems(t.submenu).forEach(this._collectContextKeys,this)}getActions(e){let t=[];for(let n of this._menuGroups){let[r,i]=n,a=[];for(let t of i)if(this._contextKeyService.contextMatchesRules(t.when)){let n=cv(t)?new pv(t.command,t.alt,e,this._contextKeyService,this._commandService):new fv(t,this._menuService,this._contextKeyService,e);a.push(n)}a.length>0&&t.push([r,a])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(t,n){let r=t.group,i=n.group;if(r!==i){if(r){if(!i)return-1}else return 1;if(r===`navigation`)return-1;if(i===`navigation`)return 1;let e=r.localeCompare(i);if(e!==0)return e}let a=t.order||0,o=n.order||0;return a<o?-1:a>o?1:e._compareTitles(cv(t)?t.command.title:t.title,cv(n)?n.command.title:n.title)}static _compareTitles(e,t){let n=typeof e==`string`?e:e.original,r=typeof t==`string`?t:t.original;return n.localeCompare(r)}};NV=AV([jV(2,lc),jV(3,Pg),jV(4,uv)],NV);var PV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},FV=function(e,t){return function(n,r){t(n,r,e)}},IV=class extends j{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Ot(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){let n=[...this._markersData.keys()];this._markersData.clear();let r=this.model.deltaDecorations(n,t);for(let t=0;t<r.length;t++)this._markersData.set(r[t],e[t]);return n.length!==0||r.length!==0}getMarker(e){return this._markersData.get(e.id)}},LV=class extends j{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new N),this._markerDecorations=new hs,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){let n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t)})}_onModelAdded(e){let t=new IV(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){let t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Vi.inMemory||e.uri.scheme===Vi.internal||e.uri.scheme===Vi.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(e=>e.owner).forEach(t=>this._markerService.remove(t,[e.uri]))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(t=>({range:this._createDecorationRange(e.model,t),options:this._createDecorationOption(t)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=L.lift(t);return t.severity===hV.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,r,i,a;switch(e.severity){case hV.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?`squiggly-unnecessary`:`squiggly-hint`,r=0;break;case hV.Warning:t=`squiggly-warning`,n=$_(yE),r=20,a={color:$_(TT),position:Vc.Inline};break;case hV.Info:t=`squiggly-info`,n=$_(bE),r=10;break;case hV.Error:default:t=`squiggly-error`,n=$_(vE),r=30,a={color:$_(wT),position:Vc.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(i=`squiggly-inline-unnecessary`),e.tags.indexOf(2)!==-1&&(i=`squiggly-inline-deprecated`)),{description:`marker-decoration`,stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Bc.Right},minimap:a,zIndex:r,inlineClassName:i}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};LV=PV([FV(0,Bl),FV(1,_V)],LV);var RV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zV=function(e,t){return function(n,r){t(n,r,e)}},BV=class extends j{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new N,this._accessibilityModeEnabledContext=pM.bindTo(this._contextKeyService);let n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`editor.accessibilitySupport`)&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let e=this._configurationService.getValue(`editor.accessibilitySupport`);return e===`on`||e===`auto`&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};BV=RV([zV(0,Pg),zV(1,mf)],BV);var VV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},HV=class{constructor(){this.mapTextToType=new Map,this.findText=``}writeText(e,t){return VV(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(e){console.error(e)}let n=document.activeElement,r=document.body.appendChild(V(`textarea`,{"aria-hidden":!0}));r.style.height=`1px`,r.style.width=`1px`,r.style.position=`absolute`,r.value=e,r.focus(),r.select(),document.execCommand(`copy`),n instanceof HTMLElement&&n.focus(),document.body.removeChild(r)})}readText(e){return VV(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||``;try{return yield navigator.clipboard.readText()}catch(e){return console.error(e),``}})}readFindText(){return VV(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return VV(this,void 0,void 0,function*(){this.findText=e})}},UV=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},WV=function(e,t){return function(n,r){t(n,r,e)}},GV=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function KV(e){return e.scheme===Vi.file?e.fsPath:e.path}var qV=0,JV=class{constructor(e,t,n,r,i,a,o){this.id=++qV,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=i,this.sourceId=a,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?`  VALID`:`INVALID`}] ${this.actual.constructor.name} - ${this.actual}`}},YV=class{constructor(e,t){this.resourceLabel=e,this.reason=t}},XV=class{constructor(){this.elements=new Map}createMessage(){let e=[],n=[];for(let[,t]of this.elements)(t.reason===0?e:n).push(t.resourceLabel);let r=[];return e.length>0&&r.push(t({key:`externalRemoval`,comment:[`{0} is a list of filenames`]},`The following files have been closed and modified on disk: {0}.`,e.join(`, `))),n.length>0&&r.push(t({key:`noParallelUniverses`,comment:[`{0} is a list of filenames`]},`The following files have been modified in an incompatible way: {0}.`,n.join(`, `))),r.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}},ZV=class{constructor(e,t,n,r,i,a,o){this.id=++qV,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=i,this.sourceId=a,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split==`function`}removeResource(e,t,n){this.removedResources||=new XV,this.removedResources.has(t)||this.removedResources.set(t,new YV(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||=new XV,this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new YV(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?`INVALID`:`  VALID`}] ${this.actual.constructor.name} - ${this.actual}`}},QV=class{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(let e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(let n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(let e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let e=0,n=this._past.length;e<n;e++)t.push(this._past[e].id);for(let e=this._future.length-1;e>=0;e--)t.push(this._future[e].id);return new Nx(e,t)}restoreSnapshot(e){let t=e.elements.length,n=!0,r=0,i=-1;for(let a=0,o=this._past.length;a<o;a++,r++){let o=this._past[a];n&&(r>=t||o.id!==e.elements[r])&&(n=!1,i=0),!n&&o.type===1&&o.removeResource(this.resourceLabel,this.strResource,0)}let a=-1;for(let i=this._future.length-1;i>=0;i--,r++){let o=this._future[i];n&&(r>=t||o.id!==e.elements[r])&&(n=!1,a=i),!n&&o.type===1&&o.removeResource(this.resourceLabel,this.strResource,0)}i!==-1&&(this._past=this._past.slice(0,i)),a!==-1&&(this._future=this._future.slice(a+1)),this.versionId++}getElements(){let e=[],t=[];for(let t of this._past)e.push(t.actual);for(let e of this._future)t.push(e.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}},$V=class{constructor(e){this.editStacks=e,this._versionIds=[];for(let e=0,t=this.editStacks.length;e<t;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}},eH=new QV(``,``);eH.locked=!0;var tH=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(let t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log(`------------------------------------`),console.log(`AFTER ${e}: `);let t=[];for(let e of this._editStacks)t.push(e[1].toString());console.log(t.join(`
`))}pushElement(e,t=Px.None,n=Fx.None){if(e.type===0){let r=KV(e.resource),i=this.getUriComparisonKey(e.resource);this._pushElement(new JV(e,r,i,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{let r=new Set,i=[],a=[];for(let t of e.resources){let e=KV(t),n=this.getUriComparisonKey(t);r.has(n)||(r.add(n),i.push(e),a.push(n))}i.length===1?this._pushElement(new JV(e,i[0],a[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new ZV(e,i,a,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){let n=e.resourceLabels[t],r=e.strResources[t],i;this._editStacks.has(r)?i=this._editStacks.get(r):(i=new QV(n,r),this._editStacks.set(r,i)),i.pushElement(e)}}getLastElement(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);if(e.hasFutureElements())return null;let n=e.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){let n=e.actual.split(),r=new Map;for(let e of n){let t=new JV(e,KV(e.resource),this.getUriComparisonKey(e.resource),0,0,0,0);r.set(t.strResource,t)}for(let n of e.strResources)t&&t.has(n)||this._editStacks.get(n).splitPastWorkspaceElement(e,r)}_splitFutureWorkspaceElement(e,t){let n=e.actual.split(),r=new Map;for(let e of n){let t=new JV(e,KV(e.resource),this.getUriComparisonKey(e.resource),0,0,0,0);r.set(t.strResource,t)}for(let n of e.strResources)t&&t.has(n)||this._editStacks.get(n).splitFutureWorkspaceElement(e,r)}removeElements(e){let t=typeof e==`string`?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){let r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}createSnapshot(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new Nx(e,[])}restoreSnapshot(e){let t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){let n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestPastElement();a&&a.sourceId===e&&(!t||a.sourceOrder>t.sourceOrder)&&(t=a,n=r)}return[t,n]}canUndo(e){if(e instanceof Fx){let[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){ct(e);for(let e of t.strResources)this.removeElements(e);this._notificationService.error(e)}_acquireLocks(e){for(let t of e.editStacks)if(t.locked)throw Error(`Cannot acquire edit stack lock`);for(let t of e.editStacks)t.locked=!0;return()=>{for(let t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,i){let a=this._acquireLocks(n),o;try{o=t()}catch(t){return a(),r.dispose(),this._onError(t,e)}return o?o.then(()=>(a(),r.dispose(),i()),t=>(a(),r.dispose(),this._onError(t,e))):(a(),r.dispose(),i())}_invokeWorkspacePrepare(e){return GV(this,void 0,void 0,function*(){if(e.actual.prepareUndoRedo===void 0)return j.None;let t=e.actual.prepareUndoRedo();return t===void 0?j.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||e.actual.prepareUndoRedo===void 0)return t(j.None);let n=e.actual.prepareUndoRedo();return n?Tt(n)?t(n):n.then(e=>t(e)):t(j.None)}_getAffectedEditStacks(e){let t=[];for(let n of e.strResources)t.push(this._editStacks.get(n)||eH);return new $V(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new nH(this._undo(e,0,!0));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(r),new nH}_checkWorkspaceUndo(e,n,r,i){if(n.removedResources)return this._tryToSplitAndUndo(e,n,n.removedResources,t({key:`cannotWorkspaceUndo`,comment:[`{0} is a label for an operation. {1} is another message.`]},`Could not undo '{0}' across all files. {1}`,n.label,n.removedResources.createMessage()));if(i&&n.invalidatedResources)return this._tryToSplitAndUndo(e,n,n.invalidatedResources,t({key:`cannotWorkspaceUndo`,comment:[`{0} is a label for an operation. {1} is another message.`]},`Could not undo '{0}' across all files. {1}`,n.label,n.invalidatedResources.createMessage()));let a=[];for(let e of r.editStacks)e.getClosestPastElement()!==n&&a.push(e.resourceLabel);if(a.length>0)return this._tryToSplitAndUndo(e,n,null,t({key:`cannotWorkspaceUndoDueToChanges`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not undo '{0}' across all files because changes were made to {1}`,n.label,a.join(`, `)));let o=[];for(let e of r.editStacks)e.locked&&o.push(e.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,n,null,t({key:`cannotWorkspaceUndoDueToInProgressUndoRedo`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}`,n.label,o.join(`, `))):r.isValid()?null:this._tryToSplitAndUndo(e,n,null,t({key:`cannotWorkspaceUndoDueToInMeantimeUndoRedo`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime`,n.label))}_workspaceUndo(e,t,n){let r=this._getAffectedEditStacks(t),i=this._checkWorkspaceUndo(e,t,r,!1);return i?i.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(let[,t]of this._editStacks){let n=t.getClosestPastElement();if(n){if(n===e){let n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,n,r,i){return GV(this,void 0,void 0,function*(){if(n.canSplit()&&!this._isPartOfUndoGroup(n)){let a=yield this._dialogService.show(Dh.Info,t(`confirmWorkspace`,`Would you like to undo '{0}' across all files?`,n.label),[t({key:`ok`,comment:[`{0} denotes a number that is > 1`]},`Undo in {0} Files`,r.editStacks.length),t(`nok`,`Undo this File`),t(`cancel`,`Cancel`)],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(n,null),this._undo(e,0,!0);let o=this._checkWorkspaceUndo(e,n,r,!1);if(o)return o.returnValue;i=!0}let a;try{a=yield this._invokeWorkspacePrepare(n)}catch(e){return this._onError(e,n)}let o=this._checkWorkspaceUndo(e,n,r,!0);if(o)return a.dispose(),o.returnValue;for(let e of r.editStacks)e.moveBackward(n);return this._safeInvokeWithLocks(n,()=>n.actual.undo(),r,a,()=>this._continueUndoInGroup(n.groupId,i))})}_resourceUndo(e,n,r){if(!n.isValid){e.flushAllElements();return}if(e.locked){let e=t({key:`cannotResourceUndoDueToInProgressUndoRedo`,comment:[`{0} is a label for an operation.`]},`Could not undo '{0}' because there is already an undo or redo operation running.`,n.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(n,t=>(e.moveBackward(n),this._safeInvokeWithLocks(n,()=>n.actual.undo(),new $V([e]),t,()=>this._continueUndoInGroup(n.groupId,r))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestPastElement();a&&a.groupId===e&&(!t||a.groupOrder>t.groupOrder)&&(t=a,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;let[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Fx){let[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e==`string`?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;let r=this._editStacks.get(e),i=r.getClosestPastElement();if(i){if(i.groupId){let[e,r]=this._findClosestUndoElementInGroup(i.groupId);if(i!==e&&r)return this._undo(r,t,n)}if((i.sourceId!==t||i.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,i);try{return i.type===1?this._workspaceUndo(e,i,n):this._resourceUndo(r,i,n)}finally{}}}_confirmAndContinueUndo(e,n,r){return GV(this,void 0,void 0,function*(){if((yield this._dialogService.show(Dh.Info,t(`confirmDifferentSource`,`Would you like to undo '{0}'?`,r.label),[t(`confirmDifferentSource.yes`,`Yes`),t(`cancel`,`Cancel`)],{cancelId:1})).choice!==1)return this._undo(e,n,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestFutureElement();a&&a.sourceId===e&&(!t||a.sourceOrder<t.sourceOrder)&&(t=a,n=r)}return[t,n]}canRedo(e){if(e instanceof Fx){let[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new nH(this._redo(e));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(r),new nH}_checkWorkspaceRedo(e,n,r,i){if(n.removedResources)return this._tryToSplitAndRedo(e,n,n.removedResources,t({key:`cannotWorkspaceRedo`,comment:[`{0} is a label for an operation. {1} is another message.`]},`Could not redo '{0}' across all files. {1}`,n.label,n.removedResources.createMessage()));if(i&&n.invalidatedResources)return this._tryToSplitAndRedo(e,n,n.invalidatedResources,t({key:`cannotWorkspaceRedo`,comment:[`{0} is a label for an operation. {1} is another message.`]},`Could not redo '{0}' across all files. {1}`,n.label,n.invalidatedResources.createMessage()));let a=[];for(let e of r.editStacks)e.getClosestFutureElement()!==n&&a.push(e.resourceLabel);if(a.length>0)return this._tryToSplitAndRedo(e,n,null,t({key:`cannotWorkspaceRedoDueToChanges`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not redo '{0}' across all files because changes were made to {1}`,n.label,a.join(`, `)));let o=[];for(let e of r.editStacks)e.locked&&o.push(e.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,n,null,t({key:`cannotWorkspaceRedoDueToInProgressUndoRedo`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}`,n.label,o.join(`, `))):r.isValid()?null:this._tryToSplitAndRedo(e,n,null,t({key:`cannotWorkspaceRedoDueToInMeantimeUndoRedo`,comment:[`{0} is a label for an operation. {1} is a list of filenames.`]},`Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime`,n.label))}_workspaceRedo(e,t){let n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return GV(this,void 0,void 0,function*(){let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let i=this._checkWorkspaceRedo(e,t,n,!0);if(i)return r.dispose(),i.returnValue;for(let e of n.editStacks)e.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,n){if(!n.isValid){e.flushAllElements();return}if(e.locked){let e=t({key:`cannotResourceRedoDueToInProgressUndoRedo`,comment:[`{0} is a label for an operation.`]},`Could not redo '{0}' because there is already an undo or redo operation running.`,n.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(n,t=>(e.moveForward(n),this._safeInvokeWithLocks(n,()=>n.actual.redo(),new $V([e]),t,()=>this._continueRedoInGroup(n.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestFutureElement();a&&a.groupId===e&&(!t||a.groupOrder<t.groupOrder)&&(t=a,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;let[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Fx){let[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e==`string`?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;let t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){let[e,t]=this._findClosestRedoElementInGroup(n.groupId);if(n!==e&&t)return this._redo(t)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};tH=UV([WV(0,tR),WV(1,$g)],tH);var nH=class{constructor(e){this.returnValue=e}};wf(Mx,tH);var rH=RegExp(`(\\\\)?\\$\\((${eu.iconNameExpression}(?:${eu.iconModifierExpression})?)\\)`,`g`);function iH(e){let t=[],n,r=0,i=0;for(;(n=rH.exec(e))!==null;){i=n.index||0,t.push(e.substring(r,i)),r=(n.index||0)+n[0].length;let[,a,o]=n;t.push(a?`$(${o})`:aH({id:o}))}return r<e.length&&t.push(e.substring(r)),t}function aH(e){let t=V(`span`);return t.classList.add(...eu.asClassNameArray(e)),t}var oH={buttonBackground:J.fromHex(`#0E639C`),buttonHoverBackground:J.fromHex(`#006BB3`),buttonForeground:J.white},sH=class extends j{constructor(e,t){super(),this._onDidClick=this._register(new N),this.options=t||Object.create(null),Oc(this.options,oH,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement(`a`),this._element.classList.add(`monaco-button`),this._element.tabIndex=0,this._element.setAttribute(`role`,`button`),e.appendChild(this._element),this._register(Yv.addTarget(this._element)),[z.CLICK,Jv.Tap].forEach(e=>{this._register(R(this._element,e,e=>{if(!this.enabled){La.stop(e);return}this._onDidClick.fire(e)}))}),this._register(R(this._element,z.KEY_DOWN,e=>{let t=new vi(e),n=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),n=!0):t.equals(9)&&(this._element.blur(),n=!0),n&&La.stop(t,!0)})),this._register(R(this._element,z.MOUSE_OVER,e=>{this._element.classList.contains(`disabled`)||this.setHoverBackground()})),this._register(R(this._element,z.MOUSE_OUT,e=>{this.applyStyles()})),this.focusTracker=this._register(Va(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;e=this.options.secondary?this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():``,e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():``):(t=this.buttonForeground?this.buttonForeground.toString():``,e=this.buttonBackground?this.buttonBackground.toString():``);let n=this.buttonBorder?this.buttonBorder.toString():``;this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?`1px`:``,this._element.style.borderStyle=n?`solid`:``,this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add(`monaco-text-button`),this.options.supportIcons?Ua(this._element,...iH(e)):this._element.textContent=e,typeof this.options.title==`string`?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove(`disabled`),this._element.setAttribute(`aria-disabled`,`false`),this._element.tabIndex=0):(this._element.classList.add(`disabled`),this._element.setAttribute(`aria-disabled`,`true`))}get enabled(){return!this._element.classList.contains(`disabled`)}},cH={badgeBackground:J.fromHex(`#4D4D4D`),badgeForeground:J.fromHex(`#FFFFFF`)},lH=class{constructor(e,t){this.count=0,this.options=t||Object.create(null),Oc(this.options,cH,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=B(e,V(`.monaco-count-badge`)),this.countFormat=this.options.countFormat||`{0}`,this.titleFormat=this.options.titleFormat||``,this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=ao(this.countFormat,this.count),this.element.title=ao(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){let e=this.badgeBackground?this.badgeBackground.toString():``,t=this.badgeForeground?this.badgeForeground.toString():``,n=this.badgeBorder?this.badgeBorder.toString():``;this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?`1px`:``,this.element.style.borderStyle=n?`solid`:``,this.element.style.borderColor=n}}},uH=`done`,dH=`active`,fH=`infinite`,pH=`discrete`,mH={progressBarBackground:J.fromHex(`#0E70C0`)},hH=class extends j{constructor(e,t){super(),this.options=t||Object.create(null),Oc(this.options,mH,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new Li(()=>qa(this.element),0)),this.create(e)}create(e){this.element=document.createElement(`div`),this.element.classList.add(`monaco-progress-container`),this.element.setAttribute(`role`,`progressbar`),this.element.setAttribute(`aria-valuemin`,`0`),e.appendChild(this.element),this.bit=document.createElement(`div`),this.bit.classList.add(`progress-bit`),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width=`inherit`,this.bit.style.opacity=`1`,this.element.classList.remove(dH,fH,pH),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(uH),this.element.classList.contains(fH)?(this.bit.style.opacity=`0`,e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width=`inherit`,e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width=`2%`,this.bit.style.opacity=`1`,this.element.classList.remove(pH,uH),this.element.classList.add(dH,fH),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){let e=this.progressBarBackground?this.progressBarBackground.toString():``;this.bit.style.backgroundColor=e}}},gH=class{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}};const _H=new gH(`id#`);var vH={},yH=new gH(`quick-input-button-icon-`);function bH(e){if(!e)return;let t,n=e.dark.toString();return vH[n]?t=vH[n]:(t=yH.nextId(),Pa(`.${t}`,`background-image: ${$a(e.light||e.dark)}`),Pa(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${$a(e.dark)}`),vH[n]=t),t}const xH={ctrlCmd:!1,alt:!1};var SH;(function(e){e[e.Blur=1]=`Blur`,e[e.Gesture=2]=`Gesture`,e[e.Other=3]=`Other`})(SH||={});var CH;(function(e){e[e.NONE=0]=`NONE`,e[e.FIRST=1]=`FIRST`,e[e.SECOND=2]=`SECOND`,e[e.LAST=3]=`LAST`})(CH||={});function wH(e,t={}){let n=EH(t);return n.textContent=e,n}function TH(e,t={}){let n=EH(t);return OH(n,kH(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),n}function EH(e){let t=e.inline?`span`:`div`,n=document.createElement(t);return e.className&&(n.className=e.className),n}var DH=class{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function OH(e,t,n,r){let i;if(t.type===2)i=document.createTextNode(t.content||``);else if(t.type===3)i=document.createElement(`b`);else if(t.type===4)i=document.createElement(`i`);else if(t.type===7&&r)i=document.createElement(`code`);else if(t.type===5&&n){let e=document.createElement(`a`);e.href=`#`,n.disposables.add(Xi(e,`click`,e=>{n.callback(String(t.index),e)})),i=e}else t.type===8?i=document.createElement(`br`):t.type===1&&(i=e);i&&e!==i&&e.appendChild(i),i&&Array.isArray(t.children)&&t.children.forEach(e=>{OH(i,e,n,r)})}function kH(e,t){let n={type:1,children:[]},r=0,i=n,a=[],o=new DH(e);for(;!o.eos();){let e=o.next(),n=e===`\\`&&jH(o.peek(),t)!==0;if(n&&(e=o.next()),!n&&AH(e,t)&&e===o.peek()){o.advance(),i.type===2&&(i=a.pop());let n=jH(e,t);if(i.type===n||i.type===5&&n===6)i=a.pop();else{let e={type:n,children:[]};n===5&&(e.index=r,r++),i.children.push(e),a.push(i),i=e}}else if(e===`
`)i.type===2&&(i=a.pop()),i.children.push({type:8});else if(i.type!==2){let t={type:2,content:e};i.children.push(t),a.push(i),i=t}else i.content+=e}return i.type===2&&(i=a.pop()),a.length,n}function AH(e,t){return jH(e,t)!==0}function jH(e,t){switch(e){case`*`:return 3;case`_`:return 4;case`[`:return 5;case`]`:return 6;case"`":return t?7:0;default:return 0}}var MH=class{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}},NH=class{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()===this._elements.length-1?null:this._navigator.next()}previous(){return this._currentPosition()===0?null:this._navigator.previous()}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new MH(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}},PH=V,FH={inputBackground:J.fromHex(`#3C3C3C`),inputForeground:J.fromHex(`#CCCCCC`),inputValidationInfoBorder:J.fromHex(`#55AAFF`),inputValidationInfoBackground:J.fromHex(`#063B49`),inputValidationWarningBorder:J.fromHex(`#B89500`),inputValidationWarningBackground:J.fromHex(`#352A05`),inputValidationErrorBorder:J.fromHex(`#BE1100`),inputValidationErrorBackground:J.fromHex(`#5A1D1D`)},IH=class extends xk{constructor(e,t,n){super(),this.state=`idle`,this.maxHeight=1/0,this._onDidChange=this._register(new N),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new N),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Oc(this.options,FH,!1),this.message=null,this.placeholder=this.options.placeholder||``,this.tooltip=this.options.tooltip??(this.placeholder||``),this.ariaLabel=this.options.ariaLabel||``,this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=B(e,PH(`.monaco-inputbox.idle`));let r=this.options.flexibleHeight?`textarea`:`input`,i=B(this.element,PH(`.ibwrapper`));if(this.input=B(i,PH(r+`.input.empty`)),this.input.setAttribute(`autocorrect`,`off`),this.input.setAttribute(`autocapitalize`,`off`),this.input.setAttribute(`spellcheck`,`false`),this.onfocus(this.input,()=>this.element.classList.add(`synthetic-focus`)),this.onblur(this.input,()=>this.element.classList.remove(`synthetic-focus`)),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight==`number`?this.options.flexibleMaxHeight:1/0,this.mirror=B(i,PH(`div.mirror`)),this.mirror.innerText=`\xA0`,this.scrollableElement=new qk(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute(`wrap`,`off`),this.mirror.style.whiteSpace=`pre`,this.mirror.style.wordWrap=`initial`),B(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(e=>this.input.scrollTop=e.scrollTop));let t=this._register(new KM(document,`selectionchange`)),n=M.filter(t.event,()=>document.getSelection()?.anchorNode===i);this._register(n(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||`text`,this.input.setAttribute(`wrap`,`off`);this.ariaLabel&&this.input.setAttribute(`aria-label`,this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new vN(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute(`placeholder`,``)}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute(`placeholder`,this.placeholder||``)}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute(`placeholder`,e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute(`aria-label`,this.ariaLabel):this.input.removeAttribute(`aria-label`)}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight==`number`?this.cachedHeight:Sa(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute(`disabled`)}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return ya(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;this.mirror&&(t=(parseFloat(this.mirror.style.paddingLeft||``)||0)+(parseFloat(this.mirror.style.paddingRight||``)||0)),this.input.style.width=e-t+`px`}else this.input.style.width=e+`px`;this.mirror&&(this.mirror.style.width=e+`px`)}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+`px`,this.mirror&&(this.mirror.style.paddingRight=e+`px`)}updateScrollDimensions(){if(typeof this.cachedContentHeight!=`number`||typeof this.cachedHeight!=`number`||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove(`idle`),this.element.classList.remove(`info`),this.element.classList.remove(`warning`),this.element.classList.remove(`error`),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:``,(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove(`info`),this.element.classList.remove(`warning`),this.element.classList.remove(`error`),this.element.classList.add(`idle`),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute(`aria-invalid`,`true`),this.showMessage(e)):this.inputElement.hasAttribute(`aria-invalid`)&&(this.inputElement.removeAttribute(`aria-invalid`),this.hideMessage())),e?.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return`info`;case 2:return`warning`;default:return`error`}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,n=()=>e.style.width=ya(this.element)+`px`;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:t=>{if(!this.message)return null;e=B(t,PH(`.monaco-inputbox-container`)),n();let r={inline:!0,className:`monaco-inputbox-message`},i=this.message.formatContent?TH(this.message.content,r):wH(this.message.content,r);i.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return i.style.backgroundColor=a.background?a.background.toString():``,i.style.color=a.foreground?a.foreground.toString():``,i.style.border=a.border?`1px solid ${a.border}`:``,B(e,i),null},onHide:()=>{this.state=`closed`},layout:n});let r;r=this.message.type===3?t(`alertErrorMessage`,`Error: {0}`,this.message.content):this.message.type===2?t(`alertWarningMessage`,`Warning: {0}`,this.message.content):t(`alertInfoMessage`,`Info: {0}`,this.message.content),B_(r),this.state=`open`}_hideMessage(){this.contextViewProvider&&(this.state===`open`&&this.contextViewProvider.hideContextView(),this.state=`idle`)}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle(`empty`,!this.value),this.state===`open`&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,t=e.charCodeAt(e.length-1)===10?` `:``;(e+t).replace(/\u000c/g,``)?this.mirror.textContent=e+t:this.mirror.innerText=`\xA0`,this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){let e=this.inputBackground?this.inputBackground.toString():``,t=this.inputForeground?this.inputForeground.toString():``,n=this.inputBorder?this.inputBorder.toString():``;this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor=`inherit`,this.input.style.color=t,this.element.style.borderWidth=n?`1px`:``,this.element.style.borderStyle=n?`solid`:``,this.element.style.borderColor=n}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=Sa(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+`px`,this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,i=t.value;n!==null&&r!==null&&(this.value=i.substr(0,n)+e+i.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}},LH=class extends IH{constructor(e,n,r){let i=t({key:`history.inputbox.hint`,comment:[`Text will be prefixed with  plus a single space, then used as a hint where input field keeps history`]},`for history`),a=` or \u21C5 ${i}`,o=` (\u21C5 ${i})`;super(e,n,r),this.history=new NH(r.history,100);let s=()=>{if(r.showHistoryHint&&r.showHistoryHint()&&!this.placeholder.endsWith(a)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){let e=this.placeholder.endsWith(`)`)?a:o,t=this.placeholder+e;r.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver((e,t)=>{e.forEach(e=>{e.target.textContent||s()})}),this.observer.observe(this.input,{attributeFilter:[`class`]}),this.onfocus(this.input,()=>s()),this.onblur(this.input,()=>{let e=e=>{if(this.placeholder.endsWith(e)){let t=this.placeholder.slice(0,this.placeholder.length-e.length);return r.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}else return!1};e(o)||e(a)})}dispose(){super.dispose(),this.observer&&=(this.observer.disconnect(),void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&=e===this.value?this.getNextValue():e,e&&(this.value=e,V_(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&=e===this.value?this.getPreviousValue():e,e&&(this.value=e,V_(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}},RH=V,zH=class extends j{constructor(e){super(),this.parent=e,this.onKeyDown=e=>R(this.inputBox.inputElement,z.KEY_DOWN,t=>{e(new vi(t))}),this.onMouseDown=e=>R(this.inputBox.inputElement,z.MOUSE_DOWN,t=>{e(new Ci(t))}),this.onDidChange=e=>this.inputBox.onDidChange(e),this.container=B(this.parent,RH(`.quick-input-box`)),this.inputBox=this._register(new IH(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute(`placeholder`)||``}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type===`password`}set password(e){this.inputBox.inputElement.type=e?`password`:`text`}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Dh.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Dh.Info?1:e===Dh.Warning?2:3,content:``})}stylesForType(e){return this.inputBox.stylesForType(e===Dh.Info?1:e===Dh.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}},BH=class e{constructor(e,t){this.supportIcons=t,this.text=``,this.title=``,this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement(`span`),this.domNode.className=`monaco-highlighted-label`,e.appendChild(this.domNode)}get element(){return this.domNode}set(t,n=[],r=``,i){t||=``,i&&(t=e.escapeNewLines(t,n)),!(this.didEverRender&&this.text===t&&this.title===r&&kc(this.highlights,n))&&(this.text=t,this.title=r,this.highlights=n,this.render())}render(){let e=[],t=0;for(let n of this.highlights){if(n.end===n.start)continue;if(t<n.start){let r=this.text.substring(t,n.start);e.push(V(`span`,void 0,...this.supportIcons?iH(r):[r])),t=n.end}let r=this.text.substring(n.start,n.end),i=V(`span.highlight`,void 0,...this.supportIcons?iH(r):[r]);n.extraClasses&&i.classList.add(n.extraClasses),e.push(i),t=n.end}if(t<this.text.length){let n=this.text.substring(t);e.push(V(`span`,void 0,...this.supportIcons?iH(n):[n]))}Ua(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute(`title`),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(e,i)=>{r=e===`\r
`?-1:0,i+=n;for(let e of t)e.end<=i||(e.start>=i&&(e.start+=r),e.end>=i&&(e.end+=r));return n+=r,``})}},VH=class{constructor(e=``,t=!1){if(this.value=e,typeof this.value!=`string`)throw mt(`value`);typeof t==`boolean`?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=WH(this.supportThemeIcons?xL(e):e).replace(/([ \t]+)/g,(e,t)=>`&nbsp;`.repeat(t.length)).replace(/\>/gm,`\\>`).replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}};function HH(e){return UH(e)?!e.value:Array.isArray(e)?e.every(HH):!0}function UH(e){return e instanceof VH?!0:e&&typeof e==`object`?typeof e.value==`string`&&(typeof e.isTrusted==`boolean`||e.isTrusted===void 0)&&(typeof e.supportThemeIcons==`boolean`||e.supportThemeIcons===void 0):!1}function WH(e){return e.replace(/[\\`*_{}[\]()#+\-!]/g,`\\$&`)}function GH(e){return e&&e.replace(/\\([\\`*_{}[\]()#+\-.!])/g,`$1`)}function KH(e){let t=[],n=e.split(`|`).map(e=>e.trim());e=n[0];let r=n[1];if(r){let e=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),i=e?e[1]:``,a=n?n[1]:``,o=isFinite(parseInt(a)),s=isFinite(parseInt(i));o&&t.push(`width="${a}"`),s&&t.push(`height="${i}"`)}return{href:e,dimensions:t}}var qH=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function JH(e,t){Ks(t)?e.title=t:t?.markdownNotSupportedFallback?e.title=t.markdownNotSupportedFallback:e.removeAttribute(`title`)}var YH=class{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,n){return qH(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&=(this._cancellationTokenSource.dispose(!0),void 0),this.isDisposed)return;let r;if(e===void 0||Ks(e)||e instanceof HTMLElement)r=e;else if(!tc(e.markdown))r=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(t(`iconLabel.loading`,`Loading...`),n),this._cancellationTokenSource=new Gt;let i=this._cancellationTokenSource.token;if(r=yield e.markdown(i),this.isDisposed||i.isCancellationRequested)return}this.show(r,n)})}show(e,t){let n=this._hoverWidget;if(this.hasContent(e)){let r={content:e,target:this.target,showPointer:this.hoverDelegate.placement===`element`,hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n?.dispose()}hasContent(e){return e?UH(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}};function XH(e,t,n){let r,i,a=(t,n)=>{var a;t&&(i?.dispose(),i=void 0),n&&(r?.dispose(),r=void 0),(a=e.onDidHideHover)==null||a.call(e)},o=(r,a,o)=>new Fi(()=>qH(this,void 0,void 0,function*(){(!i||i.isDisposed)&&(i=new YH(e,o||t,r>0),yield i.update(n,a))}),r),s=R(t,z.MOUSE_OVER,()=>{if(r)return;let n=new A;n.add(R(t,z.MOUSE_LEAVE,e=>a(!1,e.fromElement===t),!0)),n.add(R(t,z.MOUSE_DOWN,()=>a(!0,!0),!0));let i={targetElements:[t],dispose:()=>{}};(e.placement===void 0||e.placement===`mouse`)&&n.add(R(t,z.MOUSE_MOVE,e=>i.x=e.x+10,!0)),n.add(o(e.delay,!1,i)),r=n},!0);return{show:e=>{a(!1,!0),o(0,e)},hide:()=>{a(!0,!0)},update:e=>qH(this,void 0,void 0,function*(){n=e,yield i?.update(n)}),dispose:()=>{s.dispose(),a(!0,!0)}}}var ZH=class{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?`0`:``)}dispose(){this.disposed=!0}},QH=class extends j{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new ZH(B(e,V(`.monaco-icon-label`)))),this.labelContainer=B(this.domNode.element,V(`.monaco-icon-label-container`));let n=B(this.labelContainer,V(`span.monaco-icon-name-container`));this.descriptionContainer=this._register(new ZH(B(this.labelContainer,V(`span.monaco-icon-description-container`)))),t?.supportHighlights||t?.supportIcons?this.nameNode=new tU(n,!!t.supportIcons):this.nameNode=new $H(n),t?.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new BH(B(this.descriptionContainer.element,V(`span.label-description`)),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new ZH(B(this.descriptionContainer.element,V(`span.label-description`)))),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){let r=[`monaco-icon-label`];n&&(n.extraClasses&&r.push(...n.extraClasses),n.italic&&r.push(`italic`),n.strikethrough&&r.push(`strikethrough`)),this.domNode.className=r.join(` `),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||=this.descriptionNodeFactory(),this.descriptionNode instanceof BH?(this.descriptionNode.set(t||``,n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n?.descriptionTitle)):(this.descriptionNode.textContent=t||``,this.setupHover(this.descriptionNode.element,n?.descriptionTitle||``),this.descriptionNode.empty=!t))}setupHover(e,t){let n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute(`title`);return}if(!this.hoverDelegate)JH(e,t);else{let n=XH(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}},$H=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&kc(this.options,t)))if(this.label=e,this.options=t,typeof e==`string`)this.singleLabel||=(this.container.innerText=``,this.container.classList.remove(`multiple`),B(this.container,V(`a.label-name`,{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText=``,this.container.classList.add(`multiple`),this.singleLabel=void 0;for(let n=0;n<e.length;n++){let r=e[n],i=t?.domId&&`${t?.domId}_${n}`;B(this.container,V(`a.label-name`,{id:i,"data-icon-label-count":e.length,"data-icon-label-index":n,role:`treeitem`},r)),n<e.length-1&&B(this.container,V(`span.label-separator`,void 0,t?.separator||`/`))}}}};function eU(e,t,n){if(!n)return;let r=0;return e.map(e=>{let i={start:r,end:r+e.length},a=n.map(e=>vI.intersect(i,e)).filter(e=>!vI.isEmpty(e)).map(({start:e,end:t})=>({start:e-r,end:t-r}));return r=i.end+t.length,a})}var tU=class{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&kc(this.options,t)))if(this.label=e,this.options=t,typeof e==`string`)this.singleLabel||=(this.container.innerText=``,this.container.classList.remove(`multiple`),new BH(B(this.container,V(`a.label-name`,{id:t?.domId})),this.supportIcons)),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText=``,this.container.classList.add(`multiple`),this.singleLabel=void 0;let n=t?.separator||`/`,r=eU(e,n,t?.matches);for(let i=0;i<e.length;i++){let a=e[i],o=r?r[i]:void 0,s=V(`a.label-name`,{id:t?.domId&&`${t?.domId}_${i}`,"data-icon-label-count":e.length,"data-icon-label-index":i,role:`treeitem`});new BH(B(this.container,s),this.supportIcons).set(a,o,void 0,t?.labelEscapeNewLines),i<e.length-1&&B(s,V(`span.label-separator`,void 0,n))}}}},nU=V,rU=class e{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=B(e,nU(`.monaco-keybinding`)),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(t,n){this.didEverRender&&this.keybinding===t&&e.areSame(this.matches,n)||(this.keybinding=t,this.matches=n,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(B(this.domNode,nU(`span.monaco-keybinding-key-chord-separator`,void 0,` `)),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||``}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Gi(this.domNode),this.keyElements.clear()}renderPart(e,t,n){let r=qg.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!n?.ctrlKey,r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!n?.shiftKey,r.separator),t.altKey&&this.renderKey(e,r.altKey,!!n?.altKey,r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!n?.metaKey,r.separator);let i=t.keyLabel;i&&this.renderKey(e,i,!!n?.keyCode,``)}renderKey(e,t,n,r){B(e,this.createKeyElement(t,n?`.highlight`:``)),r&&B(e,nU(`span.monaco-keybinding-key-separator`,void 0,r))}renderUnbound(e){B(e,this.createKeyElement(t(`unbound`,`Unbound`)))}createKeyElement(e,t=``){let n=nU(`span.monaco-keybinding-key`+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){if(this.element){for(let e of this.keyElements)this.labelBackground&&(e.style.backgroundColor=this.labelBackground?.toString()),this.labelBorder&&(e.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(e.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(e.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&kc(e.firstPart,t.firstPart)&&kc(e.chordPart,t.chordPart)}},iU=new zi(()=>{let e=new Intl.Collator(void 0,{numeric:!0,sensitivity:`base`});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}});function aU(e,t,n=!1){let r=e||``,i=t||``,a=iU.value.collator.compare(r,i);return iU.value.collatorIsNumeric&&a===0&&r!==i?r<i?-1:1:a}function oU(e,t,n){let r=e.toLowerCase(),i=t.toLowerCase(),a=sU(e,t,n);if(a)return a;let o=r.endsWith(n);if(o!==i.endsWith(n))return o?-1:1;let s=aU(r,i);return s===0?r.localeCompare(i):s}function sU(e,t,n){let r=e.toLowerCase(),i=t.toLowerCase(),a=r.startsWith(n),o=i.startsWith(n);if(a!==o)return a?-1:1;if(a&&o){if(r.length<i.length)return-1;if(r.length>i.length)return 1}return 0}var cU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},lU=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},uU=V,dU=class{constructor(e){this.hidden=!1,this._onChecked=new N,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}},fU=class e{get templateId(){return e.ID}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=B(e,uU(`.quick-input-list-entry`));let n=B(t.entry,uU(`label.quick-input-list-label`));t.toDisposeTemplate.push(Xi(n,z.CLICK,e=>{t.checkbox.offsetParent||e.preventDefault()})),t.checkbox=B(n,uU(`input.quick-input-list-checkbox`)),t.checkbox.type=`checkbox`,t.toDisposeTemplate.push(Xi(t.checkbox,z.CHANGE,e=>{t.element.checked=t.checkbox.checked}));let r=B(n,uU(`.quick-input-list-rows`)),i=B(r,uU(`.quick-input-list-row`)),a=B(r,uU(`.quick-input-list-row`));return t.label=new QH(i,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0}),t.keybinding=new rU(B(i,uU(`.quick-input-list-entry-keybinding`)),b),t.detail=new BH(B(a,uU(`.quick-input-list-label-meta`)),!0),t.separator=B(t.entry,uU(`.quick-input-list-separator`)),t.actionBar=new vN(t.entry),t.actionBar.domNode.classList.add(`quick-input-list-entry-action-bar`),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=Et(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(e=>n.checkbox.checked=e));let{labelHighlights:r,descriptionHighlights:i,detailHighlights:a}=e,o=Object.create(null);o.matches=r||[],o.descriptionTitle=e.saneDescription,o.descriptionMatches=i||[],o.extraClasses=e.item.iconClasses,o.italic=e.item.italic,o.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,o),n.keybinding.set(e.item.keybinding),n.detail.set(e.saneDetail,a),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=``):n.separator.style.display=`none`,n.entry.classList.toggle(`quick-input-list-separator-border`,!!e.separator),n.actionBar.clear();let s=e.item.buttons;s&&s.length?(n.actionBar.push(s.map((t,n)=>{let r=t.iconClass||(t.iconPath?bH(t.iconPath):void 0);t.alwaysVisible&&(r=r?`${r} always-visible`:`always-visible`);let i=new G_(`id-${n}`,``,r,!0,()=>lU(this,void 0,void 0,function*(){e.fireButtonTriggered({button:t,item:e.item})}));return i.tooltip=t.tooltip||``,i}),{icon:!0,label:!1}),n.entry.classList.add(`has-actions`)):n.entry.classList.remove(`has-actions`)}disposeElement(e,t,n){n.toDisposeElement=Et(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=Et(e.toDisposeElement),e.toDisposeTemplate=Et(e.toDisposeTemplate)}};fU.ID=`listelement`;var pU=class{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return fU.ID}},mU;(function(e){e[e.First=1]=`First`,e[e.Second=2]=`Second`,e[e.Last=3]=`Last`,e[e.Next=4]=`Next`,e[e.Previous=5]=`Previous`,e[e.NextPage=6]=`NextPage`,e[e.PreviousPage=7]=`PreviousPage`})(mU||={});var hU=class{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new N,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new N,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new N,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new N,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new N,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new N,this.onKeyDown=this._onKeyDown.event,this._onLeave=new N,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=B(this.parent,uU(`.quick-input-list`));let r=new pU,i=new _U;this.list=n.createList(`QuickInput`,this.container,r,[new fU],{identityProvider:{getId:e=>e.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:i}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(e=>{let t=new vi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(p?e.metaKey:e.ctrlKey)&&this.list.setFocus(Vp(this.list.length));break;case 16:let t=this.list.getFocus();t.length===1&&t[0]===0&&this._onLeave.fire();break;case 18:let n=this.list.getFocus();n.length===1&&n[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(t)})),this.disposables.push(this.list.onMouseDown(e=>{e.browserEvent.button!==2&&e.browserEvent.preventDefault()})),this.disposables.push(R(this.container,z.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(e=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(e=>{typeof e.index==`number`&&(e.browserEvent.preventDefault(),this.list.setSelection([e.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return M.map(this.list.onDidChangeFocus,e=>e.elements.map(e=>e.item))}get onDidChangeSelection(){return M.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(e=>e.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0,t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0,t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=Et(this.elementDisposables);let t=e=>this.fireButtonTriggered(e);this.inputElements=e,this.elements=e.reduce((n,r,i)=>{if(r.type!==`separator`){let a=i&&e[i-1],o=r.label&&r.label.replace(/\r?\n/g,` `),s=r.meta&&r.meta.replace(/\r?\n/g,` `),c=r.description&&r.description.replace(/\r?\n/g,` `),l=r.detail&&r.detail.replace(/\r?\n/g,` `),u=r.ariaLabel||[o,c,l].map(e=>Ql(e)).filter(e=>!!e).join(`, `);n.push(new dU({index:i,item:r,saneLabel:o,saneMeta:s,saneAriaLabel:u,saneDescription:c,saneDetail:l,labelHighlights:r.highlights?.label,descriptionHighlights:r.highlights?.description,detailHighlights:r.highlights?.detail,checked:!1,separator:a&&a.type===`separator`?a:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(e=>e.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((e,t,n)=>(e.set(t.item,n),e),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(e=>this.elementsToIndexes.has(e)).map(e=>this.elementsToIndexes.get(e))),e.length>0){let e=this.list.getFocus()[0];typeof e==`number`&&this.list.reveal(e)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute(`aria-activedescendant`)}setSelectedElements(e){this.list.setSelection(e.filter(e=>this.elementsToIndexes.has(e)).map(e=>this.elementsToIndexes.get(e)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;let t=new Set;for(let n of e)t.add(n);for(let e of this.elements)e.checked=t.has(e.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?``:`none`}focus(e){if(!this.list.length)return;switch(e===mU.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=mU.First),e===mU.Previous&&this.list.getFocus()[0]===0&&(e=mU.Last),e===mU.Second&&this.list.length<2&&(e=mU.First),e){case mU.First:this.list.focusFirst();break;case mU.Second:this.list.focusNth(1);break;case mU.Last:this.list.focusLast();break;case mU.Next:this.list.focusNext();break;case mU.Previous:this.list.focusPrevious();break;case mU.NextPage:this.list.focusNextPage();break;case mU.PreviousPage:this.list.focusPreviousPage();break}let t=this.list.getFocus()[0];typeof t==`number`&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:``,this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;let t=e.index&&this.inputElements[e.index-1];e.separator=t&&t.type===`separator`?t:void 0});else{let t;this.elements.forEach(n=>{let r=this.matchOnLabel?sc(OL(e,EL(n.saneLabel))):void 0,i=this.matchOnDescription?sc(OL(e,EL(n.saneDescription||``))):void 0,a=this.matchOnDetail?sc(OL(e,EL(n.saneDetail||``))):void 0,o=this.matchOnMeta?sc(OL(e,EL(n.saneMeta||``))):void 0;if(r||i||a||o?(n.labelHighlights=r,n.descriptionHighlights=i,n.detailHighlights=a,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item.alwaysShow),n.separator=void 0,!this.sortByLabel){let e=n.index&&this.inputElements[n.index-1];t=e&&e.type===`separator`?e:t,t&&!n.hidden&&(n.separator=t,t=void 0)}})}let t=this.elements.filter(e=>!e.hidden);if(this.sortByLabel&&e){let n=e.toLowerCase();t.sort((e,t)=>gU(e,t,n))}return this.elementsToIndexes=t.reduce((e,t,n)=>(e.set(t.item,n),e),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(let n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?``:`none`}isDisplayed(){return this.container.style.display!==`none`}dispose(){this.elementDisposables=Et(this.elementDisposables),this.disposables=Et(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}};cU([Kv],hU.prototype,`onDidChangeFocus`,null),cU([Kv],hU.prototype,`onDidChangeSelection`,null);function gU(e,t,n){let r=e.labelHighlights||[],i=t.labelHighlights||[];return r.length&&!i.length?-1:!r.length&&i.length?1:r.length===0&&i.length===0?0:oU(e.saneLabel,t.saneLabel,n)}var _U=class{getWidgetAriaLabel(){return t(`quickInput`,`Quick Input`)}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return`listbox`}getRole(){return`option`}},vU=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},yU=V,bU={iconClass:Zl(`quick-input-back`,$l.arrowLeft).classNames,tooltip:t(`quickInput.back`,`Back`),handle:-1},xU=class e extends j{constructor(t){super(),this.ui=t,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=e.noPromptMessage,this._severity=Dh.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new N),this.onDidHideEmitter=this._register(new N),this.onDisposeEmitter=this._register(new N),this.visibleDisposables=this._register(new A),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!_;this._ignoreFocusOut=e&&!_,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=SH.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;let e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!==`&nbsp;`&&(this.ui.title.innerText=`\xA0`);let t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Fi,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let e=this.buttons.filter(e=>e===bU);this.ui.leftActionBar.push(e.map((e,t)=>{let n=new G_(`id-${t}`,``,e.iconClass||bH(e.iconPath),!0,()=>vU(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(e)}));return n.tooltip=e.tooltip||``,n}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();let t=this.buttons.filter(e=>e!==bU);this.ui.rightActionBar.push(t.map((e,t)=>{let n=new G_(`id-${t}`,``,e.iconClass||bH(e.iconPath),!0,()=>vU(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(e)}));return n.tooltip=e.tooltip||``,n}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Ua(this.ui.message,...iH(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():``}getDescription(){return this.description||``}getSteps(){return this.step&&this.totalSteps?t(`quickInput.steps`,`{0}/{1}`,this.step,this.totalSteps):this.step?String(this.step):``}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Dh.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:``,this.ui.message.style.backgroundColor=t.background?`${t.background}`:``,this.ui.message.style.border=t.border?`1px solid ${t.border}`:``,this.ui.message.style.paddingBottom=`4px`}else this.ui.message.style.color=``,this.ui.message.style.backgroundColor=``,this.ui.message.style.border=``,this.ui.message.style.paddingBottom=``}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};xU.noPromptMessage=t(`inputModeEntry`,`Press 'Enter' to confirm your input or 'Escape' to cancel`);var SU=class e extends xU{constructor(){super(...arguments),this._value=``,this.onDidChangeValueEmitter=this._register(new N),this.onWillAcceptEmitter=this._register(new N),this.onDidAcceptEmitter=this._register(new N),this.onDidCustomEmitter=this._register(new N),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?CH.NONE:CH.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new N),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new N),this.onDidTriggerItemButtonEmitter=this._register(new N),this.valueSelectionUpdated=!0,this._ok=`default`,this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||``,this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?xH:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(mU.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e))})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(mU.Next),this.canSelectMany&&this.ui.list.domFocus(),La.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(mU.Previous):this.ui.list.focus(mU.Last),this.canSelectMany&&this.ui.list.domFocus(),La.stop(e,!0);break;case 12:this.ui.list.focus(mU.NextPage),this.canSelectMany&&this.ui.list.domFocus(),La.stop(e,!0);break;case 11:this.ui.list.focus(mU.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),La.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(mU.First),La.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(mU.Last),La.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Op(e,this._activeItems,(e,t)=>e===t)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Op(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Op(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return R(this.ui.container,z.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new vi(e),n=t.keyCode;this._quickNavigate.keybindings.some(e=>{let[r,i]=e.getParts();return i?!1:r.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(r.altKey&&n===6||r.ctrlKey&&n===5||r.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let t=this.keepScrollPosition?this.scrollTop:0,n=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle(`hidden-input`,n&&!this.description);let r={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!n,progressBar:!n,visibleCount:!0,count:this.canSelectMany,ok:this.ok===`default`?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(r),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||``)&&(this.ui.inputBox.placeholder=this.placeholder||``);let i=this.ariaLabel||this.placeholder||e.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case CH.NONE:this._itemActivation=CH.FIRST;break;case CH.SECOND:this.ui.list.focus(mU.Second),this._itemActivation=CH.FIRST;break;case CH.LAST:this.ui.list.focus(mU.Last),this._itemActivation=CH.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains(`show-checkboxes`)!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||``,this.ui.customButton.element.title=this.customHover||``,this.ui.setComboboxAccessibility(!0),r.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(mU.First)),this.keepScrollPosition&&(this.scrollTop=t)}};SU.DEFAULT_ARIA_LABEL=t(`quickInputBox.ariaLabel`,`Type to narrow down results.`);var CU=class e extends j{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new N),this.onDidCustomEmitter=this._register(new N),this.onDidTriggerButtonEmitter=this._register(new N),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new N),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new N),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){let e=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};this._register(R(window,z.KEY_DOWN,e,!0)),this._register(R(window,z.KEY_UP,e,!0)),this._register(R(window,z.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;let e=B(this.parentElement,yU(`.quick-input-widget.show-file-icons`));e.tabIndex=-1,e.style.display=`none`;let n=Aa(e),r=B(e,yU(`.quick-input-titlebar`)),i=this._register(new vN(r));i.domNode.classList.add(`quick-input-left-action-bar`);let a=B(r,yU(`.quick-input-title`)),o=this._register(new vN(r));o.domNode.classList.add(`quick-input-right-action-bar`);let s=B(e,yU(`.quick-input-description`)),c=B(e,yU(`.quick-input-header`)),l=B(c,yU(`input.quick-input-check-all`));l.type=`checkbox`,this._register(Xi(l,z.CHANGE,e=>{let t=l.checked;C.setAllVisibleChecked(t)})),this._register(R(l,z.CLICK,e=>{(e.x||e.y)&&p.setFocus()}));let u=B(c,yU(`.quick-input-description`)),d=B(c,yU(`.quick-input-and-message`)),f=B(d,yU(`.quick-input-filter`)),p=this._register(new zH(f));p.setAttribute(`aria-describedby`,`${this.idPrefix}message`);let m=B(f,yU(`.quick-input-visible-count`));m.setAttribute(`aria-live`,`polite`),m.setAttribute(`aria-atomic`,`true`);let h=new lH(m,{countFormat:t({key:`quickInput.visibleCount`,comment:[`This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.`]},`{0} Results`)}),g=B(f,yU(`.quick-input-count`));g.setAttribute(`aria-live`,`polite`);let _=new lH(g,{countFormat:t({key:`quickInput.countSelected`,comment:[`This tells the user how many items are selected in a list of items to select from. The items can be anything.`]},`{0} Selected`)}),v=B(c,yU(`.quick-input-action`)),y=new sH(v);y.label=t(`ok`,`OK`),this._register(y.onDidClick(e=>{this.onDidAcceptEmitter.fire()}));let b=B(c,yU(`.quick-input-action`)),x=new sH(b);x.label=t(`custom`,`Custom`),this._register(x.onDidClick(e=>{this.onDidCustomEmitter.fire()}));let S=B(d,yU(`#${this.idPrefix}message.quick-input-message`)),C=this._register(new hU(e,this.idPrefix+`list`,this.options));this._register(C.onChangedAllVisibleChecked(e=>{l.checked=e})),this._register(C.onChangedVisibleCount(e=>{h.setCount(e)})),this._register(C.onChangedCheckedCount(e=>{_.setCount(e)})),this._register(C.onLeave(()=>{setTimeout(()=>{p.setFocus(),this.controller instanceof SU&&this.controller.canSelectMany&&C.clearFocus()},0)})),this._register(C.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute(`aria-activedescendant`,this.getUI().list.getActiveDescendant()||``)}));let w=new hH(e);w.getContainer().classList.add(`quick-input-progress`);let T=Va(e);return this._register(T),this._register(R(e,z.FOCUS,e=>{this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0},!0)),this._register(T.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(SH.Blur),this.previousFocusElement=void 0})),this._register(R(e,z.FOCUS,e=>{p.setFocus()})),this._register(R(e,z.KEY_DOWN,t=>{let n=new vi(t);switch(n.keyCode){case 3:La.stop(t,!0),this.onDidAcceptEmitter.fire();break;case 9:La.stop(t,!0),this.hide(SH.Gesture);break;case 2:if(!n.altKey&&!n.ctrlKey&&!n.metaKey){let r=[`.action-label.codicon`];e.classList.contains(`show-checkboxes`)?r.push(`input`):r.push(`input[type=text]`),this.getUI().list.isDisplayed()&&r.push(`.monaco-list`);let i=e.querySelectorAll(r.join(`, `));n.shiftKey&&n.target===i[0]?(La.stop(t,!0),i[i.length-1].focus()):!n.shiftKey&&n.target===i[i.length-1]&&(La.stop(t,!0),i[0].focus())}break}})),this.ui={container:e,styleSheet:n,leftActionBar:i,titleBar:r,title:a,description1:s,description2:u,rightActionBar:o,checkAll:l,filterContainer:f,inputBox:p,visibleCountContainer:m,visibleCount:h,countContainer:g,count:_,okContainer:v,ok:y,message:S,customButtonContainer:b,customButton:x,list:C,progressBar:w,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setComboboxAccessibility:e=>this.setComboboxAccessibility(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e)},this.updateStyles(),this.ui}pick(e,t={},n=Ut.None){return new Promise((r,i)=>{let a=e=>{a=r,t.onKeyMods&&t.onKeyMods(o.keyMods),r(e)};if(n.isCancellationRequested){a(void 0);return}let o=this.createQuickPick(),s,c=[o,o.onDidAccept(()=>{if(o.canSelectMany)a(o.selectedItems.slice()),o.hide();else{let e=o.activeItems[0];e&&(a(e),o.hide())}}),o.onDidChangeActive(e=>{let n=e[0];n&&t.onDidFocus&&t.onDidFocus(n)}),o.onDidChangeSelection(e=>{if(!o.canSelectMany){let t=e[0];t&&(a(t),o.hide())}}),o.onDidTriggerItemButton(e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},e),{removeItem:()=>{let t=o.items.indexOf(e.item);if(t!==-1){let e=o.items.slice(),n=e.splice(t,1),r=o.activeItems.filter(e=>e!==n[0]),i=o.keepScrollPosition;o.keepScrollPosition=!0,o.items=e,r&&(o.activeItems=r),o.keepScrollPosition=i}}}))),o.onDidChangeValue(e=>{s&&!e&&(o.activeItems.length!==1||o.activeItems[0]!==s)&&(o.activeItems=[s])}),n.onCancellationRequested(()=>{o.hide()}),o.onDidHide(()=>{Et(c),a(void 0)})];o.title=t.title,o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,o.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,o.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,o.quickNavigate=t.quickNavigate,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then(([e,t])=>{s=t,o.busy=!1,o.items=e,o.canSelectMany&&(o.selectedItems=e.filter(e=>e.type!==`separator`&&e.picked)),s&&(o.activeItems=[s])}),o.show(),Promise.resolve(e).then(void 0,e=>{i(e),o.hide()})})}createQuickPick(){return new SU(this.getUI())}show(e){let n=this.getUI();this.onShowEmitter.fire();let r=this.controller;this.controller=e,r&&r.didHide(),this.setEnabled(!0),n.leftActionBar.clear(),n.title.textContent=``,n.description1.textContent=``,n.description2.textContent=``,n.rightActionBar.clear(),n.checkAll.checked=!1,n.inputBox.placeholder=``,n.inputBox.password=!1,n.inputBox.showDecoration(Dh.Ignore),n.visibleCount.setCount(0),n.count.setCount(0),Ua(n.message),n.progressBar.stop(),n.list.setElements([]),n.list.matchOnDescription=!1,n.list.matchOnDetail=!1,n.list.matchOnLabel=!0,n.list.sortByLabel=!0,n.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),n.inputBox.ariaLabel=``;let i=this.options.backKeybindingLabel();bU.tooltip=i?t(`quickInput.backWithKeybinding`,`Back ({0})`,i):t(`quickInput.back`,`Back`),n.container.style.display=``,this.updateLayout(),n.inputBox.setFocus()}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?``:`none`,t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?``:`none`,t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?``:`none`,t.checkAll.style.display=e.checkAll?``:`none`,t.filterContainer.style.display=e.inputBox?``:`none`,t.visibleCountContainer.style.display=e.visibleCount?``:`none`,t.countContainer.style.display=e.count?``:`none`,t.okContainer.style.display=e.ok?``:`none`,t.customButtonContainer.style.display=e.customButton?``:`none`,t.message.style.display=e.message?``:`none`,t.progressBar.getContainer().style.display=e.progressBar?``:`none`,t.list.display(!!e.list),t.container.classList[e.checkBox?`add`:`remove`](`show-checkboxes`),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){let t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute(`role`,`combobox`),t.inputBox.setAttribute(`aria-haspopup`,`true`),t.inputBox.setAttribute(`aria-autocomplete`,`list`),t.inputBox.setAttribute(`aria-activedescendant`,t.list.getActiveDescendant()||``)):(t.inputBox.removeAttribute(`role`),t.inputBox.removeAttribute(`aria-haspopup`),t.inputBox.removeAttribute(`aria-autocomplete`),t.inputBox.removeAttribute(`aria-activedescendant`))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(let t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(let t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){let t=this.controller;if(t){let n=!this.ui?.container.contains(document.activeElement);this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display=`none`,n||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),t.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;let t=this.ui.container.style,n=Math.min(this.dimension.width*.62,e.MAX_WIDTH);t.width=n+`px`,t.marginLeft=`-`+n/2+`px`,this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:r,widgetShadow:i}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():``,this.ui.container.style.backgroundColor=t?t.toString():``,this.ui.container.style.color=n?n.toString():``,this.ui.container.style.border=r?`1px solid ${r}`:``,this.ui.container.style.boxShadow=i?`0 0 8px 2px ${i}`:``,this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);let a=[];this.styles.list.pickerGroupBorder&&a.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&a.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(a.push(`.quick-input-list .monaco-keybinding > .monaco-keybinding-key {`),this.styles.keybindingLabel.keybindingLabelBackground&&a.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&a.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&a.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&a.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&a.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),a.push(`}`));let o=a.join(`
`);o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}};CU.MAX_WIDTH=600;var wU;(function(e){e[e.PRESERVE=0]=`PRESERVE`,e[e.LAST=1]=`LAST`})(wU||={});const TU={Quickaccess:`workbench.contributions.quickaccess`};var EU=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((e,t)=>t.prefix.length-e.prefix.length),Ot(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Np([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(t=>e.startsWith(t.prefix))||this.defaultProvider}};Jd.add(TU.Quickaccess,new EU);const DU=Ur(`quickInputService`);var OU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},kU=function(e,t){return function(n,r){t(n,r,e)}},AU=class extends j{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Jd.as(TU.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e=``,t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){let[r,i]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,o=a?.descriptor;if(a&&i&&o===i){e!==i.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,i,n);return}if(i&&!n?.preserveValue){let t;if(a&&o&&o!==i){let e=a.value.substr(o.prefix.length);e&&(t=`${i.prefix}${e}`)}if(!t){let e=r?.defaultFilterValue;e===wU.LAST?t=this.lastAcceptedPickerValues.get(i):typeof e==`string`&&(t=`${i.prefix}${e}`)}typeof t==`string`&&(e=t)}let s=new A,c=s.add(this.quickInputService.createQuickPick());c.value=e,this.adjustValueSelection(c,i,n),c.placeholder=i?.placeholder,c.quickNavigate=n?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!a,(typeof n?.itemActivation==`number`||n?.quickNavigateConfiguration)&&(c.itemActivation=n?.itemActivation??CH.SECOND),c.contextKey=i?.contextKey,c.filterValue=e=>e.substring(i?i.prefix.length:0),i?.placeholder&&(c.ariaLabel=i?.placeholder);let l,u;t&&(l=new Promise(e=>u=e),s.add(_t(c.onWillAccept)(e=>{e.veto(),c.hide()}))),s.add(this.registerPickerListeners(c,r,i,e));let d=s.add(new Gt);if(r&&s.add(r.provide(c,d.token)),_t(c.onDidHide)(()=>{c.selectedItems.length===0&&d.cancel(),s.dispose(),u?.(c.selectedItems)}),c.show(),t)return l}adjustValueSelection(e,t,n){let r;r=n?.preserveValue?[e.value.length,e.value.length]:[t?.prefix.length??0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,n,r){let i=new A,a=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return i.add(Ot(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),i.add(e.onDidChangeValue(e=>{let[n]=this.getOrInstantiateProvider(e);n===t?a.value=e:this.show(e,{preserveValue:!0})})),n&&i.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),i}getOrInstantiateProvider(e){let t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};AU=OU([kU(0,DU),kU(1,Vr)],AU);var jU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},MU=function(e,t){return function(n,r){t(n,r,e)}},NU=class extends av{constructor(e,t,n,r,i){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=r,this.layoutService=i,this.contexts=new Map}get controller(){return this._controller||=this._register(this.createController()),this._controller}get quickAccess(){return this._quickAccess||=this._register(this.instantiationService.createInstance(AU)),this._quickAccess}createController(e=this.layoutService,t){let n={idPrefix:`quickInput_`,container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>void 0,setContextKey:e=>this.setContextKey(e),returnFocus:()=>e.focus(),createList:(e,t,n,r,i)=>this.instantiationService.createInstance(eV,e,t,n,r,i),styles:this.computeStyles()},r=this._register(new CU(Object.assign(Object.assign({},n),t)));return r.layout(e.dimension,e.offset?.top??0),this._register(e.onDidLayout(t=>r.layout(t,e.offset?.top??0))),this._register(r.onShow(()=>this.resetContextKeys())),this._register(r.onHide(()=>this.resetContextKeys())),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new H(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Ut.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},BL(this.theme,{quickInputBackground:JC,quickInputForeground:YC,quickInputTitleBackground:XC,contrastBorder:QS,widgetShadow:rC})),inputBox:BL(this.theme,{inputForeground:aC,inputBackground:iC,inputBorder:oC,inputValidationInfoBackground:uC,inputValidationInfoForeground:dC,inputValidationInfoBorder:fC,inputValidationWarningBackground:pC,inputValidationWarningForeground:mC,inputValidationWarningBorder:hC,inputValidationErrorBackground:gC,inputValidationErrorForeground:_C,inputValidationErrorBorder:vC}),countBadge:BL(this.theme,{badgeBackground:wC,badgeForeground:TC,badgeBorder:QS}),button:BL(this.theme,{buttonForeground:xC,buttonBackground:SC,buttonHoverBackground:CC,buttonBorder:QS}),progressBar:BL(this.theme,{progressBarBackground:AC}),keybindingLabel:BL(this.theme,{keybindingLabelBackground:$C,keybindingLabelForeground:ew,keybindingLabelBorder:tw,keybindingLabelBottomBorder:nw,keybindingLabelShadow:rC}),list:BL(this.theme,{listBackground:JC,listInactiveFocusForeground:iT,listInactiveSelectionIconForeground:aT,listInactiveFocusBackground:oT,listFocusOutline:$S,listInactiveFocusOutline:$S,pickerGroupBorder:QC,pickerGroupForeground:ZC})}}};NU=jU([MU(0,Vr),MU(1,Pg),MU(2,Z_),MU(3,fM),MU(4,ZL)],NU);var PU=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},FU=function(e,t){return function(n,r){t(n,r,e)}},IU=class extends NU{constructor(e,t,n,r,i,a){super(t,n,r,i,a),this.host=void 0;let o=RU.get(e);this.host={_serviceBrand:void 0,get container(){return o.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};IU=PU([FU(1,Vr),FU(2,Pg),FU(3,Z_),FU(4,fM),FU(5,ZL)],IU);var LU=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){let e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw Error(`Quick input service needs a focused editor to work.`);let t=this.mapEditorToService.get(e);if(!t){let n=t=this.instantiationService.createInstance(IU,e);this.mapEditorToService.set(e,t),_t(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Ut.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};LU=PU([FU(0,Vr),FU(1,Gr)],LU);var RU=class e{constructor(e){this.editor=e,this.widget=new zU(this.editor)}static get(t){return t.getContribution(e.ID)}dispose(){this.widget.dispose()}};RU.ID=`editor.controller.quickInput`;var zU=class e{constructor(e){this.codeEditor=e,this.domNode=document.createElement(`div`),this.codeEditor.addOverlayWidget(this)}getId(){return e.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};zU.ID=`editor.contrib.quickInputWidget`,Ev(RU.ID,RU);var BU;(function(e){let t=new dM;class n{constructor(e,t){this._serviceId=e,this._factory=t,this._value=null}get id(){return this._serviceId}get(e){if(!this._value){if(e&&(this._value=e[this._serviceId.toString()]),this._value||=this._factory(e),!this._value)throw Error(`Service `+this._serviceId+` is missing!`);t.set(this._serviceId,this._value)}return this._value}}e.LazyStaticService=n;let r=[];function i(e,t){let i=new n(e,t);return r.push(i),i}function a(e){let t=new dM;for(let[e,n]of Tf())t.set(e,n);for(let n in e)e.hasOwnProperty(n)&&t.set(Ur(n),e[n]);r.forEach(n=>t.set(n.id,n.get(e)));let n=new aR(t,!0);return t.set(Vr,n),[t,n]}e.init=a,e.instantiationService=i(Vr,()=>new aR(t,!0));let o=new w_;e.configurationService=i(mf,()=>o),e.resourceConfigurationService=i(wp,()=>new T_(o)),e.resourcePropertiesService=i(Tp,()=>new E_(o)),e.contextService=i(t_,()=>new O_),e.labelService=i(sR,()=>new j_),e.telemetryService=i(mv,()=>new D_),e.dialogService=i(tR,()=>new y_),e.notificationService=i($g,()=>new b_),e.markerService=i(_V,()=>new bV),e.modeService=i(Hu,e=>new JP),e.standaloneThemeService=i(vP,()=>new nI),e.logService=i(Xp,()=>new tm(new em)),e.undoRedoService=i(Mx,t=>new tH(e.dialogService.get(t),e.notificationService.get(t))),e.languageConfigurationService=i(kf,t=>new Af(e.configurationService.get(t),e.modeService.get(t))),e.modelService=i(Bl,t=>new wF(e.configurationService.get(t),e.resourcePropertiesService.get(t),e.standaloneThemeService.get(t),e.logService.get(t),e.undoRedoService.get(t),e.modeService.get(t),e.languageConfigurationService.get(t))),e.markerDecorationsService=i(U_,t=>new LV(e.modelService.get(t),e.markerService.get(t))),e.contextKeyService=i(Pg,t=>new mI(e.configurationService.get(t))),e.codeEditorService=i(Gr,t=>new NP(null,e.contextKeyService.get(t),e.standaloneThemeService.get(t))),e.editorProgressService=i(qN,()=>new v_),e.storageService=i(EV,()=>new kV),e.editorWorkerService=i(Vu,t=>new cm(e.modelService.get(t),e.resourceConfigurationService.get(t),e.logService.get(t)))})(BU||={});var VU=class extends j{constructor(e,t){super();let[n,r]=BU.init(t);this._serviceCollection=n,this._instantiationService=r;let i=this.get(mf),a=this.get($g),o=this.get(mv),s=this.get(Z_),c=this.get(Xp),l=this.get(Pg),u=(e,n)=>{let r=null;return t&&(r=t[e.toString()]),r||=n(),this._serviceCollection.set(e,r),r};u(fM,()=>new BV(l,i)),u(kB,()=>new AB(s));let d=u(lc,()=>new x_(this._instantiationService)),f=u(yP,()=>this._register(new S_(l,d,o,a,c,e))),p=u(ZL,()=>new M_(BU.codeEditorService.get(Gr),e));u(DU,()=>new LU(r,BU.codeEditorService.get(Gr)));let m=u(VN,()=>this._register(new eR(p)));u(GN,()=>new HV),u(HN,()=>{let e=new XL(o,a,m,f,s);return e.configure({blockMouse:!1}),this._register(e)}),u(uv,()=>new MV(d)),u(jh,()=>new A_(BU.modelService.get(Bl)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw Error(`Missing service `+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}};function HU(e,t,n){let r=new VU(e,t),i=null;r.has(Uu)||(i=new __(BU.modelService.get()),r.set(Uu,i)),r.has(pc)||r.set(pc,new xc(r.get(Gr),r.get(lc)));let a=n(r);return i&&i.setEditor(a),a}function UU(e,t,n){return HU(e,n||{},n=>new BP(e,t,n,n.get(Vr),n.get(Gr),n.get(lc),n.get(Pg),n.get(yP),n.get(VN),n.get(vP),n.get($g),n.get(mf),n.get(fM),n.get(Bl),n.get(Hu)))}function WU(e){return BU.codeEditorService.get().onCodeEditorAdd(t=>{e(t)})}function GU(e,t,n){return HU(e,n||{},n=>new VP(e,t,n,n.get(Vr),n.get(Pg),n.get(yP),n.get(VN),n.get(Vu),n.get(Gr),n.get(vP),n.get($g),n.get(mf),n.get(HN),n.get(qN),n.get(GN)))}function KU(e,t){return new Mc(e,t)}function qU(e,t,n){return HP(BU.modelService.get(),BU.modeService.get(),e,t,n)}function JU(e,t){BU.modelService.get().setMode(e,BU.modeService.get().create(t))}function YU(e,t,n){e&&BU.markerService.get().changeOne(t,e.uri,n)}function XU(e){return BU.markerService.get().read(e)}function ZU(e){return BU.markerService.get().onMarkerChanged(e)}function QU(e){return BU.modelService.get().getModel(e)}function $U(){return BU.modelService.get().getModels()}function eW(e){return BU.modelService.get().onModelAdded(e)}function tW(e){return BU.modelService.get().onModelRemoved(e)}function nW(e){return BU.modelService.get().onModelModeChanged(t=>{e({model:t.model,oldLanguage:t.oldModeId})})}function rW(e){return hm(BU.modelService.get(),e)}function iW(e,t){let n=BU.standaloneThemeService.get();return n.registerEditorContainer(e),Sh.colorizeElement(n,BU.modeService.get(),e,t)}function aW(e,t,n){return BU.standaloneThemeService.get().registerEditorContainer(document.body),Sh.colorize(BU.modeService.get(),e,t,n)}function oW(e,t,n=4){return BU.standaloneThemeService.get().registerEditorContainer(document.body),Sh.colorizeModelLine(e,t,n)}function sW(e){return Iu.get(e)||{getInitialState:()=>Lu,tokenize:(t,n,r,i)=>zu(e,t,r,i)}}function cW(e,t){BU.modeService.get().triggerMode(t);let n=sW(t),r=_o(e),i=[],a=n.getInitialState();for(let e=0,t=r.length;e<t;e++){let t=r[e],o=n.tokenize(t,!0,a,0);i[e]=o.tokens,a=o.endState}return i}function lW(e,t){BU.standaloneThemeService.get().defineTheme(e,t)}function uW(e){BU.standaloneThemeService.get().setTheme(e)}function dW(){Hv()}function fW(e,t){return uc.registerCommand({id:e,handler:t})}function pW(){return{create:UU,onDidCreateEditor:WU,createDiffEditor:GU,createDiffNavigator:KU,createModel:qU,setModelLanguage:JU,setModelMarkers:YU,getModelMarkers:XU,onDidChangeMarkers:ZU,getModels:$U,getModel:QU,onDidCreateModel:eW,onWillDisposeModel:tW,onDidChangeModelLanguage:nW,createWebWorker:rW,colorizeElement:iW,colorize:aW,colorizeModelLine:oW,tokenize:cW,defineTheme:lW,setTheme:uW,remeasureFonts:dW,registerCommand:fW,AccessibilitySupport:rr,ContentWidgetPositionPreference:cr,CursorChangeReason:lr,DefaultEndOfLine:ur,EditorAutoIndentStrategy:fr,EditorOption:pr,EndOfLinePreference:mr,EndOfLineSequence:hr,MinimapPosition:Sr,MouseTargetType:Cr,OverlayWidgetPositionPreference:wr,OverviewRulerLane:Tr,RenderLineNumbersType:Er,RenderMinimap:Dr,ScrollbarVisibility:kr,ScrollType:Or,TextEditorCursorBlinkingStyle:Pr,TextEditorCursorStyle:Fr,TrackedRangeStickiness:Ir,WrappingIndent:Lr,ConfigurationChangedEvent:ae,BareFontInfo:Ic,FontInfo:Lc,TextModelResolvedOptions:Hc,FindMatch:Uc,EditorType:zc,EditorOptions:ot}}function mW(e,t){if(!t||!Array.isArray(t))return!1;for(let n of t)if(!e(n))return!1;return!0}function hW(e,t){return typeof e==`boolean`?e:t}function gW(e,t){return typeof e==`string`?e:t}function _W(e){let t={};for(let n of e)t[n]=!0;return t}function vW(e,t=!1){t&&(e=e.map(function(e){return e.toLowerCase()}));let n=_W(e);return t?function(e){return n[e.toLowerCase()]!==void 0&&n.hasOwnProperty(e.toLowerCase())}:function(e){return n[e]!==void 0&&n.hasOwnProperty(e)}}function yW(e,t){t=t.replace(/@@/g,``);let n=0,r;do r=!1,t=t.replace(/@(\w+)/g,function(n,i){r=!0;let a=``;if(typeof e[i]==`string`)a=e[i];else if(e[i]&&e[i]instanceof RegExp)a=e[i].source;else if(e[i]===void 0)throw oh(e,`language definition does not contain attribute '`+i+`', used at: `+t);else throw oh(e,`attribute reference '`+i+`' must be a string, used at: `+t);return nh(a)?``:`(?:`+a+`)`}),n++;while(r&&n<5);t=t.replace(/\x01/g,`@`);let i=(e.ignoreCase?`i`:``)+(e.unicode?`u`:``);return new RegExp(t,i)}function bW(e,t,n,r){if(r<0)return e;if(r<t.length)return t[r];if(r>=100){r-=100;let e=n.split(`.`);if(e.unshift(n),r<e.length)return e[r]}return null}function xW(e,t,n,r){let i=-1,a=n,o=n.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(i=parseInt(o[3]),o[2]&&(i+=100)),a=o[4]);let s=`~`,c=a;!a||a.length===0?(s=`!=`,c=``):/^\w*$/.test(c)?s=`==`:(o=a.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(s=o[1],c=o[2]));let l;if((s===`~`||s===`!~`)&&/^(\w|\|)*$/.test(c)){let t=vW(c.split(`|`),e.ignoreCase);l=function(e){return s===`~`?t(e):!t(e)}}else if(s===`@`||s===`!@`){let n=e[c];if(!n)throw oh(e,`the @ match target '`+c+`' is not defined, in rule: `+t);if(!mW(function(e){return typeof e==`string`},n))throw oh(e,`the @ match target '`+c+`' must be an array of strings, in rule: `+t);let r=vW(n,e.ignoreCase);l=function(e){return s===`@`?r(e):!r(e)}}else if(s===`~`||s===`!~`)if(c.indexOf(`$`)<0){let t=yW(e,`^`+c+`$`);l=function(e){return s===`~`?t.test(e):!t.test(e)}}else l=function(t,n,r,i){return yW(e,`^`+sh(e,c,n,r,i)+`$`).test(t)};else if(c.indexOf(`$`)<0){let t=rh(e,c);l=function(e){return s===`==`?e===t:e!==t}}else{let t=rh(e,c);l=function(n,r,i,a,o){let c=sh(e,t,r,i,a);return s===`==`?n===c:n!==c}}return i===-1?{name:n,value:r,test:function(e,t,n,r){return l(e,e,t,n,r)}}:{name:n,value:r,test:function(e,t,n,r){let a=bW(e,t,n,i);return l(a||``,e,t,n,r)}}}function SW(e,t,n){if(n){if(typeof n==`string`)return n;if(n.token||n.token===``){if(typeof n.token!=`string`)throw oh(e,`a 'token' attribute must be of type string, in rule: `+t);{let r={token:n.token};if(n.token.indexOf(`$`)>=0&&(r.tokenSubst=!0),typeof n.bracket==`string`)if(n.bracket===`@open`)r.bracket=1;else if(n.bracket===`@close`)r.bracket=-1;else throw oh(e,`a 'bracket' attribute must be either '@open' or '@close', in rule: `+t);if(n.next){if(typeof n.next!=`string`)throw oh(e,`the next state must be a string value in rule: `+t);{let i=n.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]===`@`&&(i=i.substr(1)),i.indexOf(`$`)<0&&!lh(e,sh(e,i,``,[],``))))throw oh(e,`the next state '`+n.next+`' is not defined in rule: `+t);r.next=i}}return typeof n.goBack==`number`&&(r.goBack=n.goBack),typeof n.switchTo==`string`&&(r.switchTo=n.switchTo),typeof n.log==`string`&&(r.log=n.log),typeof n.nextEmbedded==`string`&&(r.nextEmbedded=n.nextEmbedded,e.usesEmbedded=!0),r}}else if(Array.isArray(n)){let r=[];for(let i=0,a=n.length;i<a;i++)r[i]=SW(e,t,n[i]);return{group:r}}else if(n.cases){let r=[];for(let i in n.cases)if(n.cases.hasOwnProperty(i)){let a=SW(e,t,n.cases[i]);i===`@default`||i===`@`||i===``?r.push({test:void 0,value:a,name:i}):i===`@eos`?r.push({test:function(e,t,n,r){return r},value:a,name:i}):r.push(xW(e,t,i,a))}let i=e.defaultToken;return{test:function(e,t,n,a){for(let i of r)if(!i.test||i.test(e,t,n,a))return i.value;return i}}}else throw oh(e,`an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: `+t)}else return{token:``}}var CW=class{constructor(e){this.regex=RegExp(``),this.action={token:``},this.matchOnlyAtLineStart=!1,this.name=``,this.name=e}setRegex(e,t){let n;if(typeof t==`string`)n=t;else if(t instanceof RegExp)n=t.source;else throw oh(e,`rules must start with a match string or regular expression: `+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]===`^`,this.name=this.name+`: `+n,this.regex=yW(e,`^(?:`+(this.matchOnlyAtLineStart?n.substr(1):n)+`)`)}setAction(e,t){this.action=SW(e,this.name,t)}};function wW(e,t){if(!t||typeof t!=`object`)throw Error(`Monarch: expecting a language definition object`);let n={};n.languageId=e,n.includeLF=hW(t.includeLF,!1),n.noThrow=!1,n.maxStack=100,n.start=typeof t.start==`string`?t.start:null,n.ignoreCase=hW(t.ignoreCase,!1),n.unicode=hW(t.unicode,!1),n.tokenPostfix=gW(t.tokenPostfix,`.`+n.languageId),n.defaultToken=gW(t.defaultToken,`source`),n.usesEmbedded=!1;let r=t;r.languageId=e,r.includeLF=n.includeLF,r.ignoreCase=n.ignoreCase,r.unicode=n.unicode,r.noThrow=n.noThrow,r.usesEmbedded=n.usesEmbedded,r.stateNames=t.tokenizer,r.defaultToken=n.defaultToken;function i(e,a,o){for(let s of o){let o=s.include;if(o){if(typeof o!=`string`)throw oh(n,`an 'include' attribute must be a string at: `+e);if(o[0]===`@`&&(o=o.substr(1)),!t.tokenizer[o])throw oh(n,`include target '`+o+`' is not defined at: `+e);i(e+`.`+o,a,t.tokenizer[o])}else{let t=new CW(e);if(Array.isArray(s)&&s.length>=1&&s.length<=3)if(t.setRegex(r,s[0]),s.length>=3)if(typeof s[1]==`string`)t.setAction(r,{token:s[1],next:s[2]});else if(typeof s[1]==`object`){let e=s[1];e.next=s[2],t.setAction(r,e)}else throw oh(n,`a next state as the last element of a rule can only be given if the action is either an object or a string, at: `+e);else t.setAction(r,s[1]);else{if(!s.regex)throw oh(n,`a rule must either be an array, or an object with a 'regex' or 'include' field at: `+e);s.name&&typeof s.name==`string`&&(t.name=s.name),s.matchOnlyAtStart&&(t.matchOnlyAtLineStart=hW(s.matchOnlyAtLineStart,!1)),t.setRegex(r,s.regex),t.setAction(r,s.action)}a.push(t)}}}if(!t.tokenizer||typeof t.tokenizer!=`object`)throw oh(n,`a language definition must define the 'tokenizer' attribute as an object`);for(let e in n.tokenizer=[],t.tokenizer)if(t.tokenizer.hasOwnProperty(e)){n.start||=e;let r=t.tokenizer[e];n.tokenizer[e]=[],i(`tokenizer.`+e,n.tokenizer[e],r)}if(n.usesEmbedded=r.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw oh(n,`the 'brackets' attribute must be defined as an array`)}else t.brackets=[{open:`{`,close:`}`,token:`delimiter.curly`},{open:`[`,close:`]`,token:`delimiter.square`},{open:`(`,close:`)`,token:`delimiter.parenthesis`},{open:`<`,close:`>`,token:`delimiter.angle`}];let a=[];for(let e of t.brackets){let t=e;if(t&&Array.isArray(t)&&t.length===3&&(t={token:t[2],open:t[0],close:t[1]}),t.open===t.close)throw oh(n,`open and close brackets in a 'brackets' attribute must be different: `+t.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof t.open==`string`&&typeof t.token==`string`&&typeof t.close==`string`)a.push({token:t.token+n.tokenPostfix,open:rh(n,t.open),close:rh(n,t.close)});else throw oh(n,`every element in the 'brackets' array must be a '{open,close,token}' object or array`)}return n.brackets=a,n.noThrow=!0,n}function TW(e){sM.registerLanguage(e)}function EW(){let e=[];return e=e.concat(sM.getLanguages()),e}function DW(e){return BU.modeService.get().languageIdCodec.encodeLanguageId(e)}function OW(e,t){let n=BU.modeService.get().onDidEncounterLanguage(r=>{r===e&&(n.dispose(),t())});return n}function kW(e,t){let n=BU.modeService.get().validateLanguageId(e);if(!n)throw Error(`Cannot set configuration for unknown language ${e}`);return If.register(n,t,100)}var AW=class{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,r){if(typeof this._actual.tokenize==`function`)return jW.adaptTokenize(this._languageId,this._actual,e,n,r);throw Error(`Not supported!`)}tokenize2(e,t,n){let r=this._actual.tokenizeEncoded(e,n);return new nr(r.tokens,r.endState)}},jW=class e{constructor(e,t,n,r){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=r}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let r=[],i=0;for(let a=0,o=e.length;a<o;a++){let o=e[a],s=o.startIndex;a===0?s=0:s<i&&(s=i),r[a]=new er(s+n,o.scopes,t),i=s}return r}static adaptTokenize(t,n,r,i,a){let o=n.tokenize(r,i),s=e._toClassicTokens(o.tokens,t,a),c;return c=o.endState.equals(i)?i:o.endState,new tr(s,c)}tokenize(t,n,r,i){return e.adaptTokenize(this._languageId,this._actual,t,r,i)}_toBinaryTokens(e,t,n){let r=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,a=[],o=0,s=0;for(let e=0,c=t.length;e<c;e++){let c=t[e],l=i.match(r,c.scopes);if(o>0&&a[o-1]===l)continue;let u=c.startIndex;e===0?u=0:u<s&&(u=s),a[o++]=u+n,a[o++]=l,s=u}let c=new Uint32Array(o);for(let e=0;e<o;e++)c[e]=a[e];return c}tokenize2(e,t,n,r){let i=this._actual.tokenize(e,n),a=this._toBinaryTokens(this._modeService.languageIdCodec,i.tokens,r),o;return o=i.endState.equals(n)?n:i.endState,new nr(a,o)}};function MW(e){return`tokenizeEncoded`in e}function NW(e){return e&&typeof e.then==`function`}function PW(e){if(e){let t=[null];for(let n=1,r=e.length;n<r;n++)t[n]=J.fromHex(e[n]);BU.standaloneThemeService.get().setColorMapOverride(t)}else BU.standaloneThemeService.get().setColorMapOverride(null)}function FW(e,t){let n=BU.modeService.get().validateLanguageId(e);if(!n)throw Error(`Cannot set tokens provider for unknown language ${e}`);let r=e=>MW(e)?new AW(n,e):new jW(n,e,BU.modeService.get(),BU.standaloneThemeService.get());return NW(t)?Iu.registerPromise(e,t.then(e=>r(e))):Iu.register(e,r(t))}function IW(e,t){let n=t=>bh(BU.modeService.get(),BU.standaloneThemeService.get(),e,wW(e,t));return NW(t)?Iu.registerPromise(e,t.then(e=>n(e))):Iu.register(e,n(t))}function LW(e,t){return du.register(e,t)}function RW(e,t){return fu.register(e,t)}function zW(e,t){return hu.register(e,t)}function BW(e,t){return gu.register(e,{provideHover:(e,n,r)=>{let i=e.getWordAtPosition(n);return Promise.resolve(t.provideHover(e,n,r)).then(e=>{if(e)return!e.range&&i&&(e.range=new L(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)),e.range||=new L(n.lineNumber,n.column,n.lineNumber,n.column),e})}})}function VW(e,t){return _u.register(e,t)}function HW(e,t){return vu.register(e,t)}function UW(e,t){return yu.register(e,t)}function WW(e,t){return bu.register(e,t)}function GW(e,t){return Su.register(e,t)}function KW(e,t){return Cu.register(e,t)}function qW(e,t){return wu.register(e,t)}function JW(e,t,n){return Eu.register(e,{providedCodeActionKinds:n?.providedCodeActionKinds,provideCodeActions:(e,n,r,i)=>{let a=BU.markerService.get().read({resource:e.uri}).filter(e=>L.areIntersectingOrTouching(e,n));return t.provideCodeActions(e,n,{markers:a,only:r.only},i)},resolveCodeAction:t.resolveCodeAction})}function YW(e,t){return Du.register(e,t)}function XW(e,t){return Ou.register(e,t)}function ZW(e,t){return ku.register(e,t)}function QW(e,t){return Au.register(e,t)}function $W(e,t){return pu.register(e,t)}function eG(e,t){return ju.register(e,t)}function tG(e,t){return Nu.register(e,t)}function nG(e,t){return xu.register(e,t)}function rG(e,t){return Mu.register(e,t)}function iG(e,t){return Pu.register(e,t)}function aG(e,t){return Fu.register(e,t)}function oG(e,t){return mu.register(e,t)}function sG(e,t){return Tu.register(e,t)}function cG(){return{register:TW,getLanguages:EW,onLanguage:OW,getEncodedLanguageId:DW,setLanguageConfiguration:kW,setColorMap:PW,setTokensProvider:FW,setMonarchTokensProvider:IW,registerReferenceProvider:LW,registerRenameProvider:RW,registerCompletionItemProvider:$W,registerSignatureHelpProvider:zW,registerHoverProvider:BW,registerDocumentSymbolProvider:VW,registerDocumentHighlightProvider:HW,registerLinkedEditingRangeProvider:UW,registerDefinitionProvider:WW,registerImplementationProvider:GW,registerTypeDefinitionProvider:KW,registerCodeLensProvider:qW,registerCodeActionProvider:JW,registerDocumentFormattingEditProvider:YW,registerDocumentRangeFormattingEditProvider:XW,registerOnTypeFormattingEditProvider:ZW,registerLinkProvider:QW,registerColorProvider:eG,registerFoldingRangeProvider:tG,registerDeclarationProvider:nG,registerSelectionRangeProvider:rG,registerDocumentSemanticTokensProvider:iG,registerDocumentRangeSemanticTokensProvider:aG,registerInlineCompletionsProvider:oG,registerInlayHintsProvider:sG,DocumentHighlightKind:dr,CompletionItemKind:ar,CompletionItemTag:or,CompletionItemInsertTextRule:ir,SymbolKind:Mr,SymbolTag:Nr,IndentAction:gr,CompletionTriggerKind:sr,SignatureHelpTriggerKind:jr,InlayHintKind:_r,InlineCompletionTriggerKind:vr,FoldingRangeKind:lu}}var lG=class e{static _handleEolEdits(e,t){let n,r=[];for(let e of t)typeof e.eol==`number`&&(n=e.eol),e.range&&typeof e.text==`string`&&r.push(e);return typeof n==`number`&&e.hasModel()&&e.getModel().pushEOL(n),r}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;let n=e.getModel(),r=n.validateRange(t.range);return n.getFullModelRange().equalsRange(r)}static execute(t,n,r){r&&t.pushUndoStop();let i=e._handleEolEdits(t,n);i.length===1&&e._isFullModelReplaceEdit(t,i[0])?t.executeEdits(`formatEditsCommand`,i.map(e=>ng.replace(L.lift(e.range),e.text))):t.executeEdits(`formatEditsCommand`,i.map(e=>ng.replaceMove(L.lift(e.range),e.text))),r&&t.pushUndoStop()}},uG=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e==`string`?e.toLowerCase():e._lower}},dG=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function fG(e){if(e=e.filter(e=>e.range),!e.length)return;let{range:n}=e[0];for(let t=1;t<e.length;t++)n=L.plusRange(n,e[t].range);let{startLineNumber:r,endLineNumber:i}=n;r===i?e.length===1?B_(t(`hint11`,`Made 1 formatting edit on line {0}`,r)):B_(t(`hintn1`,`Made {0} formatting edits on line {1}`,e.length,r)):e.length===1?B_(t(`hint1n`,`Made 1 formatting edit between lines {0} and {1}`,r,i)):B_(t(`hintnn`,`Made {0} formatting edits between lines {1} and {2}`,e.length,r,i))}function pG(e){let t=[],n=new Set,r=Du.ordered(e);for(let e of r)t.push(e),e.extensionId&&n.add(uG.toKey(e.extensionId));let i=Ou.ordered(e);for(let e of i){if(e.extensionId){if(n.has(uG.toKey(e.extensionId)))continue;n.add(uG.toKey(e.extensionId))}t.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits(t,n,r){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),n,r)}})}return t}var mG=class e{static setFormatterSelector(t){return{dispose:e._selectors.unshift(t)}}static select(t,n,r){return dG(this,void 0,void 0,function*(){if(t.length===0)return;let i=k.first(e._selectors);if(i)return yield i(t,n,r)})}};mG._selectors=new Mt;function hG(e,t,n,r,i,a){return dG(this,void 0,void 0,function*(){let o=e.get(Vr),s=Oh(t)?t.getModel():t,c=Ou.ordered(s),l=yield mG.select(c,s,r);l&&(i.report(l),yield o.invokeFunction(gG,l,t,n,a))})}function gG(e,t,n,r,i){return dG(this,void 0,void 0,function*(){let a=e.get(Vu),o,s;Oh(n)?(o=n.getModel(),s=new lN(n,5,void 0,i)):(o=n,s=new uN(n,i));let c=[],l=0;for(let e of Gp(r).sort(L.compareRangesUsingStarts))l>0&&L.areIntersectingOrTouching(c[l-1],e)?c[l-1]=L.fromPositions(c[l-1].getStartPosition(),e.getEndPosition()):l=c.push(e);let u=e=>dG(this,void 0,void 0,function*(){return(yield t.provideDocumentRangeFormattingEdits(o,e,o.getFormattingOptions(),s.token))||[]}),d=(e,t)=>{if(!e.length||!t.length)return!1;let n=e.reduce((e,t)=>L.plusRange(e,t.range),e[0].range);if(!t.some(e=>L.intersectRanges(n,e.range)))return!1;for(let n of e)for(let e of t)if(L.intersectRanges(n.range,e.range))return!0;return!1},f=[],p=[];try{for(let e of c){if(s.token.isCancellationRequested)return!0;p.push(yield u(e))}for(let e=0;e<c.length;++e)for(let t=e+1;t<c.length;++t){if(s.token.isCancellationRequested)return!0;if(d(p[e],p[t])){let n=L.plusRange(c[e],c[t]),r=yield u(n);c.splice(t,1),c.splice(e,1),c.push(n),p.splice(t,1),p.splice(e,1),p.push(r),e=0,t=0}}for(let e of p){if(s.token.isCancellationRequested)return!0;let t=yield a.computeMoreMinimalEdits(o.uri,e);t&&f.push(...t)}}finally{s.dispose()}if(f.length===0)return!1;if(Oh(n))lG.execute(n,f,!0),fG(f),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1);else{let[{range:e}]=f,t=new $n(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);o.pushEditOperations([t],f.map(e=>({text:e.text,range:L.lift(e.range),forceMoveMarkers:!0})),e=>{for(let{range:n}of e)if(L.areIntersectingOrTouching(n,t))return[new $n(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn)];return null})}return!0})}function _G(e,t,n,r,i){return dG(this,void 0,void 0,function*(){let a=e.get(Vr),o=Oh(t)?t.getModel():t,s=pG(o),c=yield mG.select(s,o,n);c&&(r.report(c),yield a.invokeFunction(vG,c,t,n,i))})}function vG(e,t,n,r,i){return dG(this,void 0,void 0,function*(){let a=e.get(Vu),o,s;Oh(n)?(o=n.getModel(),s=new lN(n,5,void 0,i)):(o=n,s=new uN(n,i));let c;try{let e=yield t.provideDocumentFormattingEdits(o,o.getFormattingOptions(),s.token);if(c=yield a.computeMoreMinimalEdits(o.uri,e),s.token.isCancellationRequested)return!0}finally{s.dispose()}if(!c||c.length===0)return!1;if(Oh(n))lG.execute(n,c,r!==2),r!==2&&(fG(c),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1));else{let[{range:e}]=c,t=new $n(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);o.pushEditOperations([t],c.map(e=>({text:e.text,range:L.lift(e.range),forceMoveMarkers:!0})),e=>{for(let{range:n}of e)if(L.areIntersectingOrTouching(n,t))return[new $n(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn)];return null})}return!0})}function yG(e,t,n,r,i){return dG(this,void 0,void 0,function*(){let a=Ou.ordered(t);for(let o of a){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(t,n,r,i)).catch(lt);if(Fp(a))return yield e.computeMoreMinimalEdits(t.uri,a)}})}function bG(e,t,n,r){return dG(this,void 0,void 0,function*(){let i=pG(t);for(let a of i){let i=yield Promise.resolve(a.provideDocumentFormattingEdits(t,n,r)).catch(lt);if(Fp(i))return yield e.computeMoreMinimalEdits(t.uri,i)}})}function xG(e,t,n,r,i){let a=ku.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,r,i,Ut.None)).catch(lt).then(n=>e.computeMoreMinimalEdits(t.uri,n))}uc.registerCommand(`_executeFormatRangeProvider`,function(e,...t){return dG(this,void 0,void 0,function*(){let[n,r,i]=t;$s(F.isUri(n)),$s(L.isIRange(r));let a=e.get(Uu),o=e.get(Vu),s=yield a.createModelReference(n);try{return yG(o,s.object.textEditorModel,L.lift(r),i,Ut.None)}finally{s.dispose()}})}),uc.registerCommand(`_executeFormatDocumentProvider`,function(e,...t){return dG(this,void 0,void 0,function*(){let[n,r]=t;$s(F.isUri(n));let i=e.get(Uu),a=e.get(Vu),o=yield i.createModelReference(n);try{return bG(a,o.object.textEditorModel,r,Ut.None)}finally{o.dispose()}})}),uc.registerCommand(`_executeFormatOnTypeProvider`,function(e,...t){return dG(this,void 0,void 0,function*(){let[n,r,i,a]=t;$s(F.isUri(n)),$s(I.isIPosition(r)),$s(typeof i==`string`);let o=e.get(Uu),s=e.get(Vu),c=yield o.createModelReference(n);try{return xG(s,c.object.textEditorModel,I.lift(r),i,a)}finally{c.dispose()}})}),ot.wrappingIndent.defaultValue=0,ot.glyphMargin.defaultValue=!1,ot.autoIndent.defaultValue=3,ot.overviewRulerLanes.defaultValue=2,mG.setFormatterSelector((e,t,n)=>Promise.resolve(e[0]));var SG=zr();SG.editor=pW(),SG.languages=cG();const CG=SG.CancellationTokenSource,wG=SG.Emitter,TG=SG.KeyCode,EG=SG.KeyMod,DG=SG.Position,OG=SG.Range,kG=SG.Selection,AG=SG.SelectionDirection,jG=SG.MarkerSeverity,MG=SG.MarkerTag,NG=SG.Uri,PG=SG.Token,FG=SG.editor,IG=SG.languages;(l.MonacoEnvironment?.globalAPI||typeof define==`function`&&define.amd)&&(self.monaco=SG),self.require!==void 0&&typeof self.require.config==`function`&&self.require.config({ignoreDuplicateModules:[`vscode-languageserver-types`,`vscode-languageserver-types/main`,`vscode-languageserver-textdocument`,`vscode-languageserver-textdocument/main`,`vscode-nls`,`vscode-nls/vscode-nls`,`jsonc-parser`,`jsonc-parser/main`,`vscode-uri`,`vscode-uri/index`,`vs/basic-languages/typescript/typescript`]});export{fL as $,Iu as $a,Np as $i,oC as $n,yo as $o,Cv as $r,Ci as $s,X as $t,TH as A,ou as Aa,k as Ac,u_ as Ai,Tw as An,Rs as Ao,eC as Ar,ha as As,iN as At,kB as B,Tu as Ba,b as Bc,jh as Bi,FC as Bn,_s as Bo,Pb as Br,Va as Bs,$O as Bt,VH as C,Bu as Ca,j as Cc,V_ as Ci,gw as Cn,Js as Co,Y as Cr,Gi as Cs,gN as Ct,BH as D,pu as Da,Et as Dc,s_ as Di,RC as Dn,sc as Do,gT as Dr,da as Ds,dN as Dt,GH as E,ju as Ea,Dt as Ec,i_ as Ei,zC as En,Xs as Eo,hT as Er,fa as Es,lN as Et,EV as F,lu as Fa,ct as Fc,pg as Fi,Ew as Fn,Fs as Fo,Mx as Fr,Ha as Fs,cM as Ft,uz as G,ku as Ga,g as Gc,Dh as Gi,YS as Gn,xo as Go,W as Gr,Li as Gs,AO as Gt,NB as H,mu as Ha,m as Hc,Ah as Hi,KC as Hn,ps as Ho,Xv as Hr,Vi as Hs,zO as Ht,DV as I,Nu as Ia,lt as Ic,Pg as Ii,rw as In,Us as Io,J as Ir,Fa as Is,Fj as It,tR as J,Mu as Ja,ym as Ji,XS as Jn,Xo as Jo,vv as Jr,Ni as Js,SO as Jt,$R as K,du as Ka,f as Kc,Tm as Ki,ZS as Kn,Co as Ko,Wv as Kr,Fi as Ks,jO as Kt,gV as L,gu as La,rt as Lc,H as Li,ow as Ln,Ps as Lo,jx as Lr,Ua as Ls,Yk as Lt,_H as M,Ou as Ma,pt as Mc,$g as Mi,Cw as Mn,Is as Mo,LT as Mr,Ja as Ms,FM as Mt,lH as N,Fu as Na,mt as Nc,qg as Ni,Sw as Nn,Ls as No,rC as Nr,Ki as Ns,pM as Nt,LH as O,xu as Oa,Tt as Oc,o_ as Oi,xw as On,Ws as Oo,nC as Or,_a as Os,uN as Ot,iH as P,_u as Pa,ft as Pc,Hg as Pi,Dw as Pn,Vs as Po,aS as Pr,Da as Ps,fM as Pt,TL as Q,tu as Qa,kp as Qi,iC as Qn,ao as Qo,jv as Qr,Mi as Qs,iO as Qt,_V as R,Su as Ra,De as Rc,ng as Ri,sw as Rn,Ns as Ro,q as Rr,qa as Rs,qk as Rt,QH as S,zu as Sa,Mt as Sc,B_ as Si,_w as Sn,Gs as So,aT as Sr,$a as Ss,vN as St,KH as T,wu as Ta,kt as Tc,a_ as Ti,vw as Tn,Ks as To,vT as Tr,Aa as Ts,cN as Tt,DB as U,Au as Ua,p as Uc,Oh as Ui,GC as Un,ko as Uo,Jv as Ur,Ai as Us,LO as Ut,dV as V,iu as Va,_ as Vc,Ph as Vi,WC as Vn,hs as Vo,Zv as Vr,Wi as Vs,Z as Vt,lz as W,yu as Wa,h as Wc,kh as Wi,qC as Wn,Ao as Wo,Yv as Wr,zi as Ws,NO as Wt,UL as X,au as Xa,Xp as Xi,sC as Xn,so as Xo,bv as Xr,Oi as Xs,CO as Xt,HL as Y,hu as Ya,_m as Yi,cC as Yn,oo as Yo,gv as Yr,Pi as Ys,EO as Yt,CL as Z,cu as Za,Gp as Zi,lC as Zn,vo as Zo,Mv as Zr,Ri as Zs,rO as Zt,_G as _,cd as _a,Ut as _c,G_ as _i,fw as _n,mc as _o,jT as _r,R as _s,GN as _t,jG as a,Fp as aa,Yr as ac,wv as ai,mE as an,$l as ao,fC as ar,Eo as as,wI as at,DU as b,Vu as ba,M as bc,J_ as bi,UC as bn,ec as bo,oT as br,Xi as bs,xN as bt,OG as c,dp as ca,Ur as cc,lv as ci,$S as cn,sl as co,hC as cr,po as cs,TF as ct,PG as d,If as da,I as dc,fv as di,HC as dn,Bc as do,Xw as dr,ma as ds,mF as dt,Op as ea,vi as ec,U as ei,uD as en,Cu as eo,aC as er,Uo as es,QI as et,NG as f,wf as fa,F as fc,Z_ as fi,NC as fn,Nc as fo,xT as fr,La as fs,QP as ft,hG as g,wd as ga,an as gc,X_ as gi,lw as gn,pc as go,bT as gr,$i as gs,KN as gt,fG as h,Jd as ha,Nn as hc,$_ as hi,dw as hn,Oc as ho,yT as hr,Qi as hs,qN as ht,EG as i,Pp as ia,ai as ic,Sv as ii,oE as in,eu as io,uC as ir,To as is,EI as it,gH as j,vu as ja,_t as jc,t_ as ji,ww as jn,Bs as jo,mT as jr,ya as js,KM as jt,EH as k,bu as ka,Ot as kc,c_ as ki,bw as kn,zs as ko,tC as kr,Oa as ks,XM as kt,kG as l,qf as la,$n as lc,pv as li,QS as ln,Yc as lo,mC as lr,co as ls,EF as lt,IG as m,Qd as ma,An as mc,iv as mi,cw as mn,Cc as mo,RT as mr,to as ms,vP as mt,wG as n,Bp as na,$r as nc,Tv as ni,sE as nn,nu as no,vC as nr,jo as ns,pL as nt,MG as o,jp as oa,Gr as oc,mv as oi,hE as on,ql as oo,dC as or,bo as os,GI as ot,FG as p,mf as pa,jn as pc,ev as pi,MC as pn,Ec as po,ST as pr,z as ps,yP as pt,sR as q,fu as qa,t as qc,km as qi,JS as qn,zo as qo,yv as qr,Di as qs,OO as qt,TG as r,Mp as ra,ni as rc,xv as ri,cE as rn,su as ro,_C as rr,Mo as rs,gL as rt,DG as s,wp as sa,Vr as sc,uv as si,_E as sn,Bl as so,pC as sr,_o as ss,CI as st,CG as t,Ap as ta,li as tc,Ev as ti,$E as tn,ru as to,gC as tr,ro as ts,$I as tt,AG as u,kf as ua,L as uc,dv as ui,yw as un,Vc as uo,Zw as ur,V as us,gF as ut,xG as v,Uu as va,Gt as vc,K_ as vi,uw as vn,uc as vo,NT as vr,ea as vs,HN as vt,HH as w,Eu as wa,A as wc,r_ as wi,mw as wn,qs as wo,_T as wr,Pa as ws,hN as wt,TU as x,Lu as xa,Pt as xc,U_ as xi,hw as xn,$s as xo,iT as xr,B as xs,DN as xt,lG as y,Hu as ya,N as yc,q_ as yi,pw as yn,lc as yo,MT as yr,Zi as ys,VN as yt,hV as z,uu as za,ot as zc,Bh as zi,IC as zn,Ds as zo,Ib as zr,ga as zs,xk as zt};